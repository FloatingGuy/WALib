this.__wxLibrary={fileName:"WASubContext.js",envType:"Service",contextType:"App:SubContext",execStart:Date.now(),mayHaveSnapshot:!0};var __WASubContextStartTime__=this.__wxLibrary.execStart;(function(e){var t={updateTime:"2023.3.15 22:01:22",version:"2.30.3",features:{pruneWxConfigByPage:!0,injectGameContextPlugin:!0,lazyCodeLoading2:!0,lazyCodeLoadingForDevTool:!0,injectAppSeparatedPlugin:!0,nativeTrans:!0,gameLive:!0,skyline:!0,supportInvokeWithAppId:!0,wkFeatureVersion:4,delayedServiceCodeCache:!0,gameLiveInvite:!0,globalConsole:!0,expt:["clicfg_appbrand_ios_native_download_new","clicfg_appbrand_native_download","clicfg_appbrand_ios_native_socket_wcwss_new","clicfg_appbrand_ios_native_readfile","clicfg_appbrand_native_readfile","clicfg_appbrand_android_tcp_buffer","clicfg_appbrand_ios_tcp_buffer","clicfg_weapp_weak_net_predict_local","clicfg_wa_ar_iosurface_switch","clicfg_canvas_use_magic_brush","clicfg_appbrand_report_trace_event","clicfg_appbrand_skyline_text_style","clicfg_appbrand_ios_free_httpdns_sdk_cache","clicfg_appbrand_android_free_httpdns_sdk_cache","clicfg_appbrand_ios_inneraudio2webaudio","clicfg_appbrand_android_inneraudio2webaudio","clicfg_appbrand_ios_inneraudio2webaudio_usewebaudio","clicfg_appbrand_android_inneraudio2webaudio_usewebaudio","clicfg_appbrand_ios_allow_multi_context_worker","clicfg_appbrand_ios_allow_worker_binding_message"],snapshotConfig:{"game:main":["WAGame.js"],"game:sub":["WAGameSubContext.js"]},mayHaveSnapshot:["WAServiceMainContext.js","WASubContext.js","WARenderContext.js","WAGame.js","WAGameSubContext.js"]},debugOptions:{}},r=!0,n=e.Function,o=n,i,a,s,l,u,c,d,p,f,h,_={};(()=>{var e={1286:(e,t,r)=>{var n={"./applyDecoratedDescriptor":4725,"./asyncToGenerator":2222,"./initializerDefineProperty":6460,"./initializerWarningHelper":9279};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=1286},4725:(e,t,r)=>{"use strict";function n(e,t,r,n,o){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}r.r(t),r.d(t,{default:()=>n})},2222:(e,t,r)=>{"use strict";function n(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,l,"next",e)}function l(e){n(a,o,i,s,l,"throw",e)}s(void 0)}))}}r.r(t),r.d(t,{default:()=>o})},6460:(e,t,r)=>{"use strict";function n(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}r.r(t),r.d(t,{default:()=>n})},9279:(e,t,r)=>{"use strict";function n(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}r.r(t),r.d(t,{default:()=>n})},1203:(e,t,r)=>{var n=r(3631),o=r(5753),i=r(1985),a=r(9918),s=i.data,l=i.normalize,u="USE_FUNCTION_CONSTRUCTOR",c="AsyncIteratorPrototype",d=function(e,t){if(o(e))for(var r=0;r<e.length;r++)s[l(e[r])]=t};e.exports=function(e){"object"==typeof e&&(d(e.useNative,i.NATIVE),d(e.usePolyfill,i.POLYFILL),d(e.useFeatureDetection,null),n(e,u)&&(a[u]=!!e[u]),n(e,c)&&(a[u]=e[c]))}},3991:(e,t,r)=>{var n=r(9451),o=r(1656),i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not a function")}},4066:(e,t,r)=>{var n=r(152),o=r(1656),i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not a constructor")}},9618:(e,t,r)=>{var n=r(9451),o=String,i=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw i("Can't set "+o(e)+" as a prototype")}},9038:(e,t,r)=>{var n=r(290).has;e.exports=function(e){return n(e),e}},3826:(e,t,r)=>{var n=r(3478),o=r(7572),i=r(1987),a=r(2331),s=r(3330),l=r(6999),u=l("asyncDispose"),c=l("dispose"),d=n([].push),p=function(e,t,r){return o(r||function(e,t){return"async-dispose"==t&&s(e,u)||s(e,c)}(e,t),e)};e.exports=function(e,t,r,n){var o;if(n)o=a(t)?p(void 0,r,n):p(i(t),r,n);else{if(a(t))return;o=p(t,r)}d(e.stack,o)}},6696:(e,t,r)=>{var n=r(6999),o=r(5902),i=r(675).f,a=n("unscopables"),s=Array.prototype;null==s[a]&&i(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},8222:(e,t,r)=>{"use strict";var n=r(132).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},8068:(e,t,r)=>{var n=r(9862),o=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw o("Incorrect invocation")}},1987:(e,t,r)=>{var n=r(879),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not an object")}},6541:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4494:(e,t,r)=>{"use strict";var n,i,a,s=r(6541),l=r(8916),u=r(7020),c=r(9451),d=r(879),p=r(3631),f=r(2045),h=r(1656),_=r(2531),g=r(3981),v=r(9930),m=r(9862),y=r(4880),b=r(4200),w=r(6999),A=r(2821),E=r(220),I=E.enforce,S=E.get,C=u.Int8Array,T=C&&C.prototype,O=u.Uint8ClampedArray,x=O&&O.prototype,N=C&&y(C),R=T&&y(T),P=Object.prototype,D=u.TypeError,L=w("toStringTag"),B=A("TYPED_ARRAY_TAG"),k="TypedArrayConstructor",M=s&&!!b&&"Opera"!==f(u.opera),F=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},$=function(e){var t=y(e);if(d(t)){var r=S(t);return r&&p(r,k)?r[k]:$(t)}},W=function(e){if(!d(e))return!1;var t=f(e);return p(j,t)||p(U,t)};for(n in j)(a=(i=u[n])&&i.prototype)?I(a)[k]=i:M=!1;for(n in U)(a=(i=u[n])&&i.prototype)&&(I(a)[k]=i);if((!M||!c(N)||N===o.prototype)&&(N=function(){throw D("Incorrect invocation")},M))for(n in j)u[n]&&b(u[n],N);if((!M||!R||R===P)&&(R=N.prototype,M))for(n in j)u[n]&&b(u[n].prototype,R);if(M&&y(x)!==R&&b(x,R),l&&!p(R,L))for(n in F=!0,v(R,L,{configurable:!0,get:function(){return d(this)?this[B]:void 0}}),j)u[n]&&_(u[n],B,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:F&&B,aTypedArray:function(e){if(W(e))return e;throw D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!b||m(N,e)))return e;throw D(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(l){if(r)for(var o in j){var i=u[o];if(i&&p(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(e){}}}R[e]&&!r||g(R,e,r?t:M&&T[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(l){if(b){if(r)for(n in j)if((o=u[n])&&p(o,e))try{delete o[e]}catch(e){}if(N[e]&&!r)return;try{return g(N,e,r?t:M&&N[e]||t)}catch(e){}}for(n in j)!(o=u[n])||o[e]&&!r||g(o,e,t)}},getTypedArrayConstructor:$,isView:function(e){if(!d(e))return!1;var t=f(e);return"DataView"===t||p(j,t)||p(U,t)},isTypedArray:W,TypedArray:N,TypedArrayPrototype:R}},5223:(e,t,r)=>{"use strict";var n=r(7020),o=r(3478),i=r(8916),a=r(6541),s=r(9367),l=r(2531),u=r(9930),c=r(1730),d=r(2173),p=r(8068),f=r(1877),h=r(9406),_=r(9307),g=r(5380),v=r(4880),m=r(4200),y=r(8552).f,b=r(4144),w=r(6942),A=r(851),E=r(220),I=s.PROPER,S=s.CONFIGURABLE,C="ArrayBuffer",T="DataView",O="prototype",x="Wrong index",N=E.getterFor(C),R=E.getterFor(T),P=E.set,D=n[C],L=D,B=L&&L[O],k=n[T],M=k&&k[O],F=Object.prototype,j=n.Array,U=n.RangeError,$=o(b),W=o([].reverse),q=g.pack,H=g.unpack,G=function(e){return[255&e]},Q=function(e){return[255&e,e>>8&255]},z=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},K=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Y=function(e){return q(e,23,4)},V=function(e){return q(e,52,8)},J=function(e,t,r){u(e[O],t,{configurable:!0,get:function(){return r(this)[t]}})},X=function(e,t,r,n){var o=_(r),i=R(e);if(o+t>i.byteLength)throw U(x);var a=i.bytes,s=o+i.byteOffset,l=w(a,s,s+t);return n?l:W(l)},Z=function(e,t,r,n,o,i){var a=_(r),s=R(e);if(a+t>s.byteLength)throw U(x);for(var l=s.bytes,u=a+s.byteOffset,c=n(+o),d=0;d<t;d++)l[u+d]=c[i?d:t-d-1]};if(a){var ee=I&&D.name!==C;if(d((function(){D(1)}))&&d((function(){new D(-1)}))&&!d((function(){return new D,new D(1.5),new D(NaN),1!=D.length||ee&&!S})))ee&&S&&l(D,"name",C);else{(L=function(e){return p(this,B),new D(_(e))})[O]=B;for(var te,re=y(D),ne=0;re.length>ne;)(te=re[ne++])in L||l(L,te,D[te]);B.constructor=L}m&&v(M)!==F&&m(M,F);var oe=new k(new L(2)),ie=o(M.setInt8);oe.setInt8(0,2147483648),oe.setInt8(1,2147483649),!oe.getInt8(0)&&oe.getInt8(1)||c(M,{setInt8:function(e,t){ie(this,e,t<<24>>24)},setUint8:function(e,t){ie(this,e,t<<24>>24)}},{unsafe:!0})}else B=(L=function(e){p(this,B);var t=_(e);P(this,{type:C,bytes:$(j(t),0),byteLength:t}),i||(this.byteLength=t,this.detached=!1)})[O],M=(k=function(e,t,r){p(this,M),p(e,B);var n=N(e),o=n.byteLength,a=f(t);if(a<0||a>o)throw U("Wrong offset");if(a+(r=void 0===r?o-a:h(r))>o)throw U("Wrong length");P(this,{type:T,buffer:e,byteLength:r,byteOffset:a,bytes:n.bytes}),i||(this.buffer=e,this.byteLength=r,this.byteOffset=a)})[O],i&&(J(L,"byteLength",N),J(k,"buffer",R),J(k,"byteLength",R),J(k,"byteOffset",R)),c(M,{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e){var t=X(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=X(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return K(X(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return K(X(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return H(X(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return H(X(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Z(this,1,e,G,t)},setUint8:function(e,t){Z(this,1,e,G,t)},setInt16:function(e,t){Z(this,2,e,Q,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Z(this,2,e,Q,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Z(this,4,e,z,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Z(this,4,e,z,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Z(this,4,e,Y,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Z(this,8,e,V,t,arguments.length>2?arguments[2]:void 0)}});A(L,C),A(k,T),e.exports={ArrayBuffer:L,DataView:k}},4144:(e,t,r)=>{"use strict";var n=r(2563),o=r(9935),i=r(5602);e.exports=function(e){for(var t=n(this),r=i(t),a=arguments.length,s=o(a>1?arguments[1]:void 0,r),l=a>2?arguments[2]:void 0,u=void 0===l?r:o(l,r);u>s;)t[s++]=e;return t}},6532:(e,t,r)=>{"use strict";var n=r(7572),o=r(3478),i=r(2563),a=r(152),s=r(2567),l=r(5564),u=r(239),c=r(5453),d=r(3330),p=r(3827),f=r(2653),h=r(6999),_=r(3122),g=r(8725).toArray,v=h("asyncIterator"),m=o(p("Array").values),y=o(m([]).next),b=function(){return new w(this)},w=function(e){this.iterator=m(e)};w.prototype.next=function(){return y(this.iterator)},e.exports=function(e){var t=this,r=arguments.length,o=r>1?arguments[1]:void 0,p=r>2?arguments[2]:void 0;return new(f("Promise"))((function(r){var f=i(e);void 0!==o&&(o=n(o,p));var h=d(f,v),m=h?void 0:c(f)||b,y=a(t)?new t:[],w=h?s(f,h):new _(u(l(f,m)));r(g(w,o,y))}))}},3963:(e,t,r)=>{var n=r(5602);e.exports=function(e,t){for(var r=0,o=n(t),i=new e(o);o>r;)i[r]=t[r++];return i}},5019:(e,t,r)=>{"use strict";var n=r(7572),o=r(3478),i=r(7457),a=r(2563),s=r(5602),l=r(1011),u=l.Map,c=l.get,d=l.has,p=l.set,f=o([].push);e.exports=function(e){for(var t,r,o=a(this),l=i(o),h=n(e,arguments.length>1?arguments[1]:void 0),_=new u,g=s(l),v=0;g>v;v++)t=h(r=l[v],v,o),d(_,t)?f(c(_,t),r):p(_,t,[r]);return _}},4458:(e,t,r)=>{var n=r(7572),o=r(3478),i=r(7457),a=r(2563),s=r(4753),l=r(5602),u=r(5902),c=r(3963),d=Array,p=o([].push);e.exports=function(e,t,r,o){for(var f,h,_,g=a(e),v=i(g),m=n(t,r),y=u(null),b=l(v),w=0;b>w;w++)_=v[w],(h=s(m(_,w,g)))in y?p(y[h],_):y[h]=[_];if(o&&(f=o(g))!==d)for(h in y)y[h]=c(f,y[h]);return y}},312:(e,t,r)=>{var n=r(6449),o=r(9935),i=r(5602),a=function(e){return function(t,r,a){var s,l=n(t),u=i(l),c=o(a,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},3978:(e,t,r)=>{var n=r(7572),o=r(7457),i=r(2563),a=r(5602),s=function(e){var t=1==e;return function(r,s,l){for(var u,c=i(r),d=o(c),p=n(s,l),f=a(d);f-- >0;)if(p(u=d[f],f,c))switch(e){case 0:return u;case 1:return f}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},6433:(e,t,r)=>{var n=r(7572),o=r(3478),i=r(7457),a=r(2563),s=r(5602),l=r(1443),u=o([].push),c=function(e){var t=1==e,r=2==e,o=3==e,c=4==e,d=6==e,p=7==e,f=5==e||d;return function(h,_,g,v){for(var m,y,b=a(h),w=i(b),A=n(_,g),E=s(w),I=0,S=v||l,C=t?S(h,E):r||p?S(h,0):void 0;E>I;I++)if((f||I in w)&&(y=A(m=w[I],I,b),e))if(t)C[I]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return I;case 2:u(C,m)}else switch(e){case 4:return!1;case 7:u(C,m)}return d?-1:o||c?c:C}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},6228:(e,t,r)=>{"use strict";var n=r(2173);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},6010:(e,t,r)=>{"use strict";var n=r(8916),o=r(5753),i=TypeError,a=Object.getOwnPropertyDescriptor,s=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(o(e)&&!a(e,"length").writable)throw i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},6942:(e,t,r)=>{var n=r(9935),o=r(5602),i=r(3097),a=Array,s=Math.max;e.exports=function(e,t,r){for(var l=o(e),u=n(t,l),c=n(void 0===r?l:r,l),d=a(s(c-u,0)),p=0;u<c;u++,p++)i(d,p,e[u]);return d.length=p,d}},5722:(e,t,r)=>{var n=r(3478);e.exports=n([].slice)},2379:(e,t,r)=>{var n=r(6942),o=Math.floor,i=function(e,t){var r=e.length,l=o(r/2);return r<8?a(e,t):s(e,i(n(e,0,l),t),i(n(e,l),t),t)},a=function(e,t){for(var r,n,o=e.length,i=1;i<o;){for(n=i,r=e[i];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==i++&&(e[n]=r)}return e},s=function(e,t,r,n){for(var o=t.length,i=r.length,a=0,s=0;a<o||s<i;)e[a+s]=a<o&&s<i?n(t[a],r[s])<=0?t[a++]:r[s++]:a<o?t[a++]:r[s++];return e};e.exports=i},7564:(e,t,r)=>{var n=r(5753),o=r(152),i=r(879),a=r(6999)("species"),s=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(o(t)&&(t===s||n(t.prototype))||i(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},1443:(e,t,r)=>{var n=r(7564);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},9359:(e,t,r)=>{var n=r(5602);e.exports=function(e,t){for(var r=n(e),o=new t(r),i=0;i<r;i++)o[i]=e[r-i-1];return o}},2395:(e,t,r)=>{var n=r(5602),o=r(1877),i=RangeError;e.exports=function(e,t,r,a){var s=n(e),l=o(r),u=l<0?s+l:l;if(u>=s||u<0)throw i("Incorrect index");for(var c=new t(s),d=0;d<s;d++)c[d]=d===u?a:e[d];return c}},3122:(e,t,r)=>{"use strict";var n=r(8085),o=r(1987),i=r(5902),a=r(3330),s=r(1730),l=r(220),u=r(2653),c=r(5710),d=r(214),p=u("Promise"),f="AsyncFromSyncIterator",h=l.set,_=l.getterFor(f),g=function(e,t,r){var n=e.done;p.resolve(e.value).then((function(e){t(d(e,n))}),r)},v=function(e){e.type=f,h(this,e)};v.prototype=s(i(c),{next:function(){var e=_(this);return new p((function(t,r){var i=o(n(e.next,e.iterator));g(i,t,r)}))},return:function(){var e=_(this).iterator;return new p((function(t,r){var i=a(e,"return");if(void 0===i)return t(d(void 0,!0));var s=o(n(i,e));g(s,t,r)}))}}),e.exports=v},4901:(e,t,r)=>{var n=r(8085),o=r(2653),i=r(3330);e.exports=function(e,t,r,a){try{var s=i(e,"return");if(s)return o("Promise").resolve(n(s,e)).then((function(){t(r)}),(function(e){a(e)}))}catch(e){return a(e)}t(r)}},7881:(e,t,r)=>{"use strict";var n=r(8085),o=r(5062),i=r(1987),a=r(5902),s=r(2531),l=r(1730),u=r(6999),c=r(220),d=r(2653),p=r(3330),f=r(5710),h=r(214),_=r(1038),g=d("Promise"),v=u("toStringTag"),m="AsyncIteratorHelper",y="WrapForValidAsyncIterator",b=c.set,w=function(e){var t=!e,r=c.getterFor(e?y:m),s=function(e){var n=o((function(){return r(e)})),i=n.error,a=n.value;return i||t&&a.done?{exit:!0,value:i?g.reject(a):g.resolve(h(void 0,!0))}:{exit:!1,value:a}};return l(a(f),{next:function(){var e=s(this),t=e.value;if(e.exit)return t;var r=o((function(){return i(t.nextHandler(g))})),n=r.error,a=r.value;return n&&(t.done=!0),n?g.reject(a):g.resolve(a)},return:function(){var t=s(this),r=t.value;if(t.exit)return r;r.done=!0;var a,l,u=r.iterator,c=o((function(){if(r.inner)try{_(r.inner.iterator,"normal")}catch(e){return _(u,"throw",e)}return p(u,"return")}));return a=l=c.value,c.error?g.reject(l):void 0===a?g.resolve(h(void 0,!0)):(l=(c=o((function(){return n(a,u)}))).value,c.error?g.reject(l):e?g.resolve(l):g.resolve(l).then((function(e){return i(e),h(void 0,!0)})))}})},A=w(!0),E=w(!1);s(E,v,"Async Iterator Helper"),e.exports=function(e,t){var r=function(r,n){n?(n.iterator=r.iterator,n.next=r.next):n=r,n.type=t?y:m,n.nextHandler=e,n.counter=0,n.done=!1,b(this,n)};return r.prototype=t?A:E,r}},8725:(e,t,r)=>{"use strict";var n=r(8085),o=r(3991),i=r(1987),a=r(879),s=r(1332),l=r(2653),u=r(239),c=r(4901),d=function(e){var t=0==e,r=1==e,d=2==e,p=3==e;return function(e,f,h){var _=u(e),g=l("Promise"),v=_.iterator,m=_.next,y=0,b=void 0!==f;return!b&&t||o(f),new g((function(e,o){var l=function(e){c(v,o,e,o)},u=function(){try{if(b)try{s(y)}catch(e){l(e)}g.resolve(i(n(m,v))).then((function(n){try{if(i(n).done)t?(h.length=y,e(h)):e(!p&&(d||void 0));else{var s=n.value;try{if(b){var _=f(s,y),m=function(n){if(r)u();else if(d)n?u():c(v,e,!1,o);else if(t)try{h[y++]=n,u()}catch(e){l(e)}else n?c(v,e,p||s,o):u()};a(_)?g.resolve(_).then(m,l):m(_)}else h[y++]=s,u()}catch(e){l(e)}}}catch(e){o(e)}}),o)}catch(e){o(e)}};u()}))}};e.exports={toArray:d(0),forEach:d(1),every:d(2),some:d(3),find:d(4)}},7875:(e,t,r)=>{"use strict";var n=r(8085),o=r(3991),i=r(1987),a=r(879),s=r(239),l=r(7881),u=r(214),c=r(4901),d=l((function(e){var t=this,r=t.iterator,o=t.mapper;return new e((function(s,l){var d=function(e){t.done=!0,l(e)},p=function(e){c(r,d,e,d)};e.resolve(i(n(t.next,r))).then((function(r){try{if(i(r).done)t.done=!0,s(u(void 0,!0));else{var n=r.value;try{var l=o(n,t.counter++),c=function(e){s(u(e,!1))};a(l)?e.resolve(l).then(c,p):c(l)}catch(e){p(e)}}}catch(e){d(e)}}),d)}))}));e.exports=function(e){return new d(s(this),{mapper:o(e)})}},5710:(e,t,r)=>{var n,i,a=r(7020),s=r(9918),l=r(9451),u=r(5902),c=r(4880),d=r(3981),p=r(6999),f=r(2365),h="USE_FUNCTION_CONSTRUCTOR",_=p("asyncIterator"),g=a.AsyncIterator,v=s.AsyncIteratorPrototype;if(v)n=v;else if(l(g))n=g.prototype;else if(s[h]||a[h])try{i=c(c(c(o("return async function*(){}()")()))),c(i)===Object.prototype&&(n=i)}catch(e){}n?f&&(n=u(n)):n={},l(n[_])||d(n,_,(function(){return this})),e.exports=n},1188:(e,t,r)=>{var n=r(8085),o=r(7881);e.exports=o((function(){return n(this.next,this.iterator)}),!0)},6482:(e,t,r)=>{var n=r(1987),o=r(1038);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){o(e,"throw",t)}}},621:(e,t,r)=>{var n=r(6999)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},9218:(e,t,r)=>{var n=r(3478),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},2045:(e,t,r)=>{var n=r(5164),o=r(9451),i=r(9218),a=r(6999)("toStringTag"),s=Object,l="Arguments"==i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=s(e),a))?r:l?i(t):"Object"==(n=i(t))&&o(t.callee)?"Arguments":n}},3449:(e,t,r)=>{var n=r(3631),o=r(3636),i=r(5993),a=r(675);e.exports=function(e,t,r){for(var s=o(t),l=a.f,u=i.f,c=0;c<s.length;c++){var d=s[c];n(e,d)||r&&n(r,d)||l(e,d,u(t,d))}}},5920:(e,t,r)=>{var n=r(2173);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},214:e=>{e.exports=function(e,t){return{value:e,done:t}}},2531:(e,t,r)=>{var n=r(8916),o=r(675),i=r(417);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},417:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},3097:(e,t,r)=>{"use strict";var n=r(4753),o=r(675),i=r(417);e.exports=function(e,t,r){var a=n(t);a in e?o.f(e,a,i(0,r)):e[a]=r}},9930:(e,t,r)=>{var n=r(757),o=r(675);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},3981:(e,t,r)=>{var n=r(9451),o=r(675),i=r(757),a=r(5264);e.exports=function(e,t,r,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:t;if(n(r)&&i(r,u,s),s.global)l?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},1730:(e,t,r)=>{var n=r(3981);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},5264:(e,t,r)=>{var n=r(7020),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},408:(e,t,r)=>{"use strict";var n=r(1656),o=TypeError;e.exports=function(e,t){if(!delete e[t])throw o("Cannot delete property "+n(t)+" of "+n(e))}},8916:(e,t,r)=>{var n=r(2173);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8495:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},1113:(e,t,r)=>{var n=r(7020),o=r(879),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},1332:e=>{var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},7817:(e,t,r)=>{var n=r(315).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},9175:(e,t,r)=>{var n=r(7393),o=r(3209);e.exports=!n&&!o&&"object"==typeof window&&"object"==typeof document},7393:e=>{e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},4825:(e,t,r)=>{var n=r(315);e.exports=/MSIE|Trident/.test(n)},2490:(e,t,r)=>{var n=r(315);e.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},1099:(e,t,r)=>{var n=r(315);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},3209:(e,t,r)=>{var n=r(9218);e.exports="undefined"!=typeof process&&"process"==n(process)},3140:(e,t,r)=>{var n=r(315);e.exports=/web0s(?!.*chrome)/i.test(n)},315:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5805:(e,t,r)=>{var n,o,i=r(7020),a=r(315),s=i.process,l=i.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},1005:(e,t,r)=>{var n=r(315).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},3827:(e,t,r)=>{var n=r(7020);e.exports=function(e){return n[e].prototype}},2101:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6346:(e,t,r)=>{var n=r(3478),o=Error,i=n("".replace),a=String(o("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,l=s.test(a);e.exports=function(e,t){if(l&&"string"==typeof e&&!o.prepareStackTrace)for(;t--;)e=i(e,s,"");return e}},3195:(e,t,r)=>{var n=r(2531),o=r(6346),i=r(7346),a=Error.captureStackTrace;e.exports=function(e,t,r,s){i&&(a?a(e,t):n(e,"stack",o(r,s)))}},7346:(e,t,r)=>{var n=r(2173),o=r(417);e.exports=!n((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},8349:(e,t,r)=>{var n=r(7020),o=r(5993).f,i=r(2531),a=r(3981),s=r(5264),l=r(3449),u=r(1985);e.exports=function(e,t){var r,c,d,p,f,h=e.target,_=e.global,g=e.stat;if(r=_?n:g?n[h]||s(h,{}):(n[h]||{}).prototype)for(c in t){if(p=t[c],d=e.dontCallGetSet?(f=o(r,c))&&f.value:r[c],!u(_?c:h+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(e.sham||d&&d.sham)&&i(p,"sham",!0),a(r,c,p,e)}}},2173:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},6051:(e,t,r)=>{"use strict";r(5245);var n=r(4929),o=r(3981),i=r(13),a=r(2173),s=r(6999),l=r(2531),u=s("species"),c=RegExp.prototype;e.exports=function(e,t,r,d){var p=s(e),f=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),h=f&&!a((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t}));if(!f||!h||r){var _=n(/./[p]),g=t(p,""[e],(function(e,t,r,o,a){var s=n(e),l=t.exec;return l===i||l===c.exec?f&&!a?{done:!0,value:_(t,r,o)}:{done:!0,value:s(r,t,o)}:{done:!1}}));o(String.prototype,e,g[0]),o(c,p,g[1])}d&&l(c[p],"sham",!0)}},1712:(e,t,r)=>{var n=r(89),i=o.prototype,a=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(a):function(){return s.apply(a,arguments)})},7572:(e,t,r)=>{var n=r(4929),o=r(3991),i=r(89),a=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},89:(e,t,r)=>{var n=r(2173);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},8085:(e,t,r)=>{var n=r(89),i=o.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},9367:(e,t,r)=>{var n=r(8916),i=r(3631),a=o.prototype,s=n&&Object.getOwnPropertyDescriptor,l=i(a,"name"),u=l&&"something"===function(){}.name,c=l&&(!n||n&&s(a,"name").configurable);e.exports={EXISTS:l,PROPER:u,CONFIGURABLE:c}},9245:(e,t,r)=>{var n=r(3478),o=r(3991);e.exports=function(e,t,r){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},4929:(e,t,r)=>{var n=r(9218),o=r(3478);e.exports=function(e){if("Function"===n(e))return o(e)}},3478:(e,t,r)=>{var n=r(89),i=o.prototype,a=i.call,s=n&&i.bind.bind(a,a);e.exports=n?s:function(e){return function(){return a.apply(e,arguments)}}},986:(e,t,r)=>{var n=r(8085),o=r(9451),i=r(1987),a=r(239),s=r(5453),l=r(3330),u=r(6999),c=r(3122),d=u("asyncIterator");e.exports=function(e){var t,r=i(e),u=!0,p=l(r,d);return o(p)||(p=s(r),u=!1),o(p)?t=n(p,r):(t=r,u=!0),i(t),a(u?t:new c(a(t)))}},2567:(e,t,r)=>{var n=r(8085),o=r(3122),i=r(1987),a=r(5564),s=r(239),l=r(3330),u=r(6999)("asyncIterator");e.exports=function(e,t){var r=arguments.length<2?l(e,u):t;return r?i(n(r,e)):new o(s(a(e)))}},2653:(e,t,r)=>{var n=r(7020),o=r(9451),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e]):n[e]&&n[e][t]}},239:(e,t,r)=>{var n=r(3991),o=r(1987);e.exports=function(e){return{iterator:e,next:n(o(e).next)}}},3485:(e,t,r)=>{var n=r(8085),o=r(9451),i=r(1987),a=r(239),s=r(5453);e.exports=function(e){var t=i(e),r=s(t);return a(i(o(r)?n(r,t):t))}},5453:(e,t,r)=>{var n=r(2045),o=r(3330),i=r(2331),a=r(1034),s=r(6999)("iterator");e.exports=function(e){if(!i(e))return o(e,s)||o(e,"@@iterator")||a[n(e)]}},5564:(e,t,r)=>{var n=r(8085),o=r(3991),i=r(1987),a=r(1656),s=r(5453),l=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(o(r))return i(n(r,e));throw l(a(e)+" is not iterable")}},3447:(e,t,r)=>{var n=r(3478),o=r(5753),i=r(9451),a=r(9218),s=r(598),l=n([].push);e.exports=function(e){if(i(e))return e;if(o(e)){for(var t=e.length,r=[],n=0;n<t;n++){var u=e[n];"string"==typeof u?l(r,u):"number"!=typeof u&&"Number"!=a(u)&&"String"!=a(u)||l(r,s(u))}var c=r.length,d=!0;return function(e,t){if(d)return d=!1,t;if(o(this))return t;for(var n=0;n<c;n++)if(r[n]===e)return t}}}},3330:(e,t,r)=>{var n=r(3991),o=r(2331);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},1547:(e,t,r)=>{var n=r(3991),o=r(1987),i=r(8085),a=r(1877),s=TypeError,l=Math.max,u=function(e,t,r,n){this.set=e,this.size=t,this.has=r,this.keys=n};u.prototype={getIterator:function(){return o(i(this.keys,this.set))},includes:function(e){return i(this.has,this.set,e)}},e.exports=function(e){o(e);var t=+e.size;if(t!=t)throw s("Invalid size");return new u(e,l(a(t),0),n(e.has),n(e.keys))}},4832:(e,t,r)=>{var n=r(3478),o=r(2563),i=Math.floor,a=n("".charAt),s=n("".replace),l=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,p){var f=r+e.length,h=n.length,_=c;return void 0!==d&&(d=o(d),_=u),s(p,_,(function(o,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,r);case"'":return l(t,f);case"<":u=d[l(s,1,-1)];break;default:var c=+s;if(0===c)return o;if(c>h){var p=i(c/10);return 0===p?o:p<=h?void 0===n[p-1]?a(s,1):n[p-1]+a(s,1):o}u=n[c-1]}return void 0===u?"":u}))}},7020:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||o("return this")()},3631:(e,t,r)=>{var n=r(3478),o=r(2563),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},9358:e=>{e.exports={}},8698:e=>{e.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}},3727:(e,t,r)=>{var n=r(2653);e.exports=n("document","documentElement")},5495:(e,t,r)=>{var n=r(8916),o=r(2173),i=r(1113);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},5380:e=>{var t=Array,r=Math.abs,n=Math.pow,o=Math.floor,i=Math.log,a=Math.LN2;e.exports={pack:function(e,s,l){var u,c,d,p=t(l),f=8*l-s-1,h=(1<<f)-1,_=h>>1,g=23===s?n(2,-24)-n(2,-77):0,v=e<0||0===e&&1/e<0?1:0,m=0;for((e=r(e))!=e||e===1/0?(c=e!=e?1:0,u=h):(u=o(i(e)/a),e*(d=n(2,-u))<1&&(u--,d*=2),(e+=u+_>=1?g/d:g*n(2,1-_))*d>=2&&(u++,d/=2),u+_>=h?(c=0,u=h):u+_>=1?(c=(e*d-1)*n(2,s),u+=_):(c=e*n(2,_-1)*n(2,s),u=0));s>=8;)p[m++]=255&c,c/=256,s-=8;for(u=u<<s|c,f+=s;f>0;)p[m++]=255&u,u/=256,f-=8;return p[--m]|=128*v,p},unpack:function(e,t){var r,o=e.length,i=8*o-t-1,a=(1<<i)-1,s=a>>1,l=i-7,u=o-1,c=e[u--],d=127&c;for(c>>=7;l>0;)d=256*d+e[u--],l-=8;for(r=d&(1<<-l)-1,d>>=-l,l+=t;l>0;)r=256*r+e[u--],l-=8;if(0===d)d=1-s;else{if(d===a)return r?NaN:c?-1/0:1/0;r+=n(2,t),d-=s}return(c?-1:1)*r*n(2,d-t)}}},7457:(e,t,r)=>{var n=r(3478),o=r(2173),i=r(9218),a=Object,s=n("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s(e,""):a(e)}:a},4542:(e,t,r)=>{var n=r(9451),o=r(879),i=r(4200);e.exports=function(e,t,r){var a,s;return i&&n(a=t.constructor)&&a!==r&&o(s=a.prototype)&&s!==r.prototype&&i(e,s),e}},6891:(e,t,r)=>{var n=r(3478),i=r(9451),a=r(9918),s=n(o.toString);i(a.inspectSource)||(a.inspectSource=function(e){return s(e)}),e.exports=a.inspectSource},404:(e,t,r)=>{var n=r(879),o=r(2531);e.exports=function(e,t){n(t)&&"cause"in t&&o(e,"cause",t.cause)}},220:(e,t,r)=>{var n,o,i,a=r(9485),s=r(7020),l=r(879),u=r(2531),c=r(3631),d=r(9918),p=r(8819),f=r(9358),h="Object already initialized",_=s.TypeError,g=s.WeakMap;if(a||d.state){var v=d.state||(d.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw _(h);return t.facade=e,v.set(e,t),t},o=function(e){return v.get(e)||{}},i=function(e){return v.has(e)}}else{var m=p("state");f[m]=!0,n=function(e,t){if(c(e,m))throw _(h);return t.facade=e,u(e,m,t),t},o=function(e){return c(e,m)?e[m]:{}},i=function(e){return c(e,m)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=o(t)).type!==e)throw _("Incompatible receiver, "+e+" required");return r}}}},2956:(e,t,r)=>{var n=r(6999),o=r(1034),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},5753:(e,t,r)=>{var n=r(9218);e.exports=Array.isArray||function(e){return"Array"==n(e)}},3261:(e,t,r)=>{var n=r(2045);e.exports=function(e){var t=n(e);return"BigInt64Array"==t||"BigUint64Array"==t}},9451:(e,t,r)=>{var n=r(8495),o=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===o}:function(e){return"function"==typeof e}},152:(e,t,r)=>{var n=r(3478),o=r(2173),i=r(9451),a=r(2045),s=r(2653),l=r(6891),u=function(){},c=[],d=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=n(p.exec),h=!p.exec(u),_=function(e){if(!i(e))return!1;try{return d(u,c,e),!0}catch(e){return!1}},g=function(e){if(!i(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!f(p,l(e))}catch(e){return!0}};g.sham=!0,e.exports=!d||o((function(){var e;return _(_.call)||!_(Object)||!_((function(){e=!0}))||e}))?g:_},1985:(e,t,r)=>{var n=r(2173),o=r(9451),i=/#|\.prototype\./,a=function(e,t){var r=l[s(e)];return r==c||r!=u&&(o(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},l=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},4351:(e,t,r)=>{var n=r(879),o=Math.floor;e.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&o(e)===e}},2331:e=>{e.exports=function(e){return null==e}},879:(e,t,r)=>{var n=r(9451),o=r(8495),i=o.all;e.exports=o.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===i}:function(e){return"object"==typeof e?null!==e:n(e)}},2365:e=>{e.exports=!1},6049:(e,t,r)=>{var n=r(879),o=r(9218),i=r(6999)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},5825:(e,t,r)=>{var n=r(2653),o=r(9451),i=r(9862),a=r(6014),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,s(e))}},709:(e,t,r)=>{var n=r(8085);e.exports=function(e,t,r){for(var o,i,a=r||e.next;!(o=n(a,e)).done;)if(void 0!==(i=t(o.value)))return i}},5736:(e,t,r)=>{var n=r(7572),o=r(8085),i=r(1987),a=r(1656),s=r(2956),l=r(5602),u=r(9862),c=r(5564),d=r(5453),p=r(1038),f=TypeError,h=function(e,t){this.stopped=e,this.result=t},_=h.prototype;e.exports=function(e,t,r){var g,v,m,y,b,w,A,E=r&&r.that,I=!(!r||!r.AS_ENTRIES),S=!(!r||!r.IS_RECORD),C=!(!r||!r.IS_ITERATOR),T=!(!r||!r.INTERRUPTED),O=n(t,E),x=function(e){return g&&p(g,"normal",e),new h(!0,e)},N=function(e){return I?(i(e),T?O(e[0],e[1],x):O(e[0],e[1])):T?O(e,x):O(e)};if(S)g=e.iterator;else if(C)g=e;else{if(!(v=d(e)))throw f(a(e)+" is not iterable");if(s(v)){for(m=0,y=l(e);y>m;m++)if((b=N(e[m]))&&u(_,b))return b;return new h(!1)}g=c(e,v)}for(w=S?e.next:g.next;!(A=o(w,g)).done;){try{b=N(A.value)}catch(e){p(g,"throw",e)}if("object"==typeof b&&b&&u(_,b))return b}return new h(!1)}},1038:(e,t,r)=>{var n=r(8085),o=r(1987),i=r(3330);e.exports=function(e,t,r){var a,s;o(e);try{if(!(a=i(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw r;if(s)throw a;return o(a),r}},941:(e,t,r)=>{"use strict";var n=r(398).IteratorPrototype,o=r(5902),i=r(417),a=r(851),s=r(1034),l=function(){return this};e.exports=function(e,t,r,u){var c=t+" Iterator";return e.prototype=o(n,{next:i(+!u,r)}),a(e,c,!1,!0),s[c]=l,e}},9955:(e,t,r)=>{"use strict";var n=r(8085),o=r(5902),i=r(2531),a=r(1730),s=r(6999),l=r(220),u=r(3330),c=r(398).IteratorPrototype,d=r(214),p=r(1038),f=s("toStringTag"),h="IteratorHelper",_="WrapForValidIterator",g=l.set,v=function(e){var t=l.getterFor(e?_:h);return a(o(c),{next:function(){var r=t(this);if(e)return r.nextHandler();try{var n=r.done?void 0:r.nextHandler();return d(n,r.done)}catch(e){throw r.done=!0,e}},return:function(){var r=t(this),o=r.iterator;if(r.done=!0,e){var i=u(o,"return");return i?n(i,o):d(void 0,!0)}if(r.inner)try{p(r.inner.iterator,"normal")}catch(e){return p(o,"throw",e)}return p(o,"normal"),d(void 0,!0)}})},m=v(!0),y=v(!1);i(y,f,"Iterator Helper"),e.exports=function(e,t){var r=function(r,n){n?(n.iterator=r.iterator,n.next=r.next):n=r,n.type=t?_:h,n.nextHandler=e,n.counter=0,n.done=!1,g(this,n)};return r.prototype=t?m:y,r}},4639:(e,t,r)=>{"use strict";var n=r(8085),o=r(3991),i=r(1987),a=r(239),s=r(9955),l=r(6482),u=s((function(){var e=this.iterator,t=i(n(this.next,e));if(!(this.done=!!t.done))return l(e,this.mapper,[t.value,this.counter++],!0)}));e.exports=function(e){return new u(a(this),{mapper:o(e)})}},398:(e,t,r)=>{"use strict";var n,o,i,a=r(2173),s=r(9451),l=r(879),u=r(5902),c=r(4880),d=r(3981),p=r(6999),f=r(2365),h=p("iterator"),_=!1;[].keys&&("next"in(i=[].keys())?(o=c(c(i)))!==Object.prototype&&(n=o):_=!0),!l(n)||a((function(){var e={};return n[h].call(e)!==e}))?n={}:f&&(n=u(n)),s(n[h])||d(n,h,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:_}},1034:e=>{e.exports={}},5602:(e,t,r)=>{var n=r(9406);e.exports=function(e){return n(e.length)}},757:(e,t,r)=>{var n=r(3478),i=r(2173),a=r(9451),s=r(3631),l=r(8916),u=r(9367).CONFIGURABLE,c=r(6891),d=r(220),p=d.enforce,f=d.get,h=String,_=Object.defineProperty,g=n("".slice),v=n("".replace),m=n([].join),y=l&&!i((function(){return 8!==_((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,r){"Symbol("===g(h(t),0,7)&&(t="["+v(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||u&&e.name!==t)&&(l?_(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&s(r,"arity")&&e.length!==r.arity&&_(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?l&&_(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=p(e);return s(n,"source")||(n.source=m(b,"string"==typeof t?t:"")),e};o.prototype.toString=w((function(){return a(this)&&f(this).source||c(this)}),"toString")},1011:(e,t,r)=>{var n=r(3478),o=Map.prototype;e.exports={Map:Map,set:n(o.set),get:n(o.get),has:n(o.has),remove:n(o.delete),proto:o}},5295:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},2689:(e,t,r)=>{var n,o,i,a,s,l=r(7020),u=r(7572),c=r(5993).f,d=r(4498).set,p=r(7998),f=r(1099),h=r(2490),_=r(3140),g=r(3209),v=l.MutationObserver||l.WebKitMutationObserver,m=l.document,y=l.process,b=l.Promise,w=c(l,"queueMicrotask"),A=w&&w.value;if(!A){var E=new p,I=function(){var e,t;for(g&&(e=y.domain)&&e.exit();t=E.get();)try{t()}catch(e){throw E.head&&n(),e}e&&e.enter()};f||g||_||!v||!m?!h&&b&&b.resolve?((a=b.resolve(void 0)).constructor=b,s=u(a.then,a),n=function(){s(I)}):g?n=function(){y.nextTick(I)}:(d=u(d,l),n=function(){d(I)}):(o=!0,i=m.createTextNode(""),new v(I).observe(i,{characterData:!0}),n=function(){i.data=o=!o}),A=function(e){E.head||n(),E.add(e)}}e.exports=A},1479:(e,t,r)=>{"use strict";var n=r(3991),o=TypeError,i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw o("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},4836:(e,t,r)=>{var n=r(598);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},2690:e=>{var t=RangeError;e.exports=function(e){if(e==e)return e;throw t("NaN is not allowed")}},5902:(e,t,r)=>{var n,o=r(1987),i=r(800),a=r(2101),s=r(9358),l=r(3727),u=r(1113),c=r(8819),d="prototype",p="script",f=c("IE_PROTO"),h=function(){},_=function(e){return"<"+p+">"+e+"</"+p+">"},g=function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;v="undefined"!=typeof document?document.domain&&n?g(n):(t=u("iframe"),r="java"+p+":",t.style.display="none",l.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(_("document.F=Object")),e.close(),e.F):g(n);for(var o=a.length;o--;)delete v[d][a[o]];return v()};s[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h[d]=o(e),r=new h,h[d]=null,r[f]=e):r=v(),void 0===t?r:i.f(r,t)}},800:(e,t,r)=>{var n=r(8916),o=r(1539),i=r(675),a=r(1987),s=r(6449),l=r(6530);t.f=n&&!o?Object.defineProperties:function(e,t){a(e);for(var r,n=s(t),o=l(t),u=o.length,c=0;u>c;)i.f(e,r=o[c++],n[r]);return e}},675:(e,t,r)=>{var n=r(8916),o=r(5495),i=r(1539),a=r(1987),s=r(4753),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",f="writable";t.f=n?i?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var n=c(e,t);n&&n[f]&&(e[t]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(a(e),t=s(t),a(r),o)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw l("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},5993:(e,t,r)=>{var n=r(8916),o=r(8085),i=r(9739),a=r(417),s=r(6449),l=r(4753),u=r(3631),c=r(5495),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=s(e),t=l(t),c)try{return d(e,t)}catch(e){}if(u(e,t))return a(!o(i.f,e,t),e[t])}},8552:(e,t,r)=>{var n=r(1795),o=r(2101).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},7968:(e,t)=>{t.f=Object.getOwnPropertySymbols},4880:(e,t,r)=>{var n=r(3631),o=r(9451),i=r(2563),a=r(8819),s=r(5920),l=a("IE_PROTO"),u=Object,c=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=i(e);if(n(t,l))return t[l];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof u?c:null}},9862:(e,t,r)=>{var n=r(3478);e.exports=n({}.isPrototypeOf)},1795:(e,t,r)=>{var n=r(3478),o=r(3631),i=r(6449),a=r(312).indexOf,s=r(9358),l=n([].push);e.exports=function(e,t){var r,n=i(e),u=0,c=[];for(r in n)!o(s,r)&&o(n,r)&&l(c,r);for(;t.length>u;)o(n,r=t[u++])&&(~a(c,r)||l(c,r));return c}},6530:(e,t,r)=>{var n=r(1795),o=r(2101);e.exports=Object.keys||function(e){return n(e,o)}},9739:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},4200:(e,t,r)=>{var n=r(9245),o=r(1987),i=r(9618);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return o(r),i(n),t?e(r,n):r.__proto__=n,r}}():void 0)},3211:(e,t,r)=>{var n=r(8085),o=r(9451),i=r(879),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&o(r=e.toString)&&!i(s=n(r,e)))return s;if(o(r=e.valueOf)&&!i(s=n(r,e)))return s;if("string"!==t&&o(r=e.toString)&&!i(s=n(r,e)))return s;throw a("Can't convert object to primitive value")}},3636:(e,t,r)=>{var n=r(2653),o=r(3478),i=r(8552),a=r(7968),s=r(1987),l=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(s(e)),r=a.f;return r?l(t,r(e)):t}},3377:(e,t,r)=>{var n=r(7020);e.exports=n},5062:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},8986:(e,t,r)=>{var n=r(7020),o=r(9116),i=r(9451),a=r(1985),s=r(6891),l=r(6999),u=r(9175),c=r(7393),d=r(2365),p=r(5805),f=o&&o.prototype,h=l("species"),_=!1,g=i(n.PromiseRejectionEvent),v=a("Promise",(function(){var e=s(o),t=e!==String(o);if(!t&&66===p)return!0;if(d&&(!f.catch||!f.finally))return!0;if(!p||p<51||!/native code/.test(e)){var r=new o((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[h]=n,!(_=r.then((function(){}))instanceof n))return!0}return!t&&(u||c)&&!g}));e.exports={CONSTRUCTOR:v,REJECTION_EVENT:g,SUBCLASSING:_}},9116:(e,t,r)=>{var n=r(7020);e.exports=n.Promise},9494:(e,t,r)=>{var n=r(1987),o=r(879),i=r(1479);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},1592:(e,t,r)=>{var n=r(9116),o=r(621),i=r(8986).CONSTRUCTOR;e.exports=i||!o((function(e){n.all(e).then(void 0,(function(){}))}))},8941:(e,t,r)=>{var n=r(675).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},7998:e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},648:(e,t,r)=>{var n=r(8085),o=r(1987),i=r(9451),a=r(9218),s=r(13),l=TypeError;e.exports=function(e,t){var r=e.exec;if(i(r)){var u=n(r,e,t);return null!==u&&o(u),u}if("RegExp"===a(e))return n(s,e,t);throw l("RegExp#exec called on incompatible receiver")}},13:(e,t,r)=>{"use strict";var n,o,i=r(8085),a=r(3478),s=r(598),l=r(4188),u=r(7360),c=r(6431),d=r(5902),p=r(220).get,f=r(9457),h=r(7185),_=c("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,m=a("".charAt),y=a("".indexOf),b=a("".replace),w=a("".slice),A=(o=/b*/g,i(g,n=/a/,"a"),i(g,o,"a"),0!==n.lastIndex||0!==o.lastIndex),E=u.BROKEN_CARET,I=void 0!==/()??/.exec("")[1];(A||I||E||f||h)&&(v=function(e){var t,r,n,o,a,u,c,f=this,h=p(f),S=s(e),C=h.raw;if(C)return C.lastIndex=f.lastIndex,t=i(v,C,S),f.lastIndex=C.lastIndex,t;var T=h.groups,O=E&&f.sticky,x=i(l,f),N=f.source,R=0,P=S;if(O&&(x=b(x,"y",""),-1===y(x,"g")&&(x+="g"),P=w(S,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==m(S,f.lastIndex-1))&&(N="(?: "+N+")",P=" "+P,R++),r=new RegExp("^(?:"+N+")",x)),I&&(r=new RegExp("^"+N+"$(?!\\s)",x)),A&&(n=f.lastIndex),o=i(g,O?r:f,P),O?o?(o.input=w(o.input,R),o[0]=w(o[0],R),o.index=f.lastIndex,f.lastIndex+=o[0].length):f.lastIndex=0:A&&o&&(f.lastIndex=f.global?o.index+o[0].length:n),I&&o&&o.length>1&&i(_,o[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&T)for(o.groups=u=d(null),a=0;a<T.length;a++)u[(c=T[a])[0]]=o[c[1]];return o}),e.exports=v},4188:(e,t,r)=>{"use strict";var n=r(1987);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},6134:(e,t,r)=>{var n=r(8085),o=r(3631),i=r(9862),a=r(4188),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||o(e,"flags")||!i(s,e)?t:n(a,e)}},7360:(e,t,r)=>{var n=r(2173),o=r(7020).RegExp,i=n((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=i||n((function(){return!o("a","y").sticky})),s=i||n((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},9457:(e,t,r)=>{var n=r(2173),o=r(7020).RegExp;e.exports=n((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7185:(e,t,r)=>{var n=r(2173),o=r(7020).RegExp;e.exports=n((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},6976:(e,t,r)=>{var n=r(2331),o=TypeError;e.exports=function(e){if(n(e))throw o("Can't call method on "+e);return e}},7494:(e,t,r)=>{var n=r(290),o=r(3450),i=n.Set,a=n.add;e.exports=function(e){var t=new i;return o(e,(function(e){a(t,e)})),t}},782:(e,t,r)=>{"use strict";var n=r(9038),o=r(290),i=r(7494),a=r(3547),s=r(1547),l=r(3450),u=r(709),c=o.has,d=o.remove;e.exports=function(e){var t=n(this),r=s(e),o=i(t);return a(t)<=r.size?l(t,(function(e){r.includes(e)&&d(o,e)})):u(r.getIterator(),(function(e){c(t,e)&&d(o,e)})),o}},290:(e,t,r)=>{var n=r(3478),o=Set.prototype;e.exports={Set:Set,add:n(o.add),has:n(o.has),remove:n(o.delete),proto:o,$has:o.has,$keys:o.keys}},3241:(e,t,r)=>{"use strict";var n=r(9038),o=r(290),i=r(3547),a=r(1547),s=r(3450),l=r(709),u=o.Set,c=o.add,d=o.has,p=o.$has,f=o.$keys;e.exports=function(e){var t,r=n(this),o=a(e),h=new u;if(((t=o).has!==p||t.keys!==f)&&i(r)>o.size){if(l(o.getIterator(),(function(e){d(r,e)&&c(h,e)})),i(h)<2)return h;var _=h;h=new u,s(r,(function(e){d(_,e)&&c(h,e)}))}else s(r,(function(e){o.includes(e)&&c(h,e)}));return h}},6111:(e,t,r)=>{"use strict";var n=r(9038),o=r(290).has,i=r(3547),a=r(1547),s=r(3450),l=r(709),u=r(1038);e.exports=function(e){var t=n(this),r=a(e);if(i(t)<=r.size)return!1!==s(t,(function(e){if(r.includes(e))return!1}),!0);var c=r.getIterator();return!1!==l(c,(function(e){if(o(t,e))return u(c,"normal",!1)}))}},8780:(e,t,r)=>{"use strict";var n=r(9038),o=r(3547),i=r(3450),a=r(1547);e.exports=function(e){var t=n(this),r=a(e);return!(o(t)>r.size)&&!1!==i(t,(function(e){if(!r.includes(e))return!1}),!0)}},8511:(e,t,r)=>{"use strict";var n=r(9038),o=r(290).has,i=r(3547),a=r(1547),s=r(709),l=r(1038);e.exports=function(e){var t=n(this),r=a(e);if(i(t)<r.size)return!1;var u=r.getIterator();return!1!==s(u,(function(e){if(!o(t,e))return l(u,"normal",!1)}))}},3450:(e,t,r)=>{var n=r(3478),o=r(709),i=r(290),a=i.Set,s=i.proto,l=n(s.forEach),u=n(s.keys),c=u(new a).next;e.exports=function(e,t,r){return r?o(u(e),t,c):l(e,t)}},101:(e,t,r)=>{var n=r(2653);e.exports=function(e){try{return(new(n("Set")))[e]({size:0,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}),!0}catch(e){return!1}}},3547:(e,t,r)=>{var n=r(9245),o=r(290);e.exports=n(o.proto,"size","get")||function(e){return e.size}},5822:(e,t,r)=>{"use strict";var n=r(2653),o=r(9930),i=r(6999),a=r(8916),s=i("species");e.exports=function(e){var t=n(e);a&&t&&!t[s]&&o(t,s,{configurable:!0,get:function(){return this}})}},1614:(e,t,r)=>{"use strict";var n=r(9038),o=r(290),i=r(7494),a=r(1547),s=r(709),l=o.add,u=o.has,c=o.remove;e.exports=function(e){var t=n(this),r=a(e).getIterator(),o=i(t);return s(r,(function(e){u(t,e)?c(o,e):l(o,e)})),o}},851:(e,t,r)=>{var n=r(675).f,o=r(3631),i=r(6999)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!o(e,i)&&n(e,i,{configurable:!0,value:t})}},9479:(e,t,r)=>{"use strict";var n=r(9038),o=r(290).add,i=r(7494),a=r(1547),s=r(709);e.exports=function(e){var t=n(this),r=a(e).getIterator(),l=i(t);return s(r,(function(e){o(l,e)})),l}},8819:(e,t,r)=>{var n=r(6431),o=r(2821),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},9918:(e,t,r)=>{var n=r(7020),o=r(5264),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},6431:(e,t,r)=>{var n=r(2365),o=r(9918);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.29.0",mode:n?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5365:(e,t,r)=>{var n=r(1987),o=r(4066),i=r(2331),a=r(6999)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||i(r=n(s)[a])?t:o(r)}},132:(e,t,r)=>{var n=r(3478),o=r(1877),i=r(598),a=r(6976),s=n("".charAt),l=n("".charCodeAt),u=n("".slice),c=function(e){return function(t,r){var n,c,d=i(a(t)),p=o(r),f=d.length;return p<0||p>=f?e?"":void 0:(n=l(d,p))<55296||n>56319||p+1===f||(c=l(d,p+1))<56320||c>57343?e?s(d,p):n:e?u(d,p,p+2):c-56320+(n-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},5926:(e,t,r)=>{"use strict";var n=r(8170).end,o=r(9755);e.exports=o("trimEnd")?function(){return n(this)}:"".trimEnd},9755:(e,t,r)=>{var n=r(9367).PROPER,o=r(2173),i=r(8524);e.exports=function(e){return o((function(){return!!i[e]()||""!==""[e]()||n&&i[e].name!==e}))}},8170:(e,t,r)=>{var n=r(3478),o=r(6976),i=r(598),a=r(8524),s=n("".replace),l=RegExp("^["+a+"]+"),u=RegExp("(^|[^"+a+"])["+a+"]+$"),c=function(e){return function(t){var r=i(o(t));return 1&e&&(r=s(r,l,"")),2&e&&(r=s(r,u,"$1")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},432:(e,t,r)=>{var n=r(5805),o=r(2173);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},4498:(e,t,r)=>{var n,o,i,a,s=r(7020),l=r(1712),u=r(7572),c=r(9451),d=r(3631),p=r(2173),f=r(3727),h=r(5722),_=r(1113),g=r(2730),v=r(1099),m=r(3209),y=s.setImmediate,b=s.clearImmediate,w=s.process,A=s.Dispatch,E=s.Function,I=s.MessageChannel,S=s.String,C=0,T={},O="onreadystatechange";p((function(){n=s.location}));var x=function(e){if(d(T,e)){var t=T[e];delete T[e],t()}},N=function(e){return function(){x(e)}},R=function(e){x(e.data)},P=function(e){s.postMessage(S(e),n.protocol+"//"+n.host)};y&&b||(y=function(e){g(arguments.length,1);var t=c(e)?e:E(e),r=h(arguments,1);return T[++C]=function(){l(t,void 0,r)},o(C),C},b=function(e){delete T[e]},m?o=function(e){w.nextTick(N(e))}:A&&A.now?o=function(e){A.now(N(e))}:I&&!v?(a=(i=new I).port2,i.port1.onmessage=R,o=u(a.postMessage,a)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!p(P)?(o=P,s.addEventListener("message",R,!1)):o=O in _("script")?function(e){f.appendChild(_("script"))[O]=function(){f.removeChild(this),x(e)}}:function(e){setTimeout(N(e),0)}),e.exports={set:y,clear:b}},9935:(e,t,r)=>{var n=r(1877),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},7787:(e,t,r)=>{var n=r(1651),o=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw o("Can't convert number to bigint");return BigInt(t)}},9307:(e,t,r)=>{var n=r(1877),o=r(9406),i=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw i("Wrong length or index");return r}},6449:(e,t,r)=>{var n=r(7457),o=r(6976);e.exports=function(e){return n(o(e))}},1877:(e,t,r)=>{var n=r(5295);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},9406:(e,t,r)=>{var n=r(1877),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},2563:(e,t,r)=>{var n=r(6976),o=Object;e.exports=function(e){return o(n(e))}},5068:(e,t,r)=>{var n=r(8694),o=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw o("Wrong offset");return r}},8694:(e,t,r)=>{var n=r(1877),o=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw o("The argument can't be less than 0");return t}},1651:(e,t,r)=>{var n=r(8085),o=r(879),i=r(5825),a=r(3330),s=r(3211),l=r(6999),u=TypeError,c=l("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,l=a(e,c);if(l){if(void 0===t&&(t="default"),r=n(l,e,t),!o(r)||i(r))return r;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4753:(e,t,r)=>{var n=r(1651),o=r(5825);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},5164:(e,t,r)=>{var n={};n[r(6999)("toStringTag")]="z",e.exports="[object z]"===String(n)},598:(e,t,r)=>{var n=r(2045),o=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},1656:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},7128:(e,t,r)=>{"use strict";var n=r(8349),o=r(7020),i=r(8085),a=r(8916),s=r(6285),l=r(4494),u=r(5223),c=r(8068),d=r(417),p=r(2531),f=r(4351),h=r(9406),_=r(9307),g=r(5068),v=r(4753),m=r(3631),y=r(2045),b=r(879),w=r(5825),A=r(5902),E=r(9862),I=r(4200),S=r(8552).f,C=r(9146),T=r(6433).forEach,O=r(5822),x=r(9930),N=r(675),R=r(5993),P=r(220),D=r(4542),L=P.get,B=P.set,k=P.enforce,M=N.f,F=R.f,j=Math.round,U=o.RangeError,$=u.ArrayBuffer,W=$.prototype,q=u.DataView,H=l.NATIVE_ARRAY_BUFFER_VIEWS,G=l.TYPED_ARRAY_TAG,Q=l.TypedArray,z=l.TypedArrayPrototype,K=l.aTypedArrayConstructor,Y=l.isTypedArray,V="BYTES_PER_ELEMENT",J="Wrong length",X=function(e,t){K(e);for(var r=0,n=t.length,o=new e(n);n>r;)o[r]=t[r++];return o},Z=function(e,t){x(e,t,{configurable:!0,get:function(){return L(this)[t]}})},ee=function(e){var t;return E(W,e)||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},te=function(e,t){return Y(e)&&!w(t)&&t in e&&f(+t)&&t>=0},re=function(e,t){return t=v(t),te(e,t)?d(2,e[t]):F(e,t)},ne=function(e,t,r){return t=v(t),!(te(e,t)&&b(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?M(e,t,r):(e[t]=r.value,e)};a?(H||(R.f=re,N.f=ne,Z(z,"buffer"),Z(z,"byteOffset"),Z(z,"byteLength"),Z(z,"length")),n({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:re,defineProperty:ne}),e.exports=function(e,t,r){var a=e.match(/\d+/)[0]/8,l=e+(r?"Clamped":"")+"Array",u="get"+e,d="set"+e,f=o[l],v=f,m=v&&v.prototype,y={},w=function(e,t){M(e,t,{get:function(){return function(e,t){var r=L(e);return r.view[u](t*a+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=L(e);r&&(n=(n=j(n))<0?0:n>255?255:255&n),o.view[d](t*a+o.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};H?s&&(v=t((function(e,t,r,n){return c(e,m),D(b(t)?ee(t)?void 0!==n?new f(t,g(r,a),n):void 0!==r?new f(t,g(r,a)):new f(t):Y(t)?X(v,t):i(C,v,t):new f(_(t)),e,v)})),I&&I(v,Q),T(S(f),(function(e){e in v||p(v,e,f[e])})),v.prototype=m):(v=t((function(e,t,r,n){c(e,m);var o,s,l,u=0,d=0;if(b(t)){if(!ee(t))return Y(t)?X(v,t):i(C,v,t);o=t,d=g(r,a);var p=t.byteLength;if(void 0===n){if(p%a)throw U(J);if((s=p-d)<0)throw U(J)}else if((s=h(n)*a)+d>p)throw U(J);l=s/a}else l=_(t),o=new $(s=l*a);for(B(e,{buffer:o,byteOffset:d,byteLength:s,length:l,view:new q(o)});u<l;)w(e,u++)})),I&&I(v,Q),m=v.prototype=A(z)),m.constructor!==v&&p(m,"constructor",v),k(m).TypedArrayConstructor=v,G&&p(m,G,l);var E=v!=f;y[l]=v,n({global:!0,constructor:!0,forced:E,sham:!H},y),V in v||p(v,V,a),V in m||p(m,V,a),O(l)}):e.exports=function(){}},6285:(e,t,r)=>{var n=r(7020),o=r(2173),i=r(621),a=r(4494).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,l=n.Int8Array;e.exports=!a||!o((function(){l(1)}))||!o((function(){new l(-1)}))||!i((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||o((function(){return 1!==new l(new s(2),1,void 0).length}))},9146:(e,t,r)=>{var n=r(7572),o=r(8085),i=r(4066),a=r(2563),s=r(5602),l=r(5564),u=r(5453),c=r(2956),d=r(3261),p=r(4494).aTypedArrayConstructor,f=r(7787);e.exports=function(e){var t,r,h,_,g,v,m,y,b=i(this),w=a(e),A=arguments.length,E=A>1?arguments[1]:void 0,I=void 0!==E,S=u(w);if(S&&!c(S))for(y=(m=l(w,S)).next,w=[];!(v=o(y,m)).done;)w.push(v.value);for(I&&A>2&&(E=n(E,arguments[2])),r=s(w),h=new(p(b))(r),_=d(h),t=0;r>t;t++)g=I?E(w[t],t):w[t],h[t]=_?f(g):+g;return h}},2821:(e,t,r)=>{var n=r(3478),o=0,i=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},6014:(e,t,r)=>{var n=r(432);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},1539:(e,t,r)=>{var n=r(8916),o=r(2173);e.exports=n&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2730:e=>{var t=TypeError;e.exports=function(e,r){if(e<r)throw t("Not enough arguments");return e}},9485:(e,t,r)=>{var n=r(7020),o=r(9451),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},3194:(e,t,r)=>{var n=r(3377),o=r(3631),i=r(1028),a=r(675).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},1028:(e,t,r)=>{var n=r(6999);t.f=n},6999:(e,t,r)=>{var n=r(7020),o=r(6431),i=r(3631),a=r(2821),s=r(432),l=r(6014),u=n.Symbol,c=o("wks"),d=l?u.for||u:u&&u.withoutSetter||a;e.exports=function(e){return i(c,e)||(c[e]=s&&i(u,e)?u[e]:d("Symbol."+e)),c[e]}},8524:e=>{e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},7059:(e,t,r)=>{"use strict";var n=r(2653),o=r(3631),i=r(2531),a=r(9862),s=r(4200),l=r(3449),u=r(8941),c=r(4542),d=r(4836),p=r(404),f=r(3195),h=r(8916),_=r(2365);e.exports=function(e,t,r,g){var v="stackTraceLimit",m=g?2:1,y=e.split("."),b=y[y.length-1],w=n.apply(null,y);if(w){var A=w.prototype;if(!_&&o(A,"cause")&&delete A.cause,!r)return w;var E=n("Error"),I=t((function(e,t){var r=d(g?t:e,void 0),n=g?new w(e):new w;return void 0!==r&&i(n,"message",r),f(n,I,n.stack,2),this&&a(A,this)&&c(n,this,I),arguments.length>m&&p(n,arguments[m]),n}));if(I.prototype=A,"Error"!==b?s?s(I,E):l(I,E,{name:!0}):h&&v in w&&(u(I,w,v),u(I,w,"prepareStackTrace")),l(I,w),!_)try{A.name!==b&&i(A,"name",b),A.constructor=I}catch(e){}return I}}},486:(e,t,r)=>{var n=r(8349),o=r(2653),i=r(1712),a=r(2173),s=r(7059),l="AggregateError",u=o(l),c=!a((function(){return 1!==u([1]).errors[0]}))&&a((function(){return 7!==u([1],l,{cause:7}).cause}));n({global:!0,constructor:!0,arity:2,forced:c},{AggregateError:s(l,(function(e){return function(t,r){return i(e,this,arguments)}}),c,!0)})},4922:(e,t,r)=>{"use strict";var n=r(8349),o=r(9862),i=r(4880),a=r(4200),s=r(3449),l=r(5902),u=r(2531),c=r(417),d=r(404),p=r(3195),f=r(5736),h=r(4836),_=r(6999)("toStringTag"),g=Error,v=[].push,m=function(e,t){var r,n=o(y,this);a?r=a(g(),n?i(this):y):(r=n?this:l(y),u(r,_,"Error")),void 0!==t&&u(r,"message",h(t)),p(r,m,r.stack,1),arguments.length>2&&d(r,arguments[2]);var s=[];return f(e,v,{that:s}),u(r,"errors",s),r};a?a(m,g):s(m,g,{name:!0});var y=m.prototype=l(g.prototype,{constructor:c(1,m),message:c(1,""),name:c(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:m})},6579:(e,t,r)=>{r(4922)},457:(e,t,r)=>{"use strict";var n=r(8349),o=r(4929),i=r(2173),a=r(5223),s=r(1987),l=r(9935),u=r(9406),c=r(5365),d=a.ArrayBuffer,p=a.DataView,f=p.prototype,h=o(d.prototype.slice),_=o(f.getUint8),g=o(f.setUint8);n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new d(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(h&&void 0===t)return h(s(this),e);for(var r=s(this).byteLength,n=l(e,r),o=l(void 0===t?r:t,r),i=new(c(this,d))(u(o-n)),a=new p(this),f=new p(i),v=0;n<o;)g(f,v++,_(a,n++));return i}})},1207:(e,t,r)=>{"use strict";var n=r(8349),o=r(2563),i=r(5602),a=r(1877),s=r(6696);n({target:"Array",proto:!0},{at:function(e){var t=o(this),r=i(t),n=a(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}}),s("at")},8869:(e,t,r)=>{"use strict";var n=r(8349),o=r(3978).findLastIndex,i=r(6696);n({target:"Array",proto:!0},{findLastIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findLastIndex")},2737:(e,t,r)=>{"use strict";var n=r(8349),o=r(3978).findLast,i=r(6696);n({target:"Array",proto:!0},{findLast:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findLast")},8299:(e,t,r)=>{"use strict";var n=r(8349),o=r(2563),i=r(5602),a=r(6010),s=r(1332);n({target:"Array",proto:!0,arity:1,forced:r(2173)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=o(this),r=i(t),n=arguments.length;s(r+n);for(var l=0;l<n;l++)t[r]=arguments[l],r++;return a(t,r),r}})},2843:(e,t,r)=>{"use strict";var n=r(8349),o=r(3478),i=r(5753),a=o([].reverse),s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a(this)}})},6672:(e,t,r)=>{"use strict";var n=r(8349),o=r(9359),i=r(6449),a=r(6696),s=Array;n({target:"Array",proto:!0},{toReversed:function(){return o(i(this),s)}}),a("toReversed")},7237:(e,t,r)=>{"use strict";var n=r(8349),o=r(3478),i=r(3991),a=r(6449),s=r(3963),l=r(3827),u=r(6696),c=Array,d=o(l("Array").sort);n({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&i(e);var t=a(this),r=s(c,t);return d(r,e)}}),u("toSorted")},5988:(e,t,r)=>{"use strict";var n=r(8349),o=r(6696),i=r(1332),a=r(5602),s=r(9935),l=r(6449),u=r(1877),c=Array,d=Math.max,p=Math.min;n({target:"Array",proto:!0},{toSpliced:function(e,t){var r,n,o,f,h=l(this),_=a(h),g=s(e,_),v=arguments.length,m=0;for(0===v?r=n=0:1===v?(r=0,n=_-g):(r=v-2,n=p(d(u(t),0),_-g)),o=i(_+r-n),f=c(o);m<g;m++)f[m]=h[m];for(;m<g+r;m++)f[m]=arguments[m-g+2];for(;m<o;m++)f[m]=h[m+n-r];return f}}),o("toSpliced")},62:(e,t,r)=>{r(6696)("flatMap")},4006:(e,t,r)=>{r(6696)("flat")},3751:(e,t,r)=>{"use strict";var n=r(8349),o=r(2563),i=r(5602),a=r(6010),s=r(408),l=r(1332);n({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=o(this),r=i(t),n=arguments.length;if(n){l(r+n);for(var u=r;u--;){var c=u+n;u in t?t[c]=t[u]:s(t,c)}for(var d=0;d<n;d++)t[d]=arguments[d]}return a(t,r+n)}})},7705:(e,t,r)=>{"use strict";var n=r(8349),o=r(2395),i=r(6449),a=Array;n({target:"Array",proto:!0},{with:function(e,t){return o(i(this),a,e,t)}})},2147:(e,t,r)=>{var n=r(8349),o=r(7020),i=r(1712),a=r(7059),s="WebAssembly",l=o[s],u=7!==Error("e",{cause:7}).cause,c=function(e,t){var r={};r[e]=a(e,t,u),n({global:!0,constructor:!0,arity:1,forced:u},r)},d=function(e,t){if(l&&l[e]){var r={};r[e]=a(s+"."+e,t,u),n({target:s,stat:!0,constructor:!0,arity:1,forced:u},r)}};c("Error",(function(e){return function(t){return i(e,this,arguments)}})),c("EvalError",(function(e){return function(t){return i(e,this,arguments)}})),c("RangeError",(function(e){return function(t){return i(e,this,arguments)}})),c("ReferenceError",(function(e){return function(t){return i(e,this,arguments)}})),c("SyntaxError",(function(e){return function(t){return i(e,this,arguments)}})),c("TypeError",(function(e){return function(t){return i(e,this,arguments)}})),c("URIError",(function(e){return function(t){return i(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return i(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return i(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return i(e,this,arguments)}}))},7312:(e,t,r)=>{var n=r(8349),o=r(7020);n({global:!0,forced:o.globalThis!==o},{globalThis:o})},6590:(e,t,r)=>{var n=r(8349),o=r(2653),i=r(1712),a=r(8085),s=r(3478),l=r(2173),u=r(9451),c=r(5825),d=r(5722),p=r(3447),f=r(432),h=String,_=o("JSON","stringify"),g=s(/./.exec),v=s("".charAt),m=s("".charCodeAt),y=s("".replace),b=s(1..toString),w=/[\uD800-\uDFFF]/g,A=/^[\uD800-\uDBFF]$/,E=/^[\uDC00-\uDFFF]$/,I=!f||l((function(){var e=o("Symbol")();return"[null]"!=_([e])||"{}"!=_({a:e})||"{}"!=_(Object(e))})),S=l((function(){return'"\\udf06\\ud834"'!==_("\udf06\ud834")||'"\\udead"'!==_("\udead")})),C=function(e,t){var r=d(arguments),n=p(t);if(u(n)||void 0!==e&&!c(e))return r[1]=function(e,t){if(u(n)&&(t=a(n,this,h(e),t)),!c(t))return t},i(_,null,r)},T=function(e,t,r){var n=v(r,t-1),o=v(r,t+1);return g(A,e)&&!g(E,o)||g(E,e)&&!g(A,n)?"\\u"+b(m(e,0),16):e};_&&n({target:"JSON",stat:!0,arity:3,forced:I||S},{stringify:function(e,t,r){var n=d(arguments),o=i(I?C:_,null,n);return S&&"string"==typeof o?y(o,w,T):o}})},2590:(e,t,r)=>{var n=r(8349),o=r(5736),i=r(3097);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,r){i(t,e,r)}),{AS_ENTRIES:!0}),t}})},2656:(e,t,r)=>{r(8349)({target:"Object",stat:!0},{hasOwn:r(3631)})},392:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(1479),s=r(5062),l=r(5736);n({target:"Promise",stat:!0,forced:r(1592)},{allSettled:function(e){var t=this,r=a.f(t),n=r.resolve,u=r.reject,c=s((function(){var r=i(t.resolve),a=[],s=0,u=1;l(e,(function(e){var i=s++,l=!1;u++,o(r,t,e).then((function(e){l||(l=!0,a[i]={status:"fulfilled",value:e},--u||n(a))}),(function(e){l||(l=!0,a[i]={status:"rejected",reason:e},--u||n(a))}))})),--u||n(a)}));return c.error&&u(c.value),r.promise}})},6063:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(1479),s=r(5062),l=r(5736);n({target:"Promise",stat:!0,forced:r(1592)},{all:function(e){var t=this,r=a.f(t),n=r.resolve,u=r.reject,c=s((function(){var r=i(t.resolve),a=[],s=0,c=1;l(e,(function(e){var i=s++,l=!1;c++,o(r,t,e).then((function(e){l||(l=!0,a[i]=e,--c||n(a))}),u)})),--c||n(a)}));return c.error&&u(c.value),r.promise}})},1721:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(2653),s=r(1479),l=r(5062),u=r(5736),c=r(1592),d="No one promise resolved";n({target:"Promise",stat:!0,forced:c},{any:function(e){var t=this,r=a("AggregateError"),n=s.f(t),c=n.resolve,p=n.reject,f=l((function(){var n=i(t.resolve),a=[],s=0,l=1,f=!1;u(e,(function(e){var i=s++,u=!1;l++,o(n,t,e).then((function(e){u||f||(f=!0,c(e))}),(function(e){u||f||(u=!0,a[i]=e,--l||p(new r(a,d)))}))})),--l||p(new r(a,d))}));return f.error&&p(f.value),n.promise}})},3555:(e,t,r)=>{"use strict";var n=r(8349),o=r(2365),i=r(8986).CONSTRUCTOR,a=r(9116),s=r(2653),l=r(9451),u=r(3981),c=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(e){return this.then(void 0,e)}}),!o&&l(a)){var d=s("Promise").prototype.catch;c.catch!==d&&u(c,"catch",d,{unsafe:!0})}},9398:(e,t,r)=>{"use strict";var n,o,i,a=r(8349),s=r(2365),l=r(3209),u=r(7020),c=r(8085),d=r(3981),p=r(4200),f=r(851),h=r(5822),_=r(3991),g=r(9451),v=r(879),m=r(8068),y=r(5365),b=r(4498).set,w=r(2689),A=r(8698),E=r(5062),I=r(7998),S=r(220),C=r(9116),T=r(8986),O=r(1479),x="Promise",N=T.CONSTRUCTOR,R=T.REJECTION_EVENT,P=T.SUBCLASSING,D=S.getterFor(x),L=S.set,B=C&&C.prototype,k=C,M=B,F=u.TypeError,j=u.document,U=u.process,$=O.f,W=$,q=!!(j&&j.createEvent&&u.dispatchEvent),H="unhandledrejection",G=function(e){var t;return!(!v(e)||!g(t=e.then))&&t},Q=function(e,t){var r,n,o,i=t.value,a=1==t.state,s=a?e.ok:e.fail,l=e.resolve,u=e.reject,d=e.domain;try{s?(a||(2===t.rejection&&J(t),t.rejection=1),!0===s?r=i:(d&&d.enter(),r=s(i),d&&(d.exit(),o=!0)),r===e.promise?u(F("Promise-chain cycle")):(n=G(r))?c(n,r,l,u):l(r)):u(i)}catch(e){d&&!o&&d.exit(),u(e)}},z=function(e,t){e.notified||(e.notified=!0,w((function(){for(var r,n=e.reactions;r=n.get();)Q(r,e);e.notified=!1,t&&!e.rejection&&Y(e)})))},K=function(e,t,r){var n,o;q?((n=j.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},!R&&(o=u["on"+e])?o(n):e===H&&A("Unhandled promise rejection",r)},Y=function(e){c(b,u,(function(){var t,r=e.facade,n=e.value;if(V(e)&&(t=E((function(){l?U.emit("unhandledRejection",n,r):K(H,r,n)})),e.rejection=l||V(e)?2:1,t.error))throw t.value}))},V=function(e){return 1!==e.rejection&&!e.parent},J=function(e){c(b,u,(function(){var t=e.facade;l?U.emit("rejectionHandled",t):K("rejectionhandled",t,e.value)}))},X=function(e,t,r){return function(n){e(t,n,r)}},Z=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,z(e,!0))},ee=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw F("Promise can't be resolved itself");var n=G(t);n?w((function(){var r={done:!1};try{c(n,t,X(ee,r,e),X(Z,r,e))}catch(t){Z(r,t,e)}})):(e.value=t,e.state=1,z(e,!1))}catch(t){Z({done:!1},t,e)}}};if(N&&(M=(k=function(e){m(this,M),_(e),c(n,this);var t=D(this);try{e(X(ee,t),X(Z,t))}catch(e){Z(t,e)}}).prototype,(n=function(e){L(this,{type:x,done:!1,notified:!1,parent:!1,reactions:new I,rejection:!1,state:0,value:void 0})}).prototype=d(M,"then",(function(e,t){var r=D(this),n=$(y(this,k));return r.parent=!0,n.ok=!g(e)||e,n.fail=g(t)&&t,n.domain=l?U.domain:void 0,0==r.state?r.reactions.add(n):w((function(){Q(n,r)})),n.promise})),o=function(){var e=new n,t=D(e);this.promise=e,this.resolve=X(ee,t),this.reject=X(Z,t)},O.f=$=function(e){return e===k||undefined===e?new o(e):W(e)},!s&&g(C)&&B!==Object.prototype)){i=B.then,P||d(B,"then",(function(e,t){var r=this;return new k((function(e,t){c(i,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete B.constructor}catch(e){}p&&p(B,M)}a({global:!0,constructor:!0,wrap:!0,forced:N},{Promise:k}),f(k,x,!1,!0),h(x)},5085:(e,t,r)=>{"use strict";var n=r(8349),o=r(2365),i=r(9116),a=r(2173),s=r(2653),l=r(9451),u=r(5365),c=r(9494),d=r(3981),p=i&&i.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){p.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,s("Promise")),r=l(e);return this.then(r?function(r){return c(t,e()).then((function(){return r}))}:e,r?function(r){return c(t,e()).then((function(){throw r}))}:e)}}),!o&&l(i)){var f=s("Promise").prototype.finally;p.finally!==f&&d(p,"finally",f,{unsafe:!0})}},217:(e,t,r)=>{r(9398),r(6063),r(3555),r(2367),r(6452),r(185)},2367:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(1479),s=r(5062),l=r(5736);n({target:"Promise",stat:!0,forced:r(1592)},{race:function(e){var t=this,r=a.f(t),n=r.reject,u=s((function(){var a=i(t.resolve);l(e,(function(e){o(a,t,e).then(r.resolve,n)}))}));return u.error&&n(u.value),r.promise}})},6452:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(1479);n({target:"Promise",stat:!0,forced:r(8986).CONSTRUCTOR},{reject:function(e){var t=i.f(this);return o(t.reject,void 0,e),t.promise}})},185:(e,t,r)=>{"use strict";var n=r(8349),o=r(2653),i=r(2365),a=r(9116),s=r(8986).CONSTRUCTOR,l=r(9494),u=o("Promise"),c=i&&!s;n({target:"Promise",stat:!0,forced:i||s},{resolve:function(e){return l(c&&this===u?a:this,e)}})},5053:(e,t,r)=>{var n=r(8349),o=r(7020),i=r(851);n({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},5245:(e,t,r)=>{"use strict";var n=r(8349),o=r(13);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},3071:(e,t,r)=>{var n=r(7020),o=r(8916),i=r(9930),a=r(4188),s=r(2173),l=n.RegExp,u=l.prototype;o&&s((function(){var e=!0;try{l(".","d")}catch(t){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",o=function(e,n){Object.defineProperty(t,e,{get:function(){return r+=n,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in e&&(i.hasIndices="d"),i)o(a,i[a]);return Object.getOwnPropertyDescriptor(u,"flags").get.call(t)!==n||r!==n}))&&i(u,"flags",{configurable:!0,get:a})},7372:(e,t,r)=>{"use strict";var n=r(8349),o=r(3478),i=r(6976),a=r(1877),s=r(598),l=r(2173),u=o("".charAt);n({target:"String",proto:!0,forced:l((function(){return"\ud842"!=="".at(-2)}))},{at:function(e){var t=s(i(this)),r=t.length,n=a(e),o=n>=0?n:r+n;return o<0||o>=r?void 0:u(t,o)}})},8786:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(4929),a=r(941),s=r(214),l=r(6976),u=r(9406),c=r(598),d=r(1987),p=r(2331),f=r(9218),h=r(6049),_=r(6134),g=r(3330),v=r(3981),m=r(2173),y=r(6999),b=r(5365),w=r(8222),A=r(648),E=r(220),I=r(2365),S=y("matchAll"),C="RegExp String",T=C+" Iterator",O=E.set,x=E.getterFor(T),N=RegExp.prototype,R=TypeError,P=i("".indexOf),D=i("".matchAll),L=!!D&&!m((function(){D("a",/./)})),B=a((function(e,t,r,n){O(this,{type:T,regexp:e,string:t,global:r,unicode:n,done:!1})}),C,(function(){var e=x(this);if(e.done)return s(void 0,!0);var t=e.regexp,r=e.string,n=A(t,r);return null===n?(e.done=!0,s(void 0,!0)):e.global?(""===c(n[0])&&(t.lastIndex=w(r,u(t.lastIndex),e.unicode)),s(n,!1)):(e.done=!0,s(n,!1))})),k=function(e){var t,r,n,o=d(this),i=c(e),a=b(o,RegExp),s=c(_(o));return t=new a(a===RegExp?o.source:o,s),r=!!~P(s,"g"),n=!!~P(s,"u"),t.lastIndex=u(o.lastIndex),new B(t,i,r,n)};n({target:"String",proto:!0,forced:L},{matchAll:function(e){var t,r,n,i,a=l(this);if(p(e)){if(L)return D(a,e)}else{if(h(e)&&(t=c(l(_(e))),!~P(t,"g")))throw R("`.matchAll` does not allow non-global regexes");if(L)return D(a,e);if(void 0===(n=g(e,S))&&I&&"RegExp"==f(e)&&(n=k),n)return o(n,e,a)}return r=c(a),i=new RegExp(e,"g"),I?o(k,i,r):i[S](r)}}),I||S in N||v(N,S,k)},7155:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3478),a=r(6976),s=r(9451),l=r(2331),u=r(6049),c=r(598),d=r(3330),p=r(6134),f=r(4832),h=r(6999),_=r(2365),g=h("replace"),v=TypeError,m=i("".indexOf),y=i("".replace),b=i("".slice),w=Math.max,A=function(e,t,r){return r>e.length?-1:""===t?r:m(e,t,r)};n({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,i,h,E,I,S,C,T,O=a(this),x=0,N=0,R="";if(!l(e)){if((r=u(e))&&(n=c(a(p(e))),!~m(n,"g")))throw v("`.replaceAll` does not allow non-global regexes");if(i=d(e,g))return o(i,e,O,t);if(_&&r)return y(c(O),e,t)}for(h=c(O),E=c(e),(I=s(t))||(t=c(t)),S=E.length,C=w(1,S),x=A(h,E,0);-1!==x;)T=I?c(t(E,x,h)):f(E,h,x,[],void 0,t),R+=b(h,N,x)+T,N=x+S,x=A(h,E,x+C);return N<h.length&&(R+=b(h,N)),R}})},1476:(e,t,r)=>{"use strict";var n=r(1712),o=r(8085),i=r(3478),a=r(6051),s=r(2173),l=r(1987),u=r(9451),c=r(2331),d=r(1877),p=r(9406),f=r(598),h=r(6976),_=r(8222),g=r(3330),v=r(4832),m=r(648),y=r(6999)("replace"),b=Math.max,w=Math.min,A=i([].concat),E=i([].push),I=i("".indexOf),S=i("".slice),C="$0"==="a".replace(/./,"$0"),T=!!/./[y]&&""===/./[y]("a","$0");a("replace",(function(e,t,r){var i=T?"$":"$0";return[function(e,r){var n=h(this),i=c(e)?void 0:g(e,y);return i?o(i,e,n,r):o(t,f(n),e,r)},function(e,o){var a=l(this),s=f(e);if("string"==typeof o&&-1===I(o,i)&&-1===I(o,"$<")){var c=r(t,a,s,o);if(c.done)return c.value}var h=u(o);h||(o=f(o));var g=a.global;if(g){var y=a.unicode;a.lastIndex=0}for(var C=[];;){var T=m(a,s);if(null===T)break;if(E(C,T),!g)break;""===f(T[0])&&(a.lastIndex=_(s,p(a.lastIndex),y))}for(var O,x="",N=0,R=0;R<C.length;R++){for(var P=f((T=C[R])[0]),D=b(w(d(T.index),s.length),0),L=[],B=1;B<T.length;B++)E(L,void 0===(O=T[B])?O:String(O));var k=T.groups;if(h){var M=A([P],L,D,s);void 0!==k&&E(M,k);var F=f(n(o,void 0,M))}else F=v(P,s,D,L,k,o);D>=N&&(x+=S(s,N,D)+F,N=D+P.length)}return x+S(s,N)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||T)},6687:(e,t,r)=>{r(3206);var n=r(8349),o=r(5926);n({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==o},{trimEnd:o})},3206:(e,t,r)=>{var n=r(8349),o=r(5926);n({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==o},{trimRight:o})},5091:(e,t,r)=>{"use strict";var n=r(8349),o=r(8170).trim;n({target:"String",proto:!0,forced:r(9755)("trim")},{trim:function(){return o(this)}})},1557:(e,t,r)=>{"use strict";var n=r(8349),o=r(8916),i=r(7020),a=r(3478),s=r(3631),l=r(9451),u=r(9862),c=r(598),d=r(9930),p=r(3449),f=i.Symbol,h=f&&f.prototype;if(o&&l(f)&&(!("description"in h)||void 0!==f().description)){var _={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=u(h,this)?new f(e):void 0===e?f():f(e);return""===e&&(_[t]=!0),t};p(g,f),g.prototype=h,h.constructor=g;var v="Symbol(test)"==String(f("test")),m=a(h.valueOf),y=a(h.toString),b=/^Symbol\((.*)\)[^)]+$/,w=a("".replace),A=a("".slice);d(h,"description",{configurable:!0,get:function(){var e=m(this);if(s(_,e))return"";var t=y(e),r=v?A(t,7,-1):w(t,b,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:g})}},8905:(e,t,r)=>{r(3194)("matchAll")},2050:(e,t,r)=>{"use strict";var n=r(4494),o=r(5602),i=r(1877),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function(e){var t=a(this),r=o(t),n=i(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}))},6764:(e,t,r)=>{"use strict";var n=r(4494),o=r(4144),i=r(7787),a=r(2045),s=r(8085),l=r(3478),u=r(2173),c=n.aTypedArray,d=n.exportTypedArrayMethod,p=l("".slice);d("fill",(function(e){var t=arguments.length;c(this);var r="Big"===p(a(this),0,3)?i(e):+e;return s(o,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),u((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},4131:(e,t,r)=>{"use strict";var n=r(4494),o=r(3978).findLastIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},6788:(e,t,r)=>{"use strict";var n=r(4494),o=r(3978).findLast,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},8448:(e,t,r)=>{r(7128)("Float32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},4161:(e,t,r)=>{r(7128)("Float64",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},120:(e,t,r)=>{"use strict";var n=r(6285);(0,r(4494).exportTypedArrayStaticMethod)("from",r(9146),n)},1327:(e,t,r)=>{r(7128)("Int16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},820:(e,t,r)=>{r(7128)("Int32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},5306:(e,t,r)=>{r(7128)("Int8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},1952:(e,t,r)=>{"use strict";var n=r(4494),o=r(6285),i=n.aTypedArrayConstructor;(0,n.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,r=new(i(this))(t);t>e;)r[e]=arguments[e++];return r}),o)},9461:(e,t,r)=>{"use strict";var n=r(7020),o=r(8085),i=r(4494),a=r(5602),s=r(5068),l=r(2563),u=r(2173),c=n.RangeError,d=n.Int8Array,p=d&&d.prototype,f=p&&p.set,h=i.aTypedArray,_=i.exportTypedArrayMethod,g=!u((function(){var e=new Uint8ClampedArray(2);return o(f,e,{length:1,0:3},1),3!==e[1]})),v=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));_("set",(function(e){h(this);var t=s(arguments.length>1?arguments[1]:void 0,1),r=l(e);if(g)return o(f,this,r,t);var n=this.length,i=a(r),u=0;if(i+t>n)throw c("Wrong length");for(;u<i;)this[t+u]=r[u++]}),!g||v)},1289:(e,t,r)=>{"use strict";var n=r(7020),o=r(4929),i=r(2173),a=r(3991),s=r(2379),l=r(4494),u=r(7817),c=r(4825),d=r(5805),p=r(1005),f=l.aTypedArray,h=l.exportTypedArrayMethod,_=n.Uint16Array,g=_&&o(_.prototype.sort),v=!(!g||i((function(){g(new _(2),null)}))&&i((function(){g(new _(2),{})}))),m=!!g&&!i((function(){if(d)return d<74;if(u)return u<67;if(c)return!0;if(p)return p<602;var e,t,r=new _(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(g(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));h("sort",(function(e){return void 0!==e&&a(e),m?g(this,e):s(f(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!m||v)},8210:(e,t,r)=>{"use strict";var n=r(9359),o=r(4494),i=o.aTypedArray,a=o.exportTypedArrayMethod,s=o.getTypedArrayConstructor;a("toReversed",(function(){return n(i(this),s(this))}))},4984:(e,t,r)=>{"use strict";var n=r(4494),o=r(3478),i=r(3991),a=r(3963),s=n.aTypedArray,l=n.getTypedArrayConstructor,u=n.exportTypedArrayMethod,c=o(n.TypedArrayPrototype.sort);u("toSorted",(function(e){void 0!==e&&i(e);var t=s(this),r=a(l(t),t);return c(r,e)}))},9678:(e,t,r)=>{r(7128)("Uint16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},6376:(e,t,r)=>{r(7128)("Uint32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},8785:(e,t,r)=>{r(7128)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},1280:(e,t,r)=>{r(7128)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},9051:(e,t,r)=>{"use strict";var n=r(2395),o=r(4494),i=r(3261),a=r(1877),s=r(7787),l=o.aTypedArray,u=o.getTypedArrayConstructor,c=o.exportTypedArrayMethod,d=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();c("with",{with:function(e,t){var r=l(this),o=a(e),c=i(r)?s(t):+t;return n(r,u(r),o,c)}}.with,!d)},9669:(e,t,r)=>{r(6579)},6130:(e,t,r)=>{r(1207)},6514:(e,t,r)=>{r(8869)},8447:(e,t,r)=>{r(2737)},8213:(e,t,r)=>{r(8349)({target:"Array",stat:!0},{fromAsync:r(6532)})},4065:(e,t,r)=>{var n=r(8349),o=r(6228),i=r(6696),a=r(5019);n({target:"Array",proto:!0,name:"groupToMap",forced:r(2365)||!o("groupByToMap")},{groupByToMap:a}),i("groupByToMap")},4842:(e,t,r)=>{"use strict";var n=r(8349),o=r(4458),i=r(6228),a=r(6696);n({target:"Array",proto:!0,forced:!i("groupBy")},{groupBy:function(e){var t=arguments.length>1?arguments[1]:void 0;return o(this,e,t)}}),a("groupBy")},7668:(e,t,r)=>{var n=r(8349),o=r(6696),i=r(5019);n({target:"Array",proto:!0,forced:r(2365)},{groupToMap:i}),o("groupToMap")},19:(e,t,r)=>{"use strict";var n=r(8349),o=r(4458),i=r(6696);n({target:"Array",proto:!0},{group:function(e){var t=arguments.length>1?arguments[1]:void 0;return o(this,e,t)}}),i("group")},3553:(e,t,r)=>{r(6672)},1751:(e,t,r)=>{r(7237)},9916:(e,t,r)=>{r(5988)},3673:(e,t,r)=>{r(7705)},7303:(e,t,r)=>{"use strict";var n=r(8349),o=r(8068),i=r(2531),a=r(3631),s=r(6999),l=r(5710),u=r(2365),c=s("toStringTag"),d=function(){o(this,l)};d.prototype=l,a(l,c)||i(l,c,"AsyncIterator"),!u&&a(l,"constructor")&&l.constructor!==Object||i(l,"constructor",d),n({global:!0,constructor:!0,forced:u},{AsyncIterator:d})},96:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(1987),a=r(239),s=r(2690),l=r(8694),u=r(7881),c=r(214),d=u((function(e){var t=this;return new e((function(r,n){var a=function(e){t.done=!0,n(e)},s=function(){try{e.resolve(i(o(t.next,t.iterator))).then((function(e){try{i(e).done?(t.done=!0,r(c(void 0,!0))):t.remaining?(t.remaining--,s()):r(c(e.value,!1))}catch(e){a(e)}}),a)}catch(e){a(e)}};s()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{drop:function(e){return new d(a(this),{remaining:l(s(+e))})}})},4501:(e,t,r)=>{"use strict";var n=r(8349),o=r(8725).every;n({target:"AsyncIterator",proto:!0,real:!0},{every:function(e){return o(this,e)}})},9305:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(1987),s=r(879),l=r(239),u=r(7881),c=r(214),d=r(4901),p=u((function(e){var t=this,r=t.iterator,n=t.predicate;return new e((function(i,l){var u=function(e){t.done=!0,l(e)},p=function(e){d(r,u,e,u)},f=function(){try{e.resolve(a(o(t.next,r))).then((function(r){try{if(a(r).done)t.done=!0,i(c(void 0,!0));else{var o=r.value;try{var l=n(o,t.counter++),d=function(e){e?i(c(o,!1)):f()};s(l)?e.resolve(l).then(d,p):d(l)}catch(e){p(e)}}}catch(e){u(e)}}),u)}catch(e){u(e)}};f()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{filter:function(e){return new p(l(this),{predicate:i(e)})}})},2846:(e,t,r)=>{"use strict";var n=r(8349),o=r(8725).find;n({target:"AsyncIterator",proto:!0,real:!0},{find:function(e){return o(this,e)}})},1796:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(1987),s=r(879),l=r(239),u=r(7881),c=r(214),d=r(986),p=r(4901),f=u((function(e){var t=this,r=t.iterator,n=t.mapper;return new e((function(i,l){var u=function(e){t.done=!0,l(e)},f=function(e){p(r,u,e,u)},h=function(){try{e.resolve(a(o(t.next,r))).then((function(r){try{if(a(r).done)t.done=!0,i(c(void 0,!0));else{var o=r.value;try{var l=n(o,t.counter++),p=function(e){try{t.inner=d(e),_()}catch(e){f(e)}};s(l)?e.resolve(l).then(p,f):p(l)}catch(e){f(e)}}}catch(e){u(e)}}),u)}catch(e){u(e)}},_=function(){var r=t.inner;if(r)try{e.resolve(a(o(r.next,r.iterator))).then((function(e){try{a(e).done?(t.inner=null,h()):i(c(e.value,!1))}catch(e){f(e)}}),f)}catch(e){f(e)}else h()};_()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{flatMap:function(e){return new f(l(this),{mapper:i(e),inner:null})}})},6593:(e,t,r)=>{"use strict";var n=r(8349),o=r(8725).forEach;n({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(e){return o(this,e)}})},8920:(e,t,r)=>{var n=r(8349),o=r(2563),i=r(9862),a=r(986),s=r(5710),l=r(1188);n({target:"AsyncIterator",stat:!0},{from:function(e){var t=a("string"==typeof e?o(e):e);return i(s,t.iterator)?t.iterator:new l(t)}})},8042:(e,t,r)=>{r(8349)({target:"AsyncIterator",proto:!0,real:!0},{map:r(7875)})},6122:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(1987),s=r(879),l=r(2653),u=r(239),c=r(4901),d=l("Promise"),p=TypeError;n({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(e){var t=u(this),r=t.iterator,n=t.next,l=arguments.length<2,f=l?void 0:arguments[1],h=0;return i(e),new d((function(t,i){var u=function(e){c(r,i,e,i)},_=function(){try{d.resolve(a(o(n,r))).then((function(r){try{if(a(r).done)l?i(p("Reduce of empty iterator with no initial value")):t(f);else{var n=r.value;if(l)l=!1,f=n,_();else try{var o=e(f,n,h),c=function(e){f=e,_()};s(o)?d.resolve(o).then(c,u):c(o)}catch(e){u(e)}}h++}catch(e){i(e)}}),i)}catch(e){i(e)}};_()}))}})},9822:(e,t,r)=>{"use strict";var n=r(8349),o=r(8725).some;n({target:"AsyncIterator",proto:!0,real:!0},{some:function(e){return o(this,e)}})},3255:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(1987),a=r(239),s=r(2690),l=r(8694),u=r(7881),c=r(214),d=u((function(e){var t,r=this,n=r.iterator;if(!r.remaining--){var a=c(void 0,!0);return r.done=!0,void 0!==(t=n.return)?e.resolve(o(t,n,void 0)).then((function(){return a})):a}return e.resolve(o(r.next,n)).then((function(e){return i(e).done?(r.done=!0,c(void 0,!0)):c(e.value,!1)})).then(null,(function(e){throw r.done=!0,e}))}));n({target:"AsyncIterator",proto:!0,real:!0},{take:function(e){return new d(a(this),{remaining:l(s(+e))})}})},9053:(e,t,r)=>{"use strict";var n=r(8349),o=r(8725).toArray;n({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return o(this,void 0,[])}})},4949:(e,t,r)=>{"use strict";var n=r(8349),o=r(8916),i=r(2653),a=r(3991),s=r(8068),l=r(3981),u=r(1730),c=r(9930),d=r(6999),p=r(220),f=r(3826),h=i("SuppressedError"),_=ReferenceError,g=d("dispose"),v=d("toStringTag"),m="DisposableStack",y=p.set,b=p.getterFor(m),w="sync-dispose",A="disposed",E=m+" already disposed",I=function(){y(s(this,S),{type:m,state:"pending",stack:[]}),o||(this.disposed=!1)},S=I.prototype;u(S,{dispose:function(){var e=b(this);if(e.state!=A){e.state=A,o||(this.disposed=!0);for(var t,r=e.stack,n=r.length,i=!1;n;){var a=r[--n];r[n]=null;try{a()}catch(e){i?t=new h(e,t):(i=!0,t=e)}}if(e.stack=null,i)throw t}},use:function(e){var t=b(this);if(t.state==A)throw _(E);return f(t,e,w),e},adopt:function(e,t){var r=b(this);if(r.state==A)throw _(E);return a(t),f(r,void 0,w,(function(){t(e)})),e},defer:function(e){var t=b(this);if(t.state==A)throw _(E);a(e),f(t,void 0,w,e)},move:function(){var e=b(this);if(e.state==A)throw _(E);var t=new I;return b(t).stack=e.stack,e.stack=[],t}}),o&&c(S,"disposed",{configurable:!0,get:function(){return b(this).state==A}}),l(S,g,S.dispose,{name:"dispose"}),l(S,v,m,{nonWritable:!0}),n({global:!0,constructor:!0},{DisposableStack:I})},9549:(e,t,r)=>{r(7312)},7799:(e,t,r)=>{"use strict";var n=r(8349),o=r(7020),i=r(8068),a=r(9451),s=r(2531),l=r(2173),u=r(3631),c=r(6999),d=r(398).IteratorPrototype,p=r(2365),f=c("toStringTag"),h=o.Iterator,_=p||!a(h)||h.prototype!==d||!l((function(){h({})})),g=function(){i(this,d)};u(d,f)||s(d,f,"Iterator"),!_&&u(d,"constructor")&&d.constructor!==Object||s(d,"constructor",g),g.prototype=d,n({global:!0,constructor:!0,forced:_},{Iterator:g})},6417:(e,t,r)=>{"use strict";var n=r(8085),o=r(3981),i=r(3330),a=r(3631),s=r(6999),l=r(398).IteratorPrototype,u=s("dispose");a(l,u)||o(l,u,(function(){var e=i(this,"return");e&&n(e,this)}))},4335:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(1987),a=r(239),s=r(2690),l=r(8694),u=r(9955)((function(){for(var e,t=this.iterator,r=this.next;this.remaining;)if(this.remaining--,e=i(o(r,t)),this.done=!!e.done)return;if(e=i(o(r,t)),!(this.done=!!e.done))return e.value}));n({target:"Iterator",proto:!0,real:!0},{drop:function(e){return new u(a(this),{remaining:l(s(+e))})}})},2230:(e,t,r)=>{"use strict";var n=r(8349),o=r(5736),i=r(3991),a=r(239);n({target:"Iterator",proto:!0,real:!0},{every:function(e){var t=a(this),r=0;return i(e),!o(t,(function(t,n){if(!e(t,r++))return n()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},8960:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(1987),s=r(239),l=r(9955),u=r(6482),c=l((function(){for(var e,t,r=this.iterator,n=this.predicate,i=this.next;;){if(e=a(o(i,r)),this.done=!!e.done)return;if(t=e.value,u(r,n,[t,this.counter++],!0))return t}}));n({target:"Iterator",proto:!0,real:!0},{filter:function(e){return new c(s(this),{predicate:i(e)})}})},4104:(e,t,r)=>{"use strict";var n=r(8349),o=r(5736),i=r(3991),a=r(239);n({target:"Iterator",proto:!0,real:!0},{find:function(e){var t=a(this),r=0;return i(e),o(t,(function(t,n){if(e(t,r++))return n(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},192:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3991),a=r(1987),s=r(239),l=r(3485),u=r(9955),c=r(1038),d=u((function(){for(var e,t,r=this.iterator,n=this.mapper;;){if(t=this.inner)try{if(!(e=a(o(t.next,t.iterator))).done)return e.value;this.inner=null}catch(e){c(r,"throw",e)}if(e=a(o(this.next,r)),this.done=!!e.done)return;try{this.inner=l(n(e.value,this.counter++))}catch(e){c(r,"throw",e)}}}));n({target:"Iterator",proto:!0,real:!0},{flatMap:function(e){return new d(s(this),{mapper:i(e),inner:null})}})},6529:(e,t,r)=>{"use strict";var n=r(8349),o=r(5736),i=r(3991),a=r(239);n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){var t=a(this),r=0;i(e),o(t,(function(t){e(t,r++)}),{IS_RECORD:!0})}})},6262:(e,t,r)=>{var n=r(8349),o=r(8085),i=r(2563),a=r(9862),s=r(398).IteratorPrototype,l=r(9955),u=r(3485),c=l((function(){return o(this.next,this.iterator)}),!0);n({target:"Iterator",stat:!0},{from:function(e){var t=u("string"==typeof e?i(e):e);return a(s,t.iterator)?t.iterator:new c(t)}})},3909:(e,t,r)=>{r(8349)({target:"Iterator",proto:!0,real:!0},{map:r(4639)})},8529:(e,t,r)=>{"use strict";var n=r(8349),o=r(5736),i=r(3991),a=r(239),s=TypeError;n({target:"Iterator",proto:!0,real:!0},{reduce:function(e){var t=a(this);i(e);var r=arguments.length<2,n=r?void 0:arguments[1],l=0;if(o(t,(function(t){r?(r=!1,n=t):n=e(n,t,l),l++}),{IS_RECORD:!0}),r)throw s("Reduce of empty iterator with no initial value");return n}})},1088:(e,t,r)=>{"use strict";var n=r(8349),o=r(5736),i=r(3991),a=r(239);n({target:"Iterator",proto:!0,real:!0},{some:function(e){var t=a(this),r=0;return i(e),o(t,(function(t,n){if(e(t,r++))return n()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},508:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(1987),a=r(239),s=r(2690),l=r(8694),u=r(9955),c=r(1038),d=u((function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,c(e,"normal",void 0);var t=i(o(this.next,e));return(this.done=!!t.done)?void 0:t.value}));n({target:"Iterator",proto:!0,real:!0},{take:function(e){return new d(a(this),{remaining:l(s(+e))})}})},5667:(e,t,r)=>{"use strict";var n=r(8349),o=r(5736),i=r(239),a=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return o(i(this),a,{that:e,IS_RECORD:!0}),e}})},9349:(e,t,r)=>{"use strict";var n=r(8349),o=r(3122),i=r(1188),a=r(239);n({target:"Iterator",proto:!0,real:!0},{toAsync:function(){return new i(a(new o(a(this))))}})},490:(e,t,r)=>{r(2656)},2040:(e,t,r)=>{r(392)},553:(e,t,r)=>{r(1721)},1842:(e,t,r)=>{var n=r(8349),o=r(782);n({target:"Set",proto:!0,real:!0,forced:!r(101)("difference")},{difference:o})},3299:(e,t,r)=>{var n=r(8349),o=r(3241);n({target:"Set",proto:!0,real:!0,forced:!r(101)("intersection")},{intersection:o})},4282:(e,t,r)=>{var n=r(8349),o=r(6111);n({target:"Set",proto:!0,real:!0,forced:!r(101)("isDisjointFrom")},{isDisjointFrom:o})},1268:(e,t,r)=>{var n=r(8349),o=r(8780);n({target:"Set",proto:!0,real:!0,forced:!r(101)("isSubsetOf")},{isSubsetOf:o})},8709:(e,t,r)=>{var n=r(8349),o=r(8511);n({target:"Set",proto:!0,real:!0,forced:!r(101)("isSupersetOf")},{isSupersetOf:o})},9843:(e,t,r)=>{var n=r(8349),o=r(1614);n({target:"Set",proto:!0,real:!0,forced:!r(101)("symmetricDifference")},{symmetricDifference:o})},2265:(e,t,r)=>{var n=r(8349),o=r(9479);n({target:"Set",proto:!0,real:!0,forced:!r(101)("union")},{union:o})},9838:(e,t,r)=>{"use strict";var n=r(8349),o=r(3478),i=r(6976),a=r(598),s=o("".charCodeAt);n({target:"String",proto:!0},{isWellFormed:function(){for(var e=a(i(this)),t=e.length,r=0;r<t;r++){var n=s(e,r);if(55296==(63488&n)&&(n>=56320||++r>=t||56320!=(64512&s(e,r))))return!1}return!0}})},662:(e,t,r)=>{r(8786)},6103:(e,t,r)=>{r(7155)},7005:(e,t,r)=>{"use strict";var n=r(8349),o=r(8085),i=r(3478),a=r(6976),s=r(598),l=r(2173),u=Array,c=i("".charAt),d=i("".charCodeAt),p=i([].join),f="".toWellFormed,h=f&&l((function(){return"1"!==o(f,1)}));n({target:"String",proto:!0,forced:h},{toWellFormed:function(){var e=s(a(this));if(h)return o(f,e);for(var t=e.length,r=u(t),n=0;n<t;n++){var i=d(e,n);55296!=(63488&i)?r[n]=c(e,n):i>=56320||n+1>=t||56320!=(64512&d(e,n+1))?r[n]="":(r[n]=c(e,n),r[++n]=c(e,n))}return p(r,"")}})},1738:(e,t,r)=>{"use strict";var n=r(8349),o=r(9862),i=r(4880),a=r(4200),s=r(3449),l=r(5902),u=r(2531),c=r(417),d=r(3195),p=r(4836),f=r(6999)("toStringTag"),h=Error,_=function(e,t,r){var n,s=o(g,this);return a?n=a(h(),s?i(this):g):(n=s?this:l(g),u(n,f,"Error")),void 0!==r&&u(n,"message",p(r)),d(n,_,n.stack,1),u(n,"error",e),u(n,"suppressed",t),n};a?a(_,h):s(_,h,{name:!0});var g=_.prototype=l(h.prototype,{constructor:c(1,_),message:c(1,""),name:c(1,"SuppressedError")});n({global:!0,constructor:!0,arity:3},{SuppressedError:_})},7709:(e,t,r)=>{r(3194)("dispose")},7677:(e,t,r)=>{r(2050)},6123:(e,t,r)=>{r(4131)},6815:(e,t,r)=>{r(6788)},3276:(e,t,r)=>{r(8210)},2386:(e,t,r)=>{r(4984)},4488:(e,t,r)=>{"use strict";var n=r(4494),o=r(5602),i=r(3261),a=r(9935),s=r(7787),l=r(1877),u=r(2173),c=n.aTypedArray,d=n.getTypedArrayConstructor,p=n.exportTypedArrayMethod,f=Math.max,h=Math.min;p("toSpliced",(function(e,t){var r,n,u,p,_,g,v,m=c(this),y=d(m),b=o(m),w=a(e,b),A=arguments.length,E=0;if(0===A)r=n=0;else if(1===A)r=0,n=b-w;else if(n=h(f(l(t),0),b-w),r=A-2){p=new y(r),u=i(p);for(var I=2;I<A;I++)_=arguments[I],p[I-2]=u?s(_):+_}for(v=new y(g=b+r-n);E<w;E++)v[E]=m[E];for(;E<w+r;E++)v[E]=p[E-w];for(;E<g;E++)v[E]=m[E+n-r];return v}),!!u((function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return 2!==t[0]||3!==t[1]})))},2010:(e,t,r)=>{r(9051)},4348:(e,t,r)=>{var n=r(1286);n.keys().forEach((e=>{_[e.substr(2)]=n(e)}))},4476:(e,t,r)=>{"use strict";r.r(t);r(1557),r(8905),r(2147),r(6579),r(486),r(1207),r(2737),r(8869),r(8299),r(2843),r(4006),r(62),r(3751),r(457),r(7312),r(6590),r(2590),r(2656),r(217),r(392),r(1721),r(5085),r(5053),r(3071),r(7372),r(8786),r(1476),r(7155),r(5091),r(6687),r(8448),r(4161),r(5306),r(1327),r(820),r(8785),r(1280),r(9678),r(6376),r(2050),r(6764),r(6788),r(4131),r(120),r(1952),r(9461),r(1289),r(9669),r(6130),r(8447),r(6514),r(9549),r(490),r(2040),r(553),r(662),r(6103),r(7677),r(6815),r(6123),r(1738),r(8213),r(19),r(4842),r(4065),r(7668),r(3553),r(1751),r(9916),r(3673),r(7303),r(96),r(4501),r(9305),r(2846),r(1796),r(6593),r(8920),r(8042),r(6122),r(9822),r(3255),r(9053),r(4949),r(7799),r(6417),r(4335),r(2230),r(8960),r(4104),r(192),r(6529),r(6262),r(3909),r(8529),r(1088),r(508),r(5667),r(9349),r(1842),r(3299),r(4282),r(1268),r(8709),r(9843),r(2265),r(9838),r(7005),r(7709),r(3276),r(2386),r(4488),r(2010);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{var t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r.g.__polyfill_injecting=!0;var e=!1,t=!1;if(r.g.__wxConfig&&"string"==typeof r.g.__wxConfig.platform)"ios"===r.g.__wxConfig.platform.toLowerCase()?e=!0:"mac"===r.g.__wxConfig.platform.toLowerCase()&&(t=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){var n=navigator.userAgent.toLowerCase();n.indexOf("iphone")>=0||n.indexOf("ipad")>=0?e=!0:n.indexOf("miniprogramenv/mac")>=0&&(t=!0)}var o=[];(e||t)&&(r.g.Promise=void 0,o.push("Promise")),r(1203)({usePolyfill:o,useNative:["WeakMap"]}),r(4476),r(4348),delete r.g.__polyfill_injecting})()})();var g=!1,v=function(e){e()},m,y;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{e.d(r,{default:()=>rt});var a={};e.r(a),e.d(a,{convertToErrorObj:()=>X,emitFrameworkError:()=>ne,emitUnhandledError:()=>oe,emitUnhandledRejection:()=>Z,onFrameworkError:()=>ae,onUnhandledError:()=>se,onUnhandledRejection:()=>ie});var l=e.g.__wxLibrary,u=e.g.__wxConfig,d=l.envType,p=l.contextType,f="Service"===d,_="WebView"===d,g="Worker"===d,v=_||f&&0===p.indexOf("App:"),y=f&&0===p.indexOf("Game:"),b=!!u.isIsolateContext,w=b&&f&&p.indexOf("MainContext")>=0,A=b&&f&&p.indexOf("SubContext")>=0,E=A&&p.indexOf("Safe")>=0,I=w||A,S="wxlib"===u.workerContentType,C=_||w||E||S,T=function(){var e,t,r=u.platform;if(!r&&"string"==typeof(null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent)){var n=window.navigator.userAgent.toLowerCase();n.indexOf("devtools")>=0?r="devtools":n.indexOf("miniprogramenv/windows")>=0?r="windows":n.indexOf("miniprogramenv/mac")>=0?r="mac":n.indexOf("miniprogramenv/mina")>=0?r="mina":n.indexOf("iphone")>=0||n.indexOf("ipad")>=0?r="ios":n.indexOf("android")>=0&&(r="android")}return(r||"unknown").toLowerCase()}(),O=t,x=void 0===O||"develop"===O.version?"9.9.9":O.version,N=!!l.mayHaveSnapshot,R=(()=>"object"==typeof e.g&&e.g&&e.g.__wkrenderer_h5)();const P={platform:T,SDKVersion:x,isIsolateContext:I,isGame:y,isApp:v,isMainContext:w,isSubContext:A,isSafeEnv:C,isService:f,isWebView:_,isWorker:g,isWidget:!1,typeStr:A?"SubContext":d,fileName:l.fileName,isWXLibWorker:S,workerType:"user",contextName:"",mayHaveSnapShot:N,isWKGame:!!R};var D=()=>{},L="devtools"===P.platform;"undefined"!=typeof performance&&performance.now;function B(e,t=(()=>D)){return e.reduce(((e,r)=>(e[r]=t(r),e)),{})}function k(){var t=m||e.g.__wxConfig;if(t&&"debug"in t&&void 0!==t.debug)return!!t.debug}var M=()=>{},F=["log","info","warn","error","debug"];const j=B(F);var U=["log","info","warn","error","profile","profileSync","traceBegin","traceEnd"],$=(()=>{var e=B(U);return e})();const W=$;var q=Symbol("error"),H=Symbol("slow");class G{constructor(){this.$=Object.create(null),this.$$=Object.create(null)}onInternalEvent(e,t){var r=this.$$[e];return r?r.push(t):this.$$[e]=[t],this}emitPrivate(e,...t){var r=this.$$[e];return!!(r&&r.length>0)&&(r.forEach((e=>{try{e(...t)}catch(e){console.error("EventEmitter error:",e)}})),!0)}onError(e){return this.onInternalEvent(q,e),this}onSlow(e){return this.onInternalEvent(H,e),this}_privEmit(e,t,...r){var n=this.$[e];if(n&&n.length>0){var o,i=!1;for(var a of n){if(0!==a.count)try{var s=Date.now();o=a.cb(...r);var l=Date.now();l-s>G.SLOW_CALLBACK_THRESHOLD&&this.emitPrivate(H,e,s,l,a.cb)}catch(t){if(!this.emitPrivate(q,e,t))throw t}if(a.count>0&&a.count--,0===a.count&&(i=!0),!1===o&&t.cancelable)break}return i&&(this.$[e]=n.filter((e=>0!==e.count))),!0}return!1}emit(e,...t){return this._privEmit(e,{},...t)}emitCancelable(e,...t){return this._privEmit(e,{cancelable:!0},...t)}many(e,t,r,n={}){if(!t)return this;var o={count:r,cb:t},i=this.$[e];return i?n.prepend?i.unshift(o):i.push(o):this.$[e]=[o],this}on(e,t,r){return this.many(e,t,-1,r)}once(e,t,r){return this.many(e,t,1,r)}off(e,t){var r=this.$[e];if(!r)return!1;var n=r.findIndex((e=>e.cb===t));return!(n<0)&&(r.splice(n,1),!0)}}G.SLOW_CALLBACK_THRESHOLD=50;var Q=new G,z="unhandlederror",K="unhandledrejection",Y="frameworkerror",V=new WeakMap;var J=Object.prototype.hasOwnProperty;function X(e){var t;if(e&&"Object"===(null===(t=e.constructor)||void 0===t?void 0:t.name)&&"string"==typeof e.message&&"string"==typeof e.stack){var r=new Error(e.message);return Object.assign(r,e),r}return e}function Z(e,t){e=X(e),Fe.onLoad((()=>{Q.emit(K,{reason:e,promise:t})||console.error("Uncaught (in promise)",e)}))}var ee,te=!1,re=!1;function ne(e,t){if(e instanceof Error&&t&&(e.message=`${t} fail: ${e.message}`),e=X(e),m.isSnapshoting)throw e;Fe.onLoad((()=>{if(te)console.error("[ErrorHandler] recursive framework error detected.",e);else{te=!0;try{Q.emit(Y,e)||oe(e)}catch(e){console.error("Framework",e)}te=!1}}))}function oe(e){if(e=X(e),m.isSnapshoting)throw e;Fe.onLoad((()=>{if(re)console.error("[ErrorHandler] recursive uncaught error detected.",e);else{re=!0;try{Q.emit(z,e)||"windows"===m.platform&&"undefined"!=typeof WORKER_RUNTIME&&WORKER_RUNTIME&&4===m.appType||console.error("Uncaught",e)}catch(e){console.error("Uncaught",e)}re=!1}}))}function ie(e){Q.on(K,e)}function ae(e){Q.on(Y,e)}function se(e){Q.on(z,e)}"object"==typeof(ee=e.g)&&"function"==typeof ee.addEventListener?(ee.addEventListener("unhandledrejection",(e=>{Z(e.reason,e.promise),e.reason&&e.preventDefault()})),ee.addEventListener("error",(e=>{var t,r;oe(e.error||{message:e.message,stack:`${e.message}\nEmpty stack, maybe muted error. (xweb=${(null===(t=ee.navigator)||void 0===t||null===(r=t.userAgent)||void 0===r?void 0:r.toUpperCase().indexOf("XWEB"))>=0})`}),e.error&&e.preventDefault()}))):void 0===ee.onunhandledrejection&&Object.defineProperty(ee,"onunhandledrejection",{value(e={}){var t,r;J.call(e,"type")?(t={type:e.type,reason:e.reason,promise:e.promise},(r=t.promise)&&(V.has(r)||setTimeout((()=>{var e=V.get(r);0===(null==e?void 0:e.type)&&Z(e.reason,e.promise),V.delete(r)}),0),V.set(r,t))):Z(e.reason,e.promise)}});var le,ue=JSON.parse,ce=JSON.stringify;function de(e){return ue(ce(e))}function pe(e){e.platform=P.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),e.sdkVersion=e.SDKVersion=P.SDKVersion,e.isReady=!1,e.onReady=Fe.onStart}function fe(e){var r;pe(e),P.isSubContext||(e.preload=!0===e.preload),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio);var n=null===(r=t.debugOptions)||void 0===r?void 0:r.overwriteExpt;n&&(e.expt=Object.assign(e.expt||{},n))}function he(e){if(fe(e),e.isReady=!0,e.appLaunchInfo=e.appLaunchInfo||{},e.preloadType=e.preloadType||e.appLaunchInfo.preloadType||e.preload,"ios"===e.platform){var t=(i=e.appLaunchInfo.clickTimestampInMs)?i+9782784e5-(new Date).getTimezoneOffset()/60*3600*1e3:0,r=Number.MAX_SAFE_INTEGER,n=e.instanceId;if(n)try{var o=n.split("&").filter((e=>0===e.indexOf("ts=")));o.length>0&&(r=parseInt(o[0].slice(3),10))}catch(e){ne(e,"parseInstanceId")}e.coldLaunchTime=Math.min(t,r)}else e.coldLaunchTime=e.appLaunchInfo.clickTimestamp||0;var i}var _e=!(null===(le=t.features)||void 0===le||!le.pruneWxConfigByPage),ge=Object.defineProperty,ve=["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"];function me(e,t,r,n){ge(e,r,{configurable:!0,enumerable:!0,get(){if(r in t)return t[r];try{var e;j.warn("[__wxConfig usage] developer uses __wxConfig."+r),"function"==typeof(null===(e=i)||void 0===e?void 0:e.reportKeyValue)&&i.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+r,force:!0})}catch(e){ne(e,"report __wxConfig usage")}try{return"function"!=typeof n?n:n()}catch(e){return void ne(e,`read mock wxConfig.${r}`)}},set(e){t[r]=e}})}var ye=P.isSafeEnv,be=Object.create(null),we=P.isService?function(e){return new Proxy(e,{set(e,t,r,n){if("__siblings__"===t)return Reflect.set(e,t,r,n);var o=Reflect.get(e,"__siblings__",n);return Array.isArray(o)?(o.length>1&&j.log(`[WXConfig] write __wxConfig.${t.toString()}, sync to all contexts.`),o.forEach((e=>{Reflect.set(e,t,r)})),!0):Reflect.set(e,t,r,n)}})}(be):be,Ae=e=>{},Ee="wxConfig:updatePage";function Ie(t,r=!1){return Ae(!1),be.currentPhase="onStart",void 0===t||(r?(Object.assign(be,t),Object.defineProperty(be,"__siblings__",{value:t.__siblings__,enumerable:!1,writable:!1,configurable:!1})):(Object.assign(be,ye?t:de(t)),he(be),function(t,r){var n;Array.isArray(null==t||null===(n=t.tabBar)||void 0===n?void 0:n.list)&&t.tabBar.list.forEach((e=>{delete e.iconData,delete e.selectedIconData})),delete t.permission;var o=t.subPackages||t.subpackages;Array.isArray(o)&&o.length>0&&(o.forEach((e=>{delete e.pages})),t.subPackages=t.subpackages=o),"devtools"===t.platform&&(t.__globalComponentsCount=Object.keys(t.usingComponents||{}).length),_e&&(P.isSubContext||(delete t.usingComponents,Object.values(t.page||{}).forEach((e=>{null!=e&&e.window&&delete e.window.usingComponents})),t._preloadRule=t.preloadRule||{},t._page=t.page||{},delete t.preloadRule,delete t.page),t.updatePage=function(e,t){null!=t&&t.window&&delete t.window.usingComponents,r(e,t)},t.updatePreloadRule=function(e,r){t.preloadRule=t.preloadRule||{},t.preloadRule[e]=r}),e.g.__wxConfig.page=e.g.__wxConfig.page||{},t.page=t.page||{}}(be,((e,t)=>{Fe.emit(Ee,{key:e,value:t})})),Object.defineProperty(be,"__siblings__",{value:[],enumerable:!1,writable:!1,configurable:!1})),Array.isArray(be.__siblings__)&&be.__siblings__.push(be),be.onPageUpdate((({key:e,value:t})=>{be.page=be.page||{},be.page[e]=be.page[e+".html"]=t,n&&(n[e+".html"]=de(t))})),ye||(n=function(){var t=e.g.__wxConfig,r={},n={},o=_e?{}:t.page||{};try{me(n,r,"deprecated",!0),ve.forEach((e=>{if(e in t){var i=t[e];switch(e){case"page":me(n,r,e,o);break;case"env":me(n,r,e,(()=>(console.warn("[Deprecation] __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:i.USER_DATA_PATH})));break;case"accountInfo":me(n,r,e,{appId:i.appId,icon:i.icon,nickname:i.nickname});break;case"appLaunchInfo":me(n,r,e,(()=>(console.warn("[Deprecation] __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{})));break;case"wxAppInfo":me(n,r,e,{maxRequestConcurrent:i.maxRequestConcurrent,maxUploadConcurrent:i.maxUploadConcurrent,maxDownloadConcurrent:i.maxDownloadConcurrent,maxWorkerConcurrent:i.maxWorkerConcurrent,maxWebsocketConnect:i.maxWebsocketConnect});break;default:me(n,r,e,i)}}})),e.g.__wxConfig=n}catch(r){ne(r,"mockGloablWxConfig"),e.g.__wxConfig=t}return o}())),we;var n}var Se=new G,Ce=new G,Te={},Oe="WeixinJSBridgeReady",xe="libraryEnd",Ne="load",Re="postLoad",Pe="start",De="postStart";function Le(e,t){if(e in Te)try{t(Te[e])}catch(t){ne(t,"LifeCycle."+e)}else Ce.once(e,t)}function Be(e,t){var r,n;if(e in Te)return!1;Te[e]=t,null===(r=s)||void 0===r||r.info(`[LifeCycle] emit ${e} for ${P.fileName}`);var o=Ce.emit(e,t);return null===(n=s)||void 0===n||n.info(`[LifeCycle] finish ${e} for ${P.fileName}`),o}var ke,Me=e=>{P.mayHaveSnapShot?Le(Ne,e):e()},Fe={EventEmitter:G,on:Se.on.bind(Se),emit:Se.emit.bind(Se),once:Se.once.bind(Se),getIsLoaded:()=>Ne in Te,getIsStarted:()=>Pe in Te,onBridgeReady(e){Le(Oe,e)},setWeixinJSBridge(e){Be(Oe,e)},onLibraryEnd:Le.bind(null,xe),onCreate(e){e()},onLoadInstant:Me,onLoad:Me,_onPostLoad:Le.bind(null,Re),onStart:Le.bind(null,Pe),onPostStart:Le.bind(null,De)};Ce.onError(((e,t)=>{j.error(`[LifeCycle/${P.typeStr}] ${e.toString()} failed: `,t),ne(t,"LifeCycle."+e.toString())})).onSlow(((e,t,r,n)=>{W.warn(`[LifeCycle/${P.typeStr}] slow ${e.toString()} callback (${r-t}ms)\n${n+""}`)})),e.g.__wxLibrary.onEnd=function(){Be(xe),P.mayHaveSnapShot||$e()},ke=e.g.__wxConfig,be.currentPhase="onCreate",void 0===ke||(Ae(!1),Object.assign(be,ye?ke:de(ke)),pe(be),Ae(!0));var je=!1,Ue=!1;function $e(){je||Ue?ne(new Error(`LifeCycle error: undesired onLoad(${je}/${Ue})`)):(je=!0,m=function(e){return be.currentPhase="onLoad",void 0===e||(Ae(!1),Object.assign(be,ye?e:de(e)),be.onPageUpdate=Fe.on.bind(null,Ee),fe(be),Ae(!0)),we}(e.g.__wxConfig),Be(Ne,m),P.isSubContext?m.__readyHandler=e=>{We(e,!0)}:!0===m.preload?Fe.onBridgeReady((t=>{t.on("onWxConfigReady",(()=>{We(e.g.__wxConfig)}))})):Fe.onLibraryEnd((()=>{We(e.g.__wxConfig)})),Be(Re,m))}function We(e,t=!1){if(je&&!Ue){Ue=!0;var r=Date.now();"onReadyStart"in(m=Ie(e,t))||(m.onReadyStart=r),Be(Pe,m),m.onReadyEnd=Date.now(),Be(De,m)}else ne(new Error(`LifeCycle error: undesired onStart(${je}/${Ue})`))}(m=we).isSnapshoting?e.g.WeixinSnapshot={snapshotContextReady(){delete e.g.WeixinSnapshot,m.isSnapshoting=!1,$e()}}:P.mayHaveSnapShot&&Fe.onLibraryEnd($e);class qe{constructor(e,t,r){this.num=e,this.type=t,this.bindingFn=void 0,this.bindingFn="function"==typeof r?r:M}}var He={ALL:new qe(Number.MIN_VALUE,"ALL"),DEBUG:new qe(5e3,"DEBUG",console.debug),LOG:new qe(1e4,"LOG",console.log),INFO:new qe(2e4,"INFO",console.info),WARN:new qe(3e4,"WARN",console.warn),ERROR:new qe(4e4,"ERROR",console.error),OFF:new qe(Number.MAX_VALUE,"OFF")},Ge=(e,t)=>({debug:e(He.DEBUG,t),log:e(He.LOG,t),info:e(He.INFO,t),warn:e(He.WARN,t),error:e(He.ERROR,t)}),Qe=He.INFO,ze=(()=>{if(P.isWorker||P.isWidget){return Object.assign({createLogger:function(){return j}},j)}return P.isSubContext&&P.isIsolateContext?(e=[],t=(t,r)=>(...n)=>{e.push({level:t,logs:n,category:r})},r=()=>{setTimeout((()=>{var t=s.__isFromMainContext?s.__mergeSubContextLogs:null;t?(t(e),e=[]):r()}),1e3)},Fe.onStart(r),{...Ge(t),createLogger:e=>Ge(t,"string"==typeof e?e:"default"),__isFromMainContext:!1}):(()=>{var e=P.platform,t="android"!==e,r=[],n=function(t){"android"!==e?h.invoke("systemLog",{dataArray:t.map((t=>{return{message:`\n${r=t.date,n=("0"+(r.getMonth()+1)).slice(-2),o=("0"+r.getDate()).slice(-2),i=("0"+r.getHours()).slice(-2),a=("0"+r.getMinutes()).slice(-2),s=("0"+r.getSeconds()).slice(-2),l=("00"+r.getMilliseconds()).slice(-3),u=r.getFullYear()+"-"+n+"-"+o,c=i+":"+a+":"+s+"."+l,"ios"===e?u+" "+c+"000"+(r.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):u+" "+(r.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+c} [${t.level.type[0].toUpperCase()}][wxapplib]] ${t.content}`};var r,n,o,i,a,s,l,u,c}))}):t.forEach((e=>{e.level.bindingFn("[wxapplib]] "+e.content)}))},o=e=>{if(e instanceof Error)return`${e.message}\n${e.stack}`;if(e&&"string"==typeof e.stack&&"string"==typeof e.message)return`${e.message}\n${e.stack}`;switch(typeof e){case"bigint":case"boolean":case"function":case"number":case"symbol":return e.toString();case"string":return e;case"undefined":return"undefined";case"object":var t;try{t=JSON.stringify(e)}catch(e){t="[]"}return t;default:return}},i=function(e,i){return function(...a){var s;if(i&&Array.prototype.unshift.call(a,"["+i+"]"),(k()||e.num>=He.WARN.num)&&(null===(s=j[e.type.toLowerCase()])||void 0===s||s.call(j,...a)),e.num>=Qe.num){var l=Array.prototype.slice.call(a).map(o).join(" ");if(t){var u=new Date;r&&r.length>1024&&r.shift(),r.push({date:u,level:e,content:l})}else n([{level:e,content:l}])}}};return Fe.onStart((()=>{setTimeout((function e(){setTimeout(e,4e3),0!==r.length&&(n(r),r=[])}),4e3)})),{...Ge(i),createLogger:function(e){return Ge(i,"string"==typeof e?e:"default")},__mergeSubContextLogs:e=>{Array.isArray(e)&&e.forEach((e=>{var{level:t,logs:r,category:n}=e;i(t,n)(...r)}))},__isFromMainContext:!0}})();var e,t,r})();Fe.onLoad((()=>{ze.info("[BaseLibVersion] "+JSON.stringify(t))}));const Ke=ze;const Ye=B(["log","info","warn","error"],(e=>function(...t){(L||k())&&console[e]("[system]",...t)}));var Ve;function Je(){return Ve||(void 0!==c&&void 0!==c.WebAssembly?c.WebAssembly:void 0!==globalThis.WebAssembly?globalThis.WebAssembly:void 0)}Fe.onLoad((()=>{Ve=Je()}));var Xe=Object.create(null);Object.defineProperty(Xe,"WebAssembly",{enumerable:!0,get:Je});const Ze=Xe;var et=e.g,tt={env:P,global:et,get isConfigReady(){return Fe.getIsStarted()},get isStarted(){return Fe.getIsStarted()},get isLoaded(){return Fe.getIsLoaded()},...Fe,...a,wxConsole:j,wxPerfConsole:W,wxNativeConsole:Ke,libConsole:Ye,libGlobal:Ze,globalShare:{}};void 0!==n&&(o=function(){return"return this"===arguments[arguments.length-1]?function(){return et}:new n(...arguments)},o.prototype=n.prototype);const rt=tt})(),y=r.default})();var b=y.wxConsole,w=y.wxPerfConsole,s=y.wxNativeConsole,A=y.libConsole,E=y.libGlobal,I,S,C,T,O,x,N,R;(()=>{var e={410:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(e,t,r){var n=d;return function(o,i){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===_)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var l=c(e,t,r);if("normal"===l.type){if(n=r.done?h:p,l.arg===_)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=h,r.method="throw",r.arg=l.arg)}}}(e,r,a),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",_={};function g(){}function v(){}function m(){}var y={};y[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(x([])));w&&w!==r&&n.call(w,i)&&(y=w);var A=m.prototype=g.prototype=Object.create(y);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(o,i,a,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function S(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=c(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:N}}function N(){return{value:t,done:!0}}return v.prototype=A.constructor=m,m.constructor=v,v.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},E(I.prototype),I.prototype[a]=function(){return this},e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(A),l(A,s,"Generator"),A[i]=function(){return this},A.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:x(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{I=t}catch(e){o("r","regeneratorRuntime = r")(t)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(()=>{r(410);var e=()=>{var e={};Object.keys(I).forEach((t=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:()=>I[t],set(r){delete e[t],e[t]=r}})})),globalThis.regeneratorRuntime=e};"function"==typeof m.onReady?m.onReady((t=>{"devtools"===t.platform||["develop","trial"].includes(t.envVersion)||e()})):e()})()})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>c});var r,n,i,a=Object.prototype.toString,s=(Object.getPrototypeOf,Object.getOwnPropertyNames,Object.getOwnPropertyDescriptor,Object.defineProperty,{}),l={subscribeHandler:(e,t,o={})=>{if(void 0!==e&&e===r)return t=t.valueOf(),Array.isArray(s[t])?n?void setTimeout((()=>{s[t].map((e=>e(o)))})):s[t].map((e=>e(o))):void 0}};y.onLoadInstant((()=>{i=e.g.WeixinJSContextId}));var u={__init__:(e,t)=>{void 0===r&&void 0!==e&&((r=e).register(e,l,t),n=r.crossVMContext)},publish:(e,t={})=>{var n,o=(n=t,a.call(n).split(" ")[1].split("]")[0]);if("Object"!==o&&"Undefined"!==o)throw new Error("params should be an object.");var i=e.valueOf(),s=t||{};if(r&&"function"==typeof r.subscribeHandler)return r.subscribeHandler(r,l,i,s)},subscribe:(e,t)=>{var n,o;if(Array.isArray(s[e])||(s[e]=[]),s[e].push(t),null!==(n=r)&&void 0!==n&&n.waitingChannel&&null!==(o=r)&&void 0!==o&&o.waitingChannel[i]){var a=[];r.waitingChannel[i].forEach((r=>{var{event:n,params:o}=r;n===e?t(o):a.push(r)})),r.waitingChannel[i]=a}}};y.onLoad((()=>{"undefined"!=typeof WeixinJSContext&&(u.__init__(WeixinJSContext,e.g.WeixinJSContextId),delete u.__init__,delete e.g.WeixinJSContext,delete e.g.WeixinJSContextId)}));const c=u;S=t.default})(),(()=>{var e={774:(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnvPreloadType:()=>n,default:()=>i});var n={None:0,BeforeLaunch:1,AfterLaunch:2},o=(()=>(m.onReady((()=>{o!==m&&void 0!==o&&Object.assign(o,m)})),m))();const i=o},64:(e,t,r)=>{"use strict";r.r(t),r.d(t,{reportDeprecatedAPI:()=>n});var n=e=>{i.reportKeyValue({key:"DeprecatedAPI",value:e})}},864:(e,t,r)=>{var{reportDeprecatedAPI:n}=r(64),{default:o}=r(774);e.exports={hijack:function(e=!0,t=!0){!function(e){if("function"==typeof globalThis.Function){var t={};r.prototype=globalThis.Function.prototype,r.prototype.constructor=r,globalThis.Function=r}function r(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return e?t:{}}}}(t),"undefined"!=typeof eval&&("ios"===o.platform&&r.g.__isAppServiceRemoteDebugMode__||o.debug||(globalThis.eval=void 0)),e&&function(){if("undefined"!=typeof setTimeout){var e=setTimeout;globalThis.setTimeout=function(t,r=0){if("function"!=typeof t)throw new TypeError(`setTimeout expects a function as first argument but got ${typeof t}.`);var n=N.surroundThirdByTryCatch(t,"at setTimeout callback function"),o=[].slice.call(arguments,2);return e((()=>{n.apply(globalThis,o)}),r)};var t=setInterval;globalThis.setInterval=function(e,r){if("function"!=typeof e)throw new TypeError(`setInterval expects a function as first argument but got ${typeof e}.`);var n=N.surroundThirdByTryCatch(e,"at setInterval callback function"),o=[].slice.call(arguments,2);return t((()=>{n.apply(globalThis,o)}),r)}}}(),"undefined"!=typeof WebAssembly&&["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((e=>{if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:()=>(n("globalWa"),t),set:t=>{Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}}},585:()=>{if("undefined"==typeof navigator){try{new o('var GeneratorFunctionProto = Object.getPrototypeOf(function* () {});var FakeGeneratorFunction = function () {};FakeGeneratorFunction.prototype = GeneratorFunctionProto;Object.defineProperty(GeneratorFunctionProto, "constructor", { value: FakeGeneratorFunction });')()}catch(e){}try{new o('var AsyncFunctionProto = Object.getPrototypeOf(async function () {});var FakeAsyncFunction = function () {};FakeAsyncFunction.prototype = AsyncFunctionProto;Object.defineProperty(AsyncFunctionProto, "constructor", { value: FakeAsyncFunction });')()}catch(e){}try{new o('var AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function* () {});var FakeAsyncGeneratorFunction = function () {};FakeAsyncGeneratorFunction.prototype = AsyncGeneratorFunctionProto;Object.defineProperty(AsyncGeneratorFunctionProto, "constructor", { value: FakeAsyncGeneratorFunction });')()}catch(e){}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{bridgeGlobalInstanceOf:()=>ee,deepFreezeGlobalObjs:()=>Q,deepFreezeObj:()=>P,deepFreezeObjProperty:()=>R,doNotWriteGlobalObjs:()=>G,doNotWriteObj:()=>k,doNotWriteObjProperty:()=>D,globalEsHiddenObjs:()=>t,globalEsObjs:()=>o,hijack:()=>z.hijack,overwriteSetPrototypeOf:()=>H});r(585);var e=globalThis.Function,t=[()=>Object.getPrototypeOf(Uint8Array.prototype).constructor,()=>new e("return Object.getPrototypeOf((function* () {})()).constructor")(),()=>new e("return Object.getPrototypeOf(function* () {}).constructor")(),()=>new e("return Object.getPrototypeOf(async function () {}).constructor")(),()=>new e("return Object.getPrototypeOf(async function* () {}).constructor")()].map((e=>{try{return e()}catch(e){}})).filter(Boolean),o=["AggregateError","Array","ArrayBuffer","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","globalThis","Infinity","Int16Array","Int32Array","Int8Array","Intl","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","WebAssembly","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"],i=["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"],a=globalThis,s=r(774),l=(()=>s.default.platform)(),u=(()=>"ios"===l)();var c=/^\s*at .*(\S+:\d+|\(native\))/m,d=/^(eval@)?(\[native code\])?$/;function p(e,t=1/0){if("string"!=typeof e.stack)throw new Error("Cannot parse given Error object");var r=e.stack;return u?function(e,t){for(var r=[],n=e.split("\n"),o=0,i=0;o<n.length&&i<t;++o){var a=n[o];if(!d.test(a)){++i;var s=a.indexOf("@");if(-1===s){var l=f(a);r.push({fileName:l.URI,lineNumber:l.line,columnNumber:l.column,source:a})}else{var u=a.substring(0,s),c=f(a.substr(s+1));r.push({functionName:u,fileName:c.URI,lineNumber:c.line,columnNumber:c.column,source:a})}}}return r}(r,t):function(e,t){for(var r=[],n=e.split("\n"),o=0,i=0;o<n.length&&i<t;++o){var a=n[o];c.test(a)&&(r.push(a),++i)}return r.map((e=>{e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=t.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(t=r?t.replace(r[0],""):t).split(/\s+/).slice(1),o=f(r?r[1]:n.pop());return{functionName:n.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0],lineNumber:o[1],columnNumber:o[2],source:e}}))}(r,t)}function f(e){var t=/(?::(\d+))?(?::(\d+))?$/.exec(e);return t?{URI:e.substring(0,e.length-t[0].length),line:t[1],column:t[2]}:{URI:e}}var h=Object.freeze,_=Object.setPrototypeOf,g=Object.defineProperty,v=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,b=Object.getPrototypeOf,w=Object.preventExtensions;var A=[[e=>!/(WAServiceMainContext|WAGame)\.js/.test(e)]];function E(){var e,t,r=Date.now(),n=p(new Error,3),o=n[1],i=n[2],a=!(o.fileName&&i.fileName&&i.fileName!==o.fileName&&(e=i.fileName,t=o.fileName,!A.some((r=>r.some((t=>t(e)))&&r.some((e=>e(t)))))));return Date.now()-r,a}function I(e,t=!1){if("function"==typeof e||"object"==typeof e&&null!==e){var r=v(e,"__proto__");r&&!r.configurable||(r||Object.isExtensible(e))&&g(e,"__proto__",{get(){return b(this)},set(r){if(this===e)t&&E()&&_(e,r);else{if("function"!=typeof this&&("object"!=typeof this||null===e))return;_(this,r)}},enumerable:!1,configurable:!1})}}var S=new Map,C=(e,t,r)=>{S.has(e)||S.set(e,new Map);var n=S.get(e);n.has(t)?Object.assign(n.get(t),r):n.set(t,r)};function T(e,t,r=!1){if("function"!=typeof e&&("object"!=typeof e||null===e))return!1;try{var n=v(e,t);return!!n&&(n.configurable&&(g(e,t,{get:n.get||(()=>n.value),set(o){if(this===e)r&&E()&&(n.set?n.set.call(this,o):n.writable&&(n.value=o));else{if("function"!=typeof this&&"object"!=typeof this)return;!function(e,t,r){try{"__proto__"===t?_(e,r):g(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}catch(e){}}(this,t,o)}},enumerable:n.enumerable,configurable:!1}),r&&C(e,t,n)),!n.get&&("function"==typeof n.value||"object"==typeof n.value&&null!==n.value))}catch(e){throw e.message,e}}var O=new WeakSet;function x(e){O.add(e)}function N(e){return O.has(e)}function R(e,t,r){T(e,t)&&P(e[t],r)}function P(e,t){if(e&&!N(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis)if(e!==Error){x(e);for(var r=m(e),n=y(e),o=0;o<r.length;++o)R(e,r[o],t);for(var i=0;i<n.length;++i)R(e,n[i],t);t?w(e):I(e,!1)}else if(t){var a=e=>{if(e&&!N(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis){x(e),h(e);for(var t=m(e),r=y(e),n=0;n<t.length;++n)a(e[t[n]]);for(var o=0;o<r.length;++o)a(e[r[o]])}};a(Error)}}function D(e,t){T(e,t,!0)&&k(e[t])}var L=new WeakSet;function B(e){return L.has(e)}function k(e){if(e&&!B(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis){!function(e){L.add(e)}(e);for(var t=m(e),r=y(e),n=0;n<t.length;++n)D(e,t[n]);for(var o=0;o<r.length;++o)D(e,r[o]);I(e,!0)}}var M=Object.prototype.hasOwnProperty,F=Object.defineProperty,j=Object.defineProperties,U=Object.getOwnPropertyNames,$=Object.getOwnPropertySymbols,W=Object.getOwnPropertyDescriptor,q=!1,H=function(){q||(q=!0,F(a.Object,"setPrototypeOf",{value:(e,t)=>(e.__proto__=t,e),configurable:!0}),F(a.Object,"defineProperty",{value(e,t,r){if(!B(e))return F(e,t,r);if(!E())return r;var n=W(e,t);if(!n||n.configurable){var o=F(e,t,r);return D(e,t),o}return C(e,t,r),r},configurable:!0}),F(a.Object,"defineProperties",{value(e,t){if(!B(e))return j(e,t);if(!E())return t;var r=r=>{var n=W(e,r);if(!n||n.configurable){var o=F(e,r,t[r]);return D(e,r),o}return C(e,r,t[r]),t[r]};return U(t).forEach(r),$(t).forEach(r),t},configurable:!0}))},G=function(e=[]){try{for(var r=[...o,...i,...t,...e],n=(Date.now(),0);n<r.length;++n){var s=r[n],l=typeof s;"string"===l?M.call(a,s)&&D(a,s):"function"!==l&&"object"!==l||k(s)}Date.now()}catch(e){}},Q=function(e=[],r=!1){try{for(var n=[...o,...i,...t,...e],s=(Date.now(),0);s<n.length;++s){var l=n[s],u=typeof l;"string"===u?M.call(a,l)&&R(a,l,r):"function"!==u&&"object"!==u||P(l,r)}Date.now()}catch(e){}},z=r(864),K=Object.prototype.isPrototypeOf,Y=Object.defineProperty,V=Object.prototype.hasOwnProperty,J=Symbol.hasInstance,X=function(e){return!("function"!=typeof this||!Z(e))&&((e,t)=>K.call(t.prototype,e))(e,this)},Z=e=>"object"==typeof e?null!==e:"function"==typeof e;function ee(e,t){for(var r=function(){var r=e[n],o=t[n];if("function"!=typeof r)return"continue";var i=V.call(r,J)?r[J]:X,a=V.call(o,J)?o[J]:X;Y(r,J,{value(e){return i.call(this,e)||a.call(o,e)},writable:!0,enumerable:!1,configurable:!0}),Y(o,J,{value(e){return a.call(this,e)||i.call(r,e)},writable:!0,enumerable:!1,configurable:!0})},n=0;n<e.length;++n)r()}})(),C=n})(),(()=>{var e={96:(e,t,r)=>{var n;r.d(t,{k:()=>i,r:()=>o}),y.onLoad((()=>{n=[...C.globalEsObjs.map((e=>globalThis[e])),...C.globalEsHiddenObjs].filter(Boolean)}));var o=()=>n;function i(e){var t=e.getGlobals(),r=o();t.length===r.length?C.bridgeGlobalInstanceOf(o(),t):y.emitFrameworkError(new Error("remoteGlobals mismatch with currentGlobals"),"bridgeGlobalInstanceOf")}},187:(e,t,r)=>{r.d(t,{A:()=>n});var n=(globalThis.__wxLibrary||{}).contextType}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{_getSelfBridgeContext:()=>i,bridgeContext:()=>a});var e=r(96),t=r(187),o=new Map;function i(){return{getGlobals:e.r,contextType:t.A,setBridged:(e,t)=>{o.set(e,t)}}}function a(r){var n=r._getSelfBridgeContext();t.A,n.contextType;try{if(o.has(n.contextType))return;o.set(n.contextType,n),n.setBridged(t.A,i()),(0,e.k)(n)}catch(e){t.A,n.contextType}}})(),T=n})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{condom:()=>de,condomWX:()=>ce,handleMessageEasyCondom:()=>ue});const r={request:3,getStorageSync:3,getStorage:3,getCookies:1};function n(e,t){return function(...r){try{return e(...r)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?i.thirdErrorReport({error:e,extend:t}):i.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function a(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}var s=n(a,"stringToAnyType");var l=e=>"object"==typeof e&&null!==e&&!e._isVue||"function"==typeof e,u=(()=>Object.prototype.toString)(),c=(()=>Object.prototype.hasOwnProperty)(),d=(()=>String.prototype.slice)(),p=o.prototype.call.bind(u),f=o.prototype.call.bind(c),h=o.prototype.call.bind(d),_=["__proto__","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__ob__","__su__","$mobx"],g=(()=>Object.assign)(),v=(()=>Object.getOwnPropertyNames)(),m=(()=>Object.getOwnPropertySymbols)(),y=(()=>Object.getOwnPropertyDescriptors)(),b=(()=>Object.defineProperty)(),w=(()=>Object.getPrototypeOf)(),A=(()=>Object.setPrototypeOf)(),E=(()=>Reflect.get)(),I=(()=>Reflect.set)(),S=(()=>Reflect.deleteProperty)(),C=(()=>Reflect.construct)(),T=(()=>Reflect.apply)();var x=new WeakSet,N=JSON.parse,R=e=>{var t=N(e);return q(t),t},P=(e,t)=>{var r=s(e,t);return q(r),r},D=new WeakSet,L=(e,t,r,n,o,i,a,s)=>a||(a=function(...n){var o=x.has(e),i=D.has(e),s=n.map(((e,t)=>{if(0!==t||"object"!=typeof e||null===e)return e;var n=g({},e);if(o){var{success:a,fail:s,complete:l}=e;f(e,"success")&&(n.success="function"==typeof a?r(((...e)=>{a(...e)})):a),f(e,"fail")&&(n.fail="function"==typeof s?r(((...e)=>{s(...e)})):s),f(e,"complete")&&(n.complete="function"==typeof l?r(((...e)=>{l(...e)})):l)}return i&&g(n,{_jsonParse:R,_stringToAnyType:P}),n}));return!i||"object"==typeof n[0]&&null!==n[0]||s.push({_jsonParse:R,_stringToAnyType:P}),o||(s=r(n)),t(this instanceof a?C(e,s,e):T(e,o?this:r(this,{forceUpdate:!0}),s))},n.set(e,a),o.set(a,e),B(e,t,r,n,o,i,a,s),a),B=(e,t,r,n,o,i,a,s)=>{for(var l=function(e){var t=[...v(e),...m(e)],r=y(e);return t.map((e=>g(r[e],{name:e})))}(e),u=y(a),c=function(){var n=l[d],o=n.name;if(_.includes(o))return"continue";var i=f(n,"value"),c=f(u,o)&&u[o];c?c.configurable?b(a,o,i?{value:t(n.value,{forceUpdate:s,path:void 0}),writable:n.writable,enumerable:n.enumerable,configurable:n.configurable}:{enumerable:n.enumerable,configurable:n.configurable}):c.writable&&(a[o]=t(n.value,{forceUpdate:s,path:void 0})):b(a,o,i?{value:t(n.value,{forceUpdate:s,path:void 0}),writable:n.writable,enumerable:n.enumerable,configurable:n.configurable}:{get(){return t(E(e,o,r(this,{forceUpdate:!0})))},set(t){I(e,o,r(t),r(this,{forceUpdate:!0}))},enumerable:n.enumerable,configurable:n.configurable}),c&&S(u,o)},d=0;d<l.length;d++)c();for(var p=[...v(u),...m(u)],h=0;h<p.length;++h)S(a,p[h]);return a},k=(e,t,r,n,o,i,a,s)=>i||!a||s?(a=a||{},n.set(e,a),o.set(a,e),B(e,t,r,n,o,i,a,s),((e,t,r,n,o,i,a,s)=>{var l=w(e);null!=l&&l.constructor&&"Object"!==l.constructor.name&&A(a,t(l,{forceUpdate:s,path:void 0}))})(e,t,0,0,0,0,a,s),a):a,M=ArrayBuffer.prototype,F=(e,t,r,n,o)=>(i,{forceUpdate:a=!1,path:s}={})=>{if(!l(i)||o.has(i)||W.has(i))return i;var u=void 0;if(n.has(i)&&(u=n.get(i)),$.has(i))return u;$.add(i);var c=h(p(i),8,-1);try{var d=i;switch(c){case"Array":d=((e,t,r,n,o,i,a,s)=>{if(!i&&a&&!s)return a;a=a||[],n.set(e,a),o.set(a,e);for(var l=e.length,u=a.length,c=0;c<u;++c)a[c]=t(e[c],{forceUpdate:s,path:void 0});if(l<u)a.slice(l,u-l);else for(var d=u;d<l;++d)a.push(t(e[d],{forceUpdate:s,path:void 0}));return a})(i,t,0,n,o,e,u,a);break;case"Function":d=L(i,t,r,n,o,e,u,a);break;case"Object":d=k(i,t,r,n,o,e,u,a);break;case"Promise":d=((e,t,r,n,o,i,a,s)=>a||(a=new Promise(((r,n)=>{e.then((e=>r(t(e))),(e=>n(t(e))))})),n.set(e,a),o.set(a,e),a))(i,t,0,n,o,0,u);break;case"ArrayBuffer":e||i===M||A(i,M);break;default:d=i}return d}finally{$.delete(i)}},j=new WeakMap,U=new WeakMap,$=new WeakSet,W=new WeakSet,q=e=>{l(e)&&W.add(e)},H=(()=>{var e=e=>e,t=e=>e,r=(...t)=>e(...t),n=(...e)=>t(...e);return e=F(!1,r,n,j,U),t=F(!0,n,r,U,j),r})();var G=Object.getPrototypeOf,Q=Object.getOwnPropertyNames,z=Object.getOwnPropertyDescriptor,K=Object.defineProperty,Y=["constructor","__proto__","__defineGetter__","__defineSetter__"],V=new WeakMap,J=new WeakMap,X=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,re=e=>{for(var t=0;t<Y.length;t++){if(Y[t]===e)return!0}return!1},ne=function(e){for(var t=ee.has(e)?ee.get(e):{},r=(e=>{for(var t=[],r=e;r;r=G(r))for(var n=Q(r),o=0;o<n.length;o++){var i=n[o],a=z(r,i);void 0!==a&&(a.name=i,t.push(a))}return t})(e),n=0;n<r.length;n++){var o=r[n],i=o.name;re(i)||(i in t||(delete o.value,delete o.writable,K(t,i,Object.assign(o,{get:oe(i).bind(t),set:ie(i).bind(t)}))))}return ee.set(e,t),V.set(t,e),t},oe=function(e){return function(){var t=V.get(this);if(void 0!==t)return null===t?null:se(t[e])}},ie=function(e){return function(t){var r=V.get(this);if(null!=r){if(null!=t){var n=ae(t);if(n)return void(r[e]=n)}r[e]=se(t)}}},ae=function(e){if(("function"==typeof e||"object"==typeof e)&&null!=e)return V.get(e)||J.get(e)||X.get(e)},se=function(e){var t,r=(t=e,Object.prototype.toString.call(t).split(" ")[1].split("]")[0]);return"String"===r||"Number"===r||"Boolean"===r?e.valueOf():"Array"===r?function(e){if(te.has(e))return te.get(e);for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(se(n))}return te.set(e,t),X.set(t,e),t}(e):"Function"===r?function(e){if(Z.has(e))return Z.get(e);var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=se(arguments[r]);var n=ae(this)||this,o=e.apply(n,t);return se(o)};return Z.set(e,t),J.set(t,e),t}(e):"Object"===r?ne(e):"ArrayBuffer"===r?(e!==ArrayBuffer.prototype&&(e.__proto__=ArrayBuffer.prototype),e):"Undefined"===r?void 0:"Null"===r?null:e};const le=se;var ue=e=>{var t,r=e.__wx_dont_hook_sdk_inner_variable_packkeys_otherwise_you_will_regret_and_occur_bug__;return r&&delete e.__wx_dont_hook_sdk_inner_variable_packkeys_otherwise_you_will_regret_and_occur_bug__,!!r&&(t=e,r.forEach((e=>{var r=function(e,t){if(!t)return null;var r=t.split(".");if(!r.length)return null;for(var n=r[r.length-1],o=e,i=1;i<r.length-1;i++){if(!o)return null;o=o[r[i]]}return[o,n]}(t,e);if(r){var[n,o]=r;Object.setPrototypeOf(n[o],ArrayBuffer.prototype)}})),!0)},ce=(e,t=[])=>{q(e),Object.setPrototypeOf(e,Object.prototype);var n=function(){var t,n=r[o],i=Object.getOwnPropertyDescriptor(e,o)||{};Object.defineProperty(e,o,{get(){var e,r=Object.prototype.hasOwnProperty.call(i,"value")?i.value:null===(e=i.get)||void 0===e?void 0:e.call(this);if(t)return t;if(n){var o=r;return 1&n&&(e=>{x.add(e)})(o),2&n&&(e=>{D.add(e)})(o),t=H(o)}if("function"==typeof r&&!t){var a=function(){return this instanceof a?Reflect.construct(r,arguments,r):Reflect.apply(r,this,arguments)};return Object.defineProperty(a,"name",{value:r.name}),t=a,a}return t=r},set(e){Object.prototype.hasOwnProperty.call(i,"value")&&(i.value=e)},enumerable:!0,configurable:!0})};for(var o of Object.keys(e))n()},de=e=>new le(e);O=t})(),(()=>{var e={835:(e,t,r)=>{r.d(t,{D:()=>o,m:()=>n});var n={APP:"app",APP_RENDER:"app_sub_render",APP_XRFRAME_RENDER:"app_xrframe_render",APP_SCL:"app_sub_scl",GAME:"game",GAME_OPEN_DATA:"gameOpenData"},o={GAME_PLUGIN_PRELOAD:"gamePlugin_preload_",GAME_PLUGIN:"gamePlugin_"}},330:(e,t,r)=>{r.d(t,{G$:()=>n});r(888),globalThis;var n=function(){return"devtools"===m.platform}},792:(e,t,r)=>{r.d(t,{Z:()=>o});var n={name:void 0,secure:!0,runningType:"app",init:function(e){this.name=e.contextName,this.secure=e.contextSecure,void 0!==y&&(y.env.contextName=e.contextName,y.env.typeStr=`${e.contextName}_Context`),this.name.startsWith("game")?this.runningType="game":this.name.startsWith("app")&&(this.runningType="app"),this.remoteObjectProto=e.__proto__}};const o=n},618:(e,t,r)=>{var n=r(313),o=r(320),i=r(792),a=r(10);y.onLoad((()=>{void 0===r.g.WeixinJSBridge&&(r.g.WeixinJSBridge={},r.g.WeixinJSBridge.subscribeHandler=function(e,t){"onError"===e?y.emitUnhandledError(t):"unhandledRejection"===e&&y.emitUnhandledRejection(null==t?void 0:t.reason,null==t?void 0:t.promise)},r.g.WeixinJSBridge.invokeCallbackHandler=function(){})})),y.onUnhandledRejection((function(e={}){i.Z.name===a.CONTEXT_NAME.APP_RENDER?(0,n.yH)(e.reason,"",e.promise||null):(0,n.sK)(e.reason,"",e.promise||null)})),y.onUnhandledError((function(e){e=(0,o.Bs)(e),i.Z.name===a.CONTEXT_NAME.APP_RENDER?(0,n.yH)(e,""):(0,n.sK)(e,"")})),y.onFrameworkError((function(e){"function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),s.error("FrameworkError",e)}))},593:(e,t,r)=>{r.d(t,{Z:()=>a});var n={},o=Object.keys;n.init=e=>{i=e;for(var t=o(e),r=0;r<t.length;r++){var a=t[r];void 0===n[a]&&(n[a]=e[a])}};const a=n},225:(e,t,r)=>{r.d(t,{k:()=>o});var n=r(501),o=e=>{e.onReady((e=>{y._onPostLoad((()=>{var t=m.__readyHandler;n.Z.__wxConfig=Object.assign({},e),"function"==typeof t&&t(e)}))}))}},440:(e,r,o)=>{o.d(r,{E:()=>_});var c=o(501),_=function(e){var r,_,g;("windows"===e.__wxConfig.platform||"mac"===e.__wxConfig.platform)&&e.__wxConfig.host&&"WMPF"===e.__wxConfig.host.env&&e.__isAppServiceRemoteDebugMode__?c.Z.console=o.g.console:e.__isAppServiceRemoteDebugMode__&&"ios"!==e.__wxConfig.platform?c.Z.console=e.originConsole:c.Z.console=new e.BaseConsole,c.Z.Intl&&e.__appServiceSDK__&&e.__appServiceSDK__.getProxiedIntl&&(c.Z.Intl=e.__appServiceSDK__.getProxiedIntl(c.Z.Intl)),r=e.wxLibVersion,g=(null===(_=t)||void 0===_?void 0:_.version)||"9.9.9",r!==g&&(s.warn(`[checkVersionMatches] baselib versions between context do not match (mainContext ${r}, subContext ${g})`),i.reportIDKey({key:"subContextLibVersionNotMatch"})),n=e.__Function__,l=e.__userActionTracer__,u=e.__appServiceSDK__,f=e.__sclEngine__,h=e.WeixinJSBridge,i=e.Reporter,s=e.wxNativeConsole,d=e.WeixinSharedBuffer,a=e.BaseConsole,$dbg=e.$dbg,__isAppServiceRemoteDebugMode__=!!e.__isAppServiceRemoteDebugMode__,__remoteDebug__=e.__remoteDebug__,__debuggerMessager__=e.debuggerMessager,y.onLibraryEnd((()=>{e.setWxModule(H)})),T.bridgeContext(e.__subContextEngineBridge__),e.__freezeLibContextGlobal__(),Object.defineProperty(c.Z,"__wxSourceMap",{get:O.condom(e.getWxSourceMap)}),c.Z.WebAssembly&&delete c.Z.WebAssembly,p=e.Trace}},729:(e,t,r)=>{r.d(t,{D:()=>o});var n=r(501),o=function(e){e.__wxConfig.debug&&(console=new e.BaseConsole),setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,h=e.WeixinJSBridge,i=e.Reporter,c=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,s=e.wxNativeConsole,a=e.BaseConsole,n.Z.console=new e.BaseConsole,f=e.__sclEngine__,__appServiceConsole__=e.__appServiceConsole__,p=e.Trace,SkylineGlobal=e.SkylineGlobal}},17:(e,t,r)=>{r.d(t,{d:()=>n});var n=function(e){setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,h=e.WeixinJSBridge,i=e.Reporter,c=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,s=e.wxNativeConsole,f=e.__sclEngine__,p=e.Trace}},538:(e,t,r)=>{r.d(t,{y:()=>o});var n=r(501),o=function(e){setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,h=e.WeixinJSBridge,i=e.Reporter,c=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,s=e.wxNativeConsole,a=e.BaseConsole,n.Z.console=new e.BaseConsole,p=e.Trace,y.onLibraryEnd((()=>{xrFrame.init(e.args)}))}},772:(e,t,r)=>{r.d(t,{M:()=>i,O:()=>a});var n,o=r(501),i=function(e){var t=e._createSharedCanvas;o.Z.__isAdapterInjected=!1,o.Z.console=e.console,Object.defineProperty(o.Z,"sharedCanvas",{get:()=>t(),set(){}}),m.onReady((()=>{!0!==m.useHighPerformanceMode?o.Z.wx=n||O.condomWX(e.wx,e.skipCondom):o.Z.wx=e.wx})),o.Z.requirePlugin=e.requirePlugin,o.Z.WXWebAssembly=e.WXWebAssembly,o.Z.WXWeakRef=e.WXWeakRef,delete o.Z.WebAssembly,o.Z.GameGlobal||(o.Z.GameGlobal=o.Z),s=e.wxNativeConsole,Object.defineProperty(o.Z,"__wxSourceMap",{get:O.condom(e.getWxSourceMap)})},a=function(e,t){e&&e.wx&&(n=O.condomWX(e.wx,t))}},989:(e,t,r)=>{r.d(t,{o:()=>n});var n=function(e){e.getWxSourceMap&&(e.getWxSourceMap=O.condom(e.getWxSourceMap)),__gameOpenDataSDK__.init(e)}},230:(e,t,r)=>{r.d(t,{m:()=>o});var n=r(501),o=function(e){delete n.Z.NativeClient,n.Z.console=e.console,n.Z.WXWebAssembly=e.WXWebAssembly,n.Z.env={},e.pluginEnv&&(n.Z.pluginEnv=e.pluginEnv),e.wx&&(n.Z.wx=e.wx)}},501:(e,t,r)=>{r.d(t,{Z:()=>n});const n=function(){return this}()},10:(e,t,r)=>{r.r(t),r.d(t,{CONTEXT_NAME:()=>b.m,CONTEXT_NAME_PREFIX:()=>b.D,injectEntryFile:()=>g.Wm,loadJsFiles:()=>g.z5,loadLibFiles:()=>g.C4,onInitReady:()=>I,onMainContextMessage:()=>L,postMessageToMainContext:()=>P,postMessageToMainContextSync:()=>D,surroundByTryCatch:()=>_.Ue,surroundThirdByTryCatch:()=>_.M2});r(618);var n=r(501),o=r(593),i=r(792),a=r(247),s=r(225),l=r(772),u=r(989),c=r(440),d=r(538),p=r(729),f=r(230),h=r(17),_=r(313),g=r(1),v=r(330),b=r(835),w=r(320),A="subContext:initReady",E=new y.EventEmitter,I=function(e){y.once(A,e)};S.subscribe("subContextEnvReady",(0,_.Ue)((e=>{if(i.Z.init(e),(0,a.v)(e),function(e){r.g.__isAppServiceRemoteDebugMode__=!!e.__isAppServiceRemoteDebugMode__}(e),function(e){if(e.__isAppServiceRemoteDebugMode__&&e.__remoteDebug__&&e.__remoteDebug__.setAutoTestHandler)try{var t;$eval=e.__remoteDebug__.$$eval,e.__remoteDebug__.setAutoTestHandler({$eval:(r,n,o=null)=>(t||(t="ios"===e.__wxConfig.platform?globalThis:{...globalThis,console:e.originConsole}),$eval(r,t).apply(o,n)),setGlobalFunctions(e,r){t?t[e]=r:globalThis[e]=r}})}catch(e){console.error(e)}}(e),C.hijack(),o.Z.init(e.Reporter),i.Z.name===b.m.GAME)(0,l.M)(e);else if(i.Z.name===b.m.GAME_OPEN_DATA)(0,u.o)(e);else if(i.Z.name===b.m.APP)(0,c.E)(e);else if(i.Z.name===b.m.APP_RENDER)(0,p.D)(e);else if(i.Z.name===b.m.APP_XRFRAME_RENDER)(0,d.y)(e);else if(i.Z.name===b.m.APP_SCL)(0,h.d)(e);else{if(!i.Z.name.startsWith(b.D.GAME_PLUGIN))throw new Error("subContextEnvReady: missing context name.");(0,f.m)(e)}(0,s.k)(e.__wxConfig)}))),S.subscribe("preloadSubContextEnvReady",(0,_.Ue)((e=>{i.Z.init(e),e.preHandleEnv&&(0,l.O)(e.preHandleEnv,e.skipCondomList)}))),S.subscribe("subContextRefreshEnv",(0,_.Ue)((e=>{if("game"===i.Z.name)(0,l.M)(e);else if("gameOpenData"===i.Z.name)(0,u.o)(e);else if("app"===i.Z.name)(0,c.E)(e);else if("app_sub_render"===i.Z.name)(0,p.D)(e);else if("app_xrframe_render"===i.Z.name)(0,d.y)(e);else if("app_sub_scl"===i.Z.name)(0,h.d)(e);else{if(!i.Z.name.startsWith("gamePlugin_"))throw new Error("subContextRefreshEnv: missing context name.");(0,f.m)(e)}S.publish("subContextRefreshEnvReady",null,!0)}))),S.subscribe("subContextRefreshWxConfig",(0,_.Ue)((e=>{var{key:t,value:r}=e;"string"==typeof t&&r&&(m[t]=r)}))),S.subscribe("exportGlobalRequire",(0,_.Ue)((e=>{var t=/^[A-Za-z]+(\.[A-Za-z]+)*$/,r=e=>{var{name:r,value:o,needCondom:i}=e;if("string"!=typeof r||!t.test(r))throw new Error("exportGlobalRequire: illegal variable name.");r.split(".").reduce(((e,t,n,a)=>{if(n===a.length-1){if(t in e)throw new Error(`exportGlobalRequire: Variable ${r} exists.`);e[t]=i?O.condom(o):o}if("Array"!==(0,_.Em)(e[t])&&"Function"!==(0,_.Em)(e[t])&&"Object"!==(0,_.Em)(e[t])){var s=a.slice(0,n+1).join(".");throw new Error(`exportGlobalRequire: ${s} is not an Object.`)}return e[t]}),n.Z)};return"[object Array]"===Object.prototype.toString.call(e)?e.forEach(r):r(e)}))),S.subscribe("mainContextMessage",(e=>{E.emit("mainContextMessage",e)})),S.subscribe("subContextDestroy",(()=>{})),S.subscribe("readyLoadSDKSubPackage",(e=>{Object.getOwnPropertyNames(e).forEach((t=>{n.Z[t]=e[t]})),S.publish("readyLoadSDKSubPackageDone")}));var T=["WeixinJSCore","WeixinNativeBuffer","WeixinWorker","NativeGlobal","lockSharedNativeBuffer","unlockSharedNativeBuffer","getNativeBufferId","getNativeBuffer","setNativeBuffer","setSharedNativeBuffer","getSharedNativeBuffer","WeixinArrayBuffer"],x="undefined"!=typeof IS_RENDER_CTX;y.onLoad((()=>{T.forEach((e=>{delete n.Z[e]})),S.publish("subContextReady",{contextGlobal:{get __wxSourceMap(){return n.Z.__wxSourceMap},get __require(){return"game"===i.Z.name||i.Z.name.startsWith("gamePlugin_")?n.Z.require:O.condom(n.Z.require)},jsonParse:JSON.parse,jsonStringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}},!0)}),x);var N=!1,R=function(){N||(N=!0,C.overwriteSetPrototypeOf(),C.deepFreezeGlobalObjs([],!1))};y.onLibraryEnd((()=>{y.onLoad((()=>{i.Z.secure&&m&&m.isIsolateContext&&R(),y.emit(A)})),y.onStart((()=>{m.plugins&&!(0,v.G$)()&&R()}))}));var P=e=>{(0,w.YF)((()=>{S.publish("subContextMessage",e)}))},D=e=>{S.publish("subContextMessage",e)},L=e=>{E.on("mainContextMessage",e)}},1:(e,t,r)=>{r.d(t,{C4:()=>l,Wm:()=>s,z5:()=>a});var n=r(835),o=r(792),i=()=>o.Z.name===n.m.APP,a=(e,t,r)=>{var n=i();if(S&&S.publish){n&&H.globalRequireBlocker.block();var a=S.publish("loadJsFiles",{paths:e,options:r,moduleName:t,contextName:o.Z.name});return n&&H.globalRequireBlocker.unblock(),n&&H.globalRequireBlocker.flushQueue(),a}return"failed"},s=(e,t)=>{var r=i();if(S&&S.publish){r&&H.globalRequireBlocker.block();var n=S.publish("injectEntryFile",{moduleName:e,separatedPlugins:t});return r&&H.globalRequireBlocker.unblock(),r&&H.globalRequireBlocker.flushQueue(),n}return"failed"},l=e=>S&&S.publish?S.publish("loadLibFiles",{paths:e,contextName:o.Z.name}):"failed"},247:(e,t,r)=>{r.d(t,{v:()=>s});var n=r(501),o=r(792),i=r(313),a=function(e,t){return function(){return"function"==typeof arguments[0]&&(arguments[0]=(0,i.M2)(arguments[0],t)),e(...arguments)}},s=e=>{n.Z.setTimeout=a(e.setTimeout,"at setTimeout callback function"),n.Z.clearTimeout=a(e.clearTimeout),n.Z.setInterval=a(e.setInterval,"at setInterval callback function"),n.Z.clearInterval=a(e.clearInterval),"game"===o.Z.runningType&&(n.Z.requestAnimationFrame=a(e.requestAnimationFrame,"at requestAnimationFrame callback function"),n.Z.cancelAnimationFrame=a(e.cancelAnimationFrame))}},313:(e,t,r)=>{r.d(t,{Em:()=>c,M2:()=>s,Ue:()=>u,sK:()=>a,yH:()=>l});var n=r(835),o=r(792),i=r(593),a=function(e,t,r){try{var a;if(o.Z.name===n.m.GAME)a=i.Z.RunType.GAME;else if(o.Z.name===n.m.GAME_OPEN_DATA)a=i.Z.RunType.GAME_SUBCONTEXT;else if(o.Z.name===n.m.APP)a=i.Z.RunType.APP;else if(o.Z.name.startsWith(n.D.GAME_PLUGIN))a=i.Z.RunType.GAME_SUBCONTEXT;else if(o.Z.name===n.m.APP_RENDER)a=i.Z.RunType.APP_SUBCONTEXT;else{if(o.Z.name!==n.m.APP_XRFRAME_RENDER)throw new Error("unknown context");a=i.Z.RunType.APP_SUBCONTEXT}void 0!==r?i.Z.thirdErrorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!0,promise:r}):i.Z.thirdErrorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.thirdErrorReport: ",e.message)}};function s(e,t){return function(){var r;try{"function"==typeof e&&(r=e.apply(e,arguments))}catch(e){a(e,t)}return r}}function l(e,t,r){var a="";if(o.Z.name===n.m.APP_RENDER?a="appSubContextSDKScriptError":"game"===o.Z.runningType&&(a="gameSubContextSDKScriptError"),"function"==typeof i.Z.thirdErrorReport)try{void 0!==r?i.Z.errorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!0,promise:r}):i.Z.errorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.errorReport: ",e.message)}else{var s=`${a}\n${t?`${e.message};${t}`:e.message}\n${e.stack}`;"undefined"!=typeof console&&console.error(s)}}function u(e,t){return function(){try{return e.apply(e,arguments)}catch(e){if(e.message,e.stack,"[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;l(e,t)}return}}}function c(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}},320:(e,t,r)=>{r.d(t,{Bs:()=>n,YF:()=>a});var n=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}},o=!1,i=[],a=e=>{i.push(e),o||(o=!0,Promise.resolve().then((()=>{for(var e=0;e<i.length;++e)if("function"==typeof i[e])try{i[e]()}catch(e){throw s.error("[system] Error: nextMicroTaskCallback occur fatal error: ",e),console.error("[system] Error: nextMicroTaskCallback occur fatal error: ",e),e}o=!1,i.length=0})))}},888:e=>{e.exports=_.asyncToGenerator}},r={};function g(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,g),o.exports}g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var r in t)g.o(t,r)&&!g.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var v=g(10);x=v})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{callMiniProgramOrPluginFunction:()=>f,callSystemFunction:()=>d,callThirdPartyFunction:()=>h,convertStack:()=>o,endSystemFunctionCall:()=>c,findCurrentSource:()=>l,startSystemFunctionCall:()=>u,surroundThirdByTryCatch:()=>v,wrapMiniProgramOrPluginFunction:()=>_,wrapSystemFunction:()=>p,wrapThirdPartyFunction:()=>g,wrapperStack:()=>n});var r=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,n=[];function o(e){if(!e||e.__wxOriginalStack__)return!1;var t=e.stack;if(void 0===t)return!1;for(var r=t,o=n.length-1,i=0;i>=0&&o>=0;){var s=r.length,l=0;for(var u in a)if(a[u]){var c=r.indexOf(a[u],i);c<0||s<=c||(s=c,l=a[u].length)}if(s>=r.length)break;var d=`at <${n[o--].description}>`;r=r.slice(0,s)+d+r.slice(s+l),i=s+d.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:r,writable:!0,enumerable:!0,configurable:!0}}),!0}var a={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function s(e){var t=((new Error).stack||"").match(/.+/gm),n="",o=0;t&&t.forEach((e=>{if(r.test(e)&&2===(o+=1)){var t=e.match(/^(\s*)at /),i=t?t[1].length:0;return n=e.slice(i),!1}return!0})),a[e]=n}function l(){for(var e="",t=n.length-1;t>=0;t--)n[t].pluginAppId&&(e=n[t].pluginAppId);return e}var u=e=>{null===a.wrapSystemFunction&&(a.wrapSystemFunction="",p("","",s)("wrapSystemFunction")),n.push({description:e})},c=()=>{n.pop()};function d(e,t,r,u,c,d=!1){var f;null===a.wrapSystemFunction&&(a.wrapSystemFunction="",p("","",s)("wrapSystemFunction")),n.push({description:t});try{f=r.apply(u,c)}catch(t){if(o(t)){if("AppServiceSdkKnownError"===t.type)throw n.pop(),t;if("ThirdScriptError"===t.type){var h=l();i.thirdErrorReport({error:t,source:h,triggerErrorCallback:!d})}else i.errorReport({key:e,error:t,triggerErrorCallback:!d})}if(d)throw n.pop(),t}return n.pop(),f}function p(e,t,r,n=!1){return function(...o){return d(e,t,r,this,o,n)}}function f(e,t,r,l,u,c=!1){var d;null===a.wrapMiniProgramOrPluginFunction&&(a.wrapMiniProgramOrPluginFunction="",_("","",s)("wrapMiniProgramOrPluginFunction")),n.push({description:t,pluginAppId:e});try{d=r.apply(l,u)}catch(t){if(o(t)&&i.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!c}),c)throw n.pop(),t}return n.pop(),d}function h(e,t,r,n,o=!1){return f(l(),e,t,r,n,o)}function _(e,t,r,n=!1){return function(...o){return f(e,t,r,this,o,n)}}function g(e,t,r=!1){return function(...n){return f(l(),e,t,this,n,r)}}function v(e,t){var r=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),n=r?r[1]:"",o=e||function(){};return function(...e){return f(l(),n,o,o,e,!1)}}N=t})(),(()=>{var e={426:e=>{function t(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=e.apply(r,n);function s(e){t(a,o,i,s,l,"next",e)}function l(e){t(a,o,i,s,l,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},668:(e,t,r)=>{"use strict";r.d(t,{V1:()=>F,V3:()=>Ge,j:()=>pe,m:()=>j});var n=r(426),o=r.n(n),i=Object.create,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,d=(e,t)=>()=>(e&&(t=e(e=0)),t),p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),f=(e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})},h=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t){var o=function(o){!c.call(e,o)&&o!==r&&a(e,o,{get:()=>t[o],enumerable:!(n=s(t,o))||n.enumerable})};for(var i of l(t))o(i)}return e},_=(e,t,r)=>(r=null!=e?i(u(e)):{},h(!t&&e&&e.__esModule?r:a(r,"default",{value:e,enumerable:!0}),e)),g=d((()=>{})),v=p((e=>{g();var t=[0,255,65535,16777215,4294967295];function r(e,t,r,n,o){var i;for(i=0;i<o;i++)r[n+i]=e[t+i]}function n(e,t,r,n){var o;for(o=0;o<n;o++)e[t+o]=e[t-r+o]}function o(e){this.array=e,this.pos=0}o.prototype.readUncompressedLength=function(){for(var e,t,r=0,n=0;n<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<n>>>n!==t)return-1;if(r|=t<<n,e<128)return r;n+=7}return-1},o.prototype.uncompressToBuffer=function(e){for(var o,i,a,s,l=this.array,u=l.length,c=this.pos,d=0;c<l.length;)if(o=l[c],c+=1,0==(3&o)){if((i=1+(o>>>2))>60){if(c+3>=u)return!1;a=i-60,i=1+((i=l[c]+(l[c+1]<<8)+(l[c+2]<<16)+(l[c+3]<<24))&t[a]),c+=a}if(c+i>u)return!1;r(l,c,e,d,i),c+=i,d+=i}else{switch(3&o){case 1:i=4+(o>>>2&7),s=l[c]+(o>>>5<<8),c+=1;break;case 2:if(c+1>=u)return!1;i=1+(o>>>2),s=l[c]+(l[c+1]<<8),c+=2;break;case 3:if(c+3>=u)return!1;i=1+(o>>>2),s=l[c]+(l[c+1]<<8)+(l[c+2]<<16)+(l[c+3]<<24),c+=4}if(0===s||s>d)return!1;n(e,d,s,i),d+=i}return!0},e.SnappyDecompressor=o})),m=p((e=>{g();var t=new Array(15);function r(e,t){return 506832829*e>>>t}function n(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function o(e,t,r){return e[t]===e[r]&&e[t+1]===e[r+1]&&e[t+2]===e[r+2]&&e[t+3]===e[r+3]}function i(e,t,r,n,o){return r<=60?(n[o]=r-1<<2,o+=1):r<256?(n[o]=240,n[o+1]=r-1,o+=2):(n[o]=244,n[o+1]=r-1&255,n[o+2]=r-1>>>8,o+=3),function(e,t,r,n,o){var i;for(i=0;i<o;i++)r[n+i]=e[t+i]}(e,t,n,o,r),o+r}function a(e,t,r,n){return n<12&&r<2048?(e[t]=1+(n-4<<2)+(r>>>8<<5),e[t+1]=255&r,t+2):(e[t]=2+(n-1<<2),e[t+1]=255&r,e[t+2]=r>>>8,t+3)}function s(e,t,r,n){for(;n>=68;)t=a(e,t,r,64),n-=64;return n>64&&(t=a(e,t,r,60),n-=60),a(e,t,r,n)}function l(e,a,l,u,c){for(var d=1;1<<d<=l&&d<=14;)d+=1;var p=32-(d-=1);typeof t[d]>"u"&&(t[d]=new Uint16Array(1<<d));var f,h=t[d];for(f=0;f<h.length;f++)h[f]=0;var _,g,v,m,y,b,w,A,E,I,S=a+l,C=a,T=a,O=!0;if(l>=15)for(_=S-15,v=r(n(e,a+=1),p);O;){b=32,m=a;do{if(g=v,w=b>>>5,b+=1,m=(a=m)+w,a>_){O=!1;break}v=r(n(e,m),p),y=C+h[g],h[g]=a-C}while(!o(e,a,y));if(!O)break;c=i(e,T,a-T,u,c);do{for(A=a,E=4;a+E<S&&e[a+E]===e[y+E];)E+=1;if(a+=E,c=s(u,c,A-y,E),T=a,a>=_){O=!1;break}h[r(n(e,a-1),p)]=a-1-C,y=C+h[I=r(n(e,a),p)],h[I]=a-C}while(o(e,a,y));if(!O)break;v=r(n(e,a+=1),p)}return T<S&&(c=i(e,T,S-T,u,c)),c}function u(e){this.array=e}u.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},u.prototype.compressToBuffer=function(e){var t,r=this.array,n=r.length,o=0,i=0;for(i=function(e,t,r){do{t[r]=127&e,(e>>>=7)>0&&(t[r]+=128),r+=1}while(e>0);return r}(n,e,i);o<n;)i=l(r,o,t=Math.min(n-o,65536),e,i),o+=t;return i},e.SnappyCompressor=u})),y=p((e=>{function t(){return"object"==typeof process&&"object"==typeof process.versions&&typeof process.versions.node<"u"}function r(e){return e instanceof Uint8Array&&(!t()||!Buffer.isBuffer(e))}function n(e){return e instanceof ArrayBuffer}function o(e){return!!t()&&Buffer.isBuffer(e)}g();var i=v().SnappyDecompressor,a=m().SnappyCompressor,s="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";e.uncompress=function(e,t){if(!r(e)&&!n(e)&&!o(e))throw new TypeError(s);var a=!1,l=!1;r(e)?a=!0:n(e)&&(l=!0,e=new Uint8Array(e));var u,c,d=new i(e),p=d.readUncompressedLength();if(-1===p)throw new Error("Invalid Snappy bitstream");if(p>t)throw new Error(`The uncompressed length of ${p} is too big, expect at most ${t}`);if(a){if(u=new Uint8Array(p),!d.uncompressToBuffer(u))throw new Error("Invalid Snappy bitstream")}else if(l){if(u=new ArrayBuffer(p),c=new Uint8Array(u),!d.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(u=Buffer.alloc(p),!d.uncompressToBuffer(u))throw new Error("Invalid Snappy bitstream");return u},e.compress=function(e){if(!r(e)&&!n(e)&&!o(e))throw new TypeError(s);var t=!1,i=!1;r(e)?t=!0:n(e)&&(i=!0,e=new Uint8Array(e));var l,u,c,d=new a(e),p=d.maxCompressedLength();if(t?(l=new Uint8Array(p),c=d.compressToBuffer(l)):i?(l=new ArrayBuffer(p),u=new Uint8Array(l),c=d.compressToBuffer(u)):(l=Buffer.alloc(p),c=d.compressToBuffer(l)),!l.slice){var f=new Uint8Array(Array.prototype.slice.call(l,0,c));if(t)return f;if(i)return f.buffer;throw new Error("Not implemented")}return l.slice(0,c)}})),b=p(((e,t)=>{g(),t.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))}})),w=p((e=>{g();var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};var r,n=new Array(64),o=new Array(123);for(r=0;r<64;)o[n[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(e,t,r){for(var o,i=null,a=[],s=0,l=0;t<r;){var u=e[t++];switch(l){case 0:a[s++]=n[u>>2],o=(3&u)<<4,l=1;break;case 1:a[s++]=n[o|u>>4],o=(15&u)<<2,l=2;break;case 2:a[s++]=n[o|u>>6],a[s++]=n[63&u],l=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=n[o],a[s++]=61,1===l&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var i="invalid encoding";t.decode=function(e,t,r){for(var n,a=r,s=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&s>1)break;if(void 0===(u=o[u]))throw Error(i);switch(s){case 0:n=u,s=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:t[r++]=(3&n)<<6|u,s=0}}if(1===s)throw Error(i);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}})),A=p(((e,t)=>{function r(){this._listeners={}}g(),t.exports=r,r.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}})),E=p(((e,t)=>{function r(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,o),e.readFloatLE=r.bind(null,i),e.readFloatBE=r.bind(null,a)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=n*Math.pow(2,-l))>>>0,o,i+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function r(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),s=2*(a>>31)+1,l=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===l?u?NaN:s*(1/0):0===l?5e-324*s*u:s*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=r.bind(null,i,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function n(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function o(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}g(),t.exports=r(r)})),I=p(((e,t)=>{function r(e){try{var t=eval("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}g(),t.exports=r})),S=p((e=>{g();var t=e;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},t.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}})),C=p(((e,t)=>{g(),t.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}})),T=p(((e,t)=>{g(),t.exports=n;var r=O();function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var i=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new n(r,i)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(r.isString(e)){if(!r.Long)return n.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):o},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===i?o:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}})),O=p((e=>{g();var t=e;function n(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)(void 0===e[n[o]]||!r)&&(e[n[o]]=t[n[o]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:()=>e,set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}t.asPromise=b(),t.base64=w(),t.EventEmitter=A(),t.float=E(),t.inquire=I(),t.utf8=S(),t.pool=C(),t.LongBits=T(),t.isNode=Boolean(typeof r.g<"u"&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),t.global=t.isNode&&r.g||typeof window<"u"&&window||typeof self<"u"&&self||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=o,t.ProtocolError=o("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),x=p(((e,t)=>{g(),t.exports=c;var r,n=O(),o=n.LongBits,i=n.base64,a=n.utf8;function s(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function c(){this.len=0,this.head=new s(l,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(c.create=function(){return new r})()}:function(){return new c}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function _(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}c.create=d(),c.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(c.alloc=n.pool(c.alloc,n.Array.prototype.subarray)),c.prototype._push=function(e,t,r){return this.tail=this.tail.next=new s(e,t,r),this.len+=t,this},f.prototype=Object.create(s.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},c.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},c.prototype.int32=function(e){return e<0?this._push(h,10,o.fromNumber(e)):this.uint32(e)},c.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},c.prototype.uint64=function(e){var t=o.from(e);return this._push(h,t.length(),t)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(h,t.length(),t)},c.prototype.bool=function(e){return this._push(p,1,e?1:0)},c.prototype.fixed32=function(e){return this._push(_,4,e>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(e){var t=o.from(e);return this._push(_,4,t.lo)._push(_,4,t.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},c.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var v=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};c.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=c.alloc(t=i.length(e));i.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},c.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},c.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new s(l,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(l,0,0),this.len=0),this},c.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},c.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},c._configure=function(e){r=e,c.create=d(),r._configure()}})),N=p(((e,t)=>{g(),t.exports=o;var r=x();(o.prototype=Object.create(r.prototype)).constructor=o;var n=O();function o(){r.call(this)}function i(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},o.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},o._configure()})),R=p(((e,t)=>{g(),t.exports=s;var r,n=O(),o=n.LongBits,i=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function s(e){this.buf=e,this.pos=0,this.len=e.length}var l,u=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer")},c=function(){return n.Buffer?function(e){return(s.create=function(e){return n.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}s.create=c(),s.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,s.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},s.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},s.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},s._configure=function(e){r=e,s.create=c(),r._configure();var t=n.Long?"toLong":"toNumber";n.merge(s.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}})),P=p(((e,t)=>{g(),t.exports=o;var r=R();(o.prototype=Object.create(r.prototype)).constructor=o;var n=O();function o(e){r.call(this,e)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()})),D=p(((e,t)=>{g(),t.exports=n;var r=O();function n(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,n,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,n,o,i);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof o))try{r=o[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}})),L=p((e=>{g(),e.Service=D()})),B=p(((e,t)=>{g(),t.exports={}})),k=p((e=>{g();var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=x(),t.BufferWriter=N(),t.Reader=R(),t.BufferReader=P(),t.util=O(),t.rpc=L(),t.roots=B(),t.configure=r,r()})),M=p(((e,t)=>{g(),t.exports=k()}));g();var F={};f(F,{decode:()=>$e,decodeRequest:()=>We,decodeResponse:()=>qe,decodeStdPrivResponse:()=>He,encode:()=>Be,encodeRequest:()=>ke,encodeResponse:()=>Me,encodeStdPrivRequest:()=>Fe}),g(),g(),g();var j=(U=j||{},U.pb="PB",U.json="JSON",U),U;function $(e){return"number"==typeof e}function W(e){return e instanceof Uint8Array}function q(e,t,r){var n=t?t.byteLength:r||65536;if(4095&n||n<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return t=t||new e(new ArrayBuffer(n))}function H(e,t,r,n,o){var i=e.length-t,a=i<o?i:o;return e.set(r.subarray(n,n+a),t),a}g(),g();var G=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),e})(),Q=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}}),e})(),z=(()=>{var e,t,r,n,o,i,a=!1;function s(r,n){var o=e[(t[r]+t[n])%255];return(0===r||0===n)&&(o=0),o}function l(){function l(r){var n,o,i;for(o=i=function(r){var n=e[255-t[r]];return 0===r&&(n=0),n}(r),n=0;n<4;n++)i^=o=255&(o<<1|o>>>7);return i^=99}a||function(){e=[],t=[];var r,n,o=1;for(r=0;r<255;r++)e[r]=o,n=128&o,o<<=1,o&=255,128===n&&(o^=27),o^=e[r],t[e[r]]=r;e[255]=e[0],t[0]=0,a=!0}(),r=[],n=[],o=[[],[],[],[]],i=[[],[],[],[]];for(var u=0;u<256;u++){var c=l(u);r[u]=c,n[c]=u,o[0][u]=s(2,c)<<24|c<<16|c<<8|s(3,c),i[0][c]=s(14,u)<<24|s(9,u)<<16|s(13,u)<<8|s(11,u);for(var d=1;d<4;d++)o[d][u]=o[d-1][u]>>>8|o[d-1][u]<<24,i[d][c]=i[d-1][c]>>>8|i[d-1][c]<<24}}var u=function(e,t){l();var a=new Uint32Array(t);a.set(r,512),a.set(n,768);for(var s=0;s<4;s++)a.set(o[s],4096+1024*s>>2),a.set(i[s],8192+1024*s>>2);var u=function(e,t,r){var n=0,o=0,i=0,a=0,s=0,l=0,u=0,c=0,d=0,p=0,f=0,h=0,_=0,g=0,v=0,m=0,y=0,b=new e.Uint32Array(r),w=new e.Uint8Array(r);function A(e,t,r,s,l,u,c,d){t|=0,s|=0,l|=0,u|=0,c|=0,d|=0;var p,f,h,_=0,g=0,v=0,m=0,y=0;for(p=1024|(r|=0),f=2048|r,h=3072|r,l^=b[(0|(e|=0))>>2],u^=b[(4|e)>>2],c^=b[(8|e)>>2],d^=b[(12|e)>>2],y=16;(0|y)<=s<<4;y=y+16|0)_=b[(r|l>>22&1020)>>2]^b[(p|u>>14&1020)>>2]^b[(f|c>>6&1020)>>2]^b[(h|d<<2&1020)>>2]^b[(e|y|0)>>2],g=b[(r|u>>22&1020)>>2]^b[(p|c>>14&1020)>>2]^b[(f|d>>6&1020)>>2]^b[(h|l<<2&1020)>>2]^b[(e|y|4)>>2],v=b[(r|c>>22&1020)>>2]^b[(p|d>>14&1020)>>2]^b[(f|l>>6&1020)>>2]^b[(h|u<<2&1020)>>2]^b[(e|y|8)>>2],m=b[(r|d>>22&1020)>>2]^b[(p|l>>14&1020)>>2]^b[(f|u>>6&1020)>>2]^b[(h|c<<2&1020)>>2]^b[(e|y|12)>>2],l=_,u=g,c=v,d=m;n=b[(t|l>>22&1020)>>2]<<24^b[(t|u>>14&1020)>>2]<<16^b[(t|c>>6&1020)>>2]<<8^b[(t|d<<2&1020)>>2]^b[(e|y|0)>>2],o=b[(t|u>>22&1020)>>2]<<24^b[(t|c>>14&1020)>>2]<<16^b[(t|d>>6&1020)>>2]<<8^b[(t|l<<2&1020)>>2]^b[(e|y|4)>>2],i=b[(t|c>>22&1020)>>2]<<24^b[(t|d>>14&1020)>>2]<<16^b[(t|l>>6&1020)>>2]<<8^b[(t|u<<2&1020)>>2]^b[(e|y|8)>>2],a=b[(t|d>>22&1020)>>2]<<24^b[(t|l>>14&1020)>>2]<<16^b[(t|u>>6&1020)>>2]<<8^b[(t|c<<2&1020)>>2]^b[(e|y|12)>>2]}function E(e,t,r,d){A(0,2048,4096,y,s^(e|=0),l^(t|=0),u^(r|=0),c^(d|=0)),s=n,l=o,u=i,c=a}var I=[,,E,function(e,t,r,d){var p;A(1024,3072,8192,y,e|=0,d|=0,r|=0,t|=0),p=o,o=a,a=p,n^=s,o^=l,i^=u,a^=c,s=e,l=t,u=r,c=d},,,,],S=[E];return{set_rounds:function(e){y=e|=0},set_state:function(e,t,r,s){n=e|=0,o=t|=0,i=r|=0,a=s|=0},set_iv:function(e,t,r,n){s=e|=0,l=t|=0,u=r|=0,c=n|=0},set_nonce:function(e,t,r,n){d=e|=0,p=t|=0,f=r|=0,h=n|=0},set_mask:function(e,t,r,n){_=e|=0,g=t|=0,v=r|=0,m=n|=0},set_counter:function(e,t,r,n){h=~m&h|m&(n|=0),f=~v&f|v&(r|=0),p=~g&p|g&(t|=0),d=~_&d|_&(e|=0)},get_state:function(e){return 15&(e|=0)?-1:(w[0|e]=n>>>24,w[1|e]=n>>>16&255,w[2|e]=n>>>8&255,w[3|e]=255&n,w[4|e]=o>>>24,w[5|e]=o>>>16&255,w[6|e]=o>>>8&255,w[7|e]=255&o,w[8|e]=i>>>24,w[9|e]=i>>>16&255,w[10|e]=i>>>8&255,w[11|e]=255&i,w[12|e]=a>>>24,w[13|e]=a>>>16&255,w[14|e]=a>>>8&255,w[15|e]=255&a,16)},get_iv:function(e){return 15&(e|=0)?-1:(w[0|e]=s>>>24,w[1|e]=s>>>16&255,w[2|e]=s>>>8&255,w[3|e]=255&s,w[4|e]=l>>>24,w[5|e]=l>>>16&255,w[6|e]=l>>>8&255,w[7|e]=255&l,w[8|e]=u>>>24,w[9|e]=u>>>16&255,w[10|e]=u>>>8&255,w[11|e]=255&u,w[12|e]=c>>>24,w[13|e]=c>>>16&255,w[14|e]=c>>>8&255,w[15|e]=255&c,16)},cipher:function(e,t,r){e|=0,r|=0;var s=0;if(15&(t|=0))return-1;for(;(0|r)>=16;)I[7&e](w[0|t]<<24|w[1|t]<<16|w[2|t]<<8|w[3|t],w[4|t]<<24|w[5|t]<<16|w[6|t]<<8|w[7|t],w[8|t]<<24|w[9|t]<<16|w[10|t]<<8|w[11|t],w[12|t]<<24|w[13|t]<<16|w[14|t]<<8|w[15|t]),w[0|t]=n>>>24,w[1|t]=n>>>16&255,w[2|t]=n>>>8&255,w[3|t]=255&n,w[4|t]=o>>>24,w[5|t]=o>>>16&255,w[6|t]=o>>>8&255,w[7|t]=255&o,w[8|t]=i>>>24,w[9|t]=i>>>16&255,w[10|t]=i>>>8&255,w[11|t]=255&i,w[12|t]=a>>>24,w[13|t]=a>>>16&255,w[14|t]=a>>>8&255,w[15|t]=255&a,s=s+16|0,t=t+16|0,r=r-16|0;return 0|s},mac:function(e,t,r){e|=0,r|=0;var n=0;if(15&(t|=0))return-1;for(;(0|r)>=16;)S[1&e](w[0|t]<<24|w[1|t]<<16|w[2|t]<<8|w[3|t],w[4|t]<<24|w[5|t]<<16|w[6|t]<<8|w[7|t],w[8|t]<<24|w[9|t]<<16|w[10|t]<<8|w[11|t],w[12|t]<<24|w[13|t]<<16|w[14|t]<<8|w[15|t]),n=n+16|0,t=t+16|0,r=r-16|0;return 0|n}}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},0,t);return u.set_key=function(e,t,n,o,s,l,c,d,p){var f=a.subarray(0,60),h=a.subarray(256,316);f.set([t,n,o,s,l,c,d,p]);for(var _=e,g=1;_<4*e+28;_++){var v=f[_-1];(_%e==0||8===e&&_%e==4)&&(v=r[v>>>24]<<24^r[v>>>16&255]<<16^r[v>>>8&255]<<8^r[255&v]),_%e==0&&(v=v<<8^v>>>24^g<<24,g=g<<1^(128&g?27:0)),f[_]=f[_-e]^v}for(var m=0;m<_;m+=4)for(var y=0;y<4;y++){v=f[_-(4+m)+(4-y)%4];h[m+y]=m<4||m>=_-4?v:i[0][r[v>>>24]]^i[1][r[v>>>16&255]]^i[2][r[v>>>8&255]]^i[3][r[255&v]]}u.set_rounds(e+5)},u};return u.ENC={CBC:2},u.DEC={CBC:3},u.MAC={CBC:0},u.HEAP_DATA=16384,u})(),K=new Uint8Array(1048576),Y=z(null,K.buffer),V=class{constructor(e,t,r,n,o){this.nonce=null,this.counter=0,this.counterSize=0,this.heap=q(Uint8Array,n).subarray(z.HEAP_DATA),this.asm=o||z(null,this.heap.buffer),this.mode=null,this.key=null,this.AES_reset(e,t,r)}AES_set_key(e){if(void 0!==e){if(!W(e))throw new TypeError("unexpected key type");var t=e.length;if(16!==t&&24!==t&&32!==t)throw new G("illegal key size");var r=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(t>>2,r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12),t>16?r.getUint32(16):0,t>16?r.getUint32(20):0,t>24?r.getUint32(24):0,t>24?r.getUint32(28):0),this.key=e}else if(!this.key)throw new Error("key is required")}AES_CTR_set_options(e,t,r){if(void 0!==r){if(r<8||r>48)throw new G("illegal counter size");this.counterSize=r;var n=Math.pow(2,r)-1;this.asm.set_mask(0,0,n/4294967296|0,0|n)}else this.counterSize=r=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===e)throw new Error("nonce is required");if(!W(e))throw new TypeError("unexpected nonce type");var o=e.length;if(!o||o>16)throw new G("illegal nonce size");this.nonce=e;var i=new DataView(new ArrayBuffer(16));if(new Uint8Array(i.buffer).set(e),this.asm.set_nonce(i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)),void 0!==t){if(!$(t))throw new TypeError("unexpected counter type");if(t<0||t>=Math.pow(2,r))throw new G("illegal counter value");this.counter=t,this.asm.set_counter(0,0,t/4294967296|0,0|t)}else this.counter=0}AES_set_iv(e){if(void 0!==e){if(!W(e))throw new TypeError("unexpected iv type");if(16!==e.length)throw new G("illegal iv size");var t=new DataView(e.buffer,e.byteOffset,e.byteLength);this.iv=e,this.asm.set_iv(t.getUint32(0),t.getUint32(4),t.getUint32(8),t.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}AES_set_padding(e){this.padding=void 0===e||!!e}AES_reset(e,t,r){return this.result=null,this.pos=0,this.len=0,this.AES_set_key(e),this.AES_set_iv(t),this.AES_set_padding(r),this}AES_Encrypt_process(e){if(!W(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,r=this.heap,n=z.ENC[this.mode],o=z.HEAP_DATA,i=this.pos,a=this.len,s=0,l=e.length||0,u=0,c=0,d=new Uint8Array(a+l&-16);l>0;)a+=c=H(r,i+a,e,s,l),s+=c,l-=c,(c=t.cipher(n,o+i,a))&&d.set(r.subarray(i,i+c),u),u+=c,c<a?(i+=c,a-=c):(i=0,a=0);return this.result=d,this.pos=i,this.len=a,this}AES_Encrypt_finish(e){var t=null,r=0;void 0!==e&&(r=(t=this.AES_Encrypt_process(e).result).length);var n=this.asm,o=this.heap,i=z.ENC[this.mode],a=z.HEAP_DATA,s=this.pos,l=this.len,u=16-l%16,c=l;if(this.hasOwnProperty("padding")){if(this.padding){for(var d=0;d<u;++d)o[s+l+d]=u;c=l+=u}else if(l%16)throw new G("data length must be a multiple of the block size")}else l+=u;var p=new Uint8Array(r+c);return r&&p.set(t),l&&n.cipher(i,a+s,l),c&&p.set(o.subarray(s,s+c),r),this.result=p,this.pos=0,this.len=0,this}AES_Decrypt_process(e){if(!W(e))throw new TypeError("data isn't of expected type");var t=this.asm,r=this.heap,n=z.DEC[this.mode],o=z.HEAP_DATA,i=this.pos,a=this.len,s=0,l=e.length||0,u=0,c=a+l&-16,d=0,p=0;this.padding&&(c-=d=a+l-c||16);for(var f=new Uint8Array(c);l>0;)a+=p=H(r,i+a,e,s,l),s+=p,l-=p,(p=t.cipher(n,o+i,a-(l?0:d)))&&f.set(r.subarray(i,i+p),u),u+=p,p<a?(i+=p,a-=p):(i=0,a=0);return this.result=f,this.pos=i,this.len=a,this}AES_Decrypt_finish(e){var t=null,r=0;void 0!==e&&(r=(t=this.AES_Decrypt_process(e).result).length);var n=this.asm,o=this.heap,i=z.DEC[this.mode],a=z.HEAP_DATA,s=this.pos,l=this.len,u=l;if(l>0){if(l%16){if(this.hasOwnProperty("padding"))throw new G("data length must be a multiple of the block size");l+=16-l%16}if(n.cipher(i,a+s,l),this.hasOwnProperty("padding")&&this.padding){var c=o[s+u-1];if(c<1||c>16||c>u)throw new Q("bad padding");for(var d=0,p=c;p>1;p--)d|=c^o[s+u-p];if(d)throw new Q("bad padding");u-=c}}var f=new Uint8Array(r+u);return r>0&&f.set(t),u>0&&f.set(o.subarray(s,s+u),r),this.result=f,this.pos=0,this.len=0,this}},J=(()=>{class e extends V{constructor(e,t=null,r=!0,n,o){super(e,t,r,n,o),this.mode="CBC",this.BLOCK_SIZE=16}encrypt(e){return this.AES_Encrypt_finish(e)}decrypt(e){return this.AES_Decrypt_finish(e)}}return e.encrypt=Z,e.decrypt=ee,e})(),X;function Z(e,t,r,n){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new J(t,n,r,K,Y).encrypt(e).result}function ee(e,t,r,n){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new J(t,n,r,K,Y).decrypt(e).result}function te(e){return new Promise(((t,r)=>{for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),i=0;i<n.length;i++)o[n.charCodeAt(i)]=i;var a=typeof a<"u"?a:{},s=Object.assign({},a);"object"==typeof process&&"object"==typeof process.versions&&process.versions.node,a.print||console.log.bind(console);var l=a.printErr||console.warn.bind(console);Object.assign(a,s),s=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&a.wasmBinary,a.noExitRuntime,"object"!=typeof e&&v("[WACloudCrypto] no native wasm support detected");var u,c=!1;a.INITIAL_MEMORY;var d,p=[],f=[],h=[];var _=0,g=null;function v(t){a.onAbort&&a.onAbort(t),l(t="Aborted("+t+")"),c=!0,t+=". Build with -sASSERTIONS for more info.";var n=new e.RuntimeError(t);r(n)}var m={env:{STACKTOP:0}};function y(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?w(r)():w(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(a)}}var b=[];function w(e){var t=b[e];return t||(e>=b.length&&(b.length=e+1),b[e]=t=d.get(e)),t}var A,E={};function I(e){function t(){A||(A=!0,a.calledRun=!0,!c&&(y(f),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),h.unshift(e);var e;y(h)}()))}_>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),p.unshift(e);var e;y(p)}(),_>0)||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t())}if(function(){var r={a:E};function n(e,r){var n=e.exports;a.asm=n,u=a.asm.a,a.memory=u,function(e){a.HEAP8=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=new Int32Array(e),a.HEAPU8=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}(u.buffer),d=a.asm.g,function(e){f.unshift(e)}(a.asm.b),function(e){if(_--,a.monitorRunDependencies&&a.monitorRunDependencies(_),0==_&&g){var t=g;g=null,t()}}(),t(a)}function i(e){n(e.instance)}function s(t){return e.instantiate(function(e){var t,r,n,i,a,s=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<l;t+=4)r=o[e.charCodeAt(t)],n=o[e.charCodeAt(t+1)],i=o[e.charCodeAt(t+2)],a=o[e.charCodeAt(t+3)],d[u++]=r<<2|n>>4,d[u++]=(15&n)<<4|i>>2,d[u++]=(3&i)<<6|63&a;return c}("AGFzbQEAAAABIgVgA39/fwBgBH9/f38AYAAAYAV/f39/fwBgBn9/f39/fwADBwYBAgADBAAEBQFwAQEBBQYBAYABgAEGCQF/AUHAzMACCwcdBwFhAgABYgABAWMAAgFkAAUBZQAEAWYAAwFnAQAK5zoG/hIBCn8gACgCBCIFQRBqIQQgBSgCDCACKAAMcyEGIAUoAgggAigACHMhByAFKAIEIAIoAARzIQggBSgCACACKAAAcyECIAAoAgAhAAJ/IAFFBEAgAEEETgRAIABBAXYhCQNAIAhBFnZB/AdxQbAiaigCACAHQQ52QfwHcUGwGmooAgAgBkEGdkH8B3FBsBJqKAIAIAJB/wFxQQJ0QbAKaigCACAEKAIAc3NzcyIAQRZ2QfwHcUGwImooAgAgB0EWdkH8B3FBsCJqKAIAIAZBDnZB/AdxQbAaaigCACACQQZ2QfwHcUGwEmooAgAgCEH/AXFBAnRBsApqKAIAIAQoAgRzc3NzIgFBDnZB/AdxQbAaaigCACAGQRZ2QfwHcUGwImooAgAgAkEOdkH8B3FBsBpqKAIAIAhBBnZB/AdxQbASaigCACAHQf8BcUECdEGwCmooAgAgBCgCCHNzc3MiBUEGdkH8B3FBsBJqKAIAIAJBFnZB/AdxQbAiaigCACAIQQ52QfwHcUGwGmooAgAgB0EGdkH8B3FBsBJqKAIAIAZB/wFxQQJ0QbAKaigCACAEKAIMc3NzcyICQf8BcUECdEGwCmooAgAgBCgCHHNzc3MhBiACQRZ2QfwHcUGwImooAgAgAEEOdkH8B3FBsBpqKAIAIAFBBnZB/AdxQbASaigCACAFQf8BcUECdEGwCmooAgAgBCgCGHNzc3MhByAFQRZ2QfwHcUGwImooAgAgAkEOdkH8B3FBsBpqKAIAIABBBnZB/AdxQbASaigCACABQf8BcUECdEGwCmooAgAgBCgCFHNzc3MhCCABQRZ2QfwHcUGwImooAgAgBUEOdkH8B3FBsBpqKAIAIAJBBnZB/AdxQbASaigCACAAQf8BcUECdEGwCmooAgAgBCgCEHNzc3MhAiAEQSBqIQQgCUECSyEAIAlBAWshCSAADQALC0GwKiEFIAdBFnZB/AdxQbAiaigCACAGQQ52QfwHcUGwGmooAgAgAkEGdkH8B3FBsBJqKAIAIAhB/wFxQQJ0QbAKaigCACAEKAIEc3NzcyIAIQEgCEEWdkH8B3FBsCJqKAIAIAdBDnZB/AdxQbAaaigCACAGQQZ2QfwHcUGwEmooAgAgAkH/AXFBAnRBsApqKAIAIAQoAgBzc3NzIgkhCiACQRZ2QfwHcUGwImooAgAgCEEOdkH8B3FBsBpqKAIAIAdBBnZB/AdxQbASaigCACAGQf8BcUECdEGwCmooAgAgBCgCDHNzc3MiCyEMIAZBFnZB/AdxQbAiaigCACACQQ52QfwHcUGwGmooAgAgCEEGdkH8B3FBsBJqKAIAIAdB/wFxQQJ0QbAKaigCACAEKAIIc3NzcyINDAELIABBBE4EQCAAQQF2IQkDQCAIQRZ2QfwHcUGwxABqKAIAIAJBDnZB/AdxQbA8aigCACAGQQZ2QfwHcUGwNGooAgAgB0H/AXFBAnRBsCxqKAIAIAQoAghzc3NzIgBBFnZB/AdxQbDEAGooAgAgAkEWdkH8B3FBsMQAaigCACAGQQ52QfwHcUGwPGooAgAgB0EGdkH8B3FBsDRqKAIAIAhB/wFxQQJ0QbAsaigCACAEKAIEc3NzcyIBQQ52QfwHcUGwPGooAgAgBkEWdkH8B3FBsMQAaigCACAHQQ52QfwHcUGwPGooAgAgCEEGdkH8B3FBsDRqKAIAIAJB/wFxQQJ0QbAsaigCACAEKAIAc3NzcyIFQQZ2QfwHcUGwNGooAgAgB0EWdkH8B3FBsMQAaigCACAIQQ52QfwHcUGwPGooAgAgAkEGdkH8B3FBsDRqKAIAIAZB/wFxQQJ0QbAsaigCACAEKAIMc3NzcyICQf8BcUECdEGwLGooAgAgBCgCHHNzc3MhBiABQRZ2QfwHcUGwxABqKAIAIAVBDnZB/AdxQbA8aigCACACQQZ2QfwHcUGwNGooAgAgAEH/AXFBAnRBsCxqKAIAIAQoAhhzc3NzIQcgBUEWdkH8B3FBsMQAaigCACACQQ52QfwHcUGwPGooAgAgAEEGdkH8B3FBsDRqKAIAIAFB/wFxQQJ0QbAsaigCACAEKAIUc3NzcyEIIAJBFnZB/AdxQbDEAGooAgAgAEEOdkH8B3FBsDxqKAIAIAFBBnZB/AdxQbA0aigCACAFQf8BcUECdEGwLGooAgAgBCgCEHNzc3MhAiAEQSBqIQQgCUECSyEAIAlBAWshCSAADQALC0GwCCEFIAJBFnZB/AdxQbDEAGooAgAgBkEOdkH8B3FBsDxqKAIAIAdBBnZB/AdxQbA0aigCACAIQf8BcUECdEGwLGooAgAgBCgCBHNzc3MiCyEBIAhBFnZB/AdxQbDEAGooAgAgAkEOdkH8B3FBsDxqKAIAIAZBBnZB/AdxQbA0aigCACAHQf8BcUECdEGwLGooAgAgBCgCCHNzc3MiDSEKIAdBFnZB/AdxQbDEAGooAgAgCEEOdkH8B3FBsDxqKAIAIAJBBnZB/AdxQbA0aigCACAGQf8BcUECdEGwLGooAgAgBCgCDHNzc3MiACEMIAZBFnZB/AdxQbDEAGooAgAgB0EOdkH8B3FBsDxqKAIAIAhBBnZB/AdxQbA0aigCACACQf8BcUECdEGwLGooAgAgBCgCAHNzc3MiCQshAiAEKAIQIQYgBCgCFCEHIAQoAhghCCADIAQoAhwiBCAFIAxB/wFxai0AAHM6AAwgAyAIIAUgDUH/AXFqLQAAczoACCADIAcgBSABQf8BcWotAABzOgAEIAMgBiAFIAlB/wFxai0AAHM6AAAgAyAEIAUgCkEYdmotAABBGHRzQRh2OgAPIAMgCCAFIAtBGHZqLQAAQRh0c0EYdjoACyADIAcgBSACQRh2ai0AAEEYdHNBGHY6AAcgAyAGIAUgAEEYdmotAABBGHRzQRh2OgADIAMgBCAFIAFBEHZB/wFxai0AAEEQdHNBEHY6AA4gAyAEIAUgAkEIdkH/AXFqLQAAQQh0c0EIdjoADSADIAggBSAJQRB2Qf8BcWotAABBEHRzQRB2OgAKIAMgCCAFIABBCHZB/wFxai0AAEEIdHNBCHY6AAkgAyAHIAUgDEEQdkH/AXFqLQAAQRB0c0EQdjoABiADIAcgBSAKQQh2Qf8BcWotAABBCHRzQQh2OgAFIAMgBiAFIA1BEHZB/wFxai0AAEEQdHNBEHY6AAIgAyAGIAUgC0EIdkH/AXFqLQAAQQh0c0EIdjoAAQsDAAELpxYBBn8CQCAAAn9BCiACQYABRg0AGiACQYACRwRAIAJBwAFHDQJBDAwBC0EOCyIENgIAIAAgAEEIaiIDNgIEIAJBBXYhBUEAIQIDQCADIAJBAnQiBmogASAGaigAADYCACACQQFqIgIgBUcNAAsCQAJAAkAgBEEKaw4FAQMAAwIDCyAAIAAoAgggACgCHCIBQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHMiA0EBcyICNgIgIAAgAiAAKAIMcyICNgIkIAAgACgCECIGIAJzIgQ2AiggACAAKAIUIARzIgQ2AiwgACAAKAIYIgcgBHMiBTYCMCAAIAEgBXMiATYCNCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIANzIghBA3MiBTYCOCAAQUBrIAUgBnMiAzYCACAAIAIgBXMiBTYCPCAAIAMgB3MiBjYCSCAAIAMgBHM2AkQgACABIAZzIgI2AkwgACACQQh2Qf8BcUGwCGotAAAgAkEQdkH/AXFBsAhqLQAAQQh0ciACQRh2QbAIai0AAEEQdHIgAkH/AXFBsAhqLQAAQRh0ciAIcyIIQQdzIgI2AlAgACACIAVzIgU2AlQgACAEIAVzIgQ2AlwgACADIAVzNgJYIAAgASAEcyICNgJkIAAgBCAGczYCYCAAIAJBCHZB/wFxQbAIai0AACACQRB2Qf8BcUGwCGotAABBCHRyIAJBGHZBsAhqLQAAQRB0ciACQf8BcUGwCGotAABBGHRyIAhzIghBD3MiBjYCaCAAIAYgB3MiBzYCeCAAIAMgBnMiAzYCcCAAIAUgBnMiBTYCbCAAIAIgB3MiAjYCfCAAIAMgBHM2AnQgACACQQh2Qf8BcUGwCGotAAAgAkEQdkH/AXFBsAhqLQAAQQh0ciACQRh2QbAIai0AAEEQdHIgAkH/AXFBsAhqLQAAQRh0ciAIcyIGQR9zIgI2AoABIAAgAiAFcyICNgKEASAAIAEgAnMiATYClAEgACACIARzIgQ2AowBIAAgAiADcyIDNgKIASAAIAQgB3MiBTYCkAEgACABQQh2Qf8BcUGwCGotAAAgAUEQdkH/AXFBsAhqLQAAQQh0ciABQRh2QbAIai0AAEEQdHIgAUH/AXFBsAhqLQAAQRh0ciAGcyIGQT9zIgc2ApgBIAAgAiAHcyICNgKcASAAIAIgA3MiAzYCoAEgACADIARzIgQ2AqQBIAAgBCAFcyIFNgKoASAAIAEgBXMiATYCrAEgACABQQh2Qf8BcUGwCGotAAAgAUEQdkH/AXFBsAhqLQAAQQh0ciABQRh2QbAIai0AAEEQdHIgAUH/AXFBsAhqLQAAQRh0ciAGcyIGQf8AcyIHNgKwASAAIAIgB3MiAjYCtAEgACACIANzIgM2ArgBIAAgAyAEcyIENgK8ASAAIAQgBXMiBTYCwAEgACABIAVzIgE2AsQBIAAgAUEIdkH/AXFBsAhqLQAAIAFBEHZB/wFxQbAIai0AAEEIdHIgAUEYdkGwCGotAABBEHRyIAFB/wFxQbAIai0AAEEYdHIgBnNB/wFzIgY2AsgBIAAgAiAGcyICNgLMASAAIAIgA3MiAjYC0AEgACACIARzIgI2AtQBIAAgAiAFcyICNgLYASAAIAEgAnM2AtwBDwsgACAAKAIIIAAoAhQiAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRBAXMiAjYCGCAAIAIgACgCDHMiAjYCHCAAIAAoAhAgAnMiAzYCICAAIAEgA3MiATYCJCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBA3MiBTYCKCAAIAIgBXMiAjYCLCAAIAIgA3MiAzYCMCAAIAEgA3MiATYCNCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBB3MiBTYCOCAAIAIgBXMiAjYCPCAAQUBrIAIgA3MiAzYCACAAIAEgA3MiATYCRCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBD3MiBTYCSCAAIAIgBXMiAjYCTCAAIAIgA3MiAzYCUCAAIAEgA3MiATYCVCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBH3MiBTYCWCAAIAIgBXMiAjYCXCAAIAIgA3MiAzYCYCAAIAEgA3MiATYCZCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBP3MiBTYCaCAAIAIgBXMiAjYCbCAAIAIgA3MiAzYCcCAAIAEgA3MiATYCdCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRB/wBzIgU2AnggACACIAVzIgI2AnwgACACIANzIgM2AoABIAAgASADcyIBNgKEASAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRB/wFzIgU2AogBIAAgAiAFcyICNgKMASAAIAIgA3MiAzYCkAEgACABIANzIgE2ApQBIAAgAUEIdkH/AXFBsAhqLQAAIAFBEHZB/wFxQbAIai0AAEEIdHIgAUEYdkGwCGotAABBEHRyIAFB/wFxQbAIai0AAEEYdHIgBHMiBEHkAXMiBTYCmAEgACACIAVzIgI2ApwBIAAgAiADcyIDNgKgASAAIAEgA3MiATYCpAEgACABQQh2Qf8BcUGwCGotAAAgAUEQdkH/AXFBsAhqLQAAQQh0ciABQRh2QbAIai0AAEEQdHIgAUH/AXFBsAhqLQAAQRh0ciAEc0HSAXMiBDYCqAEgACACIARzIgI2AqwBIAAgAiADcyICNgKwASAAIAEgAnM2ArQBDwsgAygCACEBQQAhBANAIAMgAygCHCIAQQh2Qf8BcUGwCGotAAAgBEECdEGACGooAgAgAXNzIABBEHZB/wFxQbAIai0AAEEIdHMgAEEYdkGwCGotAABBEHRzIABB/wFxQbAIai0AAEEYdHMiATYCICADIAEgAygCBHMiAjYCJCADIAMoAgggAnMiAjYCKCADIAMoAgwgAnMiAjYCLCADIAMoAhAgAkH/AXFBsAhqLQAAcyACQQh2Qf8BcUGwCGotAABBCHRzIAJBEHZB/wFxQbAIai0AAEEQdHMgAkEYdkGwCGotAABBGHRzIgI2AjAgAyACIAMoAhRzIgI2AjQgAyADKAIYIAJzIgI2AjggAyAAIAJzNgI8IANBIGohAyAEQQFqIgRBB0cNAAsLC8IGARJ/IwBBEGsiBSQAIAFBAEoEQCACQQFqIRYgAkECaiEIIAJBA2ohCSACQQRqIQogAkEFaiELIAJBBmohDCACQQdqIQ0gAkEIaiEOIAJBCWohDyACQQpqIRAgAkELaiERIAJBDGohEiACQQ1qIRMgAkEOaiEUIAJBD2ohFQNAIABBASACIAUQACAEIAUtAAAgAy0AAHM6AAAgBCAFLQABIAMtAAFzOgABIAQgBS0AAiADLQACczoAAiAEIAUtAAMgAy0AA3M6AAMgBCAFLQAEIAMtAARzOgAEIAQgBS0ABSADLQAFczoABSAEIAUtAAYgAy0ABnM6AAYgBCAFLQAHIAMtAAdzOgAHIAQgBS0ACCADLQAIczoACCAEIAUtAAkgAy0ACXM6AAkgBCAFLQAKIAMtAApzOgAKIAQgBS0ACyADLQALczoACyAEIAUtAAwgAy0ADHM6AAwgBCAFLQANIAMtAA1zOgANIAQgBS0ADiADLQAOczoADiAEIAUtAA8gAy0AD3M6AA8gFSEGAkACQCACLQAPIgdB/wFHDQAgFUEAOgAAIBQhBiAULQAAIgdB/wFHDQAgFEEAOgAAIBMhBiATLQAAIgdB/wFHDQAgE0EAOgAAIBIhBiASLQAAIgdB/wFHDQAgEkEAOgAAIBEhBiARLQAAIgdB/wFHDQAgEUEAOgAAIBAhBiAQLQAAIgdB/wFHDQAgEEEAOgAAIA8hBiAPLQAAIgdB/wFHDQAgD0EAOgAAIA4hBiAOLQAAIgdB/wFHDQAgDkEAOgAAIA0hBiANLQAAIgdB/wFHDQAgDUEAOgAAIAwhBiAMLQAAIgdB/wFHDQAgDEEAOgAAIAshBiALLQAAIgdB/wFHDQAgC0EAOgAAIAohBiAKLQAAIgdB/wFHDQAgCkEAOgAAIAkhBiAJLQAAIgdB/wFHDQAgCUEAOgAAIAghBiAILQAAIgdB/wFHDQAgCEEAOgAAIBYiBi0AACIHQf8BRw0AIAJBADoAASACIQYgAi0AACIHQf8BRw0AIAJBADoAAAwBCyAGIAdBAWo6AAALIARBEGohBCADQRBqIQMgAUEQSyEGIAFBEGshASAGDQALCyAFQRBqJAALxQUBAn8jAEEQayIGJAACQCABBEAgAkEATA0BA0AgBSADLQAAIAQtAABzOgAAIAUgAy0AASAELQABczoAASAFIAMtAAIgBC0AAnM6AAIgBSADLQADIAQtAANzOgADIAUgAy0ABCAELQAEczoABCAFIAMtAAUgBC0ABXM6AAUgBSADLQAGIAQtAAZzOgAGIAUgAy0AByAELQAHczoAByAFQQhqIAMtAAggBC0ACHM6AAAgBSADLQAJIAQtAAlzOgAJIAUgAy0ACiAELQAKczoACiAFIAMtAAsgBC0AC3M6AAsgBSADLQAMIAQtAAxzOgAMIAUgAy0ADSAELQANczoADSAFIAMtAA4gBC0ADnM6AA4gBSADLQAPIAQtAA9zOgAPIAAgASAFIAUQACADIAUpAAg3AAggAyAFKQAANwAAIAVBEGohBSAEQRBqIQQgAkEQSyEHIAJBEGshAiAHDQALDAELIAJBAEwNAANAIAYgBCkAADcDACAGIAQpAAg3AwggAEEAIAQgBRAAIAUgAy0AACAFLQAAczoAACAFIAMtAAEgBS0AAXM6AAEgBSADLQACIAUtAAJzOgACIAUgAy0AAyAFLQADczoAAyAFIAMtAAQgBS0ABHM6AAQgBSADLQAFIAUtAAVzOgAFIAUgAy0ABiAFLQAGczoABiAFIAMtAAcgBS0AB3M6AAcgBSADLQAIIAUtAAhzOgAIIAUgAy0ACSAFLQAJczoACSAFIAMtAAogBS0ACnM6AAogBSADLQALIAUtAAtzOgALIAUgAy0ADCAFLQAMczoADCAFIAMtAA0gBS0ADXM6AA0gBSADLQAOIAUtAA5zOgAOIAUgAy0ADyAFLQAPczoADyADIAYpAwg3AAggAyAGKQMANwAAIAVBEGohBSAEQRBqIQQgAkEQSyEBIAJBEGshAiABDQALCyAGQRBqJAALrAUBAn8jAEGgAmsiAyQAAkAgAAJ/QQogAkGAAUYNABogAkGAAkcEQCACQcABRw0CQQwMAQtBDgs2AgAgACAAQQhqNgIEIANBCGogASACEAIgACADKAIMIAMoAghBBHRqIgEoAgA2AgggACABKAIENgIMIAAgASgCCDYCECAAIAEoAgw2AhQgAEEYaiECIAFBEGshASAAKAIAIgRBAk4EQANAIAIgASgCACIAQQh2Qf8BcUGwCGotAABBAnRBsBJqKAIAIABB/wFxQbAIai0AAEECdEGwCmooAgBzIABBEHZB/wFxQbAIai0AAEECdEGwGmooAgBzIABBGHZBsAhqLQAAQQJ0QbAiaigCAHM2AgAgAiABKAIEIgBBCHZB/wFxQbAIai0AAEECdEGwEmooAgAgAEH/AXFBsAhqLQAAQQJ0QbAKaigCAHMgAEEQdkH/AXFBsAhqLQAAQQJ0QbAaaigCAHMgAEEYdkGwCGotAABBAnRBsCJqKAIAczYCBCACIAEoAggiAEEIdkH/AXFBsAhqLQAAQQJ0QbASaigCACAAQf8BcUGwCGotAABBAnRBsApqKAIAcyAAQRB2Qf8BcUGwCGotAABBAnRBsBpqKAIAcyAAQRh2QbAIai0AAEECdEGwImooAgBzNgIIIAIgASgCDCIAQQh2Qf8BcUGwCGotAABBAnRBsBJqKAIAIABB/wFxQbAIai0AAEECdEGwCmooAgBzIABBEHZB/wFxQbAIai0AAEECdEGwGmooAgBzIABBGHZBsAhqLQAAQQJ0QbAiaigCAHM2AgwgAUEQayEBIAJBEGohAiAEQQJLIQAgBEEBayEEIAANAAsLIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDAsgA0GgAmokAAsLs0QCAEGACAslAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAbAAAANgBBsAgLgERjfHd78mtvxTABZyv+16t2yoLJffpZR/Ct1KKvnKRywLf9kyY2P/fMNKXl8XHYMRUExyPDGJYFmgcSgOLrJ7J1CYMsGhtuWqBSO9azKeMvhFPRAO0g/LFbasu+OUpMWM/Q76r7Q00zhUX5An9QPJ+oUaNAj5KdOPW8ttohEP/z0s0ME+xfl0QXxKd+PWRdGXNggU/cIiqQiEbuuBTeXgvb4DI6CkkGJFzC06xikZXkeefIN22N1U6pbFb06mV6rgi6eCUuHKa0xujddB9LvYuKcD61ZkgD9g5hNVe5hsEdnuH4mBFp2Y6Umx6H6c5VKN+MoYkNv+ZCaEGZLQ+wVLsWUfSnUH5BZVMaF6TDOideljura8sfnUXxrPpYq0vjA5MgMPpVrXZt9ojMdpH1AkwlT+XX/MUqy9cmNUSAtWKjj96xWkkluhtnReoOmF3+wOHDL3UCgUzwEo1Gl6Nr0/nGA49f5xWSnJW/bXrrlVJZ2tS+gy1YdCHTSeBpKY7JyER1wolq9I55eJlYPmsnuXHdvuFPtvCIrRfJIKxmfc46tGPfShjlGjGCl1EzYGJTf0WxZHfgu2uuhP6BoBz5CCuUcEhoWI9F/RmU3myHUnv4t6tz0yNySwLi4x+PV2ZVqyqy6ygHL7XCA4bFe5rTNwilMCiH8iO/pbICA2q67RaCXIrPHCunebSS8wfy8E5p4qFl2vTNBgW+1dE0Yh/Epv6KNC5TnaLzVaAFiuEypPbrdQuD7DlAYO+qXnGfBr1uEFE+IYr5lt0GPd0+Ba5N5r1GkVSNtXHEXQUEBtRvYFAV/xmY+yTWvemXiUBDzGfZnnew6EK9B4mLiOcZWzh5yO7boXwKR3xCD+n4hB7JAAAAAAmAhoMyK+1IHhFwrGxack79Dv/7D4U4Vj2u1R42LTknCg/ZZGhcpiGbW1TRJDYuOgwKZ7GTV+cPtO6W0hubkZ6AwMVPYdwgolp3S2kcEhoW4pO6CsCgKuU8IuBDEhsXHQ4JDQvyi8etLbaouRQeqchX8RmFr3UHTO6Z3bujf2D99wEmn1xy9bxEZjvFW/t+NItDKXbLI8bctu38aLjk8WPXMdzKQmOFEBOXIkCExhEghUokfdK7Pfiu+TIRxymhbR2eL0vcsjDzDYZS7HfB49ArsxZsqXC5mRGUSPpH6WQiqPyMxKDwPxpWfSzYIjOQ74dJTsfZONHBjMqi/pjUCzam9YHPpXreKNq3jiY/rb+kLDqd5FB4kg1qX8ybVH5GYvaNE8KQ2LjoLjn3XoLDr/WfXYC+adCTfG/VLanPJRKzyKyZOxAYfafonGNu2zu7e80meAluWRj07Jq3AYNPmqjmlW5lqv/mfiG8zwjvFejmuueb2UpvNs7qnwnUKbB81jGksq8qPyMxxqWUMDWiZsB0Trw3/ILKpuCQ0LAzp9gV8QSYSkHs2vd/zVAOF5H2L3ZN1o1D77BNzKpNVOSWBN+e0bXjTGqIG8EsH7hGZVF/nV7qBAGMNV36h3Rz+wtBLrNnHVqS29JS6RBWM23WRxOa12GMN6EMeln4FI7rEzyJzqkn7rdhyTXhHOXtekexPJzS31lV8nM/GBTOeXPHN79T983qX/2qW989bxR4RNuGyq/zgbloxD44JDQswqNAXxYdw3K84iUMKDxJi/8NlUE5qAFxCAyz3ti05JxkVsGQe8uEYdUytnBIbFx00LhXQlBR9KdTfkFlwxoXpJY6J17LO6tr8R+dRaus+liTS+MDVSAw+vatdm2RiMx2JfUCTPxP5dfXxSrLgCY1RI+1YqNJ3rFaZyW6G5hF6g7hXf7AAsMvdRKBTPCjjUaXxmvT+ecDj1+VFZKc679tetqVUlkt1L6D01h0ISlJ4GlEjsnIanXCiXj0jnlrmVg+3Se5cba+4U8X8IitZskgrLR9zjoYY99KguUaMWCXUTNFYlN/4LFkd4S7a64c/oGglPkIK1hwSGgZj0X9h5TebLdSe/gjq3PT4nJLAlfjH48qZlWrB7LrKAMvtcKahsV7pdM3CPIwKIeyI7+lugIDalztFoIris8ckqd5tPDzB/KhTmnizWXa9NUGBb4f0TRiisSm/p00LlOgovNVMgWK4XWk9us5C4PsqkBg7wZecZ9RvW4Q+T4hij2W3Qau3T4FRk3mvbWRVI0FccRdbwQG1P9gUBUkGZj7l9a96cyJQEN3Z9mevbDoQogHiYs45xlb23nI7kehfArpfEIPyfiEHgAAAACDCYCGSDIr7aweEXBObFpy+/0O/1YPhTgePa7VJzYtOWQKD9khaFym0ZtbVDokNi6xDApnD5NX59K07paeG5uRT4DAxaJh3CBpWndLFhwSGgrik7rlwKAqQzwi4B0SGxcLDgkNrfKLx7kttqjIFB6phVfxGUyvdQe77pnd/aN/YJ/3ASa8XHL1xURmOzRb+352i0Mp3Msjxmi27fxjuOTxytcx3BBCY4VAE5ciIITGEX2FSiT40rs9Ea75Mm3HKaFLHZ4v89yyMOwNhlLQd8HjbCuzFpmpcLn6EZRIIkfpZMSo/IwaoPA/2FZ9LO8iM5DHh0lOwdk40f6MyqI2mNQLz6b1gSilet4m2reOpD+tv+QsOp0NUHiSm2pfzGJUfkbC9o0T6JDYuF4uOff1gsOvvp9dgHxp0JOpb9Uts88lEjvIrJmnEBh9buicY3vbO7sJzSZ49G5ZGAHsmreog0+aZeaVbn6q/+YIIbzP5u8V6Nm655vOSm821OqfCdYpsHyvMaSyMSo/IzDGpZTANaJmN3ROvKb8gsqw4JDQFTOn2ErxBJj3QezaDn/NUC8XkfaNdk3WTUPvsFTMqk3f5JYE457RtRtMaoi4wSwff0ZlUQSdXupdAYw1c/qHdC77C0Fas2cdUpLb0jPpEFYTbdZHjJrXYXo3oQyOWfgUiesTPO7OqSc1t2HJ7eEc5Tx6R7FZnNLfP1Xyc3kYFM6/c8c36lP3zVtf/aoU3z1vhnhE24HKr/M+uWjELDgkNF/Co0ByFh3DDLziJYsoPElB/w2VcTmoAd4IDLOc2LTkkGRWwWF7y4Rw1TK2dEhsXELQuFenUFH0ZVN+QaTDGhdeljona8s7q0XxH51Yq6z6A5NL4/pVIDBt9q12dpGIzEwl9QLX/E/ly9fFKkSAJjWjj7ViWknesRtnJboOmEXqwOFd/nUCwy/wEoFMl6ONRvnGa9Nf5wOPnJUVknrrv21Z2pVSgy3UviHTWHRpKUngyESOyYlqdcJ5ePSOPmuZWHHdJ7lPtr7hrRfwiKxmySA6tH3OShhj3zGC5RozYJdRf0ViU3fgsWSuhLtroBz+gSuU+QhoWHBI/RmPRWyHlN74t1J70yOrcwLickuPV+MfqypmVSgHsuvCAy+1e5qGxQil0zeH8jAopbIjv2q6AgOCXO0WHCuKz7SSp3ny8PMH4qFOafTNZdq+1QYFYh/RNP6KxKZTnTQuVaCi8+EyBYrrdaT27DkLg++qQGCfBl5xEFG9bor5PiEGPZbdBa7dPr1GTeaNtZFUXQVxxNRvBAYV/2BQ+yQZmOmX1r1DzIlAnndn2UK9sOiLiAeJWzjnGe7becgKR6F8D+l8Qh7J+IQAAAAAhoMJgO1IMitwrB4Rck5sWv/7/Q44Vg+F1R49rjknNi3ZZAoPpiFoXFTRm1suOiQ2Z7EMCucPk1eW0rTukZ4bm8VPgMAgomHcS2ladxoWHBK6CuKTKuXAoOBDPCIXHRIbDQsOCcet8ououS22qcgUHhmFV/EHTK913bvumWD9o38mn/cB9bxccjvFRGZ+NFv7KXaLQ8bcyyP8aLbt8WO45NzK1zGFEEJjIkATlxEghMYkfYVKPfjSuzIRrvmhbccpL0sdnjDz3LJS7A2G49B3wRZsK7O5malwSPoRlGQiR+mMxKj8Pxqg8CzYVn2Q7yIzTseHSdHB2Tii/ozKCzaY1IHPpvXeKKV6jibat7+kP62d5Cw6kg1QeMybal9GYlR+E8L2jbjokNj3Xi45r/WCw4C+n12TfGnQLalv1RKzzyWZO8isfacQGGNu6Jy7e9s7eAnNJhj0blm3AeyamqiDT25l5pXmfqr/zwghvOjm7xWb2brnNs5KbwnU6p981imwsq8xpCMxKj+UMMalZsA1orw3dE7KpvyC0LDgkNgVM6eYSvEE2vdB7FAOf832LxeR1o12TbBNQ+9NVMyqBN/klrXjntGIG0xqH7jBLFF/RmXqBJ1eNV0BjHRz+odBLvsLHVqzZ9JSkttWM+kQRxNt1mGMmtcMejehFI5Z+DyJ6xMn7s6pyTW3YeXt4RyxPHpH31mc0nM/VfLOeRgUN79zx83qU/eqW1/9bxTfPduGeETzgcqvxD65aDQsOCRAX8Kjw3IWHSUMvOJJiyg8lUH/DQFxOaiz3ggM5JzYtMGQZFaEYXvLtnDVMlx0SGxXQtC49KdQUUFlU34XpMMaJ16WOqtryzudRfEf+lirrOMDk0sw+lUgdm32rcx2kYgCTCX15df8TyrL18U1RIAmYqOPtbFaSd66G2cl6g6YRf7A4V0vdQLDTPASgUaXo43T+cZrj1/nA5KclRVteuu/Ulnalb6DLdR0IdNY4GkpScnIRI7CiWp1jnl49Fg+a5m5cd0n4U+2voitF/AgrGbJzjq0fd9KGGMaMYLlUTNgl1N/RWJkd+Cxa66Eu4GgHP4IK5T5SGhYcEX9GY/ebIeUe/i3UnPTI6tLAuJyH49X41WrKmbrKAeytcIDL8V7moY3CKXTKIfyML+lsiMDaroCFoJc7c8cK4p5tJKnB/Lw82nioU7a9M1lBb7VBjRiH9Gm/orELlOdNPNVoKKK4TIF9ut1pIPsOQtg76pAcZ8GXm4QUb0hivk+3QY9lj4Frt3mvUZNVI21kcRdBXEG1G8EUBX/YJj7JBm96ZfWQEPMidmed2foQr2wiYuIBxlbOOfI7tt5fApHoUIP6XyEHsn4AAAAAICGgwkr7UgyEXCsHlpyTmwO//v9hThWD67VHj0tOSc2D9lkClymIWhbVNGbNi46JApnsQxX5w+T7pbStJuRnhvAxU+A3CCiYXdLaVoSGhYck7oK4qAq5cAi4EM8GxcdEgkNCw6Lx63ytqi5LR6pyBTxGYVXdQdMr5ndu+5/YP2jASaf93L1vFxmO8VE+340W0MpdosjxtzL7fxotuTxY7gx3MrXY4UQQpciQBPGESCESiR9hbs9+NL5MhGuKaFtx54vSx2yMPPchlLsDcHj0HezFmwrcLmZqZRI+hHpZCJH/IzEqPA/GqB9LNhWM5DvIklOx4c40cHZyqL+jNQLNpj1gc+met4opbeOJtqtv6Q/Op3kLHiSDVBfzJtqfkZiVI0TwvbYuOiQOfdeLsOv9YJdgL6f0JN8adUtqW8lErPPrJk7yBh9pxCcY27oO7t72yZ4Cc1ZGPRumrcB7E+aqIOVbmXm/+Z+qrzPCCEV6Obv55vZum82zkqfCdTqsHzWKaSyrzE/IzEqpZQwxqJmwDVOvDd0gsqm/JDQsOCn2BUzBJhK8eza90HNUA5/kfYvF03WjXbvsE1Dqk1UzJYE3+TRteOeaogbTCwfuMFlUX9GXuoEnYw1XQGHdHP6C0Eu+2cdWrPb0lKSEFYz6dZHE23XYYyaoQx6N/gUjlkTPInrqSfuzmHJNbcc5e3hR7E8etLfWZzycz9VFM55GMc3v3P3zepT/apbXz1vFN9E24Z4r/OBymjEPrkkNCw4o0Bfwh3DchbiJQy8PEmLKA2VQf+oAXE5DLPeCLTknNhWwZBky4RhezK2cNVsXHRIuFdC0FIJatUwNqU4v0CjnoHz1/t84zmCmy//hzSOQ0TE3unLVHuUMqbCIz3uTJULQvrDTgguoWYo2SSydluiSW2L0SVy+PZkhmiYFtSkXMxdZbaSbHBIUP3tudpeFUZXp42dhJDYqwCMvNMK9+RYBbizRQbQLB6Pyj8PAsGvvQMBE4prOpERQU9n3OqX8s/O8LTmc5asdCLnrTWF4vk36Bx1325H8RpxHSnFiW+3Yg6qGL4b/FY+S8bSeSCa28D+eM1a9B/dqDOIB8cxsRIQWSeA7F9gUX+pGbVKDS3lep+TyZzvoOA7Ta4q9bDI67s8g1OZYRcrBH66d9Ym4WkUY1UhDH3GY2Ol+Hx8hO53d5n2e3uN//LyDdZra73eb2+xkcXFVGAwMFACAQEDzmdnqVYrK33n/v4ZtdfXYk2rq+bsdnaaj8rKRR+Cgp2JyclA+n19h+/6+hWyWVnrjkdHyfvw8AtBra3ss9TUZ1+iov1Fr6/qI5ycv1OkpPfkcnKWm8DAW3W3t8Lh/f0cPZOTrkwmJmpsNjZafj8/QfX39wKDzMxPaDQ0XFGlpfTR5eU0+fHxCOJxcZOr2NhzYjExUyoVFT8IBAQMlcfHUkYjI2Wdw8NeMBgYKDeWlqEKBQUPL5qatQ4HBwkkEhI2G4CAm9/i4j3N6+smTicnaX+yss3qdXWfEgkJGx2Dg55YLCx0NBoaLjYbGy3cbm6ytFpa7lugoPukUlL2djs7TbfW1mF9s7POUikpe93j4z5eLy9xE4SEl6ZTU/W50dFoAAAAAMHt7SxAICBg4/z8H3mxsci2W1vt1Gpqvo3Ly0Znvr7Zcjk5S5RKSt6YTEzUsFhY6IXPz0q70NBrxe/vKk+qquXt+/sWhkNDxZpNTddmMzNVEYWFlIpFRc/p+fkQBAICBv5/f4GgUFDweDw8RCWfn7pLqKjjolFR812jo/6AQEDABY+Pij+Skq0hnZ28cDg4SPH19QRjvLzfd7a2wa/a2nVCISFjIBAQMOX//xr98/MOv9LSbYHNzUwYDAwUJhMTNcPs7C++X1/hNZeXoohERMwuFxc5k8TEV1Wnp/L8fn6Cej09R8hkZKy6XV3nMhkZK+Zzc5XAYGCgGYGBmJ5PT9Gj3Nx/RCIiZlQqKn47kJCrC4iIg4xGRsrH7u4pa7i40ygUFDyn3t55vF5e4hYLCx2t29t22+DgO2QyMlZ0OjpOFAoKHpJJSdsMBgYKSCQkbLhcXOSfwsJdvdPTbkOsrO/EYmKmOZGRqDGVlaTT5OQ38nl5i9Xn5zKLyMhDbjc3WdptbbcBjY2MsdXVZJxOTtJJqang2GxstKxWVvrz9PQHz+rqJcplZa/0enqOR66u6RAICBhvurrV8Hh4iEolJW9cLi5yOBwcJFempvFztLTHl8bGUcvo6COh3d186HR0nD4fHyGWS0vdYb293A2Li4YPioqF4HBwkHw+PkJxtbXEzGZmqpBISNgGAwMF9/b2ARwODhLCYWGjajU1X65XV/lpubnQF4aGkZnBwVg6HR0nJ56eudnh4Tjr+PgTK5iYsyIRETPSaWm7qdnZcAeOjokzlJSnLZubtjweHiIVh4eSyenpIIfOzkmqVVX/UCgoeKXf33oDjIyPWaGh+AmJiYAaDQ0XZb+/2tfm5jGEQkLG0GhouIJBQcMpmZmwWi0tdx4PDxF7sLDLqFRU/G27u9YsFhY6pcZjY4T4fHyZ7nd3jfZ7ew3/8vK91mtrsd5vb1SRxcVQYDAwAwIBAanOZ2d9VisrGef+/mK119fmTaurmux2dkWPysqdH4KCQInJyYf6fX0V7/r667JZWcmOR0cL+/Dw7EGtrWez1NT9X6Ki6kWvr78jnJz3U6SkluRyclubwMDCdbe3HOH9/a49k5NqTCYmWmw2NkF+Pz8C9ff3T4PMzFxoNDT0UaWlNNHl5Qj58fGT4nFxc6vY2FNiMTE/KhUVDAgEBFKVx8dlRiMjXp3DwygwGBihN5aWDwoFBbUvmpoJDgcHNiQSEpsbgIA93+LiJs3r62lOJyfNf7Kyn+p1dRsSCQmeHYODdFgsLC40GhotNhsbstxubu60Wlr7W6Cg9qRSUk12Oztht9bWzn2zs3tSKSk+3ePjcV4vL5cThIT1plNTaLnR0QAAAAAswe3tYEAgIB/j/PzIebGx7bZbW77UampGjcvL2We+vktyOTnelEpK1JhMTOiwWFhKhc/Pa7vQ0CrF7+/lT6qqFu37+8WGQ0PXmk1NVWYzM5QRhYXPikVFEOn5+QYEAgKB/n9/8KBQUER4PDy6JZ+f40uoqPOiUVH+XaOjwIBAQIoFj4+tP5KSvCGdnUhwODgE8fX132O8vMF3trZ1r9raY0IhITAgEBAa5f//Dv3z822/0tJMgc3NFBgMDDUmExMvw+zs4b5fX6I1l5fMiEREOS4XF1eTxMTyVaengvx+fkd6PT2syGRk57pdXSsyGRmV5nNzoMBgYJgZgYHRnk9Pf6Pc3GZEIiJ+VCoqqzuQkIMLiIjKjEZGKcfu7tNruLg8KBQUeafe3uK8Xl4dFgsLdq3b2zvb4OBWZDIyTnQ6Oh4UCgrbkklJCgwGBmxIJCTkuFxcXZ/Cwm6909PvQ6yspsRiYqg5kZGkMZWVN9Pk5IvyeXky1efnQ4vIyFluNze32m1tjAGNjWSx1dXSnE5O4EmpqbTYbGz6rFZWB/P09CXP6uqvymVljvR6eulHrq4YEAgI1W+6uojweHhvSiUlclwuLiQ4HBzxV6amx3O0tFGXxsYjy+jofKHd3ZzodHQhPh8f3ZZLS9xhvb2GDYuLhQ+KipDgcHBCfD4+xHG1tarMZmbYkEhIBQYDAwH39vYSHA4Oo8JhYV9qNTX5rldX0Gm5uZEXhoZYmcHBJzodHbknnp442eHhE+v4+LMrmJgzIhERu9JpaXCp2dmJB46OpzOUlLYtm5siPB4ekhWHhyDJ6elJh87O/6pVVXhQKCh6pd/fjwOMjPhZoaGACYmJFxoNDdplv78x1+bmxoRCQrjQaGjDgkFBsCmZmXdaLS0RHg8Py3uwsPyoVFTWbbu7OiwWFmOlxmN8hPh8d5nud3uN9nvyDf/ya73Wa2+x3m/FVJHFMFBgMAEDAgFnqc5nK31WK/4Z5/7XYrXXq+ZNq3aa7HbKRY/Kgp0fgslAicl9h/p9+hXv+lnrsllHyY5H8Av78K3sQa3UZ7PUov1foq/qRa+cvyOcpPdTpHKW5HLAW5vAt8J1t/0c4f2Trj2TJmpMJjZabDY/QX4/9wL198xPg8w0XGg0pfRRpeU00eXxCPnxcZPicdhzq9gxU2IxFT8qFQQMCATHUpXHI2VGI8NencMYKDAYlqE3lgUPCgWatS+aBwkOBxI2JBKAmxuA4j3f4usmzesnaU4nss1/snWf6nUJGxIJg54dgyx0WCwaLjQaGy02G26y3G5a7rRaoPtboFL2pFI7TXY71mG31rPOfbMpe1Ip4z7d4y9xXi+ElxOEU/WmU9FoudEAAAAA7SzB7SBgQCD8H+P8sch5sVvttltqvtRqy0aNy77ZZ745S3I5St6USkzUmExY6LBYz0qFz9Bru9DvKsXvquVPqvsW7ftDxYZDTdeaTTNVZjOFlBGFRc+KRfkQ6fkCBgQCf4H+f1DwoFA8RHg8n7oln6jjS6hR86JRo/5do0DAgECPigWPkq0/kp28IZ04SHA49QTx9bzfY7y2wXe22nWv2iFjQiEQMCAQ/xrl//MO/fPSbb/SzUyBzQwUGAwTNSYT7C/D7F/hvl+XojWXRMyIRBc5LhfEV5PEp/JVp36C/H49R3o9ZKzIZF3nul0ZKzIZc5Xmc2CgwGCBmBmBT9GeT9x/o9wiZkQiKn5UKpCrO5CIgwuIRsqMRu4px+6402u4FDwoFN55p95e4rxeCx0WC9t2rdvgO9vgMlZkMjpOdDoKHhQKSduSSQYKDAYkbEgkXOS4XMJdn8LTbr3TrO9DrGKmxGKRqDmRlaQxleQ30+R5i/J55zLV58hDi8g3WW43bbfabY2MAY3VZLHVTtKcTqngSalstNhsVvqsVvQH8/TqJc/qZa/KZXqO9Hqu6UeuCBgQCLrVb7p4iPB4JW9KJS5yXC4cJDgcpvFXprTHc7TGUZfG6CPL6N18od10nOh0HyE+H0vdlku93GG9i4YNi4qFD4pwkOBwPkJ8PrXEcbVmqsxmSNiQSAMFBgP2Aff2DhIcDmGjwmE1X2o1V/muV7nQabmGkReGwViZwR0nOh2euSee4TjZ4fgT6/iYsyuYETMiEWm70mnZcKnZjokHjpSnM5Sbti2bHiI8HoeSFYfpIMnpzkmHzlX/qlUoeFAo33ql34yPA4yh+FmhiYAJiQ0XGg2/2mW/5jHX5kLGhEJouNBoQcOCQZmwKZktd1otDxEeD7DLe7BU/KhUu9ZtuxY6LBZjY6XGfHyE+Hd3me57e4328vIN/2trvdZvb7HexcVUkTAwUGABAQMCZ2epzisrfVb+/hnn19ditaur5k12dprsyspFj4KCnR/JyUCJfX2H+vr6Fe9ZWeuyR0fJjvDwC/utrexB1NRns6Ki/V+vr+pFnJy/I6Sk91NycpbkwMBbm7e3wnX9/Rzhk5OuPSYmakw2NlpsPz9Bfvf3AvXMzE+DNDRcaKWl9FHl5TTR8fEI+XFxk+LY2HOrMTFTYhUVPyoEBAwIx8dSlSMjZUbDw16dGBgoMJaWoTcFBQ8Kmpq1LwcHCQ4SEjYkgICbG+LiPd/r6ybNJydpTrKyzX91dZ/qCQkbEoODnh0sLHRYGhouNBsbLTZubrLcWlrutKCg+1tSUvakOztNdtbWYbezs859KSl7UuPjPt0vL3FehISXE1NT9abR0Wi5AAAAAO3tLMEgIGBA/Pwf47GxyHlbW+22amq+1MvLRo2+vtlnOTlLckpK3pRMTNSYWFjosM/PSoXQ0Gu77+8qxaqq5U/7+xbtQ0PFhk1N15ozM1VmhYWUEUVFz4r5+RDpAgIGBH9/gf5QUPCgPDxEeJ+fuiWoqONLUVHzoqOj/l1AQMCAj4+KBZKSrT+dnbwhODhIcPX1BPG8vN9jtrbBd9rada8hIWNCEBAwIP//GuXz8w790tJtv83NTIEMDBQYExM1JuzsL8NfX+G+l5eiNUREzIgXFzkuxMRXk6en8lV+foL8PT1HemRkrMhdXee6GRkrMnNzleZgYKDAgYGYGU9P0Z7c3H+jIiJmRCoqflSQkKs7iIiDC0ZGyozu7inHuLjTaxQUPCje3nmnXl7ivAsLHRbb23at4OA72zIyVmQ6Ok50CgoeFElJ25IGBgoMJCRsSFxc5LjCwl2f09Nuvays70NiYqbEkZGoOZWVpDHk5DfTeXmL8ufnMtXIyEOLNzdZbm1tt9qNjYwB1dVksU5O0pypqeBJbGy02FZW+qz09Afz6uolz2Vlr8p6eo70rq7pRwgIGBC6utVveHiI8CUlb0ouLnJcHBwkOKam8Ve0tMdzxsZRl+joI8vd3XyhdHSc6B8fIT5LS92Wvb3cYYuLhg2KioUPcHCQ4D4+Qny1tcRxZmaqzEhI2JADAwUG9vYB9w4OEhxhYaPCNTVfaldX+a65udBphoaRF8HBWJkdHSc6np65J+HhONn4+BPrmJizKxERMyJpabvS2dlwqY6OiQeUlKczm5u2LR4eIjyHh5IV6ekgyc7OSYdVVf+qKCh4UN/feqWMjI8DoaH4WYmJgAkNDRcav7/aZebmMddCQsaEaGi40EFBw4KZmbApLS13Wg8PER6wsMt7VFT8qLu71m0WFjos"),m).then((function(e){return e})).then(t,(function(e){l("[WACloudCrypto] failed to asynchronously prepare wasm: "+e),v(e)}))}if(_++,a.monitorRunDependencies&&a.monitorRunDependencies(_),a.instantiateWasm)try{return a.instantiateWasm(r,n)}catch(e){return l("[WACloudCrypto] Module.instantiateWasm callback failed with error: "+e),!1}s(i)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.b).apply(null,arguments)},a._aes_setkey_enc=function(){return(a._aes_setkey_enc=a.asm.c).apply(null,arguments)},a._aes_setkey_dec=function(){return(a._aes_setkey_dec=a.asm.d).apply(null,arguments)},a._aes_crypt_cbc=function(){return(a._aes_crypt_cbc=a.asm.e).apply(null,arguments)},a._aes_crypt_ctr=function(){return(a._aes_crypt_ctr=a.asm.f).apply(null,arguments)},g=function e(){A||I(),A||(g=e)},a.run=I,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return a}))}function re(e){return parseInt(e)===e}function ne(e){if(!re(e.length))return!1;for(var t=0;t<e.length;t++)if(!re(e[t])||e[t]<0||e[t]>255)return!1;return!0}function oe(e,t){if(e.buffer&&ArrayBuffer.isView(e))return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!ne(e))throw new Error("[WACloudCrypto] Array contains invalid value: "+e);return new Uint8Array(e)}if(re(e.length)&&ne(e))return new Uint8Array(e);throw new Error("[WACloudCrypto] unsupported array-like object")}function ie(){var e=16384;return t=>(e+=t)-t}function ae(e){return new Uint8Array(e)}function se(e,t,r,n,o){(null!=n||null!=o)&&(e=e.slice?e.slice(n,o):Array.prototype.slice.call(e,n,o)),t.set(e,r)}function le(e){var t=16-(e=oe(e,!0)).length%16,r=ae(e.length+t);se(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r}function ue(e){if((e=oe(e,!0)).length<16)throw new Error("[WACloudCrypto] PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("[WACloudCrypto] PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("[WACloudCrypto] PKCS#7 invalid padding byte");var o=ae(r);return se(e,o,0,0,r),o}function ce(e){return de.apply(this,arguments)}function de(){return(de=o()((function*(e){var t,r=yield te(e),n=ie(),o=r,i=new Uint8Array(o.memory.buffer),a=n(276),s=n(276),l=n(16),u=n(16),c=n(0);function d(e){var t=oe(e);i.set(t,c)}function p(e,r,n="CBC"){i.set(r,u),i.set(e,l),o._aes_setkey_enc(a,l,128),o._aes_setkey_dec(s,l,128),t=n}return{init:p,encrypt:(e,r,n)=>(p(r,n,"CBC"),d(e=le(e)),"CBC"===t?o._aes_crypt_cbc(a,1,e.length,u,c,c):o._aes_crypt_ctr(a,e.length,u,c,c),i.subarray(c,c+e.length).slice()),decrypt:(e,r,n)=>(p(r,n,"CBC"),d(e),"CBC"===t?o._aes_crypt_cbc(s,0,e.length,u,c,c):o._aes_crypt_ctr(a,e.length,u,c,c),ue(i.subarray(c,c+e.length).slice()))}}))).apply(this,arguments)}function pe(e){if(!X)return ce(e).then((e=>{X=e})).catch((()=>{}))}function fe(){return X}function he(e,t){var r=fe();return{encrypted:r?r.encrypt(t,e,e):J.encrypt(t,e,void 0,e),backend:r?"wasm":"js"}}function _e(e){return me(e).buffer}function ge(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function ve(e){return null==e}function me(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)}function ye(e){for(var t=e.length;t--;)e[t]=Math.floor(256*Math.random());return e}function be(e){var t=e.reduce(((e,t)=>e+t.length),0);if(!e.length)return null;var r=new Uint8Array(t),n=0;for(var o of e)r.set(o,n),n+=o.length;return r}function we(e){return Ae(e)}g(),g(),g();var Ae=function(){var e=new Array(128),t=String.fromCodePoint||String.fromCharCode,r=[];return function(n){var o,i,a=n.length;r.length=0;for(var s=0;s<a;)(i=n[s++])<=127?o=i:i<=223?o=(31&i)<<6|63&n[s++]:i<=239?o=(15&i)<<12|(63&n[s++])<<6|63&n[s++]:String.fromCodePoint?o=(7&i)<<18|(63&n[s++])<<12|(63&n[s++])<<6|63&n[s++]:(o=63,s+=3),r.push(e[o]||(e[o]=t(o)));return r.join("")}}(),Ee=_(y(),1);g();var Ie=_(M(),1),Se=Ie.Reader,Ce=Ie.Writer,Te=Ie.util,Oe=Ie.roots.default||(Ie.roots.default={}),xe=Oe.HTTPRequest=(()=>{function e(e){if(this.header=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.method="",e.prototype.header=Te.emptyArray,e.prototype.body=Te.newBuffer([]),e.prototype.callId="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Ce.create()),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(10).string(e.method),null!=e.header&&e.header.length)for(var r=0;r<e.header.length;++r)Oe.HTTPHeader.encode(e.header[r],t.uint32(18).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(26).bytes(e.body),null!=e.callId&&Object.hasOwnProperty.call(e,"callId")&&t.uint32(34).string(e.callId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Se||(e=Se.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Oe.HTTPRequest;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.method=e.string();break;case 2:n.header&&n.header.length||(n.header=[]),n.header.push(Oe.HTTPHeader.decode(e,e.uint32()));break;case 3:n.body=e.bytes();break;case 4:n.callId=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Se||(e=new Se(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.method&&e.hasOwnProperty("method")&&!Te.isString(e.method))return"method: string expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var r=Oe.HTTPHeader.verify(e.header[t]);if(r)return"header."+r}}return null!=e.body&&e.hasOwnProperty("body")&&!(e.body&&"number"==typeof e.body.length||Te.isString(e.body))?"body: buffer expected":null!=e.callId&&e.hasOwnProperty("callId")&&!Te.isString(e.callId)?"callId: string expected":null},e.fromObject=function(e){if(e instanceof Oe.HTTPRequest)return e;var t=new Oe.HTTPRequest;if(null!=e.method&&(t.method=String(e.method)),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPRequest.header: array expected");t.header=[];for(var r=0;r<e.header.length;++r){if("object"!=typeof e.header[r])throw TypeError(".HTTPRequest.header: object expected");t.header[r]=Oe.HTTPHeader.fromObject(e.header[r])}}return null!=e.body&&("string"==typeof e.body?Te.base64.decode(e.body,t.body=Te.newBuffer(Te.base64.length(e.body)),0):e.body.length>=0&&(t.body=e.body)),null!=e.callId&&(t.callId=String(e.callId)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.header=[]),t.defaults&&(r.method="",t.bytes===String?r.body="":(r.body=[],t.bytes!==Array&&(r.body=Te.newBuffer(r.body))),r.callId=""),null!=e.method&&e.hasOwnProperty("method")&&(r.method=e.method),e.header&&e.header.length){r.header=[];for(var n=0;n<e.header.length;++n)r.header[n]=Oe.HTTPHeader.toObject(e.header[n],t)}return null!=e.body&&e.hasOwnProperty("body")&&(r.body=t.bytes===String?Te.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),null!=e.callId&&e.hasOwnProperty("callId")&&(r.callId=e.callId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPRequest"},e})(),Ne=Oe.HTTPResponse=(()=>{function e(e){if(this.header=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.statusCode=0,e.prototype.header=Te.emptyArray,e.prototype.bodyBuffer=Te.newBuffer([]),e.prototype.bodyString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Ce.create()),null!=e.statusCode&&Object.hasOwnProperty.call(e,"statusCode")&&t.uint32(8).uint32(e.statusCode),null!=e.header&&e.header.length)for(var r=0;r<e.header.length;++r)Oe.HTTPHeader.encode(e.header[r],t.uint32(18).fork()).ldelim();return null!=e.bodyBuffer&&Object.hasOwnProperty.call(e,"bodyBuffer")&&t.uint32(26).bytes(e.bodyBuffer),null!=e.bodyString&&Object.hasOwnProperty.call(e,"bodyString")&&t.uint32(34).string(e.bodyString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Se||(e=Se.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Oe.HTTPResponse;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.statusCode=e.uint32();break;case 2:n.header&&n.header.length||(n.header=[]),n.header.push(Oe.HTTPHeader.decode(e,e.uint32()));break;case 3:n.bodyBuffer=e.bytes();break;case 4:n.bodyString=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Se||(e=new Se(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.statusCode&&e.hasOwnProperty("statusCode")&&!Te.isInteger(e.statusCode))return"statusCode: integer expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var r=Oe.HTTPHeader.verify(e.header[t]);if(r)return"header."+r}}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&!(e.bodyBuffer&&"number"==typeof e.bodyBuffer.length||Te.isString(e.bodyBuffer))?"bodyBuffer: buffer expected":null!=e.bodyString&&e.hasOwnProperty("bodyString")&&!Te.isString(e.bodyString)?"bodyString: string expected":null},e.fromObject=function(e){if(e instanceof Oe.HTTPResponse)return e;var t=new Oe.HTTPResponse;if(null!=e.statusCode&&(t.statusCode=e.statusCode>>>0),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPResponse.header: array expected");t.header=[];for(var r=0;r<e.header.length;++r){if("object"!=typeof e.header[r])throw TypeError(".HTTPResponse.header: object expected");t.header[r]=Oe.HTTPHeader.fromObject(e.header[r])}}return null!=e.bodyBuffer&&("string"==typeof e.bodyBuffer?Te.base64.decode(e.bodyBuffer,t.bodyBuffer=Te.newBuffer(Te.base64.length(e.bodyBuffer)),0):e.bodyBuffer.length>=0&&(t.bodyBuffer=e.bodyBuffer)),null!=e.bodyString&&(t.bodyString=String(e.bodyString)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.header=[]),t.defaults&&(r.statusCode=0,t.bytes===String?r.bodyBuffer="":(r.bodyBuffer=[],t.bytes!==Array&&(r.bodyBuffer=Te.newBuffer(r.bodyBuffer))),r.bodyString=""),null!=e.statusCode&&e.hasOwnProperty("statusCode")&&(r.statusCode=e.statusCode),e.header&&e.header.length){r.header=[];for(var n=0;n<e.header.length;++n)r.header[n]=Oe.HTTPHeader.toObject(e.header[n],t)}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&(r.bodyBuffer=t.bytes===String?Te.base64.encode(e.bodyBuffer,0,e.bodyBuffer.length):t.bytes===Array?Array.prototype.slice.call(e.bodyBuffer):e.bodyBuffer),null!=e.bodyString&&e.hasOwnProperty("bodyString")&&(r.bodyString=e.bodyString),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPResponse"},e})(),Re=Oe.HTTPHeader=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Ce.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Se||(e=Se.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Oe.HTTPHeader;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Se||(e=new Se(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!Te.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!Te.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof Oe.HTTPHeader)return e;var t=new Oe.HTTPHeader;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=""),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPHeader"},e})(),Pe=Oe.QBaseApiData=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.qbaseApiName="",e.prototype.qbaseMeta=null,e.prototype.qbaseOptions=null,e.prototype.qbaseReq="",e.prototype.cliReqId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Ce.create()),null!=e.qbaseApiName&&Object.hasOwnProperty.call(e,"qbaseApiName")&&t.uint32(10).string(e.qbaseApiName),null!=e.qbaseMeta&&Object.hasOwnProperty.call(e,"qbaseMeta")&&Oe.QBaseApiData.QBaseMeta.encode(e.qbaseMeta,t.uint32(18).fork()).ldelim(),null!=e.qbaseOptions&&Object.hasOwnProperty.call(e,"qbaseOptions")&&Oe.QBaseApiData.QBaseOptions.encode(e.qbaseOptions,t.uint32(26).fork()).ldelim(),null!=e.qbaseReq&&Object.hasOwnProperty.call(e,"qbaseReq")&&t.uint32(34).string(e.qbaseReq),null!=e.cliReqId&&Object.hasOwnProperty.call(e,"cliReqId")&&t.uint32(42).string(e.cliReqId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Se||(e=Se.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Oe.QBaseApiData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.qbaseApiName=e.string();break;case 2:n.qbaseMeta=Oe.QBaseApiData.QBaseMeta.decode(e,e.uint32());break;case 3:n.qbaseOptions=Oe.QBaseApiData.QBaseOptions.decode(e,e.uint32());break;case 4:n.qbaseReq=e.string();break;case 5:n.cliReqId=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Se||(e=new Se(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.qbaseApiName&&e.hasOwnProperty("qbaseApiName")&&!Te.isString(e.qbaseApiName))return"qbaseApiName: string expected";if(null!=e.qbaseMeta&&e.hasOwnProperty("qbaseMeta")){var t=Oe.QBaseApiData.QBaseMeta.verify(e.qbaseMeta);if(t)return"qbaseMeta."+t}if(null!=e.qbaseOptions&&e.hasOwnProperty("qbaseOptions")){var r=Oe.QBaseApiData.QBaseOptions.verify(e.qbaseOptions);if(r)return"qbaseOptions."+r}return null!=e.qbaseReq&&e.hasOwnProperty("qbaseReq")&&!Te.isString(e.qbaseReq)?"qbaseReq: string expected":null!=e.cliReqId&&e.hasOwnProperty("cliReqId")&&!Te.isString(e.cliReqId)?"cliReqId: string expected":null},e.fromObject=function(e){if(e instanceof Oe.QBaseApiData)return e;var t=new Oe.QBaseApiData;if(null!=e.qbaseApiName&&(t.qbaseApiName=String(e.qbaseApiName)),null!=e.qbaseMeta){if("object"!=typeof e.qbaseMeta)throw TypeError(".QBaseApiData.qbaseMeta: object expected");t.qbaseMeta=Oe.QBaseApiData.QBaseMeta.fromObject(e.qbaseMeta)}if(null!=e.qbaseOptions){if("object"!=typeof e.qbaseOptions)throw TypeError(".QBaseApiData.qbaseOptions: object expected");t.qbaseOptions=Oe.QBaseApiData.QBaseOptions.fromObject(e.qbaseOptions)}return null!=e.qbaseReq&&(t.qbaseReq=String(e.qbaseReq)),null!=e.cliReqId&&(t.cliReqId=String(e.cliReqId)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.qbaseApiName="",r.qbaseMeta=null,r.qbaseOptions=null,r.qbaseReq="",r.cliReqId=""),null!=e.qbaseApiName&&e.hasOwnProperty("qbaseApiName")&&(r.qbaseApiName=e.qbaseApiName),null!=e.qbaseMeta&&e.hasOwnProperty("qbaseMeta")&&(r.qbaseMeta=Oe.QBaseApiData.QBaseMeta.toObject(e.qbaseMeta,t)),null!=e.qbaseOptions&&e.hasOwnProperty("qbaseOptions")&&(r.qbaseOptions=Oe.QBaseApiData.QBaseOptions.toObject(e.qbaseOptions,t)),null!=e.qbaseReq&&e.hasOwnProperty("qbaseReq")&&(r.qbaseReq=e.qbaseReq),null!=e.cliReqId&&e.hasOwnProperty("cliReqId")&&(r.cliReqId=e.cliReqId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData"},e.QBaseMeta=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.firstLaunch=!1,e.prototype.sessionId="",e.prototype.sdkVersion="",e.prototype.filterUserInfo=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Ce.create()),null!=e.firstLaunch&&Object.hasOwnProperty.call(e,"firstLaunch")&&t.uint32(8).bool(e.firstLaunch),null!=e.sessionId&&Object.hasOwnProperty.call(e,"sessionId")&&t.uint32(18).string(e.sessionId),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(26).string(e.sdkVersion),null!=e.filterUserInfo&&Object.hasOwnProperty.call(e,"filterUserInfo")&&t.uint32(32).bool(e.filterUserInfo),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Se||(e=Se.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Oe.QBaseApiData.QBaseMeta;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.firstLaunch=e.bool();break;case 2:n.sessionId=e.string();break;case 3:n.sdkVersion=e.string();break;case 4:n.filterUserInfo=e.bool();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Se||(e=new Se(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.firstLaunch&&e.hasOwnProperty("firstLaunch")&&"boolean"!=typeof e.firstLaunch?"firstLaunch: boolean expected":null!=e.sessionId&&e.hasOwnProperty("sessionId")&&!Te.isString(e.sessionId)?"sessionId: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!Te.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.filterUserInfo&&e.hasOwnProperty("filterUserInfo")&&"boolean"!=typeof e.filterUserInfo?"filterUserInfo: boolean expected":null},e.fromObject=function(e){if(e instanceof Oe.QBaseApiData.QBaseMeta)return e;var t=new Oe.QBaseApiData.QBaseMeta;return null!=e.firstLaunch&&(t.firstLaunch=Boolean(e.firstLaunch)),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.filterUserInfo&&(t.filterUserInfo=Boolean(e.filterUserInfo)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.firstLaunch=!1,r.sessionId="",r.sdkVersion="",r.filterUserInfo=!1),null!=e.firstLaunch&&e.hasOwnProperty("firstLaunch")&&(r.firstLaunch=e.firstLaunch),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(r.sessionId=e.sessionId),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.filterUserInfo&&e.hasOwnProperty("filterUserInfo")&&(r.filterUserInfo=e.filterUserInfo),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData.QBaseMeta"},e}(),e.QBaseOptions=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.env="",e.prototype.appid="",e.prototype.region="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Ce.create()),null!=e.env&&Object.hasOwnProperty.call(e,"env")&&t.uint32(10).string(e.env),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(18).string(e.appid),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(26).string(e.region),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Se||(e=Se.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Oe.QBaseApiData.QBaseOptions;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.env=e.string();break;case 2:n.appid=e.string();break;case 3:n.region=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Se||(e=new Se(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.env&&e.hasOwnProperty("env")&&!Te.isString(e.env)?"env: string expected":null!=e.appid&&e.hasOwnProperty("appid")&&!Te.isString(e.appid)?"appid: string expected":null!=e.region&&e.hasOwnProperty("region")&&!Te.isString(e.region)?"region: string expected":null},e.fromObject=function(e){if(e instanceof Oe.QBaseApiData.QBaseOptions)return e;var t=new Oe.QBaseApiData.QBaseOptions;return null!=e.env&&(t.env=String(e.env)),null!=e.appid&&(t.appid=String(e.appid)),null!=e.region&&(t.region=String(e.region)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.env="",r.appid="",r.region=""),null!=e.env&&e.hasOwnProperty("env")&&(r.env=e.env),null!=e.appid&&e.hasOwnProperty("appid")&&(r.appid=e.appid),null!=e.region&&e.hasOwnProperty("region")&&(r.region=e.region),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData.QBaseOptions"},e}(),e})(),De=Oe.V3Header=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.encryptionTimestamp=Te.Long?Te.Long.fromBits(0,0,!0):0,e.prototype.compression="",e.prototype.userTimeout=Te.Long?Te.Long.fromBits(0,0,!0):0,e.prototype.libBuildTs=Te.Long?Te.Long.fromBits(0,0,!0):0,e.prototype.appProtocol="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Ce.create()),null!=e.encryptionTimestamp&&Object.hasOwnProperty.call(e,"encryptionTimestamp")&&t.uint32(8).uint64(e.encryptionTimestamp),null!=e.compression&&Object.hasOwnProperty.call(e,"compression")&&t.uint32(18).string(e.compression),null!=e.userTimeout&&Object.hasOwnProperty.call(e,"userTimeout")&&t.uint32(24).uint64(e.userTimeout),null!=e.libBuildTs&&Object.hasOwnProperty.call(e,"libBuildTs")&&t.uint32(32).uint64(e.libBuildTs),null!=e.appProtocol&&Object.hasOwnProperty.call(e,"appProtocol")&&t.uint32(42).string(e.appProtocol),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Se||(e=Se.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Oe.V3Header;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.encryptionTimestamp=e.uint64();break;case 2:n.compression=e.string();break;case 3:n.userTimeout=e.uint64();break;case 4:n.libBuildTs=e.uint64();break;case 5:n.appProtocol=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Se||(e=new Se(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null==e.encryptionTimestamp||!e.hasOwnProperty("encryptionTimestamp")||Te.isInteger(e.encryptionTimestamp)||e.encryptionTimestamp&&Te.isInteger(e.encryptionTimestamp.low)&&Te.isInteger(e.encryptionTimestamp.high)?null!=e.compression&&e.hasOwnProperty("compression")&&!Te.isString(e.compression)?"compression: string expected":null==e.userTimeout||!e.hasOwnProperty("userTimeout")||Te.isInteger(e.userTimeout)||e.userTimeout&&Te.isInteger(e.userTimeout.low)&&Te.isInteger(e.userTimeout.high)?null==e.libBuildTs||!e.hasOwnProperty("libBuildTs")||Te.isInteger(e.libBuildTs)||e.libBuildTs&&Te.isInteger(e.libBuildTs.low)&&Te.isInteger(e.libBuildTs.high)?null!=e.appProtocol&&e.hasOwnProperty("appProtocol")&&!Te.isString(e.appProtocol)?"appProtocol: string expected":null:"libBuildTs: integer|Long expected":"userTimeout: integer|Long expected":"encryptionTimestamp: integer|Long expected"},e.fromObject=function(e){if(e instanceof Oe.V3Header)return e;var t=new Oe.V3Header;return null!=e.encryptionTimestamp&&(Te.Long?(t.encryptionTimestamp=Te.Long.fromValue(e.encryptionTimestamp)).unsigned=!0:"string"==typeof e.encryptionTimestamp?t.encryptionTimestamp=parseInt(e.encryptionTimestamp,10):"number"==typeof e.encryptionTimestamp?t.encryptionTimestamp=e.encryptionTimestamp:"object"==typeof e.encryptionTimestamp&&(t.encryptionTimestamp=new Te.LongBits(e.encryptionTimestamp.low>>>0,e.encryptionTimestamp.high>>>0).toNumber(!0))),null!=e.compression&&(t.compression=String(e.compression)),null!=e.userTimeout&&(Te.Long?(t.userTimeout=Te.Long.fromValue(e.userTimeout)).unsigned=!0:"string"==typeof e.userTimeout?t.userTimeout=parseInt(e.userTimeout,10):"number"==typeof e.userTimeout?t.userTimeout=e.userTimeout:"object"==typeof e.userTimeout&&(t.userTimeout=new Te.LongBits(e.userTimeout.low>>>0,e.userTimeout.high>>>0).toNumber(!0))),null!=e.libBuildTs&&(Te.Long?(t.libBuildTs=Te.Long.fromValue(e.libBuildTs)).unsigned=!0:"string"==typeof e.libBuildTs?t.libBuildTs=parseInt(e.libBuildTs,10):"number"==typeof e.libBuildTs?t.libBuildTs=e.libBuildTs:"object"==typeof e.libBuildTs&&(t.libBuildTs=new Te.LongBits(e.libBuildTs.low>>>0,e.libBuildTs.high>>>0).toNumber(!0))),null!=e.appProtocol&&(t.appProtocol=String(e.appProtocol)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(Te.Long){var n=new Te.Long(0,0,!0);r.encryptionTimestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.encryptionTimestamp=t.longs===String?"0":0;if(r.compression="",Te.Long){var o=new Te.Long(0,0,!0);r.userTimeout=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.userTimeout=t.longs===String?"0":0;if(Te.Long){var i=new Te.Long(0,0,!0);r.libBuildTs=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.libBuildTs=t.longs===String?"0":0;r.appProtocol=""}return null!=e.encryptionTimestamp&&e.hasOwnProperty("encryptionTimestamp")&&("number"==typeof e.encryptionTimestamp?r.encryptionTimestamp=t.longs===String?String(e.encryptionTimestamp):e.encryptionTimestamp:r.encryptionTimestamp=t.longs===String?Te.Long.prototype.toString.call(e.encryptionTimestamp):t.longs===Number?new Te.LongBits(e.encryptionTimestamp.low>>>0,e.encryptionTimestamp.high>>>0).toNumber(!0):e.encryptionTimestamp),null!=e.compression&&e.hasOwnProperty("compression")&&(r.compression=e.compression),null!=e.userTimeout&&e.hasOwnProperty("userTimeout")&&("number"==typeof e.userTimeout?r.userTimeout=t.longs===String?String(e.userTimeout):e.userTimeout:r.userTimeout=t.longs===String?Te.Long.prototype.toString.call(e.userTimeout):t.longs===Number?new Te.LongBits(e.userTimeout.low>>>0,e.userTimeout.high>>>0).toNumber(!0):e.userTimeout),null!=e.libBuildTs&&e.hasOwnProperty("libBuildTs")&&("number"==typeof e.libBuildTs?r.libBuildTs=t.longs===String?String(e.libBuildTs):e.libBuildTs:r.libBuildTs=t.longs===String?Te.Long.prototype.toString.call(e.libBuildTs):t.longs===Number?new Te.LongBits(e.libBuildTs.low>>>0,e.libBuildTs.high>>>0).toNumber(!0):e.libBuildTs),null!=e.appProtocol&&e.hasOwnProperty("appProtocol")&&(r.appProtocol=e.appProtocol),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/V3Header"},e})();function Le(e,t,r){var n=Date.now();return(...o)=>{var i=t(...o),a=Date.now();return e[r]=a-n,i}}function Be(e,t,r){var n=Le(r,Ee.default.compress,"compress")(t);return{data:Le(r,he,"encrypt")(e,n).encrypted}}function ke(e,t,r,n,o,i){var a,s=Object.entries(t).filter((([e,t])=>!ve(e)&&!ve(t))).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()}))),l=ge(n),u=!1;return"object"===l?a=JSON.stringify(n):"arraybuffer"!==l?a=n+"":(a=n,u=!0),{...Be(e,u?Le(i,xe.encode,"encodePb")({body:new Uint8Array(n),callId:o,header:s}).finish():new Uint8Array(Le(i,_e,"stringToBuffer")(JSON.stringify({method:r,header:s,body:a,call_id:o}))),i),contentEncoding:u?"PB":"JSON"}}function Me(e,t,r,n,o){var i=n instanceof ArrayBuffer,a=Object.entries(t).filter((([e,t])=>e&&t)).map((([e,t])=>({key:e.toLowerCase(),value:t})));return{...Be(e,i?Ne.encode({bodyBuffer:new Uint8Array(n),statusCode:r,header:a}).finish():Ne.encode({bodyString:JSON.stringify(n),statusCode:r,header:a}).finish(),o),contentEncoding:i?"PB":"JSON"}}function Fe(e,t,r){return{...Be(e,Pe.encode(t).finish(),r)}}function je(e,t){var r=fe();return r?r.decrypt(t,e,e):J.decrypt(t,e,void 0,e)}g(),g(),g();var Ue=_(y(),1);function $e(e,t,r){var n=je(e,t);return{data:r?Ue.default.uncompress(n):n}}function We(e,t,r,n){var o,{data:i}=$e(e,t,r);if("PB"===n)o=xe.decode(i);else{var a=we(i);o=JSON.parse(a)}return o}function qe(e,t,r,n){var o,{data:i}=$e(e,t,r);if("PB"===n)o=Ne.decode(i);else{var a=we(i);o=JSON.parse(a)}return{statusCode:o.statusCode,body:o.bodyString||o.bodyBuffer,header:o.header.reduce(((e,t)=>(t.key&&t.value&&(e[t.key]=e[t.key]?e[t.key]+","+t.value:t.value),e)),{})}}function He(e,t,r){var{data:n}=$e(e,t,r),o=we(n);return{data:JSON.parse(o)}}var Ge={};function Qe(e,t){var r=fe(),n=new Uint8Array(16);return ye(n),{iv:n,encrypted:r?r.encrypt(t,e,n):J.encrypt(t,e,void 0,n)}}f(Ge,{decode:()=>nt,decodeRequest:()=>ot,decodeResponse:()=>it,encode:()=>Je,encodeRequest:()=>Xe,encodeResponse:()=>Ze}),g(),g(),g(),g();var ze="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Ke=(e=21)=>{for(var t="",r=e;r--;)t+=ze[64*Math.random()|0];return t},Ye=_(y(),1);function Ve(e,t,r){return t=+t,e[r>>>=0]=t>>>8,e[r+1]=255&t,r+2}function Je(e,t,r="JSON",n={}){var o={appProtocol:`1/${r}`,compression:"snappy",encryptionTimestamp:Date.now(),libBuildTs:1676961691476},i=Qe(e,De.encode(o).finish()),a=i.iv.length+i.encrypted.length,s=new Uint8Array(2);Ve(s,a,0);var l=Le(n,Ye.default.compress,"compress")(t),u=Le(n,Qe,"encrypt")(e,l);return{data:be([s,i.iv,i.encrypted,u.iv,u.encrypted]),__v3__header:o}}function Xe(e,t,r,n,o={}){var i,a=ge(n),s=Object.entries(t).filter((([e,t])=>!ve(e)&&!ve(t))).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()}))),l=`${Date.now()}-${Ke(8)}`,u=!1;return"object"===a?i=JSON.stringify(n):"arraybuffer"!==a?i=n+"":(i=n,u=!0),{...Je(e,u?Le(o,xe.encode,"encodePb")({body:i,callId:l,header:s,method:r}).finish():new Uint8Array(Le(o,_e,"stringToBuffer")(JSON.stringify({body:i,call_id:l,header:s,method:r}))),u?"PB":"JSON",o),callId:l,stats:o}}function Ze(e,t,r,n){var o,i=ge(n),a=Object.entries(t).filter((([e,t])=>e&&t)).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()}))),s=!1;return"object"===i?o=JSON.stringify(n):"arraybuffer"!==i?o=n+"":(o=n,s=!0),"object"===i?o=JSON.stringify(n):"arraybuffer"!==i?o=n+"":(o=n,s=!0),Je(e,s?Ne.encode({bodyBuffer:o,statusCode:r,header:a}).finish():Ne.encode({bodyString:JSON.stringify(n),statusCode:r,header:a}).finish(),"PB")}function et(e,t){var r=fe(),n=t.subarray(0,16),o=t.subarray(16);return r?r.decrypt(o,e,n):J.decrypt(o,e,void 0,n)}g(),g();var tt=_(y(),1);function rt(e,t){return e[t>>>=0]<<8|e[t+1]}function nt(e,t,r={}){var n=rt(t,0),o=et(e,t.slice(2,n+2)),i=De.decode(o),a="snappy"===i.compression,s=Le(r,et,"decrypt")(e,t.slice(n+2));return{data:a?Le(r,tt.default.uncompress,"uncompress")(s):s,__v3__header:i}}function ot(e,t,r={}){var n,{data:o,__v3__header:i}=nt(e,t,r),a=!1,s=i.appProtocol.split("/")[1];return s&&(a="PB"===s),n=a?xe.decode(o):Le(r,(e=>JSON.parse(we(e))),"decodeJson")(o),{...n,__v3__header:i,stats:r}}function it(e,t,r={}){var n,{data:o,__v3__header:i}=nt(e,t,r),a=!1,s=i.appProtocol.split("/")[1];return s&&(a="PB"===s),{statusCode:(n=a?Le(r,Ne.decode,"decodePb")(o):Le(r,(e=>JSON.parse(we(e))),"decodeJson")(o)).statusCode,body:n.bodyString||n.bodyBuffer,header:n.header.reduce(((e,t)=>(t.key&&t.value&&(e[t.key]=e[t.key]?e[t.key]+","+t.value:t.value),e)),{}),__v3__header:i}}},683:(e,t,r)=>{var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a=!1;function s(){a=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)n[t]=e[t],o[e.charCodeAt(t)]=t;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63}function l(e,t,r){for(var o,i,a=[],s=t;s<r;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}function u(e){var t;a||s();for(var r=e.length,o=r%3,i="",u=[],c=16383,d=0,p=r-o;d<p;d+=c)u.push(l(e,d,d+c>p?p:d+c));return 1===o?(t=e[r-1],i+=n[t>>2],i+=n[t<<4&63],i+="=="):2===o&&(t=(e[r-2]<<8)+e[r-1],i+=n[t>>10],i+=n[t>>4&63],i+=n[t<<2&63],i+="="),u.push(i),u.join("")}function c(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?o-1:0,p=r?-1:1,f=e[t+d];for(d+=p,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+e[t+d],d+=p,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+e[t+d],d+=p,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),i-=u}return(f?-1:1)*a*Math.pow(2,i-n)}function d(e,t,r,n,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,d=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,h=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[r+f]=255&s,f+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+f]=255&a,f+=h,a/=256,u-=8);e[r+f-h]|=128*_}var p={}.toString,f=Array.isArray||function(e){return"[object Array]"==p.call(e)};v.TYPED_ARRAY_SUPPORT=void 0===r.g.TYPED_ARRAY_SUPPORT||r.g.TYPED_ARRAY_SUPPORT;var h=_();function _(){return v.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(e,t){if(_()<t)throw new RangeError("Invalid typed array length");return v.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=v.prototype:(null===e&&(e=new v(t)),e.length=t),e}function v(e,t,r){if(!(v.TYPED_ARRAY_SUPPORT||this instanceof v))return new v(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return b(this,e)}return m(this,e,t,r)}function m(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);v.TYPED_ARRAY_SUPPORT?(e=t).__proto__=v.prototype:e=w(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!v.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|I(t,r);e=g(e,n);var o=e.write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(E(t)){var r=0|A(t.length);return 0===(e=g(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?g(e,0):w(e,t);if("Buffer"===t.type&&f(t.data))return w(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function y(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function b(e,t){if(y(t),e=g(e,t<0?0:0|A(t)),!v.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function w(e,t){var r=t.length<0?0:0|A(t.length);e=g(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function A(e){if(e>=_())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_().toString(16)+" bytes");return 0|e}function E(e){return!(null==e||!e._isBuffer)}function I(e,t){if(E(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return J(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(n)return J(e).length;t=(""+t).toLowerCase(),n=!0}}function S(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return F(this,t,r);case"latin1":case"binary":return j(this,t,r);case"base64":return B(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function C(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function T(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=v.from(t,n)),E(t))return 0===t.length?-1:O(e,t,r,n,o);if("number"==typeof t)return t&=255,v.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):O(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function O(e,t,r,n,o){var i,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var c=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(r+l>s&&(r=s-l),i=r;i>=0;i--){for(var d=!0,p=0;p<l;p++)if(u(e,i+p)!==u(t,p)){d=!1;break}if(d)return i}return-1}function x(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function N(e,t,r,n){return Z(J(t,e.length-r),e,r,n)}function R(e,t,r,n){return Z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function P(e,t,r,n){return R(e,t,r,n)}function D(e,t,r,n){return Z(X(t),e,r,n)}function L(e,t,r,n){return Z(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function B(e,t,r){return 0===t&&r===e.length?u(e):u(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,s,l,u=e[o],c=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[o+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(l=(15&u)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=d}return function(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=M));return r}(n)}v.poolSize=8192,v._augment=function(e){return e.__proto__=v.prototype,e},v.from=function(e,t,r){return m(null,e,t,r)},v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array),v.alloc=function(e,t,r){return function(e,t,r,n){return y(t),t<=0?g(e,t):void 0!==r?"string"==typeof n?g(e,t).fill(r,n):g(e,t).fill(r):g(e,t)}(null,e,t,r)},v.allocUnsafe=function(e){return b(null,e)},v.allocUnsafeSlow=function(e){return b(null,e)},v.isBuffer=ee,v.compare=function(e,t){if(!E(e)||!E(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(e,t){if(!f(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return v.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=v.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!E(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},v.byteLength=I,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},v.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},v.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},v.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):S.apply(this,arguments)},v.prototype.equals=function(e){if(!E(e))throw new TypeError("Argument must be a Buffer");return this===e||0===v.compare(this,e)},v.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},v.prototype.compare=function(e,t,r,n,o){if(!E(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),l=this.slice(n,o),u=e.slice(t,r),c=0;c<s;++c)if(l[c]!==u[c]){i=l[c],a=u[c];break}return i<a?-1:a<i?1:0},v.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},v.prototype.indexOf=function(e,t,r){return T(this,e,t,r,!0)},v.prototype.lastIndexOf=function(e,t,r){return T(this,e,t,r,!1)},v.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return N(this,e,t,r);case"ascii":return R(this,e,t,r);case"latin1":case"binary":return P(this,e,t,r);case"base64":return D(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function F(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function j(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function U(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=V(e[i]);return o}function $(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function W(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function q(e,t,r,n,o,i){if(!E(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function H(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function G(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function Q(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,o){return o||Q(e,0,r,4),d(e,t,r,n,23,4),r+4}function K(e,t,r,n,o){return o||Q(e,0,r,8),d(e,t,r,n,52,8),r+8}v.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),v.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=v.prototype;else{var o=t-e;r=new v(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},v.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},v.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},v.prototype.readUInt8=function(e,t){return t||W(e,1,this.length),this[e]},v.prototype.readUInt16LE=function(e,t){return t||W(e,2,this.length),this[e]|this[e+1]<<8},v.prototype.readUInt16BE=function(e,t){return t||W(e,2,this.length),this[e]<<8|this[e+1]},v.prototype.readUInt32LE=function(e,t){return t||W(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},v.prototype.readUInt32BE=function(e,t){return t||W(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},v.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},v.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},v.prototype.readInt8=function(e,t){return t||W(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},v.prototype.readInt16LE=function(e,t){t||W(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},v.prototype.readInt16BE=function(e,t){t||W(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},v.prototype.readInt32LE=function(e,t){return t||W(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},v.prototype.readInt32BE=function(e,t){return t||W(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},v.prototype.readFloatLE=function(e,t){return t||W(e,4,this.length),c(this,e,!0,23,4)},v.prototype.readFloatBE=function(e,t){return t||W(e,4,this.length),c(this,e,!1,23,4)},v.prototype.readDoubleLE=function(e,t){return t||W(e,8,this.length),c(this,e,!0,52,8)},v.prototype.readDoubleBE=function(e,t){return t||W(e,8,this.length),c(this,e,!1,52,8)},v.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||q(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},v.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||q(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},v.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,1,255,0),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},v.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},v.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},v.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},v.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},v.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);q(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},v.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);q(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},v.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,1,127,-128),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},v.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},v.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},v.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,2147483647,-2147483648),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},v.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},v.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},v.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},v.prototype.writeDoubleLE=function(e,t,r){return K(this,e,t,!0,r)},v.prototype.writeDoubleBE=function(e,t,r){return K(this,e,t,!1,r)},v.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!v.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},v.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!v.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=E(e)?e:J(new v(e,n).toString()),s=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function J(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(e){return function(e){var t,r,n,l,u,c;a||s();var d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");u="="===e[d-2]?2:"="===e[d-1]?1:0,c=new i(3*d/4-u),n=u>0?d-4:d;var p=0;for(t=0,r=0;t<n;t+=4,r+=3)l=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],c[p++]=l>>16&255,c[p++]=l>>8&255,c[p++]=255&l;return 2===u?(l=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,c[p++]=255&l):1===u&&(l=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,c[p++]=l>>8&255,c[p++]=255&l),c}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function ee(e){return null!=e&&(!!e._isBuffer||te(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&te(e.slice(0,0))}(e))}function te(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var re=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:h,Buffer:v,SlowBuffer:function(e){return+e!=e&&(e=0),v.alloc(+e)},isBuffer:ee});Map;var ne=function(){function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0}),e.isLong=t;var r={},n={};function o(e,t){var o,i,s;return t?(s=0<=(e>>>=0)&&e<256)&&(i=n[e])?i:(o=a(e,(0|e)<0?-1:0,!0),s&&(n[e]=o),o):(s=-128<=(e|=0)&&e<128)&&(i=r[e])?i:(o=a(e,e<0?-1:0,!1),s&&(r[e]=o),o)}function i(e,t){if(isNaN(e))return t?_:h;if(t){if(e<0)return _;if(e>=d)return b}else{if(e<=-p)return w;if(e+1>=p)return y}return e<0?i(-e,t).neg():a(e%c|0,e/c|0,t)}function a(t,r,n){return new e(t,r,n)}e.fromInt=o,e.fromNumber=i,e.fromBits=a;var s=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return h;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var o=i(s(r,8)),a=h,u=0;u<e.length;u+=8){var c=Math.min(8,e.length-u),d=parseInt(e.substring(u,u+c),r);if(c<8){var p=i(s(r,c));a=a.mul(p).add(i(d))}else a=(a=a.mul(o)).add(i(d))}return a.unsigned=t,a}function u(e,t){return"number"==typeof e?i(e,t):"string"==typeof e?l(e,t):a(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}e.fromString=l,e.fromValue=u;var c=4294967296,d=c*c,p=d/2,f=o(1<<24),h=o(0);e.ZERO=h;var _=o(0,!0);e.UZERO=_;var g=o(1);e.ONE=g;var v=o(1,!0);e.UONE=v;var m=o(-1);e.NEG_ONE=m;var y=a(-1,2147483647,!1);e.MAX_VALUE=y;var b=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=b;var w=a(0,-2147483648,!1);e.MIN_VALUE=w;var A=e.prototype;return A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=i(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=i(s(e,6),this.unsigned),a=this,l="";;){var u=a.div(o),c=(a.sub(u.mul(o)).toInt()>>>0).toString(e);if((a=u).isZero())return c+l;for(;c.length<6;)c="0"+c;l=""+c+l}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(g)},A.neg=A.negate,A.add=function(e){t(e)||(e=u(e));var r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,l=65535&e.high,c=e.low>>>16,d=0,p=0,f=0,h=0;return f+=(h+=i+(65535&e.low))>>>16,p+=(f+=o+c)>>>16,d+=(p+=n+l)>>>16,d+=r+s,a((f&=65535)<<16|(h&=65535),(d&=65535)<<16|(p&=65535),this.unsigned)},A.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return h;if(t(e)||(e=u(e)),e.isZero())return h;if(this.eq(w))return e.isOdd()?w:h;if(e.eq(w))return this.isOdd()?w:h;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return i(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,o=this.low>>>16,s=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,_=0,g=0,v=0,m=0;return v+=(m+=s*p)>>>16,g+=(v+=o*p)>>>16,v&=65535,g+=(v+=s*d)>>>16,_+=(g+=n*p)>>>16,g&=65535,_+=(g+=o*d)>>>16,g&=65535,_+=(g+=s*c)>>>16,_+=r*p+n*d+o*c+s*l,a((v&=65535)<<16|(m&=65535),(_&=65535)<<16|(g&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");var r,n,o;if(this.isZero())return this.unsigned?_:h;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return v;o=_}else{if(this.eq(w))return e.eq(g)||e.eq(m)?w:e.eq(w)?g:(r=this.shr(1).div(e).shl(1)).eq(h)?e.isNegative()?g:m:(n=this.sub(e.mul(r)),o=r.add(n.div(e)));if(e.eq(w))return this.unsigned?_:h;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=h}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:s(2,a-48),c=i(r),d=c.mul(e);d.isNegative()||d.gt(n);)d=(c=i(r-=l,this.unsigned)).mul(e);c.isZero()&&(c=g),o=o.add(c),n=n.sub(d)}return o},A.div=A.divide,A.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return a(~this.low,~this.high,this.unsigned)},A.and=function(e){return t(e)||(e=u(e)),a(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return t(e)||(e=u(e)),a(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return t(e)||(e=u(e)),a(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):a(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):a(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var r=this.high;return e<32?a(this.low>>>e|r<<32-e,r>>>e,this.unsigned):a(32===e?r:r>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},e.fromBytes=function(t,r,n){return n?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var n=e.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n},Object.defineProperty(e.prototype,"_bsontype",{value:"Long"}),e}();function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t,r){return t&&ie(e.prototype,t),r&&ie(e,r),e}var se=function(){function e(t){oe(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,r){return r&&r.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Double"}),e}();function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ue(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function de(e,t){return de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},de(e,t)}var pe=function(e){function t(e,r){var n;return oe(this,t),n=ne.isLong(e)?ue(this,ce(t).call(this,e.low,e.high,!0)):ue(this,ce(t).call(this,e,r,!0)),ue(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),ae(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(ne.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(ne.fromNumber(e,!0))}},{key:"fromBits",value:function(e,r){return new t(e,r)}},{key:"fromString",value:function(e,r){return new t(ne.fromString(e,r,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),Object.defineProperty(t.prototype,"_bsontype",{value:"Timestamp"}),t.MAX_VALUE=t.MAX_UNSIGNED_VALUE,t}(ne),fe={};function he(e){for(var t=new Uint8Array(e),r=0;r<e;++r)t[r]=Math.floor(256*Math.random());return t}var _e={normalizedFunctionString:function(e){return e.toString().replace("function(","function (")},randomBytes:function(){var e=he;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)e=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{e=fe.randomBytes}catch(e){}null==e&&(e=he)}return e}()};new Date;var ge=function(){function e(e,t){var r={seen:[],stylize:me};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Ee(t)?r.showHidden=t:t&&Le(r,t),Te(r.showHidden)&&(r.showHidden=!1),Te(r.depth)&&(r.depth=2),Te(r.colors)&&(r.colors=!1),Te(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=ve),ye(r,e,r.depth)}return e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e}();function ve(e,t){var r=ge.styles[t];return r?"["+ge.colors[r][0]+"m"+e+"["+ge.colors[r][1]+"m":e}function me(e,t){return e}function ye(e,t,r){if(e.customInspect&&t&&Pe(t.inspect)&&t.inspect!==ge&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Ce(n)||(n=ye(e,n,r)),n}var o=function(e,t){if(Te(t))return e.stylize("undefined","undefined");if(Ce(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Se(t))return e.stylize(""+t,"number");if(Ee(t))return e.stylize(""+t,"boolean");if(Ie(t))return e.stylize("null","null")}(e,t);if(o)return o;var i=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),Re(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return be(t);if(0===i.length){if(Pe(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(Oe(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Ne(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Re(t))return be(t)}var l,u="",c=!1,d=["{","}"];(Ae(t)&&(c=!0,d=["[","]"]),Pe(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return Oe(t)&&(u=" "+RegExp.prototype.toString.call(t)),Ne(t)&&(u=" "+Date.prototype.toUTCString.call(t)),Re(t)&&(u=" "+be(t)),0!==i.length||c&&0!=t.length?r<0?Oe(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=c?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)Be(t,String(a))?i.push(we(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(we(e,t,r,n,o,!0))})),i}(e,t,r,a,i):i.map((function(n){return we(e,t,r,a,n,c)})),e.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,u,d)):d[0]+u+d[1]}function be(e){return"["+Error.prototype.toString.call(e)+"]"}function we(e,t,r,n,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),Be(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(l.value)<0?(s=Ie(r)?ye(e,l.value,null):ye(e,l.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),Te(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function Ae(e){return Array.isArray(e)}function Ee(e){return"boolean"==typeof e}function Ie(e){return null===e}function Se(e){return"number"==typeof e}function Ce(e){return"string"==typeof e}function Te(e){return void 0===e}function Oe(e){return xe(e)&&"[object RegExp]"===De(e)}function xe(e){return"object"===le(e)&&null!==e}function Ne(e){return xe(e)&&"[object Date]"===De(e)}function Re(e){return xe(e)&&("[object Error]"===De(e)||e instanceof Error)}function Pe(e){return"function"==typeof e}function De(e){return Object.prototype.toString.call(e)}function Le(e,t){if(!t||!xe(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ke=ge,Me=function e(t,n){if(Te(r.g.process))return function(){return e(t,n).apply(this,arguments)};var o=!1;return function(){return o||(console.error(n),o=!0),t.apply(this,arguments)}},Fe=(()=>re.Buffer)(),je=Me,Ue=(0,_e.randomBytes)(5),$e=new RegExp("^[0-9a-fA-F]{24}$"),We=function(){var e=!1;try{Fe&&Fe.from&&(e=!0)}catch(t){e=!1}return e}(),qe=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<=15?"0":"")+t.toString(16);return e}(),He=function(){for(var e=[],t=0;t<10;)e[48+t]=t++;for(;t<16;)e[55+t]=e[87+t]=t++;return e}(),Ge=Fe;var Qe=function(){function e(t){if(oe(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var r=e.isValid(t);if(!r&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r&&"string"==typeof t&&24===t.length&&We)return new e(Fe.from(t,"hex"));if(r&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return ae(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t,r,n,o="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof Ge)return o=this.id.toString("hex"),e.cacheHexString&&(this.__id=o),o;for(var i=0;i<this.id.length;i++){var a=qe[this.id.charCodeAt(i)];if("string"!=typeof a)throw t=this.id,n=void 0,n=t[r=i],new TypeError('ObjectId string "'.concat(t,'" contains invalid character "').concat(n,'" with character code (').concat(t.charCodeAt(r),"). All character codes for a non-hex string must be less than 256."));o+=a}return e.cacheHexString&&(this.__id=o),o}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof Ge?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var r=e.getInc(),n=Fe.alloc(12);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,n[4]=Ue[0],n[5]=Ue[1],n[6]=Ue[2],n[7]=Ue[3],n[8]=Ue[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var r=Fe.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,new e(r)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(We)return new e(Fe.from(t,"hex"));for(var r=new Ge(12),n=0,o=0;o<24;)r[n++]=He[t.charCodeAt(o++)]<<4|He[t.charCodeAt(o++)];return new e(r)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&$e.test(t):t instanceof e||(t instanceof Ge&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&$e.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e.get_inc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.get_inc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.getInc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.generate=je((function(t){return e.generate(t)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(e.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),e.prototype[ke.custom||"inspect"]=e.prototype.toString,e.index=~~(16777215*Math.random()),Object.defineProperty(e.prototype,"_bsontype",{value:"ObjectID"}),e}(),ze=Qe;var Ke=function(){function e(t,r){oe(this,e),this.pattern=t||"",this.options=r?r.split("").sort().join(""):"";for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new Error("The regular expression option [".concat(this.options[n],"] is not supported"))}return ae(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"BSONRegExp"}),e}(),Ye=function(){function e(t){oe(this,e),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Symbol"}),e}(),Ve=function(){function e(t){oe(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Int32"}),e}(),Je=function(){function e(t,r){oe(this,e),this.code=t,this.scope=r}return ae(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Code"}),e}(),Xe=Je,Ze=(()=>re.Buffer)(),et=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,tt=/^(\+|-)?(Infinity|inf)$/i,rt=/^(\+|-)?NaN$/i,nt=6111,ot=-6176,it=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),at=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),st=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),lt=/^([-+])?(\d+)?$/;function ut(e){return!isNaN(parseInt(e,10))}function ct(e){var t=ne.fromNumber(1e9),r=ne.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new ne(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function dt(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}var pt=function(){function e(e){this.bytes=e}e.fromString=function(t){var r,n=!1,o=!1,i=!1,a=0,s=0,l=0,u=0,c=0,d=[0],p=0,f=0,h=0,_=0,g=0,v=0,m=[0,0],y=[0,0],b=0;if(t.length>=7e3)throw new TypeError(t+" not a valid Decimal128 string");var w=t.match(et),A=t.match(tt),E=t.match(rt);if(!w&&!A&&!E||0===t.length)throw new TypeError(t+" not a valid Decimal128 string");if(w){var I=w[2],S=w[4],C=w[5],T=w[6];S&&void 0===T&&dt(t,"missing exponent power"),S&&void 0===I&&dt(t,"missing exponent base"),void 0===S&&(C||T)&&dt(t,"missing e before exponent")}if("+"!==t[b]&&"-"!==t[b]||(n="-"===t[b++]),!ut(t[b])&&"."!==t[b]){if("i"===t[b]||"I"===t[b])return new e(Ze.from(n?at:st));if("N"===t[b])return new e(Ze.from(it))}for(;ut(t[b])||"."===t[b];)"."!==t[b]?(p<34&&("0"!==t[b]||i)&&(i||(c=s),i=!0,d[f++]=parseInt(t[b],10),p+=1),i&&(l+=1),o&&(u+=1),s+=1,b+=1):(o&&dt(t,"contains multiple periods"),o=!0,b+=1);if(o&&!s)throw new TypeError(t+" not a valid Decimal128 string");if("e"===t[b]||"E"===t[b]){var O=t.substr(++b).match(lt);if(!O||!O[2])return new e(Ze.from(it));g=parseInt(O[0],10),b+=O[0].length}if(t[b])return new e(Ze.from(it));if(h=0,p){if(_=p-1,1!==(a=l))for(;"0"===t[c+a-1];)a-=1}else h=0,_=0,d[0]=0,l=1,p=1,a=0;for(g<=u&&u-g>16384?g=ot:g-=u;g>nt;){if((_+=1)-h>34){if(d.join("").match(/^0+$/)){g=nt;break}dt(t,"overflow")}g-=1}for(;g<ot||p<l;){if(0===_&&a<p){g=ot,a=0;break}if(p<l?l-=1:_-=1,g<nt)g+=1;else{if(d.join("").match(/^0+$/)){g=nt;break}dt(t,"overflow")}}if(_-h+1<a){var x=s;o&&(c+=1,x+=1),n&&(c+=1,x+=1);var N=parseInt(t[c+_+1],10),R=0;if(N>=5&&(R=1,5===N))for(R=d[_]%2==1,v=c+_+2;v<x;v++)if(parseInt(t[v],10)){R=1;break}if(R)for(var P=_;P>=0;P--)if(++d[P]>9&&(d[P]=0,0===P)){if(!(g<nt))return new e(Ze.from(n?at:st));g+=1,d[P]=1}}if(m=ne.fromNumber(0),y=ne.fromNumber(0),0===a)m=ne.fromNumber(0),y=ne.fromNumber(0);else if(_-h<17){var D=h;for(y=ne.fromNumber(d[D++]),m=new ne(0,0);D<=_;D++)y=(y=y.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[D]))}else{var L=h;for(m=ne.fromNumber(d[L++]);L<=_-17;L++)m=(m=m.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[L]));for(y=ne.fromNumber(d[L++]);L<=_;L++)y=(y=y.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[L]))}var B,k,M,F,j=function(e,t){if(!e&&!t)return{high:ne.fromNumber(0),low:ne.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new ne(e.getLowBits(),0),o=t.shiftRightUnsigned(32),i=new ne(t.getLowBits(),0),a=r.multiply(o),s=r.multiply(i),l=n.multiply(o),u=n.multiply(i);return a=a.add(s.shiftRightUnsigned(32)),s=new ne(s.getLowBits(),0).add(l).add(u.shiftRightUnsigned(32)),{high:a=a.add(s.shiftRightUnsigned(32)),low:u=s.shiftLeft(32).add(new ne(u.getLowBits(),0))}}(m,ne.fromString("100000000000000000"));j.low=j.low.add(y),B=j.low,k=y,M=B.high>>>0,F=k.high>>>0,(M<F||M===F&&B.low>>>0<k.low>>>0)&&(j.high=j.high.add(ne.fromNumber(1))),r=g+6176;var U={low:ne.fromNumber(0),high:ne.fromNumber(0)};j.high.shiftRightUnsigned(49).and(ne.fromNumber(1)).equals(ne.fromNumber(1))?(U.high=U.high.or(ne.fromNumber(3).shiftLeft(61)),U.high=U.high.or(ne.fromNumber(r).and(ne.fromNumber(16383).shiftLeft(47))),U.high=U.high.or(j.high.and(ne.fromNumber(0x7fffffffffff)))):(U.high=U.high.or(ne.fromNumber(16383&r).shiftLeft(49)),U.high=U.high.or(j.high.and(ne.fromNumber(562949953421311)))),U.low=j.low,n&&(U.high=U.high.or(ne.fromString("9223372036854775808")));var $=Ze.alloc(16);return b=0,$[b++]=255&U.low.low,$[b++]=U.low.low>>8&255,$[b++]=U.low.low>>16&255,$[b++]=U.low.low>>24&255,$[b++]=255&U.low.high,$[b++]=U.low.high>>8&255,$[b++]=U.low.high>>16&255,$[b++]=U.low.high>>24&255,$[b++]=255&U.high.low,$[b++]=U.high.low>>8&255,$[b++]=U.high.low>>16&255,$[b++]=U.high.low>>24&255,$[b++]=255&U.high.high,$[b++]=U.high.high>>8&255,$[b++]=U.high.high>>16&255,$[b++]=U.high.high>>24&255,new e($)};return e.prototype.toString=function(){for(var e,t,r,n,o,i,a=0,s=new Array(36),l=0;l<s.length;l++)s[l]=0;var u,c,d,p,f,h=0,_=!1,g={parts:new Array(4)},v=[];h=0;var m=this.bytes;if(n=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,r=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,t=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,e=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,h=0,{low:new ne(n,r),high:new ne(t,e)}.high.lessThan(ne.ZERO)&&v.push("-"),(o=e>>26&31)>>3==3){if(30===o)return v.join("")+"Infinity";if(31===o)return"NaN";i=e>>15&16383,d=8+(e>>14&1)}else d=e>>14&7,i=e>>17&16383;if(u=i-6176,g.parts[0]=(16383&e)+((15&d)<<14),g.parts[1]=t,g.parts[2]=r,g.parts[3]=n,0===g.parts[0]&&0===g.parts[1]&&0===g.parts[2]&&0===g.parts[3])_=!0;else for(f=3;f>=0;f--){var y=0,b=ct(g);if(g=b.quotient,y=b.rem.low)for(p=8;p>=0;p--)s[9*f+p]=y%10,y=Math.floor(y/10)}if(_)a=1,s[h]=0;else for(a=36;!s[h];)a-=1,h+=1;if((c=a-1+u)>=34||c<=-7||u>0){if(a>34)return v.push(0),u>0?v.push("E+"+u):u<0&&v.push("E"+u),v.join("");v.push(s[h++]),(a-=1)&&v.push(".");for(var w=0;w<a;w++)v.push(s[h++]);v.push("E"),c>0?v.push("+"+c):v.push(c)}else if(u>=0)for(var A=0;A<a;A++)v.push(s[h++]);else{var E=a+u;if(E>0)for(var I=0;I<E;I++)v.push(s[h++]);else v.push("0");for(v.push(".");E++<0;)v.push("0");for(var S=0;S<a-Math.max(E-1,0);S++)v.push(s[h++])}return v.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},Object.defineProperty(e.prototype,"_bsontype",{value:"Decimal128"}),e}(),ft=pt,ht=function(){function e(){oe(this,e)}return ae(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"MinKey"}),e}(),_t=function(){function e(){oe(this,e)}return ae(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"MaxKey"}),e}(),gt=function(){function e(t,r,n,o){oe(this,e);var i=t.split(".");2===i.length&&(n=i.shift(),t=i.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=o||{}}return ae(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var r=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete r[e]})),new e(t.$ref,t.$id,t.$db,r)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1}),e}(),vt=(()=>re.Buffer)(),mt=function(){function e(r,n){if(oe(this,e),!(null==r||"string"==typeof r||vt.isBuffer(r)||r instanceof Uint8Array||Array.isArray(r)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==n?t:n,this.position=0,null==r||r instanceof Number)void 0!==vt?this.buffer=vt.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof r)if(void 0!==vt)this.buffer=vt.from(r);else{if("undefined"==typeof Uint8Array&&!Array.isArray(r))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=function(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(r)}else this.buffer=r;this.position=r.length}}ae(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var n=null;if(n="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=n;else if(void 0!==vt&&vt.isBuffer(this.buffer)){var o=vt.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(o,0,0,this.buffer.length),this.buffer=o,this.buffer[this.position++]=n}else{var i=null;i=r(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var a=0;a<this.buffer.length;a++)i[a]=this.buffer[a];this.buffer=i,this.buffer[this.position++]=n}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==vt&&vt.isBuffer(this.buffer))n=vt.alloc(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(r(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var o=0;o<this.position;o++)n[o]=this.buffer[o]}this.buffer=n}if(void 0!==vt&&vt.isBuffer(e)&&vt.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==vt&&"string"==typeof e&&vt.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(r(e)||Array.isArray(e)&&"string"!=typeof e){for(var i=0;i<e.length;i++)this.buffer[t++]=e[i];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var a=0;a<e.length;a++)this.buffer[t++]=e.charCodeAt(a);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var r="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),n=0;n<t;n++)r[n]=this.buffer[e++];return r}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==vt&&vt.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==vt&&vt.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=r(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return function(e,t,r){for(var n="",o=t;o<r;o++)n+=String.fromCharCode(e[o]);return n}(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=vt.isBuffer(this.buffer)?this.buffer.toString("base64"):vt.from(this.buffer).toString("base64"),r=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===r.length?"0"+r:r}:{$binary:{base64:t,subType:1===r.length?"0"+r:r}}}}],[{key:"fromExtendedJSON",value:function(t,r){var n,o;return(r=r||{}).legacy?(o=t.$type?parseInt(t.$type,16):0,n=vt.from(t.$binary,"base64")):(o=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=vt.from(t.$binary.base64,"base64")),new e(n,o)}}]);var t=0;function r(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}return e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_USER_DEFINED=128,Object.defineProperty(e.prototype,"_bsontype",{value:"Binary"}),e}(),yt=mt,bt=(Math.pow(2,63),Math.pow(2,63),{$oid:ze,$binary:yt,$symbol:Ye,$numberInt:Ve,$numberDecimal:ft,$numberDouble:se,$numberLong:ne,$minKey:ht,$maxKey:_t,$regex:Ke,$regularExpression:Ke,$timestamp:pe});function wt(e,t,r,n){if("number"==typeof r){if(n.relaxed||n.legacy)return r;if(Math.floor(r)===r){if(r>=It&&r<=Et)return new Ve(r);if(r>=Ct&&r<=St)return new ne.fromNumber(r)}return new se(r)}if(null==r||"object"!==le(r))return r;if(r.$undefined)return null;for(var o=Object.keys(r).filter((function(e){return e.startsWith("$")&&null!=r[e]})),i=0;i<o.length;i++){var a=bt[o[i]];if(a)return a.fromExtendedJSON(r,n)}if(null!=r.$date){var s=r.$date,l=new Date;return n.legacy?"number"==typeof s?l.setTime(s):"string"==typeof s&&l.setTime(Date.parse(s)):"string"==typeof s?l.setTime(Date.parse(s)):ne.isLong(s)?l.setTime(s.toNumber()):"number"==typeof s&&n.relaxed&&l.setTime(s),l}if(null!=r.$code){var u=Object.assign({},r);return r.$scope&&(u.$scope=wt(e,null,r.$scope)),Xe.fromExtendedJSON(r)}if(null!=r.$ref||null!=r.$dbPointer){var c=r.$ref?r:r.$dbPointer;if(c instanceof gt)return c;var d=Object.keys(c).filter((function(e){return e.startsWith("$")})),p=!0;if(d.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(p=!1)})),p)return gt.fromExtendedJSON(c)}return r}function At(e,t){var r=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,n){return wt(r,0,n,t)}))}var Et=2147483647,It=-2147483648,St=0x8000000000000000,Ct=-0x8000000000000000;function Tt(e,t,r,n){null!=r&&"object"===le(r)&&(n=r,r=0),null==t||"object"!==le(t)||Array.isArray(t)||(n=t,t=null,r=0),n=Object.assign({},{relaxed:!0,legacy:!1},n);var o=Array.isArray(e)?Ot(e,n):Pt(e,n);return JSON.stringify(o,t,r)}function Ot(e,t){return e.map((function(e){return Nt(e,t)}))}function xt(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function Nt(e,t){if(Array.isArray(e))return Ot(e,t);if(void 0===e)return null;if(e instanceof Date){var r=e.getTime(),n=r>-1&&r<2534023188e5;return t.legacy?t.relaxed&&n?{$date:e.getTime()}:{$date:xt(e)}:t.relaxed&&n?{$date:xt(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var o=e>=Ct&&e<=St;if(e>=It&&e<=Et)return{$numberInt:e.toString()};if(o)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var i=e.flags;return void 0===i&&(i=e.toString().match(/[gimuy]*$/)[0]),new Ke(e.source,i).toExtendedJSON(t)}return null!=e&&"object"===le(e)?Pt(e,t):e}var Rt={Binary:function(e){return new yt(e.value(),e.subtype)},Code:function(e){return new Xe(e.code,e.scope)},DBRef:function(e){return new gt(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new ft(e.bytes)},Double:function(e){return new se(e.value)},Int32:function(e){return new Ve(e.value)},Long:function(e){return ne.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new _t},MinKey:function(){return new ht},ObjectID:function(e){return new ze(e)},ObjectId:function(e){return new ze(e)},BSONRegExp:function(e){return new Ke(e.pattern,e.options)},Symbol:function(e){return new Ye(e.value)},Timestamp:function(e){return pe.fromBits(e.low,e.high)}};function Pt(e,t){if(null==e||"object"!==le(e))throw new Error("not an object instance");var r=e._bsontype;if(void 0===r){var n={};for(var o in e)n[o]=Nt(e[o],t);return n}if("string"==typeof r){var i=e;if("function"!=typeof i.toExtendedJSON){var a=Rt[r];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+r);i=a(i)}return"Code"===r&&i.scope?i=new Xe(i.code,Nt(i.scope,t)):"DBRef"===r&&i.oid&&(i=new gt(i.collection,Nt(i.oid,t),i.db,i.fields)),i.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+le(r))}var Dt={parse:At,deserialize:function(e,t){return t=t||{},At(JSON.stringify(e),t)},serialize:function(e,t){return t=t||{},JSON.parse(Tt(e,t))},stringify:Tt};t.EJSON=Dt}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{DefaultCloud:()=>gl,InstanceCloud:()=>vl,getCloudAPI:()=>_l,getCloudInstance:()=>hl,getSDK:()=>te,getServiceMarketAPI:()=>$l,patchDefaultSDK:()=>oe,setDefaultSDK:()=>ne,setSDK:()=>re});var e={};r.r(e),r.d(e,{GeoLineString:()=>qo,GeoMultiLineString:()=>Go,GeoMultiPoint:()=>$o,GeoMultiPolygon:()=>Yo,GeoPoint:()=>jo,GeoPolygon:()=>zo,LineString:()=>Wo,MultiLineString:()=>Ho,MultiPoint:()=>Uo,MultiPolygon:()=>Ko,Point:()=>Fo,Polygon:()=>Qo,__safe_props__:()=>Vo});var t={};r.r(t),r.d(t,{AggregateOperatorMap:()=>ts,AggregateSerializer:()=>ls,Decoder:()=>bs,OperatorMap:()=>es,ProjectionSerializer:()=>ys,QuerySerializer:()=>cs,UpdateSerializer:()=>gs,aggregateOperatorToString:()=>ss,decodeInternalDataType:()=>Ai,encode:()=>ds,encodeInternalDataType:()=>wi,extractQueryOptions:()=>Ei,flattenObject:()=>mi,flattenQueryObject:()=>vi,getProjectionDefinition:()=>Si,isConversionRequired:()=>bi,mergeConditionAfterEncode:()=>yi,operatorToString:()=>as});var a=r(426),s=r.n(a);function l(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}const c=function e(t,r){if(t===r)return t;for(var n of Object.keys(r)){var o=l(r,n),i=l(t,n),a=void 0;"object"==typeof o?e(a=i||{},o):a=o,t[n]=a}return t};var d=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),p=e=>"object"===d(e),f=e=>"string"===d(e),h=e=>"number"===d(e),_=e=>"function"==typeof e,g=e=>Array.isArray(e),v=e=>"date"===d(e),w=e=>"regexp"===d(e),A=e=>e&&"symbol"===d(e._internalType),E={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002};class I extends Error{constructor(e){super(e.errMsg),this.errCode=-1,this.errMsg=void 0,this.requestID=void 0,Object.defineProperties(this,{message:{get(){return`errCode: ${this.errCode} ${E[this.errCode]||""} | errMsg: `+this.errMsg},set(e){this.errMsg=e}}}),this.errCode=e.errCode||-1,this.errMsg=e.errMsg}get message(){return`errCode: ${this.errCode} | errMsg: `+this.errMsg}set message(e){this.errMsg=e}}function S(e){return e&&e instanceof Error&&f(e.errMsg)}function C(e,t){return T(e,t)}function T(e,t){if(e){if(S(e))return e;var r,n=`${t}:fail `;if(e instanceof Error)e.message=`${n}${e.message}`,e.stack=e.stack?e.stack.slice(0,7)+n+e.stack.slice(7):e.stack,(r=e).errCode=-1;else if("string"==typeof e)(r=new Error(`${n}${e}`)).errCode=-1;else{var o=e.errMsg||"";(r=new Error(`${t}:fail ${e.errCode} ${E[e.errCode]||""}. ${o}`)).errCode=e.errCode||-1}return r.errMsg=r.message+"",r}var i=new Error(`${t}:fail`);return i.errCode=-1,i.errMsg=i.message+"",i}class O extends Error{constructor(e,t){super(e),this.type="timeout",this.payload=void 0,this.generic=!0,this.payload=t}}var N=e=>"timeout"===e.type;class R extends Error{constructor(e,t){super(e),this.type="cancelled",this.payload=void 0,this.generic=!0,this.payload=t}}var P,D=e=>"cancelled"===e.type,L={fake:!0,surroundThirdByTryCatch:(e,t)=>function(...r){return j((()=>{try{return e.apply(e,r)}catch(r){throw console.error(JSON.stringify(r)+`; ${t}\n`+r.stack),console.error(e.toString()),r}}),t)},reportIDKey:(...e)=>{},reportIDKeyDirectly:(...e)=>{},reportKeyValue:(...e)=>{}},B=!1,k=10;function M(){try{return B?i:k<=0?P:(k--,i.surroundThirdByTryCatch,B=!0,P=i)}catch(e){return P=L}}const F={surroundThirdByTryCatch:(e,t)=>M().surroundThirdByTryCatch(e,t),reportIDKey:e=>M().reportIDKey(e),reportIDKeyDirectly:e=>M().reportIDKeyDirectly(e),reportKeyValue:e=>M().reportKeyValue(e)};function j(e,t=""){try{return e()}catch(e){if(S(e))return e.errMsg+=t,e;var r=(e?e.toString():"")+t;return new I({errMsg:r})}}function U(e,t=""){return function(...r){return j((()=>e.apply(e,r)),t)}}function $(e){var t=e.param;t&&(t.success&&_(t.success)&&(t.success=F.surroundThirdByTryCatch(t.success,`at api ${e.apiName} success callback function`)),t.fail&&_(t.fail)&&(t.fail=F.surroundThirdByTryCatch(t.fail,`at api ${e.apiName} fail callback function`)),t.complete&&_(t.complete)&&(t.complete=F.surroundThirdByTryCatch(t.complete,`at api ${e.apiName} complete callback function`)))}function W(e,t,r){t.complete&&_(t.complete)&&U(t.complete,`at api ${e} complete callback function;`)(r)}function q(e,t,r){!function(e,t,r){t.success&&_(t.success)&&U(t.success,`at api ${e} success callback function;`)(r)}(e,t,r),W(e,t,r)}function H(e,t,r){!function(e,t,r){t.fail&&_(t.fail)&&U(t.fail,`at api ${e} fail callback function;`)(r)}(e,t,r),W(e,t,r)}function G(e){return e&&(e.success||e.fail||e.complete)}function Q(e,t,r="parameter",n=I){var o=function(e,t,r="parameter"){var n=function e(t,r,n){var o=d(t),i=d(r);if("string"===i)return o!==r?`${n} should be ${r} instead of ${o};`:"";if(o!==i)return`${n} should be ${i} instead of ${o}; `;var a="";switch(o){case"object":for(var s in r)a+=e(t[s],r[s],`${n}.${s}`);break;case"array":for(var l=0;l<r.length;l++)a+=e(t[l],r[l],`${n}[${l}]`)}return a}(e,t,r);return{passed:!n,reason:n}}(e,t,r);if(!o.passed)throw new n({errCode:E.SDK_API_PARAMETER_TYPE_ERROR,errMsg:o.reason})}function z(e,t,r,n=I){if(null==e)throw new n({errCode:E.SDK_API_PARAMETER_ERROR,errMsg:`parameter ${t} of function ${r} must be provided`})}function K({name:e,input:t,max:r,maxWording:n="",ErrorClass:o=I}){if(t.length>r)throw new o({errCode:E.SDK_API_PARAMETER_ERROR,errMsg:`${e} size must be less than ${n||r}`})}function Y({target:e,name:t,ErrorClass:r=I}){if(0===Object.keys(e).length)throw new r({errCode:E.SDK_API_PARAMETER_ERROR,errMsg:`${t} must not be empty`})}function V(e,t=!1){if(t)return function(e){switch(d(e)){case"object":return{...e};case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}(e);if((e=>{if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t})(e))return{...e};switch(d(e)){case"object":default:return e;case"array":return e.slice()}}var J,X=new WeakMap,Z=[];function ee(){var e,t=null!==(e=J)&&void 0!==e?e:void 0!==u?u:void 0;return t?Z.reduce(((e,t)=>t(e)),t):t}var te=e=>{if(!e)return ee();var t=X.get(e);return t&&t||ee()},re=(e,t)=>{X.set(e,t)},ne=e=>{J=e},oe=e=>{Z.push((t=>Object.assign({},t,e)))};const ie=(e,t)=>{var r=null,n=!1,o=()=>{r?n=!0:(e(),r=setTimeout((()=>{clearTimeout(r),r=null,n&&(n=!1,o())}),t))};return o};function ae(e){if(void 0===e||!e.timestamp||!e.expires_in)return 0;var t=Date.now()-e.timestamp,r=.8*e.expires_in,n=Math.min(e.timestamp,Date.now())+1e3*r;return t>1e3*r?Date.now()+1e3*r:n}var se,le=void 0!==b?b:void 0,ue=(e=0)=>new Promise((t=>setTimeout(t,e))),ce=!1,de=[],pe=()=>new Promise(((e,t)=>{if(se)e(se);else{0;try{te().wx.getNetworkType({success:t=>{se={networkType:t.networkType,isConnected:"none"!==t.networkType},e(se),ce||(te().wx.onNetworkStatusChange((e=>{if(se.networkType=e.networkType,se.isConnected=e.isConnected,e.isConnected&&de.length)for(;de.length;)try{de.shift()()}catch(e){}})),ce=!0)},fail:t})}catch(e){t(e)}}}));var fe,he=!1,_e=new Set;function ge(e){try{te().wx.onAppShow&&(he||(!function(){var e=te().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((()=>{for(var e of("visible",_e))try{e("show")}catch(e){0}})),e.onAppHide((()=>{for(var e of("hidden",_e))try{e("hide")}catch(e){0}})))}(),he=!0),_e.size>50&&_e.clear(),_e.add(e))}catch(e){}}function ve(e){_e.delete(e)}function me(){if(fe)return fe;var e=te().wx;return fe=e.getSystemInfoSync()}var ye,be=!1,we=void 0;function Ae(e=500,t={}){if(te().private_getBackgroundFetchData&&!t.pluginId){if(we)return we;if(ye)return ye.then((()=>we));if(!be){be=!0;var r=Date.now(),n=zt();return ye=Promise.race([ue(e).then((()=>({error:"bg fetch timeout"}))),new Promise(((e,t)=>{te().private_getBackgroundFetchData({fetchType:0,success:t=>{try{t||e({error:"empty"}),(we=JSON.parse(t.fetchedData)).expiresTs=ae(we),e(we),Yt({apiName:"private_getBackgroundFetchData",apiStartTime:r,apiEndTime:Date.now(),warmStartTime:n})}catch(t){e({error:t})}},fail:t=>{e({error:t})}})}))]),we?(null==le||le.log("private_getBackgroundFetchData (cloud) (sync)",JSON.stringify(we)),we):ye.then((e=>(ye=void 0,null==le||le.log("private_getBackgroundFetchData (cloud)",JSON.stringify(e)),e.error?void 0:e)))}}}function Ee(e){try{return JSON.parse(e)}catch(t){return e}}function Ie(e){return encodeURIComponent(function(e){try{return decodeURIComponent(e)}catch(t){return e}}(e))}var Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ce(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;o<n;o++)t+=String.fromCharCode(r[o]);return function(e){for(var t,r,n=String(e),o="",i=0,a=Se;n.charAt(0|i)||(a="=",i%1);o+=a.charAt(63&t>>8-i%1*8)){if((r=n.charCodeAt(i+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|r}return o}(t)}function Te(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),r="";if(t.length%4==1)throw new Error('"atob" failed');for(var n,o,i=0,a=0;o=t.charAt(a++);~o&&(n=i%4?64*n+o:o,i++%4)?r+=String.fromCharCode(255&n>>(-2*i&6)):0)o=Se.indexOf(o);return r}(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n.buffer}function Oe(e){return De(new Uint8Array(e))}function xe(e){return function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)}(e).buffer}var Ne,Re,Pe,De=(Ne=new Array(128),Re=String.fromCodePoint||String.fromCharCode,Pe=[],function(e){var t,r,n=e.length;Pe.length=0;for(var o=0;o<n;)(r=e[o++])<=127?t=r:r<=223?t=(31&r)<<6|63&e[o++]:r<=239?t=(15&r)<<12|(63&e[o++])<<6|63&e[o++]:String.fromCodePoint?t=(7&r)<<18|(63&e[o++])<<12|(63&e[o++])<<6|63&e[o++]:(t=63,o+=3),Pe.push(Ne[t]||(Ne[t]=Re(t)));return Pe.join("")});function Le(e,{method:t,headers:r,body:n}){return new Promise(((o,i)=>{te()._requestSkipCheckDomain({url:e,method:t,header:r,data:n,success:o,fail:i})}))}var Be=r(668),ke=le,Me=new Set(["tcbapi_init","tcbapi_get_service_info"]);var Fe=new class{constructor(){this._running=0,this._onIdleCallbacks=[],this._idleTriggerTimer=void 0}get running(){return this._running}incrementRunning(e=1){this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)}decrementRunning(e=1){this._running-=e,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((()=>{if(this._idleTriggerTimer=null,this._onIdleCallbacks.length){var e=this._onIdleCallbacks.shift();e&&e()}}),50))}onceIdle(e){this._running>0?this._onIdleCallbacks.push(e):e()}};function je(e,t={}){if(t.fireOnIdle&&Fe.running>0)return new Promise(((r,n)=>{Fe.onceIdle(s()((function*(){try{var o=yield je(e,t);r(o)}catch(e){n(e)}})))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise(((r,n)=>{var o,i,a,s,l,u,c,d;(Fe.incrementRunning(),null!==(o=e.cloud)&&void 0!==o&&o.plugins)&&(d=`https://${e.cloud.plugins.reduce(((e,t)=>t.getMetadata(e)),{}).host||"servicewechat.com"}/wxa-qbase/jsoperatewxdata`,e=e.cloud.plugins.reduce(((t,r)=>r.beforeTunnelRequest(e)),e)||e);te((e.cloud||t.cloud||{}).identifiers).invokeOperateWXData({appid:(null===(i=e.cloud)||void 0===i||null===(a=i.instanceOptions)||void 0===a?void 0:a.resourceAppid)||(null===(s=e.cloud)||void 0===s?void 0:s.config.appid),accessToken:null===(l=e.cloud)||void 0===l||null===(u=l.authStorage)||void 0===u?void 0:u.getItem("access_token"),webRequest:null===(c=e.cloud)||void 0===c?void 0:c.webRequest,url:d,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:o=>{var i;o=(null===(i=e.cloud)||void 0===i?void 0:i.plugins.reduce(((e,t)=>t.afterTunnelRequest(e)),o))||o;var a={...o,data:o.data};if(o.data)try{var s=o.data;if(s.baseresponse&&0!==s.baseresponse.errcode){var l=new I({errCode:s.baseresponse.errcode,errMsg:s.baseresponse.errmsg});return void n(l)}a={...o,data:s}}catch(e){var u=new I({errMsg:e&&e.toString()});return void n(u)}else if(t&&t.requireDataNotEmpty){var c=new I({errCode:o.errCode,errMsg:`error empty internal server response, ${o.errMsg}`});return void n(c)}r(a)},fail:e=>{if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){var t="invalid scope ";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{var r=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(r)).errMsg=r,e.operateWXDataFail=!0}n(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),Fe.decrementRunning()}})}))}function Ue(e){var{cloud:t}=e;return function(){var e=s()((function*(e){var r=t.isInstance?{...t.instanceOptions,appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}:{identityless:"sdk"===t.runtimeInfo.platform||void 0,appid:"sdk"===t.runtimeInfo.platform?t.config.appid:void 0,env:e.env||("sdk"===t.runtimeInfo.platform?t.config.env:void 0)},n={qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:r,qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`};if(e.stdpriv&&!Me.has(e.apiName)&&"windows"!==me().platform){var o=yield function(e,t){return $e.apply(this,arguments)}(t,n).catch((e=>{if(e&&(-9999===e.errCode||-9998===e.errCode))return je({apiName:"qbase_commapi",data:n,cloud:t}).then((t=>({...t,channelType:-9998===e.errCode?0:2})));throw e}));return o}return je({apiName:"qbase_commapi",data:n,cloud:t})}));return function(t){return e.apply(this,arguments)}}()}function $e(){return $e=s()((function*(e,t){var r=e.serviceEndpoint.getEndpointSync("container");if(null==r||!r.cloudServiceUrl)throw{errCode:-9998,errMsg:"cloudServiceUrl not found"};null==ke||ke.info("cloud stdpriv begin",t);var n=te(e.identifiers),o={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":r.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-LIB-BUILD-TS":1678888746406,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"JSON","Content-Type":"application/octet-stream","X-WX-REQUEST-CONTENT-ENCODING":"PB"},i=new Uint8Array(Te(r.key)),{data:a}=Be.V1.encodeStdPrivRequest(i,{cliReqId:t.cli_req_id,qbaseApiName:t.qbase_api_name,qbaseMeta:{filterUserInfo:t.qbase_meta.filter_user_info,sdkVersion:t.qbase_meta.sdk_version,sessionId:t.qbase_meta.session_id},qbaseOptions:{env:t.qbase_options.env},qbaseReq:t.qbase_req}),s=Tt({rdm:e.getConfig().rdm});return new Promise(((e,t)=>{n._requestSkipCheckDomain({url:s.url,method:"POST",header:o,data:a.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,success:r=>{try{for(var n in null==ke||ke.info("res",r),r.header)if("x-nws-log-uuid"===n.toLowerCase()&&(null==ke||ke.log(`[cloud.callContainer] x-nws-log-uuid ${r.header[n]}`)),"x-wx-system-error"===n.toLowerCase()){var o=Number(r.header[n]);return 85104===o&&s.invalidate(),void t(new Error(`wx system error. code: ${o}`))}if(200===r.statusCode){var a=r.data,l=!1;for(var u in r.header)"x-wx-compression"===u.toLowerCase()&&"snappy"===r.header[u]&&(l=!0);var c=Be.V1.decodeStdPrivResponse(i,new Uint8Array(a),l);e({errCode:0,errMsg:"",data:c,profile:r.profile,channelType:1})}else t({errCode:-9999,errMsg:"system conn status not 200"})}catch(e){t(new Error(`error while processing internal response ${e}`))}},fail:e=>{t({...e,errCode:-9999,errMsg:e.errMsg})}})}))})),$e.apply(this,arguments)}const We=je;const qe=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const He="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;var Ge="object"==typeof self&&self&&self.Object===Object&&self;const Qe=He||Ge||o("return this")();const ze=function(){return Qe.Date.now()};var Ke=/\s/;const Ye=function(e){for(var t=e.length;t--&&Ke.test(e.charAt(t)););return t};var Ve=/^\s+/;const Je=function(e){return e?e.slice(0,Ye(e)+1).replace(Ve,""):e};const Xe=Qe.Symbol;var Ze=Object.prototype,et=Ze.hasOwnProperty,tt=Ze.toString,rt=Xe?Xe.toStringTag:void 0;const nt=function(e){var t=et.call(e,rt),r=e[rt];try{e[rt]=void 0;var n=!0}catch(e){}var o=tt.call(e);return n&&(t?e[rt]=r:delete e[rt]),o};var ot=Object.prototype.toString;const it=function(e){return ot.call(e)};var at=Xe?Xe.toStringTag:void 0;const st=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":at&&at in Object(e)?nt(e):it(e)};const lt=function(e){return null!=e&&"object"==typeof e};const ut=function(e){return"symbol"==typeof e||lt(e)&&"[object Symbol]"==st(e)};var ct=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,pt=/^0o[0-7]+$/i,ft=parseInt;const ht=function(e){if("number"==typeof e)return e;if(ut(e))return NaN;if(qe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Je(e);var r=dt.test(e);return r||pt.test(e)?ft(e.slice(2),r?2:8):ct.test(e)?NaN:+e};var _t=Math.max,gt=Math.min;const vt=function(e,t,r){var n,o,i,a,s,l,u=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=n,i=o;return n=o=void 0,u=t,a=e.apply(i,r)}function h(e){return u=e,s=setTimeout(g,t),c?f(e):a}function _(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=i}function g(){var e=ze();if(_(e))return v(e);s=setTimeout(g,function(e){var r=t-(e-l);return d?gt(r,i-(e-u)):r}(e))}function v(e){return s=void 0,p&&n?f(e):(n=o=void 0,a)}function m(){var e=ze(),r=_(e);if(n=arguments,o=this,l=e,r){if(void 0===s)return h(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=ht(t)||0,qe(r)&&(c=!!r.leading,i=(d="maxWait"in r)?_t(ht(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=o=s=void 0},m.flush=function(){return void 0===s?a:v(ze())},m};var mt=()=>{};class yt{constructor(e,t,r){this.refreshToken=e,this.proactiveRefreshTimer=t,this.onRefreshedToken=r,this.state="init",this.currentToken=void 0,this.currentSession=void 0,this.currentTask=void 0,this.refreshHandler=void 0}transition(e,t){switch(mt(`[gateway:token] transition ${this.state} -> ${e}`,t),this.state){case"init":"refreshing"===e?(this.state="refreshing",this.currentTask=t.task):mt(`[gateway:token] invalid transition ${this.state} -> ${e}`);break;case"normal":"refreshing"===e?(this.state="refreshing",Object.defineProperty(this.currentToken,"__invalidated",{value:!0}),this.currentToken=void 0,this.currentTask=t.task):"normal"===e?t.token&&this.currentToken&&t.token.timestamp>this.currentToken.timestamp&&(this.currentToken=t.token,this.currentTask=void 0):mt(`[gateway:token] invalid transition ${this.state} -> ${e}`);break;case"refreshing":"normal"===e?(this.state="normal",this.currentToken=t.token,this.currentTask=void 0):mt(`[gateway:token] invalid transition ${this.state} -> ${e}`)}}getTokenSync(){if(this.currentToken)return this.currentToken.exp<Date.now()?void this.invalidate(this.currentToken):this.currentToken}getToken(){var e=this;return s()((function*(){return e.currentToken?e.currentToken.exp<Date.now()?e.invalidate(e.currentToken):e.currentToken:e.invalidate()}))()}updateSession(e){var t=this;return s()((function*(){var r=new Promise((t=>"string"==typeof e?t(e):e?e.then(t):t(e)));return t.currentSession=yield r,t.invalidate()}))()}invalidate(e,t){var r=this;return s()((function*(){var n;if("refreshing"===r.state&&r.currentTask)return r.currentTask;if(null!=e&&e.__invalidated&&"normal"===r.state&&r.currentToken)return mt("[gateway:token] already invalidated token returning latest not refreshing"),r.currentToken;r.refreshHandler&&clearTimeout(r.refreshHandler);var o=r.currentSession,i=new Promise(((t,n)=>{r.refreshToken(o).then((n=>{var o=0,i=0;"iat"in n?(o=1e3*n.iat,i=n.exp-n.iat):(o=n.timestamp,i=n.expires_in);var a=ae({timestamp:o,expires_in:i}),s={...n,exp:a,timestamp:o,invalidate:()=>r.invalidate(e)};r.transition("normal",{token:s});var l=s.exp-Date.now();r.refreshHandler=r.proactiveRefreshTimer?setTimeout((()=>{r.invalidate(void 0,!0)}),r.proactiveRefreshTimer(l)):void 0,t(s)})).catch(n)}));t||r.transition("refreshing",{task:i});var a=yield i;return null===(n=r.onRefreshedToken)||void 0===n||n.call(r,a),a}))()}}var bt=/https:\/\/servicewechat\.com/,wt={},At="servicewechat.com",Et=!1,It=`${Math.random()}_${Date.now()}`;void 0!==y&&y.onLoad((()=>{It=`${Math.random()}_${Date.now()}`}));var St={};class Ct{constructor(e){this.identifiers=e,this._tunnelRequest=void 0,this._meta=void 0,this.containerTokenManager=new yt(this.refreshContainerServiceEndpoint.bind(this),(e=>e),(e=>this.processServiceEndpoint(e))),St.container=this.containerTokenManager}setMetaData(e){this._meta=e}setTunnelRequest(e){this._tunnelRequest=e}getEndpointSync(e){if("container"===e){var t=this.containerTokenManager.getTokenSync();if(null!=t&&t.url)return t}}getEndpoint(e){var t=this;return s()((function*(){return"container"===e?t.containerTokenManager.getToken():null}))()}processServiceEndpoint(e){return s()((function*(){Jt(e,"1"),At=e.domain||"servicewechat.com",function(){Rt.apply(this,arguments)}(),Dt()}))()}refreshContainerServiceEndpoint(){var e=this;return s()((function*(){if(clearTimeout(wt.container),te().private_getBackgroundFetchData&&!Et){Et=!0;var t,r,n=Ae(500,e.identifiers);if(n&&!n.url_info&&(n=yield n),n&&n.expiresTs>Date.now()&&n.url_info)return{url:null!==(t=n.url_info)&&void 0!==t&&t.cloudrun_url?`${n.url_info.cloudrun_url}?token=${n.token}`:`https://${n.domain}/wxa-qbase/container_service?token=${n.token}`,cloudServiceUrl:null!==(r=n.url_info)&&void 0!==r&&r.cloudbase_url?`${n.url_info.cloudbase_url}?token=${n.token}`:void 0,domain:n.domain||"servicewechat.com",token:n.token,http:!0,key:n.key,timestamp:n.timestamp,expires_in:n.expires_in,exp:n.expires_in}}for(var o=[],i=0;i<3;i++)try{var a,s,l=Date.now(),u=me(),c=(e._tunnelRequest?yield e._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({client_random:It,system:u.system,wx_app_version:u.version})}):yield We({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:JSON.stringify({client_random:It,system:u.system,wx_app_version:u.version}),qbase_options:{},qbase_meta:e._meta,cli_req_id:`${+new Date}_${Math.random()}`}})).data;if(Date.now()-l>1e3*c.expires_in){o.push(`result already expired (startTs ${l} resultTs ${Date.now()})`);continue}var d=c.domain||"servicewechat.com";return{url:null!==(a=c.url_info)&&void 0!==a&&a.cloudrun_url?`${c.url_info.cloudrun_url}?token=${c.token}`:`https://${d}/wxa-qbase/container_service?token=${c.token}`,cloudServiceUrl:null!==(s=c.url_info)&&void 0!==s&&s.cloudbase_url?`${c.url_info.cloudbase_url}?token=${c.token}`:void 0,domain:d,token:c.token,http:c.http,key:c.key,timestamp:c.timestamp,ip:c.ip,vip:c.vip,expires_in:c.expires_in,exp:c.expires_in}}catch(e){o.push(e+"")}throw new Error(`get container service endpoints errors: ${o.join("\n")}`)}))()}invalidateToken(e,t){"container"===e&&this.containerTokenManager.invalidate(t)}static invalidateService(e,t){var r;null===(r=St[e])||void 0===r||r.invalidate(t)}}function Tt(e){var t,r=null===(t=St.container)||void 0===t?void 0:t.getTokenSync();if(null!=r&&r.cloudServiceUrl)return e.rdm&&(r.cloudServiceUrl=r.cloudServiceUrl.replace(bt,"https://wxardm.weixin.qq.com")),r}var Ot=!1,xt=!1,Nt=0;function Rt(){return(Rt=s()((function*(){if(!Ot){Ot=!0;var e=()=>{Ot&&setTimeout(s()((function*(){yield Lt(),e()})),2e4)};if(e(),!xt){var t;xt=!0;var r=te();null!==(t=r.wx)&&void 0!==t&&t.onAppHide&&r.wx.onAppHide((()=>{Ot=!1}))}return Lt()}}))).apply(this,arguments)}var Pt=0,Dt=()=>{Pt=Date.now()},Lt=vt((()=>new Promise((e=>{if(!(Date.now()-Pt<3e4)){var t=Date.now(),r=!/^\d+/.test(At);te()._requestSkipCheckDomain({url:`${r?"https":"http"}://${At}/wxa-qbase/keepalive`,header:r?{}:{host:"servicewechat.com"},method:"GET",dataType:"text",enableHttp2:r,success:()=>{e(),Nt++%4==0&&Zt(22990,1,["privateHttpKeepAlive",At,t,Date.now(),Date.now()-t].join(","))},fail:()=>{e()}})}})))),Bt=m;const kt=Bt;var Mt=()=>"devtools"===Bt.platform,Ft=!1,jt=[],Ut=Date.now(),$t=Date.now(),Wt="unknown";kt.onReady((()=>{Ut=Date.now(),$t=Date.now()}));var qt,Ht,Gt,Qt,zt=()=>$t,Kt=()=>{for(var e of jt)try{e()}catch(e){0}jt=[]},Yt=e=>{setTimeout((()=>{try{var t;if(!(e=>!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime)))(e))return;if(!Ft&&jt.length<100)return void jt.push(Yt.bind(null,e));var r=e.apiEndTime-e.apiStartTime,n=e.tunnelEndTime?e.tunnelEndTime-e.tunnelStartTime:0,o=[0,e.apiName,r,n,(e.pollStartTime&&e.pollEndTime&&e.pollEndTime>e.pollStartTime?e.pollEndTime-e.pollStartTime:0)||0,Wt,e.tunnelTimeNoCSNetCost?r-e.tunnelTimeNoCSNetCost:0,e.tunnelTimeNoCSNetCost?n-e.tunnelTimeNoCSNetCost:0,e.funcExecTime?e.funcExecTime:0,null!==(t=e.channelType)&&void 0!==t?t:0,e.funcName||"",e.apiStartTime-Ut,void 0!==e.warmStartTime?e.apiStartTime-e.warmStartTime:0];F.fake?Zt(16588,6,o.join(",")):F.reportKeyValue({key:"CloudReport",value:o.join(","),force:!0})}catch(e){}}))},Vt=(e,t,r,n)=>{F.reportIDKeyDirectly({id:e,key:t,force:r,immediately:n})},Jt=(e,t)=>(qt=e,Ht=t),Xt=[],Zt=(e,t,r)=>{Xt.push({log_id:e,version:t,user_log_list:r}),qt&&er()},er=ie((()=>{te()._requestSkipCheckDomain({url:`https://servicewechat.com/wxa-qbase/report?token=${qt.token}&v=${Ht}`,method:"POST",header:{},enableHttp2:!0,dataType:"json",data:JSON.stringify({report_info_list:Xt}),success:e=>{for(var t in e.header)"x-wx-system-error"===t.toLocaleLowerCase()&&"85104"===e.header[t]&&qt.invalidate()}}),Xt=[],Lt()}),3e4),tr=(e,t)=>{var r=_(e);function n(...n){if(t.samplePicker&&!t.samplePicker.next())return r?e.apply(this,n):e;var i=Date.now(),a=!0;try{var s,l;if(null!==(s=t.condition)&&void 0!==s&&s.emptyKey&&t.timing[t.startKey])return r?e.apply(this,n):e;if(r){var u=e.apply(this,n);if("promise"!==d(u))return a=!1,u;l=u}else l=e;return l.then((()=>o(i))).catch((()=>o(i))),l}catch(e){throw a=!1,e}finally{a||o(i)}}function o(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&Yt({...t.timing,apiName:t.autoReport})}return r?n:n()},rr=(Gt=10,Qt=!0,function*(){for(var e=()=>parseInt(Math.round(2*Math.random()*Gt),10),t=Qt?0:e();;)t>0?(t--,yield!1):(t=e(),yield!0)})();function nr(e){if(e&&!isNaN(e))return e>6e4?6e4:e<0?0:e}function or(e,t,r){t.stats.apiEndTime=Date.now(),Yt({...t.context,apiEndTime:t.stats.apiEndTime,apiName:e});var n=Boolean(t.stats.profile),o=t.stats.profile||{},i=t.stats.serverEndTs-t.stats.serverStartTs,a=t.stats.httpRequest?t.stats.httpRequest<=6e4?t.stats.httpRequest:6e4:void 0,s=t.stats.apiEndTime,l=s-t.context.apiStartTime;l>9e4&&(l=9e4);var u=t.path||"";u=u.split("?")[0].replace(/\/\d+\//g,"/*/").replace(/\/\d+$/g,"/*"),Zt(22601,14,[t.stats.callid,t.context.apiStartTime,s,t.stats.serverStartTs,t.stats.serverEndTs,t.stats.requestBodyBytes,t.stats.responseBodyBytes,t.stats.getServiceEndpoint,t.stats.queryDNS,t.stats.compress,t.stats.loadAsmcrypto,t.stats.encrypt,a,t.stats.decrypt,t.stats.uncompress,t.stats.decodePb,t.stats.decodeBody,t.stats.ip,o.redirectStart,n?o.redirectEnd-o.redirectStart:void 0,o.fetchStart,o.domainLookupStart,n?o.domainLookUpEnd-o.domainLookUpStart:void 0,o.connectStart,n?o.connectEnd-o.connectStart:void 0,o.SSLconnectionStart,n?o.SSLconnectionEnd-o.SSLconnectionStart:void 0,o.requestStart,n?o.requestEnd-o.requestStart:void 0,o.responseStart,n?o.responseEnd-o.responseStart:void 0,o.rtt,o.estimate_nettype,nr(o.httpRttEstimate),nr(o.transportRttEstimate),nr(o.downstreamThroughputKbpsEstimate),o.throughputKbps,o.peerIP,o.port,n?o.socketReused?1:0:void 0,o.sendBytesCount,o.receivedBytedCount,o.protocol,me().system,l,i>0?i:0,a?l-a:void 0,u,me().platform,t.stats.requestStartTs,1678888746406,t.stats.ecdnId,t.stats.ecdnEdgeTiming,t.stats.domain,t.stats.stringToBuffer,t.stats.encodePb,t.stats.tsBeforeCallContainerImpl,t.stats.tsCallContainerImplStart,t.stats.decodeJson,`SDK:${r}`,n?o.requestStart-t.stats.requestStartTs:void 0,n?t.stats.requestSuccessTs-o.requestEnd:void 0,t.stats.responseProcessEndTs?s-t.stats.responseProcessEndTs:void 0,t.stats.upstreamCost,t.stats.meshStartTs,t.stats.meshEndTs].join(","))}function ir(e){return`${e}:ok`}function ar(e,t){return JSON.stringify(e,((e,r)=>t&&t.has(r)?t.get(r):"arraybuffer"===d(r)?{type:"Buffer",data:[...new Uint8Array(r)]}:r))}function sr(e){return lr(JSON.parse(e))}function lr(e){switch(d(e)){case"object":return ur(e);case"array":return e.map(lr);default:return e}}function ur(e){var t=e,r=cr(t);if(t!==r)return r;for(var n in t){var o=t[n];switch(d(o)){case"object":var i=cr(o);t[n]=i!==o?i:ur(t[n]);break;case"array":var a=lr(o);a!==o&&(t[n]=a);break;default:continue}}return t}function cr(e){for(var t in e)if("type"===t)if("Buffer"===e.type)if(g(e.data)&&h(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}return e}var dr=Symbol.for("CLOUD_ID"),pr=Symbol("CDN");function fr(e){var t=[];for(var r in e)p(e[r])&&e[r]._internalType===dr&&t.push({key:r,cloudID:e[r].cloudID});return t}var hr=2e4,_r=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},gr=e=>e.join("->");function vr(e){return function(){var t=s()((function*(t){var r={...t.data},n=fr(r).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(n.length)for(var o of n)delete r[o.key_name];var i=ar(r,yield t.cdnMapPromise);K({input:i,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});var a=`${+new Date}-${Math.random()}`;t.context.tunnelStartTime=+new Date;var{result:l,requestID:u}=yield function(e,t,r,n){return c.apply(this,arguments)}(t,i,n,a);return t.context.tunnelEndTime=+new Date,{errMsg:ir(Sr),result:l,requestID:u};function c(){return c=s()((function*(t,r,n,o){return new Promise(((i,a)=>{var s=[_r("start")],{resolve:l,reject:u}=f(s,i,a);d({param:t,functionName:t.name,data:r,cloudIDList:n,callID:o,action:Er.CALL,scene:Ir.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:l,reject:u})}))})),c.apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return p=s()((function*(r){var{functionName:o,data:i,callID:a,action:l,scene:u,tryCount:c,trace:p,systemErrorRetry:f,timeoutErrorRetry:h,resolve:_,reject:g}=r,v=l===Er.CALL&&Mt()?t.localDebugNoTimeout:void 0,m=ar({function_name:o,data:l===Er.CALL?i:void 0,action:l,scene:u,call_id:a,cloudid_list:l===Er.CALL?n:[],local_debug_no_timeout:v}),y=!1,b=!1,w=()=>{clearTimeout(I),b=!0},A=+new Date,I=v?void 0:setTimeout(s()((function*(){var t=e.appConfig.clientPollTimeout||hr;if(!(+new Date-A>t&&(yield ue(),b))){if(!Mt()&&+new Date-A>e.appConfig.maxStartRetryGap)return p.push(_r("timeout, exceed max retry gap")),g(T({errCode:E.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${a}) (trace: ${gr(p)})`},Sr));y=!0,r.timeoutErrorRetry>0?(p.push(_r("timeout, retry")),d({...r,scene:Ir.TIMEOUT_RETRY,tryCount:c-1,timeoutErrorRetry:h-1})):(p.push(_r("timeout, abort")),g(T({errCode:E.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${gr(p)})`},Sr)))}})),e.appConfig.clientPollTimeout||hr);e.request({...t.config,apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:m,env:t.config&&t.config.env||e.env,stdpriv:!0}).then((function(e){try{if(y)return;w(),(e=>{var r,n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&(n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time),n.baseresponse.stat.func_exec_cost_time&&(t.context.funcExecTime=n.baseresponse.stat.func_exec_cost_time)),t.context.channelType=null!==(r=e.channelType)&&void 0!==r?r:0,e.profile&&(null==le||le.log("callFunction profile",e.profile))})(e);var n=e.data;if(!n)return p.push(_r("empty resp")),g(T({errCode:E.SDK_FUNCTIONS_EMPTY_CALL_RESULT},Sr));if(!n.baseresponse||0!==n.baseresponse.errcode)return n.baseresponse?0!==n.baseresponse.errcode?g(T({errCode:E.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${n.baseresponse.errcode} errmsg ${n.baseresponse.errmsg} (callId: ${a})`},Sr)):g(T({errCode:E.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(n.baseresponse)} (callId: ${a})`},Sr)):g(T({errCode:E.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},Sr));if(0!==n.status){if(1===n.status){if(0!==n.service_errcode){if(n.service_errcode===E.TCB_FUNCTIONS_EXEC_FAIL){var o=n.service_errmsg||"";try{for(var i=o.split("\n"),s=[],l=0;l<i.length;l++)i[l].startsWith("Error: ")&&s.push([i[l],l]);if(s.length%2==1){var u=s[Math.floor(s.length/2)][1];o=i.slice(u).join("\n")}}catch(e){}var f=T({errCode:E.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`\n(error stack)(${n.func_request_id?`requestId ${n.func_request_id}, `:""}callid ${a}):\n${o}`},Sr);return f.stack=`Error: ${f.message}`,f.requestID=n.func_request_id,g(f)}var h=T({errCode:E.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`\n(${n.func_request_id?`requestId ${n.func_request_id}, `:""}callid ${a}):\n${n.service_errcode} ${n.service_errmsg}`},Sr);return h.stack=`Error: ${h.message}`,h.requestID=n.func_request_id,g(h)}var v=n.data;try{v=sr(v)}catch(e){try{v=JSON.parse(v)}catch(e){}}return _({result:v,requestID:n.func_request_id})}return p.push(_r("poll result expired")),g(T({errCode:E.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${a}) (trace: ${gr(p)})`},Sr))}if(!(c>=0))return p.push(_r("too many polls, abort")),g(T({errCode:E.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${gr(p)})`},Sr));p.push(_r("normal poll")),d({...r,action:Er.POLL,scene:Ir.NORMAL_POLL_RETRY,tryCount:c-1})}catch(e){g(T({errCode:E.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${a})`},Sr))}})).catch((e=>{y||(w(),e&&e.operateWXDataFail&&f>0?(p.push(_r(`system error (${e}), retry`)),d({...r,scene:Ir.SYSTEM_ERROR_RETRY,tryCount:c-1,systemErrorRetry:f-1})):(p.push(_r(`system error (${e}), abort`)),g(T(`${e} (callId: ${a}) (trace: ${gr(p)})`,Sr))))}))})),p.apply(this,arguments)}function f(e,t,r){var n=t=>{e.push(_r(`app ${t}`))};ge(n);return{resolve:e=>{ve(n),t(e)},reject:e=>{ve(n),r(e)}}}}));return function(e){return t.apply(this,arguments)}}()}function mr(e){var t=new WeakMap,r=[];if(e&&(JSON.stringify(e,((e,n)=>n&&n._internalType===pr?void r.push(new Promise(((e,r)=>{var o={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},i=n;if("object"===d(i.target)){if(!i.target.filePath)throw new Error("filePath must be provided");o.filePath=i.target.filePath}else o.fileData=i.target;e(yr(o).then((e=>{t.set(n,e.fileUrl)})))}))):n)),r.length))return Promise.all(r).then((()=>t))}function yr(e){return new Promise(((t,r)=>{var n={...e,appType:e.appType||301,fileType:e.fileType||20303,fileKey:e.fileKey||`file_${Math.random()}`};te().uploadToCommonCDN({...n,success:t,fail:r})}))}var br=e=>({...e,errMsg:void 0}),wr=e=>{try{Mt()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog({...e,domain:"cloud",method:"POST",realMethod:e.method,timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1})}catch(e){}},Ar=(e,t)=>{try{if(Mt()&&"undefined"!=typeof __global&&__global.networkLog){var r=t(),n=`${Math.random()}-${+new Date}`,o=r.console||!1,i=r.resultGetter||br;wr({reqId:n,type:"requestWillBeSent",url:r.url,headers:r.headers||{},body:r.reqBody,console:o,callFramesIgnoreLength:2,timestampMs:r.timestampMs,method:r.method}),e.then(function(){var e=s()((function*(e){try{yield((e=0)=>new Promise((t=>setTimeout(t,e))))(),wr({reqId:n,type:"loadingFinished",body:JSON.stringify(i(e),null,2),console:o,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}));return function(t){return e.apply(this,arguments)}}()).catch((e=>{try{wr({reqId:n,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:p(e)?e.errMsg||JSON.stringify(e):e.toString(),console:o,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}},Er=function(e){return e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e}({}),Ir=function(e){return e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY",e}({}),Sr="cloud.callFunction",Cr="cloud.callFunction_real_v2";function Tr(e){var t,r,n;function o(){return t||(t=function(e){return function(){var t=s()((function*(t){var r={...t.data},n=fr(r).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(n.length)for(var o of n)delete r[o.key_name];var i=ar(r,yield t.cdnMapPromise);K({input:i,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});var a=ar({function_name:t.name,data:i,cloudid_list:n});t.context.tunnelStartTime=+new Date;var l=yield e.request({...t.config,apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:a,env:t.config&&t.config.env||e.env});t.context.tunnelEndTime=+new Date;var u=l.data;if(!u)throw C({errCode:E.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:E[E.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},Sr);if(u.event_id,!u.poll_url)throw C({errCode:E.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:E[E.SDK_FUNCTIONS_EMPTY_POLL_URL]},Sr);u.poll_url.indexOf("?")>-1?u.poll_url+="&devtools_ignore=true&skip_domain_check=true":u.poll_url+="?devtools_ignore=true&skip_domain_check=true",t.context.pollStartTime=+new Date;var{result:c,requestID:d}=yield function(e){return p.apply(this,arguments)}(u.poll_url);return t.context.pollEndTime=+new Date,{errMsg:ir(Sr),result:c,requestID:d};function p(){return(p=s()((function*(t){return new Promise(((r,n)=>{f(t,e.appConfig.maxPollRetry||50,r,n)}))}))).apply(this,arguments)}function f(e,t,r,n){return h.apply(this,arguments)}function h(){return h=s()((function*(t,r,n,o){te(e.identifiers)._requestSkipCheckDomain({url:t,success:e=>{try{if(200!==e.statusCode)return o(C({errCode:E.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:`polling status code ${e.statusCode}`},Sr));var i=e.data;if(!i)return o(C({errCode:E.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:E[E.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},Sr));if(i.base_resp&&0===i.base_resp.ret){if(0!==i.status){if(1===i.status){if(0!==i.service_errcode){var a=C({errCode:E.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`requestID ${i.func_req_id}, cloud function service error code ${i.service_errcode||"unknown"}, error message ${i.service_errmsg||"unknown"}`},Sr);return a.requestID=i.func_req_id,o(a)}var s=i.content;try{s=sr(s)}catch(e){try{s=JSON.parse(s)}catch(e){}}return n({result:s,requestID:i.func_req_id})}return o(C({errCode:E.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},Sr))}if(!(r>=0))return o(C({errCode:E.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:E[E.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},Sr));f(t,r-1,n,o)}else{if(!i.base_resp)return o(C({errCode:E.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:E[E.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},Sr));if(0!==i.base_resp.ret)return o(C({errCode:E.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.ret ${i.base_resp.ret}`},Sr))}}catch(e){o(C({errCode:E.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e}`},Sr))}},fail:e=>{o(C(e,Sr))}})})),h.apply(this,arguments)}}));return function(e){return t.apply(this,arguments)}}()}(e)),t}function i(){return r||(r=vr(e)),r}function a(){return n||(n=function(e){return function(){var t=s()((function*(t){var r,n={function_name:t.name,data:ar(t.data),cloudid_list:[]},o=ar(n),i=yield e.serviceEndpoint.getEndpoint("container"),a=new Uint8Array(u.wx.base64ToArrayBuffer(i.key)),s={"X-WX-EV":3,"Content-Type":"application/octet-stream"},l=Be.V3.encodeRequest(a,{"X-WX-CALLID":`${+new Date}-${Math.random()}`,"X-WX-CLOUDFUNCTION-NAME":t.name,"X-WX-CLOUDFUNCTION-ENV":(null===(r=t.config)||void 0===r?void 0:r.env)||e.env||""},"POST",o),c=yield new Promise(((e,t)=>te()._requestSkipCheckDomain({url:i.cloudServiceUrl,method:"POST",header:s,data:l.data.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,success:e,fail:t}))),d=Be.V3.decodeResponse(a,new Uint8Array(c.data)).body;if(d)try{d=JSON.parse(d)}catch(e){}return{errMsg:ir(Sr),result:d}}));return function(e){return t.apply(this,arguments)}}()}(e)),n}return function(e){var t=+new Date;Q(e,"object");var r=V(e);return r.data||(r.data={}),r.context={tunnelTimeNoCSNetCost:0,funcName:e.name,apiStartTime:t,warmStartTime:zt()},G(r)?function(e){$({apiName:Sr,param:e}),c(e).then((t=>{q(Sr,e,t)})).catch((t=>{H(Sr,e,t)}))}(r):c(r)};function l(e){Q(e,{name:"string"}),e.data&&Q(e.data,"object"),e.config&&e.config.env&&Q(e.config.env,"string")}function c(e){return d.apply(this,arguments)}function d(){return(d=s()((function*(t){try{var r;if(l(t),t.cdnMapPromise=mr(t.data),r="sdk"===e.runtime.platform&&e.plugins.length?a()(t):s()?o()(t):i()(t),Mt()){var n=Date.now();Ar(r,(()=>{var r;return{url:`wx.cloud.callFunction.${t.name}`,headers:{Env:e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env},reqBody:ar(t.data),timestampMs:n,console:e.debug}}))}return yield r}catch(e){throw C(e,Sr)}finally{Yt({...t.context,apiEndTime:+new Date,apiName:s()?Sr:Cr})}function s(){return 1===t.version}}))).apply(this,arguments)}}function Or(e){return{callFunction:Tr(e)}}var xr,Nr="functions";function Rr(e){e.registerService(function(e){var t={name:Nr,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,runtime:e.runtimeInfo,plugins:e.plugins,get debug(){return e.debug},get env(){return e.getEnvForService(Nr)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:Nr,context:t,getAPIs:Or.bind(null,t)}}(e))}function Pr(){if(!xr){var e=te();if(!e.private_getUserAgent)return xr;e.private_getUserAgent((e=>{xr=e}))}return xr}function Dr(e){e.path||(e.path=""),e.method||(e.method="GET"),e.header||(e.header={}),e.dataType||(e.dataType="json"),e.responseType||(e.responseType="text");var t="";for(var r in e.header)"content-type"===r.toLowerCase()&&e.header&&(t=e.header[r]);if(t||(t="application/json",e.header["content-type"]="application/json"),e.header["User-Agent"]=Pr()||"",/get/i.test(e.method||"")&&e.data&&p(e.data)){var n="";for(var o in e.data)n+=`${n.length?"&":""}${Ie(o)}=${Ie(e.data[o])}`;e.path.includes("?")?e.path+=`${e.path.endsWith("&")?"":n?"&":""}${n}`:e.path+=`${e.path.endsWith("?")?"":n?"?":""}${n}`,e.data=void 0}else if(/post|put|patch|delete/i.test(e.method||"")&&e.data)if(t.includes("application/json")){var i=d(e.data);e.shouldSerialize="string"!==i}else if(t.includes("application/x-www-form-urlencoded")&&p(e.data)){var a="";for(var s in e.data)a+=`${a.length?"&":""}${encodeURIComponent(s)}=${encodeURIComponent(e.data[s])}`;e.data=a}}function Lr(e){return e>=300&&e<=399}class Br extends Error{constructor(e,t){super(e),this.code=void 0,this.code=t}}var kr=new WeakMap;var Mr="cloud.callContainer";function Fr(e){return function(){var r=s()((function*(r){var n=e.serviceEndpoint.getEndpointSync("container"),o=new WeakMap;if(r.cdnMapPromise||!n){var i=yield Promise.all([r.cdnMapPromise,jr(e.serviceEndpoint.getEndpoint("container"),r.stats,"getServiceEndpoint")]);i[0]&&(o=i[0]),n=i[1]}else r.stats.getServiceEndpoint=0;if(r.shouldSerialize&&(r.data=ar(r.data,o)),n.http){var a=function(t,r){return new Promise(((n,o)=>{var i,a;r.stats.tsCallContainerImplStart=Date.now();var s=te(e.identifiers),l={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":t.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-USER-TIMEOUT":r.timeout||"","X-WX-LIB-BUILD-TS":1678888746406,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"PB, JSON","Content-Type":"application/octet-stream"},u=`${Math.random()}_${Date.now()}`,c={...r.header,"X-WX-ENV":e.isInstance?e.env:(null===(i=r.config)||void 0===i?void 0:i.env)||e.env,"X-WX-CALL-ID":u};e.appid&&(c["X-WX-RESOURCE-APPID"]=e.appid),r.service&&(c["X-WX-SERVICE"]=r.service);var d=r.stats;d.callid=u;var f=Date.now();if("GET"===(null===(a=r.method)||void 0===a?void 0:a.toUpperCase())&&r.data&&p(r.data)){var h=[];for(var _ in r.data)h.push(`${_}=${r.data[_]}`);r.path+=`${r.path.includes("?")?r.path.endsWith("&")?"":"&":"?"}${h.join("&")}`,r.data=void 0}c["X-WX-CONTAINER-PATH"]=r.path;var g=new Uint8Array(Te(t.key)),{data:v,contentEncoding:m}=Be.V1.encodeRequest(g,c,r.method||"GET",r.data,u,d);l["X-WX-REQUEST-CONTENT-ENCODING"]=m,d.encrypt=Date.now()-f,f=Date.now();var y=!0,b=y?t.url:`http://${t.vip}/wxa-qbase/container_service?token=${t.token}`;r.rdm?b=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:r.ecdn&&(b=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),r.verbose&&console.log(`[cloud.callContainer] url ${b}`),y&&t.domain&&(r.stats.domain=t.domain),d.requestBodyBytes=v.byteLength,d.requestStartTs=Date.now(),r._fallback?o({errCode:-9999,errMsg:`${Mr}:fail emulated fallback`}):s._requestSkipCheckDomain({url:b,method:"POST",header:l,data:v.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:r.timeout,enableHttp2:y,success:e=>{try{for(var i in e.header)if("x-nws-log-uuid"===i.toLowerCase()&&(r.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[i]}`),r.stats.ecdnId=e.header[i]),"x-edge-timing"===i.toLowerCase()&&(r.stats.ecdnEdgeTiming=e.header[i]),"x-wx-system-error"===i.toLowerCase()){var a=Number(e.header[i]);return 85104===a&&t.invalidate(),void o({errCode:a,errMsg:`${Mr}:fail system error. code: ${a}`})}if(r.verbose&&console.warn("res",e),d.profile=e.profile,d.httpRequest=Date.now()-f,200===e.statusCode){var s=e.data;d.responseBodyBytes=s.byteLength,f=Date.now();var l=!1,c=Be.m.pb;for(var p in e.header)if("x-wx-compression"===p.toLowerCase()&&"snappy"===e.header[p]&&(f=Date.now(),l=!0),"x-wx-response-content-encoding"===p.toLowerCase()&&"json"===e.header[p].toLowerCase()&&(c=Be.m.json),"x-wx-server-timing"===p.toLowerCase()){var h=(e.header[p]||"").split(",");h.length>=2&&(d.serverStartTs=Number(h[0]),d.serverEndTs=Number(h[1]))}var _,v=Be.V1.decodeResponse(g,new Uint8Array(s),l,c);f=Date.now();var m=v.body;if(!Lr(v.statusCode))if("json"===r.dataType)_=Ee("string"==typeof m?m:Oe(m.buffer));else _="text"===r.responseType?"string"==typeof m?m:Oe(m.buffer):"arraybuffer"===r.responseType?"string"==typeof m?xe(m):m.buffer:m;d.decodeBody=Date.now()-f,d.responseProcessEndTs=Date.now(),n({statusCode:v.statusCode,header:v.header,data:_,stats:d,callID:u,errMsg:`${Mr}:ok`})}else o({errCode:-9999,errMsg:`${Mr}:fail [call_id ${u}] system conn status not 200`})}catch(e){o({errCode:-1,errMsg:`${Mr}:fail [call_id ${u}] error while processing internal response ${e}`})}},fail:e=>{o({...e,errCode:-9999,errMsg:e.errMsg.replace(/^request/,Mr)})}})}))}(n,r);return a.then(Lt).catch(Lt),a}return function(e,r){return t.apply(this,arguments)}(n.url,r)}));return function(e){return r.apply(this,arguments)}}();function t(){return t=s()((function*(t,r){return new Promise(((n,o)=>{var i,a=te(e.identifiers),s={...r.header,"X-WX-ENV":e.isInstance?e.env:(null===(i=r.config)||void 0===i?void 0:i.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":r.timeout};e.appid&&(s["X-WX-RESOURCE-APPID"]=e.appid),a._requestSkipCheckDomain({url:t,method:r.method,header:s,data:r.data,dataType:r.dataType,responseType:r.responseType,timeout:r.timeout,success:e=>{n({...e,errMsg:`${Mr}:ok`})},fail:e=>{o({...e,errMsg:e.errMsg.replace(/^request/,Mr)})}})}))})),t.apply(this,arguments)}}function jr(e,t,r){var n=Date.now();return e.then((()=>t[r]=Date.now()-n)).catch((()=>t[r]=Date.now()-n)),e}var Ur=function(e){return e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e}({}),$r=function(e){return e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout",e}({}),Wr=function(e){return e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL",e}({}),qr=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Hr=e=>e.join("->"),Gr=2e4,Qr=1e5,zr="cloud.callContainer";function Kr(e){return function(){var t=s()((function*(t){var r,n;if(t.shouldSerialize){var o=yield t.cdnMapPromise;t.data=ar(t.data,o)}var i=Wr.RAW,a=(null===(r=t.method)||void 0===r?void 0:r.toUpperCase())||"GET";if(t.data&&/^(POST|PUT|PATCH|DELETE)$/.test(a)){var l=d(t.data);if("object"===l)t.data=JSON.stringify(t.data);else{if("arraybuffer"!==l&&"string"!==l)throw new Error(`input data type is not supported: ${l}`);var u=!1;if("string"===l)u=t.data.length>Qr;else if(t.data.byteLength>Qr)u=!0;else{var c=Ce(t.data);c.length>Qr?u=!0:(t.data=c,i=Wr.BASE64)}if(u)throw new Error("input data size too large (> 100KB)")}}else if("GET"===a&&t.data&&p(t.data)){var f=[];for(var h in t.data)f.push(`${h}=${t.data[h]}`);t.path+=`${t.path.includes("?")?t.path.endsWith("&")?"":"&":"?"}${f.join("&")}`,t.data=void 0}else t.data=void 0;var _=`${+new Date}-${Math.random()}`;for(var g in t.stats.callid=_,t.header={...t.header,"X-WX-ENV":e.isInstance?e.env:(null===(n=t.config)||void 0===n?void 0:n.env)||e.env,"X-WX-CONTAINER-PATH":t.path},t.service&&(t.header["X-WX-SERVICE"]=t.service),t.header)null!==t.header[g]&&void 0!==t.header[g]&&(t.header[g]+="");t.context.tunnelStartTime=+new Date;var{result:v}=yield function(e,t,r,n){return m.apply(this,arguments)}(t,t.data,i,_);return t.context.tunnelEndTime=+new Date,{...v,errMsg:ir(zr),callID:_};function m(){return m=s()((function*(t,r,n,o){var i,a=!1;t.hasOwnProperty("timeout")&&(i=new Promise(((e,r)=>{setTimeout((()=>{a=!0,r(`timeout (options.timeout == ${t.timeout})`)}),t.timeout)})));var s=new Promise(((s,l)=>{var u=[qr("start")],{resolve:c,reject:d}=w(u,s,l);y({param:t,data:r,dataType:n,callID:o,action:Ur.CALL,retryType:$r.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!i&&a}},trace:u,resolve:c,reject:d})}));return i?Promise.race([s,i]):s})),m.apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return b=s()((function*(r){var{data:n,dataType:o,callID:i,action:a,retryType:l,tryCount:u,trace:c,systemErrorRetry:d,timeoutErrorRetry:p,userTimeout:f,resolve:h,reject:_}=r,g=[];for(var v in t.header)g.push({k:v,v:t.header[v]});var m=ar(a===Ur.CALL?{method:t.method||"GET",headers:g,data:a===Ur.CALL?n:void 0,data_type:o,action:a,retryType:l,call_id:i,user_timeout:t.timeout}:{call_id:i,action:a,retryType:l}),b=!1,w=!1,A=()=>{clearTimeout(S),w=!0},I=+new Date,S=setTimeout(s()((function*(){var t=e.appConfig.clientPollTimeout||Gr;if(!(+new Date-I>t&&(yield ue(),w)||f.reached)){if(!Mt()&&+new Date-I>e.appConfig.maxStartRetryGap)return c.push(qr("timeout, exceed max retry gap")),_(T({errCode:E.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${i}) (trace: ${Hr(c)})`},zr));b=!0,r.timeoutErrorRetry>0?(c.push(qr("timeout, retry")),y({...r,retryType:$r.Timeout,tryCount:u-1,timeoutErrorRetry:p-1})):(c.push(qr("timeout, abort")),_(T({errCode:E.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${i}) (trace: ${Hr(c)})`},zr)))}})),e.appConfig.clientPollTimeout||Gr),C=e=>{var r=e.data;r&&r.baseresponse&&r.baseresponse.stat&&r.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=r.baseresponse.stat.qbase_cost_time)};function O(){return O=s()((function*(n){try{if(b||f.reached)return;A(),C(n);var o=n.data;if(!o)return c.push(qr("empty resp")),_(T({errCode:E.SDK_CONTAINER_EMPTY_CALL_RESULT},zr));if(!o.baseresponse||0!==o.baseresponse.errcode)return o.baseresponse?0!==o.baseresponse.errcode?_(T({errCode:E.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${o.baseresponse.errcode} errmsg ${o.baseresponse.errmsg} (callId: ${i})`},zr)):_(T({errCode:E.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(o.baseresponse)} (callId: ${i})`},zr)):_(T({errCode:E.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},zr));if(0!==o.status){if(1===o.status){var a;if(o.data_type===Wr.BASE64)a=Te(o.data),"json"===t.dataType?a=Ee(Oe(a)):"arraybuffer"!==t.responseType&&(a=Oe(a));else if(o.data_type===Wr.CDN_URL)try{var s=te(e.identifiers),l=yield new Promise(((e,r)=>{s._requestSkipCheckDomain({url:o.data,dataType:t.dataType,responseType:t.responseType,success:t=>{200!==t.statusCode?r(`download response status code ${t.statusCode}`):e(t)},fail:e=>{r(e)}})}));a=l.data}catch(e){return _(T({errCode:E.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:`error: ${e} \n (callId: ${i}) (trace: ${Hr(c)})`},zr))}else a=o.data,"arraybuffer"===t.responseType?a=xe(a):"json"===t.dataType&&(a=Ee(a));return h({result:{data:a,statusCode:o.http_code,header:o.headers.reduce(((e,t)=>{var r=e[t.k+""];return e[t.k+""]=r?r+","+t.v:t.v+"",e}),{})}})}return c.push(qr("poll result expired")),_(T({errCode:E.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${i}) (trace: ${Hr(c)})`},zr))}if(!(u>=0))return c.push(qr("too many polls, abort")),_(T({errCode:E.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${i}) (trace: ${Hr(c)})`},zr));c.push(qr("normal poll")),y({...r,action:Ur.POLL,retryType:$r.None,tryCount:u-1})}catch(e){_(T({errCode:E.SDK_CONTAINER_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${i})`},zr))}})),O.apply(this,arguments)}f.reached||e.request({...t.config,apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:m,env:t.config&&t.config.env||e.env}).then((function(e){return O.apply(this,arguments)})).catch((e=>{b||f.reached||(A(),e&&e.operateWXDataFail&&d>0?(c.push(qr(`system error (${e}), retry`)),y({...r,retryType:$r.Error,tryCount:u-1,systemErrorRetry:d-1})):(c.push(qr(`system error (${e}), abort`)),_(T(`${e} (callId: ${i}) (trace: ${Hr(c)})`,zr))))}))})),b.apply(this,arguments)}function w(e,t,r){var n=t=>{e.push(qr(`app ${t}`))};ge(n);return{resolve:e=>{ve(n),t(e)},reject:e=>{ve(n),r(e)}}}}));return function(e){return t.apply(this,arguments)}}()}var Yr="cloud.callContainer";function Vr(e){return function(){var r=s()((function*(r){var n=e.serviceEndpoint.getEndpointSync("container"),o=new WeakMap;if(r.cdnMapPromise||!n){var i=yield Promise.all([r.cdnMapPromise,Jr(e.serviceEndpoint.getEndpoint("container"),r.stats,"getServiceEndpoint")]);i[0]&&(o=i[0]),n=i[1]}else r.stats.getServiceEndpoint=0;return r.shouldSerialize&&(r.data=ar(r.data,o)),n.http?function(t,r){return new Promise(((n,o)=>{var i;r.stats.tsCallContainerImplStart=Date.now();var a=te(e.identifiers),s={"X-WX-EV":3,"Content-Type":"application/octet-stream"},l=`${Math.random()}_${Date.now()}`,u={...r.header,"X-WX-ENV":e.isInstance?e.env:(null===(i=r.config)||void 0===i?void 0:i.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":l};e.appid&&(u["X-WX-RESOURCE-APPID"]=e.appid);var c=r.stats;c.callid=l;var d=Date.now(),p=new Uint8Array(a.wx.base64ToArrayBuffer(t.key)),{data:f}=Be.V3.encodeRequest(p,u,r.method||"GET",r.data);c.encrypt=Date.now()-d,d=Date.now();var h=!0,_=t.url;r.rdm?_=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:r.ecdn&&(_=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),r.verbose&&console.log(`[cloud.callContainer] url ${_}`),h&&t.domain&&(r.stats.domain=t.domain),c.requestBodyBytes=f.byteLength,c.requestStartTs=Date.now(),a._requestSkipCheckDomain({url:_,method:"POST",header:s,data:f.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:r.timeout,enableHttp2:h,success:e=>{try{for(var t in e.header)if("x-nws-log-uuid"===t.toLowerCase()&&(r.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[t]}`),r.stats.ecdnId=e.header[t]),"x-edge-timing"===t.toLowerCase()&&(r.stats.ecdnEdgeTiming=e.header[t]),"x-wx-system-error"===t.toLowerCase()){var i=Number(e.header[t]);return void o({errCode:i,errMsg:`${Yr}:fail system error. code: ${i}`})}if(c.profile=e.profile,c.httpRequest=Date.now()-d,200===e.statusCode){var a=e.data;c.responseBodyBytes=a.byteLength,d=Date.now();var s,u=Be.V3.decodeResponse(p,new Uint8Array(a));for(var f in c.decrypt=Date.now()-d,e.header)if("x-wx-server-timing"===f.toLowerCase()){var h=(e.header[f]||"").split(",");h.length>=2&&(c.serverStartTs=Number(h[0]),c.serverEndTs=Number(h[1]))}d=Date.now();var _=u.body;if("json"===r.dataType)s=Ee("string"==typeof _?_:Oe(_.buffer));else s="text"===r.responseType?"string"==typeof _?_:Oe(_.buffer):"arraybuffer"===r.responseType?"string"==typeof _?xe(_):_.buffer:_;c.decodeBody=Date.now()-d,c.responseProcessEndTs=Date.now(),n({statusCode:u.statusCode,header:u.header,data:s,stats:c,callID:l,errMsg:`${Yr}:ok`})}else{var g=-1;for(var v in e.header)"x-wx-system-error"===v.toLowerCase()&&(g=Number(e.header[v]));o({errCode:g,errMsg:`${Yr}:fail system error, status ${e.statusCode}. code: ${g}`})}}catch(e){o({errCode:-1,errMsg:`${Yr}:fail error while processing internal response ${e}`})}},fail:e=>{o({...e,errMsg:e.errMsg.replace(/^request/,Yr)})}})}))}(n,r):function(e,r){return t.apply(this,arguments)}(n.url,r)}));return function(e){return r.apply(this,arguments)}}();function t(){return t=s()((function*(t,r){return new Promise(((n,o)=>{var i,a=te(e.identifiers),s={...r.header,"X-WX-ENV":e.isInstance?e.env:(null===(i=r.config)||void 0===i?void 0:i.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":r.timeout};e.appid&&(s["X-WX-RESOURCE-APPID"]=e.appid),a._requestSkipCheckDomain({url:t,method:r.method,header:s,data:r.data,dataType:r.dataType,responseType:r.responseType,timeout:r.timeout,success:e=>{n({...e,errMsg:`${Yr}:ok`})},fail:e=>{o({...e,errMsg:e.errMsg.replace(/^request/,Yr)})}})}))})),t.apply(this,arguments)}}function Jr(e,t,r){var n=Date.now();return e.then((()=>t[r]=Date.now()-n)).catch((()=>t[r]=Date.now()-n)),e}var Xr="cloud.callContainer",Zr=0,en=1,tn=2,rn=!0,nn=0,on=new WeakMap;function an(e){var t=[void 0,Fr(e),Kr(e),Vr(e)];function r(e){return t[e]}return function(e){var t=+new Date;Q(e,"object");var r=V(e);return r.data||(r.data={}),r.dataType||(r.dataType="json"),r.context={tunnelTimeNoCSNetCost:0,apiStartTime:t,warmStartTime:zt()},r.stats={apiStartTime:t},G(r)?function(e){$({apiName:Xr,param:e}),o(e).then((t=>{q(Xr,e,t)})).catch((t=>{H(Xr,e,t)}))}(r):o(r)};function n(t){var r;if(t.service,e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null!==(r=t.config)&&void 0!==r&&r.env)Q(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}function o(e){return i.apply(this,arguments)}function i(){return i=s()((function*(t){var r=!1;try{nn++,n(t),Dr(t),t.cdnMapPromise=t.shouldSerialize?mr(t.data):void 0;var o=Date.now();r=rn?(rn=!1,yield a(t)):u(t),t.stats.tsBeforeCallContainerImpl=Date.now();var i,s=V(t),l=t.data,h=c(t,r),_=t.service||t.header["X-WX-SERVICE"];i=_?`wx.cloud.callContainer.${_}${t.path}`:`wx.cloud.callContainer${t.path}`,Ar(h,(()=>{var r;return{url:i,method:t.method,headers:{Env:e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env,...t.header},reqBody:ar(l),timestampMs:o,console:e.debug}}));var g=p(s,f(s,h)),v=yield g;return d(t,r),Dt(),v}catch(e){throw C(e,Xr)}finally{0===--nn&&(0,Be.j)(te()._WebAssembly)}})),i.apply(this,arguments)}function a(e){return l.apply(this,arguments)}function l(){return(l=s()((function*(t){if(!Boolean(e.serviceEndpoint.getEndpointSync("container"))){var r=new Promise((e=>setTimeout(e,50))),n=e.serviceEndpoint.getEndpoint("container");yield Promise.race([r,n])}return u(t)}))).apply(this,arguments)}function u(t){return"windows"!==me().platform&&(1===t.apiVersion||2!==t.apiVersion&&Boolean(e.serviceEndpoint.getEndpointSync("container")))}function c(e,t){var n,o;if(t=null!==(n=t)&&void 0!==n?n:u(e)){var i={...e,stats:{...e.stats}};o=r(1)(e).catch((e=>{if(-9999===(null==e?void 0:e.errCode))return r(2)(i);throw e}))}else o=r(2)(e);return o}function d(e,t){or(Xr,e,t?"v1":"im")}function p(t,r){var n;if(e.identifiers.pluginId)return r;var o=te(e.identifiers);if(!o.isUsedCache())return r;var i,a,s,l=(i=r,a={abort:()=>{},promise:Promise.resolve()},s=new Promise(((e,t)=>{a.abort=t})),a.promise=Promise.race([i,s]),a),u=o.reportCallContainer,c=o.privateCacheManager,d=o.cacheManager,p=Date.now(),{data:f,method:h}=t,_=`https://wx.cloud.callContainer/${(null===(n=t.config)||void 0===n?void 0:n.env)||e.env}`,g=t.service;if(!g)for(var v in t.header)"X-WX-SERVICE"===v.toUpperCase()&&(g=t.header[v]);_+=g?`/${g}${t.path}`:t.path;var m=(e,t,n)=>{var o=c.emit("request",{url:_,data:f,method:h,request:()=>new Promise(((e,t)=>{r.then(e).catch(t)}))});if(o.length){var i=o.find((e=>e&&"function"==typeof e.then));i&&i.then(e).catch(t).finally((()=>{l.abort()}))}else n&&t(n)};return new Promise(((e,t)=>{var n=t=>{u({isSuccess:!0,costTime:Date.now()-p,extra1:_}),e(t)},o=e=>{u({isSuccess:!1,costTime:Date.now()-p,extra1:_}),t(e)},i=e=>{c.checkNeedStore(_,f,h,e),n(e)};d.state===tn?r.then((e=>{i(e)})).catch((e=>{m(n,o,e)})):d.state===en?m(n,o):d.state===Zr&&r.then((e=>{i(e)})).catch((e=>{o(e)}))}))}function f(t,r){var n;if(!(null===(n=t.followRedirect)||void 0===n||n))return r;return function t(n,o){return new Promise(((i,a)=>{o.then((o=>{var s;if(Lr(o.statusCode)){var l=null!==(s=on.get(r))&&void 0!==s?s:0;if(l>=6)a("reach the max redirect count");else{on.set(r,l+1);var u="";for(var d in o.header)"location"===d.toLowerCase()&&(u=o.header[d]);if(u)if(u.startsWith("/")){var p=V(n);n.path=u,t(p,c(n)).then(i).catch(a)}else{te(e.identifiers).request({url:u,method:n.method,header:n.header,data:n.data,dataType:n.dataType,responseType:n.responseType,timeout:n.timeout,success:e=>{i({...e,errMsg:`${Xr}:ok`})},fail:e=>{a(e.errMsg.replace(/^request/,Xr))}})}else i(o)}}else i(o)})).catch(a)}))}(t,r)}}var sn="cloud.connectContainer";function ln(e){return function(e){var t=V(e);return t.timing={apiStartTime:+new Date},G(t)?function(e){var t=r(e);t.then((t=>{q(sn,e,t)})).catch((t=>{H(sn,e,t)}))}(t):r(t)};function t(e){e.config&&e.config.env&&Q(e.config.env,"string")}function r(e){return n.apply(this,arguments)}function n(){return(n=s()((function*(e){try{return t(e),yield o(e)}catch(e){throw e}finally{Yt({...e.timing,apiEndTime:+new Date,apiName:sn})}}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=s()((function*(t){var r={service_name:t.service},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var o=yield e.request({...t.config,apiName:"tcbapi_get_websocket_info",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var i=o.data,{success:a,complete:s,...l}=t,u=te(e.identifiers)._socketSkipCheckDomainFactory().connectSocket({...l,url:`wss://${i.host}${t.path||""}`,header:{...l.header,"content-type":"application/json","x-wx-token":i.token},perMessageDeflate:!0});return{errMsg:ir(sn),socketTask:u}}))).apply(this,arguments)}}function un(e){return{callContainer:an(e),connectContainer:ln(e)}}var cn="container";function dn(e){e.registerService(function(e){var t={name:cn,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(cn)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:cn,context:t,getAPIs:un.bind(null,t)}}(e))}const pn={};var fn={env:"",platform:""},hn=()=>fn;if(void 0!==m)fn.env="miniprogram",fn.platform=m.platform,m.host&&"SAAASDK"===m.host.env&&(fn.platform="sdk");else if(fn.env="web",window)if(window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)fn.platform="miniprogram";else{var _n=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(_n)&&(fn.platform="wxweb")}var gn="cloud.uploadFile";function vn(e){return function(e){if(G(e=V(e)))return function(e){var r={aborted:!1},n=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(r),o={apiStartTime:+new Date};return t({...e,context:r,timing:o,uploadTaskAgent:n}).then((t=>{q(gn,e,t)})).catch((t=>{H(gn,e,t)})),n}(e);var r={apiStartTime:+new Date};return t({...e,timing:r})};function t(e){return new Promise(function(){var t=s()((function*(t,n){try{if(function(e){Q(e,{cloudPath:"string"}),"miniprogram"===hn().env?Q(e,{filePath:"string"}):z(e,"file","uploadFile")}(e),e.context&&(e.context.abort=function(){n(C({errMsg:"abort"},gn))},e.context.aborted))return n(C({errMsg:"abort"},gn));var o=yield function(e){return r.apply(this,arguments)}(e);t(o)}catch(e){n(C(e,gn))}finally{Yt({...e.timing,apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"})}}));return function(e,r){return t.apply(this,arguments)}}())}function r(){return r=s()((function*(t){var r=te(e.identifiers),o=yield n(t);return new Promise(((e,n)=>{if(t.context&&t.context.aborted)return n(C({errMsg:"abort"},gn));var i,a;if("web"===hn().env){var s=new FormData;s.append("key",t.cloudPath),s.append("signature",o.authorization),s.append("x-cos-security-token",o.token),s.append("x-cos-meta-fileid",o.cos_file_id),s.append("file",t.file),i={url:o.url,timeout:t.timeout,filePath:"",header:t.header,name:"",formData:s}}else i={url:o.url,timeout:t.timeout,filePath:t.filePath,header:t.header,name:"file",formData:{key:t.cloudPath,signature:o.authorization,"x-cos-security-token":o.token,"x-cos-meta-fileid":o.cos_file_id}};(a=r._uploadFileSkipCheckDomain({...i,success:t=>{try{if(t.statusCode>=200&&t.statusCode<300)e({errMsg:ir(gn),fileID:o.file_id,statusCode:t.statusCode});else{var r=new I({errMsg:`status ${t.statusCode}, error: ${t.data};`});n(r)}}catch(r){var i=new I({errMsg:`Error : ${t.data};`});n(i)}},fail:e=>{n(e)}}))&&(a.onProgressUpdate((function(){t.uploadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&_(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(r._uploadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=a.abort.bind(a)))}))})),r.apply(this,arguments)}function n(e){return o.apply(this,arguments)}function o(){return(o=s()((function*(t){var r=JSON.stringify({path:t.cloudPath}),n=+new Date,o=(yield e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=n,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time),!o.url)throw new I({errCode:E.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:E[E.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});return o}))).apply(this,arguments)}}var mn="cloud.downloadFile";function yn(e){return function(e){if(G(e=V(e)))return function(e){var r={aborted:!1},n=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(r),o={apiStartTime:+new Date};return t({...e,context:r,timing:o,downloadTaskAgent:n}).then((t=>{q(mn,e,t)})).catch((t=>{H(mn,e,t)})),n}(e);var r={apiStartTime:+new Date};return t({...e,timing:r})};function t(e){return r.apply(this,arguments)}function r(){return r=s()((function*(e){return new Promise(function(){var t=s()((function*(t,r){try{if(n(e),e.context&&(e.context.abort=function(){r(C({errMsg:"abort"},mn))},e.context.aborted))return r(C({errMsg:"abort"},mn));t(yield o(e))}catch(e){r(C(e,mn))}finally{Yt({...e.timing,apiEndTime:+new Date,apiName:mn})}}));return function(e,r){return t.apply(this,arguments)}}())})),r.apply(this,arguments)}function n(e){Q(e,{fileID:"string"}),e.config&&e.config.env&&Q(e.config.env,"string")}function o(e){return i.apply(this,arguments)}function i(){return i=s()((function*(t){var r=te(e.identifiers),n=yield a(t);return new Promise(((e,o)=>{if(t.context&&t.context.aborted)return o(C({errMsg:"abort"},mn));var i=r._downloadFileSkipCheckDomain({url:n,header:t.header,timeout:t.timeout,success:t=>{e(t)},fail:e=>{o(e)}});i&&(i.onProgressUpdate((function(){t.downloadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&_(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(r._downloadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=i.abort.bind(i)))}))})),i.apply(this,arguments)}function a(e){return l.apply(this,arguments)}function l(){return(l=s()((function*(t){var r=JSON.stringify({fileid:t.fileID}),n=+new Date,o=(yield e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=n,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time),!o.download_url)throw new I({errCode:E.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:E[E.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});return o.download_url.indexOf("?")>-1?o.download_url+="&skip_domain_check=true":o.download_url+="?skip_domain_check=true",o.download_url}))).apply(this,arguments)}}var bn="cloud.getTempFileURL";function wn(e){return function(e){var t=V(e);return t.timing={apiStartTime:+new Date},G(t)?function(e){var t=r(e);t.then((t=>{q(bn,e,t)})).catch((t=>{H(bn,e,t)}))}(t):r(t)};function t(t){if(Q(t,{fileList:"array"}),t.config&&t.config.env&&Q(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new I({errCode:E.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function r(e){return n.apply(this,arguments)}function n(){return(n=s()((function*(e){try{return t(e),e.fileList.length?yield o(e):{errMsg:ir(bn),fileList:[]}}catch(e){throw C(e,bn)}finally{Yt({...e.timing,apiEndTime:+new Date,apiName:bn})}}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=s()((function*(t){var r={file_list:t.fileList.map((e=>f(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}))},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var o=yield e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var i=o.data;return t.timing.tunnelTimeNoCSNetCost=i.baseresponse.stat.qbase_cost_time,{errMsg:ir(bn),fileList:i.download_list.map((e=>({fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}var An="cloud.deleteFile";function En(e){return function(e){var t=V(e);return t.timing={apiStartTime:+new Date},G(t)?function(e){var t=r(e);t.then((t=>{q(An,e,t)})).catch((t=>{H(An,e,t)}))}(t):r(t)};function t(t){Q(t,{fileList:"array"}),t.config&&t.config.env&&Q(t.config.env,"string");for(var r=0,n=t.fileList.length;r<n;r++)Q(t.fileList[r],"string",`parameter.fileList[${r}]`);if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new I({errCode:E.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function r(e){return n.apply(this,arguments)}function n(){return(n=s()((function*(e){try{return t(e),e.fileList.length?yield o(e):{errMsg:ir(An),fileList:[]}}catch(e){throw C(e,An)}finally{Yt({...e.timing,apiEndTime:+new Date,apiName:An})}}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=s()((function*(t){var r={fileid_list:t.fileList},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var o=yield e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var i=o.data;return t.timing.tunnelTimeNoCSNetCost=i.baseresponse.stat.qbase_cost_time,{errMsg:ir(An),fileList:i.delete_list.map((e=>({fileID:e.fileid,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}function In(e){return{uploadFile:vn(e),downloadFile:yn(e),getTempFileURL:wn(e),deleteFile:En(e)}}var Sn="storage";function Cn(e){e.registerService(function(e){var t={name:Sn,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(Sn)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:Sn,context:t,getAPIs:In.bind(null,t)}}(e))}var Tn=Symbol.for("UNSET_FIELD_NAME"),On=Symbol.for("AGGREGATE"),xn=Symbol.for("AGGREGATE_PIPELINE"),Nn=Symbol.for("AGGREGATE_PIPELINE_STAGE"),Rn=Symbol.for("UPDATE_COMMAND"),Pn=Symbol.for("QUERY_COMMAND"),Dn=Symbol.for("LOGIC_COMMAND"),Ln=Symbol.for("AGGREGATE_COMMAND"),Bn=Symbol.for("PROJECT_COMMAND"),kn=Symbol.for("GEO_POINT"),Mn=Symbol.for("GEO_LINESTRING"),Fn=Symbol.for("GEO_POLYGON"),jn=Symbol.for("GEO_MULTIPOINT"),Un=Symbol.for("GEO_MULTILINESTRING"),$n=Symbol.for("GEO_MULTIPOLYGON"),Wn=Symbol.for("SERVER_DATE"),qn=Symbol.for("REGEXP"),Hn=function(e){return e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor",e}({}),Gn=[Hn.AND,Hn.OR,Hn.NOT,Hn.NOR],Qn=new Set(Gn);class zn{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Dn,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||Tn}_setFieldName(e){var t=this.operands.map((t=>t===Hn.AND||t===Hn.OR?t._setFieldName(e):t));return new zn(this.operator,t,e)}and(...e){z(arguments[0],"expressions","and");var t=g(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Hn.AND,[this,...t],this.fieldName)}or(...e){z(arguments[0],"expressions","or");var t=g(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Hn.OR,[this,...t],this.fieldName)}nor(...e){z(arguments[0],"expressions","nor");var t=g(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Hn.NOR,[this,...t],this.fieldName)}not(e){return z(e,"expression","not"),new zn(Hn.NOT,[e],this.fieldName)}toJSON(){}}function Kn(e){return e&&e instanceof zn&&e._internalType===Dn}var Yn=function(e){return e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr",e}({}),Vn=[Yn.EQ,Yn.NEQ,Yn.GT,Yn.GTE,Yn.LT,Yn.LTE,Yn.IN,Yn.NIN,Yn.GEO_NEAR,Yn.GEO_WITHIN,Yn.GEO_INTERSECTS,Yn.EXISTS,Yn.MOD,Yn.ALL,Yn.ELEM_MATCH,Yn.SIZE],Jn=new Set(Vn);new Set([...Jn,...Qn]);class Xn extends zn{constructor(e,t,r){super(e,t,r),this.operator=void 0,this.__safe_props__=void 0,this.operator=e,this._internalType=Pn}_setFieldName(e){return new Xn(this.operator,this.operands,e)}eq(e){var t=new Xn(Yn.EQ,[e],this.fieldName);return this.and(t)}neq(e){var t=new Xn(Yn.NEQ,[e],this.fieldName);return this.and(t)}gt(e){var t=new Xn(Yn.GT,[e],this.fieldName);return this.and(t)}gte(e){var t=new Xn(Yn.GTE,[e],this.fieldName);return this.and(t)}lt(e){var t=new Xn(Yn.LT,[e],this.fieldName);return this.and(t)}lte(e){var t=new Xn(Yn.LTE,[e],this.fieldName);return this.and(t)}in(e){Q(e,"array");var t=new Xn(Yn.IN,e,this.fieldName);return this.and(t)}nin(e){Q(e,"array");var t=new Xn(Yn.NIN,e,this.fieldName);return this.and(t)}geoNear(e){var t=new Xn(Yn.GEO_NEAR,[e],this.fieldName);return this.and(t)}geoWithin(e){var t=new Xn(Yn.GEO_WITHIN,[e],this.fieldName);return this.and(t)}geoIntersects(e){var t=new Xn(Yn.GEO_INTERSECTS,[e],this.fieldName);return this.and(t)}exists(e){var t=new Xn(Yn.EXISTS,[e],this.fieldName);return this.and(t)}mod(e,t){var r=new Xn(Yn.MOD,[e,t],this.fieldName);return this.and(r)}all(e){var t=new Xn(Yn.ALL,e,this.fieldName);return this.and(t)}elemMatch(e){var t=new Xn(Yn.ELEM_MATCH,[e],this.fieldName);return this.and(t)}size(e){var t=new Xn(Yn.SIZE,[e],this.fieldName);return this.and(t)}}function Zn(e){return e&&e instanceof Xn&&e._internalType===Pn}var eo=function(e){return e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll",e}({});new Set([eo.SET,eo.REMOVE,eo.INC,eo.MUL,eo.MIN,eo.MAX,eo.RENAME,eo.BIT,eo.PUSH,eo.POP,eo.SHIFT,eo.UNSHIFT,eo.ADD_TO_SET,eo.PULL,eo.PULL_ALL]);class to{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Rn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||Tn}_setFieldName(e){return new to(this.operator,this.operands,e)}toJSON(){}}function ro(e){return e&&e instanceof to&&e._internalType===Rn}var no=function(e){return e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip",e}({});no.ABS,no.ADD,no.ADDTOSET,no.ALLELEMENTSTRUE,no.AND,no.ANYELEMENTTRUE,no.ARRAYELEMAT,no.ARRAYTOOBJECT,no.AVG,no.CEIL,no.CMP,no.CONCAT,no.CONCATARRAYS,no.COND,no.CONVERT,no.DATEFROMPARTS,no.DATETOPARTS,no.DATEFROMSTRING,no.DATETOSTRING,no.DAYOFMONTH,no.DAYOFWEEK,no.DAYOFYEAR,no.DIVIDE,no.EQ,no.EXP,no.FILTER,no.FIRST,no.FLOOR,no.GT,no.GTE,no.HOUR,no.IFNULL,no.IN,no.INDEXOFARRAY,no.INDEXOFBYTES,no.INDEXOFCP,no.ISARRAY,no.ISODAYOFWEEK,no.ISOWEEK,no.ISOWEEKYEAR,no.LAST,no.LET,no.LITERAL,no.LN,no.LOG,no.LOG10,no.LT,no.LTE,no.LTRIM,no.MAP,no.MAX,no.MERGEOBJECTS,no.META,no.MIN,no.MILLISECOND,no.MINUTE,no.MOD,no.MONTH,no.MULTIPLY,no.NEQ,no.NOT,no.OBJECTTOARRAY,no.OR,no.POW,no.PUSH,no.RANGE,no.REDUCE,no.REVERSEARRAY,no.RTRIM,no.SECOND,no.SETDIFFERENCE,no.SETEQUALS,no.SETINTERSECTION,no.SETISSUBSET,no.SETUNION,no.SIZE,no.SLICE,no.SPLIT,no.SQRT,no.STDDEVPOP,no.STDDEVSAMP,no.STRCASECMP,no.STRLENBYTES,no.STRLENCP,no.SUBSTR,no.SUBSTRBYTES,no.SUBSTRCP,no.SUBTRACT,no.SUM,no.SWITCH,no.TOBOOL,no.TODATE,no.TODECIMAL,no.TODOUBLE,no.TOINT,no.TOLONG,no.TOOBJECTID,no.TOSTRING,no.TOLOWER,no.TOUPPER,no.TRIM,no.TRUNC,no.TYPE,no.WEEK,no.YEAR,no.ZIP;class oo{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Ln,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||Tn}_setFieldName(e){return new oo(this.operator,this.operands,e)}}function io(e){return e&&e instanceof oo&&e._internalType===Ln}var ao=function(e){return e.SLICE="slice",e}({});new Set([ao.SLICE]);class so{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this.__safe_props__=void 0,this._internalType=Bn,this.operator=e,this.operands=t,this.fieldName=r||Tn}_setFieldName(e){return new so(this.operator,this.operands,e)}}function lo(e){return e&&e instanceof so&&e._internalType===Bn}var uo=function(e){return e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC",e}({}),co=function(e){return e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER",e}({}),po=function(e){return e[e.ASC=0]="ASC",e[e.DESC=1]="DESC",e}({});function fo(e){return ho.apply(this,arguments)}function ho(){return(ho=s()((function*(e){var{env:t,collectionName:r,data:n,instanceContext:o,timing:i}=e,a=JSON.stringify(n);K({input:a,max:o.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(o.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var s={collection_name:r,data:a},l=JSON.stringify(s);i.tunnelStartTime=+new Date;var u=yield o.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:o.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||o.serviceContext.env});i.tunnelEndTime=+new Date;var c=u.data;return i.tunnelTimeNoCSNetCost=c.baseresponse.stat.qbase_cost_time,{_id:c._id_type===co.NUMBER?c._id_number:c._id}}))).apply(this,arguments)}function _o(e){return go.apply(this,arguments)}function go(){return go=s()((function*(e){var{collectionName:t,query:n,options:o,instanceContext:i,timing:a,env:s}=e,l=Mt()?e.explain:void 0,u=o&&o.multi,c=JSON.stringify({collection_name:t,query:JSON.stringify(n),multi:u,query_type:u?uo.WHERE:uo.DOC,explain:l});a.tunnelStartTime=+new Date;var d=yield i.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:i.serviceContext.name,serializedReqData:c,requireDataNotEmpty:!0,env:s||i.serviceContext.env});if(a.tunnelEndTime=+new Date,l){var{EJSON:p}=r(683);return p.deserialize(d.data)}var f=d.data;return a.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,{removed:f.deleted}})),go.apply(this,arguments)}function vo(e){return mo.apply(this,arguments)}function mo(){return mo=s()((function*(e){var{env:t,collectionName:n,query:o,options:i={},instanceContext:a,timing:s,queryType:l}=e,u=Mt()?e.explain:void 0,c={collection_name:n,query:JSON.stringify(o),query_type:l,explain:u};i.offset&&(c.offset=i.offset),i.limit&&(c.limit=i.limit),i.order&&(c.order=i.order),i.projection&&(c.projection=JSON.stringify(i.projection));var d=JSON.stringify(c);s.tunnelStartTime=+new Date;var p=yield a.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||a.serviceContext.env});if(s.tunnelEndTime=+new Date,u){var{EJSON:f}=r(683);return f.deserialize(p.data)}var h=p.data;s.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time;var _=h.data_list?JSON.parse(h.data_list):[];return{list:_=a.engine.Decoder.decode(_),offset:h.offset,limit:h.limit,total:h.total}})),mo.apply(this,arguments)}function yo(e){return bo.apply(this,arguments)}function bo(){return bo=s()((function*(e){var{env:t,collectionName:n,query:o,data:i,options:a={},instanceContext:s,timing:l,queryType:u}=e,c=Mt()?e.explain:void 0,d=JSON.stringify(i);K({input:d,max:s.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:`${(s.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var p={collection_name:n,query:JSON.stringify(o),data:d,query_type:u,explain:c};p.multi=!1!==a.multi,p.merge=!1!==a.merge,a.upsert&&(p.upsert=a.upsert);var f=JSON.stringify(p);l.tunnelStartTime=+new Date;var h=yield s.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:s.serviceContext.name,serializedReqData:f,requireDataNotEmpty:!0,env:t||s.serviceContext.env});if(l.tunnelEndTime=+new Date,c){var{EJSON:_}=r(683);return _.deserialize(h.data)}var g=h.data;return l.tunnelTimeNoCSNetCost=g.baseresponse.stat.qbase_cost_time,{updated:g.updated}})),bo.apply(this,arguments)}function wo(e){return Ao.apply(this,arguments)}function Ao(){return(Ao=s()((function*(e){var{env:t,collectionName:r,_id:n,data:o,options:i={},instanceContext:a,timing:s}=e,l=JSON.stringify(o);K({input:l,max:a.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(a.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var u=h(n),c={collection_name:r,_id_type:u?co.NUMBER:co.STRING,data:l};u?c._id_number=n:c._id=n;var d=JSON.stringify(c);s.tunnelStartTime=+new Date;var p=yield a.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||a.serviceContext.env});s.tunnelEndTime=+new Date;var f=p.data;return s.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,{_id:f._id_type===co.NUMBER?f._id_number:f._id,updated:f._id?0:1,created:f._id?1:0}}))).apply(this,arguments)}function Eo(e){return Io.apply(this,arguments)}function Io(){return Io=s()((function*(e){var{env:t,collectionName:n,query:o,instanceContext:i,timing:a}=e,s=Mt()?e.explain:void 0,l={collection_name:n,query:JSON.stringify(o),query_type:uo.WHERE,explain:s},u=JSON.stringify(l);a.tunnelStartTime=+new Date;var c=yield i.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:i.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||i.serviceContext.env});if(a.tunnelEndTime=+new Date,s){var{EJSON:d}=r(683);return d.deserialize(c.data)}var p=c.data;return a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,{total:p.total}})),Io.apply(this,arguments)}function So(e){return Co.apply(this,arguments)}function Co(){return(Co=s()((function*(e){var{env:t,collectionName:n,stages:o,instanceContext:i,timing:a}=e,s=Mt()?e.explain:void 0,l={collection_name:n,stages:o.map((e=>{for(var t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error(`empty encoded stage (${JSON.stringify(e)})`)})),explain:s},u=JSON.stringify(l);a.tunnelStartTime=+new Date;var c=yield i.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:i.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||i.serviceContext.env});if(a.tunnelEndTime=+new Date,s){var{EJSON:d}=r(683);return d.deserialize(c.data)}var p=c.data;a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time;var{EJSON:f}=r(683);return{list:JSON.parse(p.list).map((e=>f.parse(e)))}}))).apply(this,arguments)}function To(){return(To=s()((function*(e,t){var r=(yield e.request({apiName:"tcbapi_db_get_realtime_connection",env:t||e.env,serviceName:e.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0})).data;return{envId:r.env_id,secretVersion:r.secret_version,signStr:r.sign_str,wsUrl:r.ws_url}}))).apply(this,arguments)}var Oo=e=>{class t extends No{constructor(e,t){super(t),this.collection=void 0,this._internalType=On,this.collection=e}pushStage(e,r){return new t(this.collection,[...this._stages,new xo(e,r)])}end(t={}){var r="collection.aggregate",n={apiStartTime:+new Date},o=()=>So({env:e.database.config.env,collectionName:this.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(this._stages),instanceContext:e,timing:n,explain:t.explain});var i=G(t),a=new Promise(function(){var e=s()((function*(e,i){try{var a=yield o();if(t.explain&&Mt())return e(a);e({list:a.list,errMsg:ir(r)})}catch(e){i(C(e,r))}finally{Yt({...n,apiEndTime:+new Date,apiName:`cloud.db.${r}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{q(r,t,e)})).catch((e=>{H(r,t,e)}))}}return t};class xo{constructor(e,t){this.stage=void 0,this.val=void 0,this._internalType=Nn,this.stage=e,this.val=t}}class No{constructor(e){this._stages=void 0,this._internalType=xn,this.__safe_props__=void 0,this._stages=e}pushStage(e,t){return new No([...this._stages,new xo(e,t)])}addFields(e){return this.pushStage("addFields",e)}bucket(e){return this.pushStage("bucket",e)}bucketAuto(e){return this.pushStage("bucketAuto",e)}collStats(e){return this.pushStage("collStats",e)}count(e){return this.pushStage("count",e)}facet(e){return this.pushStage("facet",e)}geoNear(e){return this.pushStage("geoNear",e)}graphLookup(e){return this.pushStage("graphLookup",e)}group(e){return this.pushStage("group",e)}indexStats(){return this.pushStage("indexStats",{})}limit(e){return this.pushStage("limit",e)}lookup(e){return this.pushStage("lookup",e)}match(e){return this.pushStage("match",e)}out(e){return this.pushStage("out",e)}project(e){return this.pushStage("project",e)}redact(e){return this.pushStage("redact",e)}replaceRoot(e){return this.pushStage("replaceRoot",e)}sample(e){return this.pushStage("sample",e)}skip(e){return this.pushStage("skip",e)}sort(e){return this.pushStage("sort",e)}sortByCount(e){return this.pushStage("sortByCount",e)}unwind(e){return this.pushStage("unwind",e)}end(){}}class Ro extends No{constructor(e,t=!1){super(e),this._sealed=void 0,this._sealed=t}pushStage(e,t){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new Ro([...this._stages,new xo(e,t)])}done(){return new Ro(this._stages,!0)}}var Po=e=>e&&e._internalType===xn,Do=e=>e&&e._internalType===Nn,Lo=new Set(["each","position","slice","sort"]),Bo={eq:e=>new Xn(Yn.EQ,[e]),neq:e=>new Xn(Yn.NEQ,[e]),lt:e=>new Xn(Yn.LT,[e]),lte:e=>new Xn(Yn.LTE,[e]),gt:e=>new Xn(Yn.GT,[e]),gte:e=>new Xn(Yn.GTE,[e]),in:e=>new Xn(Yn.IN,e),nin:e=>new Xn(Yn.NIN,e),geoNear:e=>new Xn(Yn.GEO_NEAR,[e]),geoWithin:e=>new Xn(Yn.GEO_WITHIN,[e]),geoIntersects:e=>new Xn(Yn.GEO_INTERSECTS,[e]),and(...e){var t=g(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Hn.AND,t)},or(...e){var t=g(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Hn.OR,t)},nor(...e){var t=g(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Hn.NOR,t)},not:e=>new zn(Hn.NOT,[e]),exists:e=>new Xn(Yn.EXISTS,[e]),mod:(e,t)=>new Xn(Yn.MOD,[e,t]),all:e=>new Xn(Yn.ALL,e),elemMatch:e=>new Xn(Yn.ELEM_MATCH,[e]),size:e=>new Xn(Yn.SIZE,[e]),expr:e=>new Xn(Yn.EXPR,[e]),set:e=>new to(eo.SET,[e]),remove:()=>new to(eo.REMOVE,[]),inc:e=>new to(eo.INC,[e]),mul:e=>new to(eo.MUL,[e]),min:e=>new to(eo.MIN,[e]),max:e=>new to(eo.MAX,[e]),rename:e=>new to(eo.RENAME,[e]),bit:e=>new to(eo.BIT,[e]),push(e){var t={};if(g(e))t.each=e;else if(p(e)&&g(e.each)){var r=Object.keys(e);if(1===r.length)t=e;else{var n=!1;for(var o of r)if(!Lo.has(o)){n=!0;break}t=n?[e]:e}}else t.each=[e];return new to(eo.PUSH,[t])},pop:()=>new to(eo.POP,[]),shift:()=>new to(eo.SHIFT,[]),unshift(...e){var t=g(arguments[0])?arguments[0]:Array.from(arguments);return new to(eo.UNSHIFT,t)},addToSet:e=>new to(eo.ADD_TO_SET,[e]),pull:e=>new to(eo.PULL,[e]),pullAll:e=>new to(eo.PULL_ALL,[e]),project:{slice:e=>new so(ao.SLICE,[e])},aggregate:{pipeline:()=>new Ro([]),abs:e=>new oo(no.ABS,[e]),add:e=>new oo(no.ADD,[e]),addToSet:e=>new oo(no.ADDTOSET,[e]),allElementsTrue:e=>new oo(no.ALLELEMENTSTRUE,[e]),and:e=>new oo(no.AND,[e]),anyElementTrue:e=>new oo(no.ANYELEMENTTRUE,[e]),arrayElemAt:e=>new oo(no.ARRAYELEMAT,[e]),arrayToObject:e=>new oo(no.ARRAYTOOBJECT,[e]),avg:e=>new oo(no.AVG,[e]),ceil:e=>new oo(no.CEIL,[e]),cmp:e=>new oo(no.CMP,[e]),concat:e=>new oo(no.CONCAT,[e]),concatArrays:e=>new oo(no.CONCATARRAYS,[e]),cond:e=>new oo(no.COND,[e]),convert:e=>new oo(no.CONVERT,[e]),dateFromParts:e=>new oo(no.DATEFROMPARTS,[e]),dateToParts:e=>new oo(no.DATETOPARTS,[e]),dateFromString:e=>new oo(no.DATEFROMSTRING,[e]),dateToString:e=>new oo(no.DATETOSTRING,[e]),dayOfMonth:e=>new oo(no.DAYOFMONTH,[e]),dayOfWeek:e=>new oo(no.DAYOFWEEK,[e]),dayOfYear:e=>new oo(no.DAYOFYEAR,[e]),divide:e=>new oo(no.DIVIDE,[e]),eq:e=>new oo(no.EQ,[e]),exp:e=>new oo(no.EXP,[e]),filter:e=>new oo(no.FILTER,[e]),first:e=>new oo(no.FIRST,[e]),floor:e=>new oo(no.FLOOR,[e]),gt:e=>new oo(no.GT,[e]),gte:e=>new oo(no.GTE,[e]),hour:e=>new oo(no.HOUR,[e]),ifNull:e=>new oo(no.IFNULL,[e]),in:e=>new oo(no.IN,[e]),indexOfArray:e=>new oo(no.INDEXOFARRAY,[e]),indexOfBytes:e=>new oo(no.INDEXOFBYTES,[e]),indexOfCP:e=>new oo(no.INDEXOFCP,[e]),isArray:e=>new oo(no.ISARRAY,[e]),isoDayOfWeek:e=>new oo(no.ISODAYOFWEEK,[e]),isoWeek:e=>new oo(no.ISOWEEK,[e]),isoWeekYear:e=>new oo(no.ISOWEEKYEAR,[e]),last:e=>new oo(no.LAST,[e]),let:e=>new oo(no.LET,[e]),literal:e=>new oo(no.LITERAL,[e]),ln:e=>new oo(no.LN,[e]),log:e=>new oo(no.LOG,[e]),log10:e=>new oo(no.LOG10,[e]),lt:e=>new oo(no.LT,[e]),lte:e=>new oo(no.LTE,[e]),ltrim:e=>new oo(no.LTRIM,[e]),map:e=>new oo(no.MAP,[e]),max:e=>new oo(no.MAX,[e]),mergeObjects:e=>new oo(no.MERGEOBJECTS,[e]),meta:e=>new oo(no.META,[e]),min:e=>new oo(no.MIN,[e]),millisecond:e=>new oo(no.MILLISECOND,[e]),minute:e=>new oo(no.MINUTE,[e]),mod:e=>new oo(no.MOD,[e]),month:e=>new oo(no.MONTH,[e]),multiply:e=>new oo(no.MULTIPLY,[e]),neq:e=>new oo(no.NEQ,[e]),not:e=>new oo(no.NOT,[e]),objectToArray:e=>new oo(no.OBJECTTOARRAY,[e]),or:e=>new oo(no.OR,[e]),pow:e=>new oo(no.POW,[e]),push:e=>new oo(no.PUSH,[e]),range:e=>new oo(no.RANGE,[e]),reduce:e=>new oo(no.REDUCE,[e]),reverseArray:e=>new oo(no.REVERSEARRAY,[e]),rtrim:e=>new oo(no.RTRIM,[e]),second:e=>new oo(no.SECOND,[e]),setDifference:e=>new oo(no.SETDIFFERENCE,[e]),setEquals:e=>new oo(no.SETEQUALS,[e]),setIntersection:e=>new oo(no.SETINTERSECTION,[e]),setIsSubset:e=>new oo(no.SETISSUBSET,[e]),setUnion:e=>new oo(no.SETUNION,[e]),size:e=>new oo(no.SIZE,[e]),slice:e=>new oo(no.SLICE,[e]),split:e=>new oo(no.SPLIT,[e]),sqrt:e=>new oo(no.SQRT,[e]),stdDevPop:e=>new oo(no.STDDEVPOP,[e]),stdDevSamp:e=>new oo(no.STDDEVSAMP,[e]),strcasecmp:e=>new oo(no.STRCASECMP,[e]),strLenBytes:e=>new oo(no.STRLENBYTES,[e]),strLenCP:e=>new oo(no.STRLENCP,[e]),substr:e=>new oo(no.SUBSTR,[e]),substrBytes:e=>new oo(no.SUBSTRBYTES,[e]),substrCP:e=>new oo(no.SUBSTRCP,[e]),subtract:e=>new oo(no.SUBTRACT,[e]),sum:e=>new oo(no.SUM,[e]),switch:e=>new oo(no.SWITCH,[e]),toBool:e=>new oo(no.TOBOOL,[e]),toDate:e=>new oo(no.TODATE,[e]),toDecimal:e=>new oo(no.TODECIMAL,[e]),toDouble:e=>new oo(no.TODOUBLE,[e]),toInt:e=>new oo(no.TOINT,[e]),toLong:e=>new oo(no.TOLONG,[e]),toObjectId:e=>new oo(no.TOOBJECTID,[e]),toString:e=>new oo(no.TOSTRING,[e]),toLower:e=>new oo(no.TOLOWER,[e]),toUpper:e=>new oo(no.TOUPPER,[e]),trim:e=>new oo(no.TRIM,[e]),trunc:e=>new oo(no.TRUNC,[e]),type:e=>new oo(no.TYPE,[e]),week:e=>new oo(no.WEEK,[e]),year:e=>new oo(no.YEAR,[e]),zip:e=>new oo(no.ZIP,[e])}};function ko(e){return new Mo(e)}class Mo{constructor(e={offset:0}){this.options=void 0,Q(e,"object","serverDate.options"),this.options=e}get _internalType(){return Wn}toJSON(){return{$date:this.options}}}function Fo(e,t){return ni(e)?Jo(e):new jo(e,t)}class jo{constructor(e,t){this.longitude=void 0,this.latitude=void 0,this._internalType=kn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});var r=e,n=t;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:()=>r,set(e){if(Q(e,"number","longitude"),e>180||e<-180)throw new I({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:()=>n,set(e){if(Q(e,"number","latitude"),e>90||e<-90)throw new I({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=r,this.latitude=n}toJSON(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e}toString(){return JSON.stringify(this.toJSON())}}function Uo(e){return oi(e)?Xo(e):new $o(e)}class $o{constructor(e){this.points=void 0,this._internalType=jn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"MultiPoint",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function Wo(e){return ii(e)?Zo(e):new qo(e)}class qo{constructor(e){this.points=void 0,this._internalType=Mn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"LineString",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function Ho(e){return ai(e)?ei(e):new Go(e)}class Go{constructor(e){this.lines=void 0,this._internalType=Un,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"MultiLineString",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function Qo(e){return si(e)?ti(e):new zo(e)}class zo{constructor(e){this.lines=void 0,this._internalType=Fn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"Polygon",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function Ko(e){return li(e)?ri(e):new Yo(e)}class Yo{constructor(e){this.polygons=void 0,this._internalType=$n,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=e}toJSON(){return{type:"MultiPolygon",coordinates:this.polygons.map((e=>e.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))))}}toString(){return JSON.stringify(this.toJSON())}}var Vo=undefined;function Jo(e){return Fo(e.coordinates[0],e.coordinates[1])}function Xo(e){return Uo(e.coordinates.map((e=>Fo(e[0],e[1]))))}function Zo(e){return Wo(e.coordinates.map((e=>Fo(e[0],e[1]))))}function ei(e){return Ho(e.coordinates.map((e=>Wo(e.map((e=>Fo(e[0],e[1])))))))}function ti(e){return Qo(e.coordinates.map((e=>Wo(e.map((e=>Fo(e[0],e[1])))))))}function ri(e){return Ko(e.coordinates.map((e=>Qo(e.map((e=>Wo(e.map((e=>Fo(e[0],e[1]))))))))))}function ni(e){return p(e)&&ui(e.coordinates)}function oi(e){return p(e)&&ci(e.coordinates)}function ii(e){return p(e)&&di(e.coordinates)}function ai(e){return p(e)&&pi(e.coordinates)}function si(e){return p(e)&&fi(e.coordinates)}function li(e){return p(e)&&(t=e.coordinates,g(t)&&t.every(fi));var t}function ui(e){return g(e)&&h(e[0])&&h(e[1])}function ci(e){return g(e)&&e.every(ui)}function di(e){return ci(e)}function pi(e){return g(e)&&e.every(di)}function fi(e){return pi(e)}function hi(e){return _i(e,[e])}function _i(e,t){if(!A(e)){if(v(e))return{$date:+e};if(w(e))return{$regex:e.source,$options:e.flags};if(g(e))return e.map((e=>{if(t.indexOf(e)>-1)throw new I({errCode:E.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return _i(e,[...t,e])}));if(p(e)){var r={...e};for(var n in r){if(t.indexOf(r[n])>-1)throw new I({errCode:E.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});r[n]=_i(r[n],[...t,r[n]])}return r}return e}switch(e._internalType){case kn:case jn:case Mn:case Un:case Fn:case $n:return e.toJSON();case Wn:return{$date:e.options};case qn:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function gi(e,t,r,n){var o={...e};for(var i in e)if(!/^\$/.test(i)){var a=e[i];if(a&&p(a)&&!t(a)){if(n.indexOf(a)>-1)throw new I({errCode:E.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});var s=gi(a,t,[...r,i],[...n,a]);o[i]=s;var l=!1;for(var u in s)/^\$/.test(u)?l=!0:(o[`${i}.${u}`]=s[u],delete o[i][u]);l||delete o[i]}}return o}function vi(e){return gi(e,bi,[],[e])}function mi(e){return gi(e,(e=>!1),[],[e])}function yi(e,t,r){for(var n in t[r]||delete e[r],t)e[n]?g(e[n])?e[n].push(t[n]):p(e[n])?p(t[n])?Object.assign(e[n],t[n]):(console.warn(`unmergable condition, query is object but condition is ${d(t)}, can only overwrite`,t,r),e[n]=t[n]):(console.warn(`to-merge query is of type ${d(e)}, can only overwrite`,e,t,r),e[n]=t[n]):e[n]=t[n]}function bi(e){return A(e)||v(e)||w(e)}function wi(e){return hi(e)}function Ai(e){return function(e){var t={...e};for(var r in t)switch(r){case"$date":switch(d(t[r])){case"number":return new Date(t[r]);case"object":return ko(t[r])}break;case"type":switch(t.coordinates,t.type){case"Point":if(ni(t))return Jo(t);break;case"MultiPoint":if(oi(t))return Xo(t);break;case"LineString":if(ii(t))return Zo(t);break;case"MultiLineString":if(ai(t))return ei(t);break;case"Polygon":if(si(t))return ti(t);break;case"MultiPolygon":if(li(t))return ri(t)}}return e}(e)}function Ei(e,t){return{limit:e._query.limit,offset:e._query.offset,order:Ii(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function Ii(e){return e.map((e=>({field:e.fieldPath,direction:e.order===Ha.DESC?po.DESC:po.ASC})))}function Si(e){var t=mi(e);for(var r in t)!0===t[r]||1===t[r]?t[r]=1:!1===t[r]||0===t[r]?t[r]=0:delete t[r];return t}var Ci=function(e){return e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e}({}),Ti=function(e){return e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect",e}({}),Oi={[Ci.DISCONNECTED]:{transitions:[{accept:Ti.CONNECTION_START,to:Ci.CONNECTING}]},[Ci.CONNECTING]:{transitions:[{accept:Ti.CONNECTION_SUCCESS,to:Ci.CONNECTED},{accept:Ti.CONNECTION_FAIL,to:Ci.DISCONNECTED},{accept:Ti.DISCONNECT,to:Ci.DISCONNECTED}]},[Ci.CONNECTED]:{transitions:[{accept:Ti.DISCONNECT,to:Ci.DISCONNECTED},{accept:Ti.CONNECTION_FAIL,to:Ci.DISCONNECTED}]}};var xi,Ni,Ri=(xi=e=>e.replace(/\[(\d+)\]/g,".[$1]").split(".").map((e=>/^\[(\d+)\]$/.test(e)?parseInt(e.substring(1,e.length-1)):e)),Ni=new Map,function(e){return Ni.has(e)||Ni.set(e,xi(e)),Ni.get(e)});function Pi(e,t,r){if(e){if(!Object.prototype.hasOwnProperty.call(e,t)){for(var n=Ri(t),o=e,i=0;i<n.length-1;++i){var a=n[i];o[a]||(o[a]="string"==typeof n[i+1]?{}:[]),o=o[a]}return o[n[n.length-1]]=r,e}e[t]=r}}function Di(e,t){if(e){if(!Object.prototype.hasOwnProperty.call(e,t)){for(var r=Ri(t),n=e,o=0;o<r.length-1;++o){var i=r[o];if(!n[i])return;n=n[i]}return delete n[r[r.length-1]],e}delete e[t]}}var Li=function(e){return e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS",e}({}),Bi=function(e){return e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch",e}({}),ki={accept:Bi.CLOSE,to:Li.CLOSED},Mi={accept:Bi.WS_DISCONNECTED,to:Li.CLOSED},Fi={accept:Bi.WS_DISCONNECTED,to:Li.PAUSED},ji={[Li.UNINIT]:{transitions:[{accept:Bi.LOGIN_START,to:Li.INIT_LOGGING_IN},Mi,ki]},[Li.CLOSED]:{transitions:[ki]},[Li.INIT_LOGGING_IN]:{transitions:[{accept:Bi.LOGIN_FAIL,to:Li.INIT_LOGIN_FAIL},{accept:Bi.LOGIN_SUCCESS,to:Li.INIT_LOGGED_IN},Mi,ki]},[Li.INIT_LOGIN_FAIL]:{transitions:[{accept:Bi.LOGIN_START,to:Li.INIT_LOGGING_IN},Mi,ki]},[Li.INIT_LOGGED_IN]:{transitions:[{accept:Bi.INIT_WATCH_START,to:Li.INIT_WATCH_PENDING},Mi,ki]},[Li.INIT_WATCH_PENDING]:{transitions:[{accept:Bi.INIT_WATCH_FAIL,to:Li.INIT_WATCH_FAIL},{accept:Bi.INIT_WATCH_SUCCESS,to:Li.INIT_WATCH_SUCCESS},Mi,ki]},[Li.INIT_WATCH_FAIL]:{transitions:[{accept:Bi.LOGIN_START,to:Li.INIT_LOGGING_IN},Mi,ki]},[Li.INIT_WATCH_SUCCESS]:{transitions:[{accept:Bi.WS_DISCONNECTED,to:Li.PAUSED},{accept:Bi.NEED_REBUILD_WATCH,to:Li.ABNORMAL_WATCH_STATUS},Fi,ki]},[Li.PAUSED]:{transitions:[{accept:Bi.LOGIN_START,to:Li.REBUILD_LOGGING_IN},Fi,ki]},[Li.ABNORMAL_WATCH_STATUS]:{transitions:[{accept:Bi.LOGIN_START,to:Li.REBUILD_LOGGING_IN},Fi,ki]},[Li.REBUILD_LOGGING_IN]:{transitions:[{accept:Bi.LOGIN_FAIL,to:Li.REBUILD_LOGIN_FAIL},{accept:Bi.LOGIN_SUCCESS,to:Li.REBUILD_LOGGED_IN},Fi,ki]},[Li.REBUILD_LOGIN_FAIL]:{transitions:[{accept:Bi.LOGIN_START,to:Li.REBUILD_LOGGING_IN},Fi,ki]},[Li.REBUILD_LOGGED_IN]:{transitions:[{accept:Bi.REBUILD_WATCH_START,to:Li.REBUILD_WATCH_PENDING},Fi,ki]},[Li.REBUILD_WATCH_PENDING]:{transitions:[{accept:Bi.REBUILD_WATCH_FAIL,to:Li.REBUILD_WATCH_FAIL},{accept:Bi.REBUILD_WATCH_SUCCESS,to:Li.REBUILD_WATCH_SUCCESS},Fi,ki]},[Li.REBUILD_WATCH_FAIL]:{transitions:[{accept:Bi.LOGIN_START,to:Li.REBUILD_LOGGING_IN},Fi,ki]},[Li.REBUILD_WATCH_SUCCESS]:{transitions:[{accept:Bi.NEED_REBUILD_WATCH,to:Li.ABNORMAL_WATCH_STATUS},Fi,ki]}};class Ui{constructor(e){for(var t in this.currentState=void 0,this.states=void 0,this.listeners=new Set,this.history=void 0,this.currentState=e.initialState,this.states=new Map,e.states)this.states.set(t,{name:t,transitions:new Map(e.states[t].transitions.map((({accept:e,to:t})=>[e,t])))});this.history={options:{enable:!1,limit:100},transitions:[]},e.history&&("boolean"==typeof e.history?e.history&&(this.history.options.enable=!0):Boolean(e.history.enable)&&(void 0===e.history.limit||null===e.history.limit?this.history.options={enable:!0,limit:100}:e.history.limit>0&&(this.history.options={enable:!0,limit:e.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}transition(e,t){if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new $i(`current state (${this.currentState}) != expected from state (${t instanceof Set?JSON.stringify([...t]):t})`,"unexpectedFromState");var r="string"==typeof e?{type:e}:e,n=this.states.get(this.currentState),o=n.transitions.get(r.type);if(!o)throw new $i(`current state (${this.currentState}) does not accept "${r.type}"`,"unexpectedInput");this.currentState=o,this.history.options.enable&&(this.history.transitions.push({event:r.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((e=>{try{e({event:r,from:n.name,to:this.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))}canAccept(e){return this.states.get(this.currentState).transitions.has(e)}subscribe(e){this.listeners.add(e)}unsubscribe(e){this.listeners.delete(e)}getHistoryRepresentation(e){return this.history.options.enable?`states: ${(e.limit?this.history.transitions.slice(-e.limit):this.history.transitions).map((({state:e,event:t})=>`${t?`-(${t})->`:""}${e}`)).join("")}`:""}}class $i extends Error{constructor(e,t,r){super(e),this.type="transition",this.subtype=void 0,this.payload=void 0,this.generic=!0,this.subtype=t,this.payload=r}}function Wi(e=""){return`${e?`${e}_`:""}${+new Date}_${Math.random()}`}var qi=1128,Hi=1,Gi=2,Qi=3,zi=4,Ki=5,Yi=6,Vi=7,Ji=8,Xi=9,Zi=10,ea=11,ta=12,ra=13,na=14,oa=15,ia=16,aa=17,sa=18,la=30,ua=31,ca=32,da=33,pa=34,fa=35,ha=36,_a=37,ga=38,va=39,ma=40,ya=50,ba=51,wa=52,Aa=53,Ea=54,Ia=55,Sa=56,Ca=57,Ta=58,Oa=59,xa=60;class Na{constructor(e){this.close=void 0,this.onChange=void 0,this.onError=void 0,this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:()=>e.virtualClient})}}class Ra{constructor(e){this.id=void 0,this.docChanges=void 0,this.docs=void 0,this.type=void 0,this.EJSON=void 0,this.requestId=void 0,this.watchId=void 0;var{id:t,docChanges:r,docs:n,type:o,EJSON:i,requestId:a,watchId:s}=e;Object.defineProperties(this,{id:{value:t,writable:!1,enumerable:!0},docChanges:{value:r,writable:!1,enumerable:!0},docs:{value:n,writable:!1,enumerable:!0},type:{value:o,writable:!1,enumerable:!0}}),this.requestId=a,this.watchId=s}}class Pa extends Error{constructor(e){super(`Watch Error ${JSON.stringify(e.msgData)} (requestid: ${e.requestId})`),this.isRealtimeErrorMessageError=!0,this.payload=void 0,this.payload=e}}var Da=e=>e&&e.isRealtimeErrorMessageError,La=new Set([Li.REBUILD_LOGGING_IN,Li.INIT_LOGGING_IN]),Ba=e=>{0};class ka{constructor(e){var t=this;this.watchId=void 0,this._parentFSM=void 0,this._fsm=void 0,this.envId=void 0,this.collectionName=void 0,this.query=void 0,this.limit=void 0,this.orderBy=void 0,this.queryType=void 0,this.send=void 0,this.login=void 0,this.isWSConnected=void 0,this.getWaitExpectedTimeoutLength=void 0,this.getEJSON=void 0,this.getServiceContext=void 0,this.onWatchStart=void 0,this.onWatchClose=void 0,this.timing=void 0,this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this.debug=void 0,this.wsclient=void 0,this.listener=void 0,this._availableRetries=void 0,this._ackTimeoutId=void 0,this._loginInvalidated=!1,this._errors=[],this._parentFSMListener=void 0,this._FSMListener=void 0,this._wsDisconnectionTS=void 0,this.sessionInfo=void 0,this._waitExpectedTimeoutId=void 0,this._snapshotHistory=[],this._login=function(){var e=s()((function*(e){t._fsm.transition(Bi.LOGIN_START);try{var r=yield t.login(t.envId,e||t._loginInvalidated,t.timing);t.envId||(t.envId=r.envId),t._fsm.transition(Bi.LOGIN_SUCCESS,La),t._loginInvalidated=!1}catch(e){t._errors.push(e),t._loginInvalidated=!0;try{t._fsm.transition(Bi.LOGIN_FAIL,La)}catch(e){console.warn("[realtime]",e)}}}));return function(t){return e.apply(this,arguments)}}(),this.initWatch=s()((function*(){var e=Date.now(),r=Wi();try{t._fsm.transition(Bi.INIT_WATCH_START,Li.INIT_LOGGED_IN);var n=t.envId,o={watchId:t.watchId,requestId:r,msgType:"INIT_WATCH",msgData:{envId:n,collName:t.collectionName,query:t.query,limit:t.limit,orderBy:t.orderBy,queryType:t.queryType}},i=yield t.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus();var{events:a,currEvent:s}=i.msgData;if(t.sessionInfo={queryID:i.msgData.queryID,currentEventId:s-1,currentDocs:[],currentEventTS:Date.now()},a.length>0){for(var l of a)l.ID=s;t.handleServerEvents(i)}else{t.sessionInfo.currentEventId=s;var u=new Ra({id:s,docChanges:[],docs:[],type:"init",EJSON:t.getEJSON(),requestId:i.requestId,watchId:t.watchId});F.surroundThirdByTryCatch((()=>t.listener.onChange(u)))(),t.scheduleSendACK(),t.debug&&t._snapshotHistory.push(u)}t.onWatchStart(t,t.sessionInfo.queryID),t._availableRetries.INIT_WATCH=2,t._wsDisconnectionTS=void 0,Vt(qi,Ki,!0),Yt({apiName:"_realtime.initWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(Bi.INIT_WATCH_SUCCESS)}catch(n){Yt({apiName:"_realtime.initWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(n,{operationName:"INIT_WATCH",requestId:r})}})),this.rebuildWatch=s()((function*(){var e=Date.now(),r=Wi();try{t._fsm.transition(Bi.REBUILD_WATCH_START,Li.REBUILD_LOGGED_IN);var n=t.envId;if(!t.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");if(t._wsDisconnectionTS&&Date.now()-t._wsDisconnectionTS>.9*t.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)throw new O("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});var o={watchId:t.watchId,requestId:r,msgType:"REBUILD_WATCH",msgData:{envId:n,collName:t.collectionName,queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}},i=yield t.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus(),yield t.handleServerEvents(i),t._availableRetries.REBUILD_WATCH=2,t._wsDisconnectionTS=void 0,Vt(qi,Vi,!0),Yt({apiName:"_realtime.rebuildWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(Bi.REBUILD_WATCH_SUCCESS)}catch(n){Yt({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(n,{operationName:"REBUILD_WATCH",requestId:r})}})),this.handleWatchEstablishmentError=function(){var e=s()((function*(e,r){var n="INIT_WATCH"===r.operationName,o=o=>{var i=`${o||e} (${n?"initWatch":"rebuildWatch"} requestId ${r.requestId})`;if(t.closeWithError(new I({errCode:n?E.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:E.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:i})),Vt(qi,n?Yi:Ji,!0),!Da(e)){if(N(e)){switch(e.payload.subtype){case"totalConnectionTimeout":Vt(qi,n?Ea:Ia,!0);break;case"queryEventCacheClientTimeout":n||Vt(qi,Sa,!0)}return}return D(e)?void Vt(qi,n?Ca:Ta,!0):void Vt(qi,n?Oa:xa,!0)}switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":Vt(qi,n?ya:ba,!0);break;default:Vt(qi,n?wa:Aa,!0)}};t._errors.push(e),t.handleCommonError(e,{onSignError:()=>{t._loginInvalidated=!0,t._fsm.transition(t.initialized?Bi.REBUILD_WATCH_FAIL:Bi.INIT_WATCH_FAIL)},onTimeoutError:e=>{e.payload&&!e.payload.retryable?o(e):t._fsm.transition(t.initialized?Bi.REBUILD_WATCH_FAIL:Bi.INIT_WATCH_FAIL)},onNotRetryableError:o,onCancelledError:e=>{t._fsm.transition(t.initialized?Bi.REBUILD_WATCH_FAIL:Bi.INIT_WATCH_FAIL)},onUnknownError:()=>{t._fsm.transition(t.initialized?Bi.REBUILD_WATCH_FAIL:Bi.INIT_WATCH_FAIL)}})}));return function(t,r){return e.apply(this,arguments)}}(),this.closeWatch=s()((function*(){t.closeWatchInvoked=!0;var e=t.sessionInfo?t.sessionInfo.queryID:"";if(t._fsm.currentState!==Li.CLOSED)try{t._fsm.transition(Bi.CLOSE),yield t.sendCloseWatch()}catch(e){console.warn(`[realtime] non-fatal error while closing watch: ${e}`)}finally{t.sessionInfo=void 0,t.onWatchClose(t,e),t._cleanup()}})),this.sendCloseWatch=s()((function*(){var e={watchId:t.watchId,requestId:Wi(),msgType:"CLOSE_WATCH",msgData:null};yield t.send({msg:e})})),this.scheduleSendACK=()=>{this.clearACKSchedule(),this._ackTimeoutId=setTimeout((()=>{this._waitExpectedTimeoutId?this.scheduleSendACK():this.sendACK()}),1e4)},this.clearACKSchedule=()=>{this._ackTimeoutId&&clearTimeout(this._ackTimeoutId)},this.sendACK=s()((function*(){try{if(t._fsm.currentState!==Li.INIT_WATCH_SUCCESS&&t._fsm.currentState!==Li.REBUILD_WATCH_SUCCESS)return void t.scheduleSendACK();if(!t.sessionInfo)return void console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)");var e={watchId:t.watchId,requestId:Wi(),msgType:"CHECK_LAST",msgData:{queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}};yield t.send({msg:e}),t.scheduleSendACK()}catch(e){if(Da(e)){var r=e.payload;switch(r.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return t._loginInvalidated=!0,void(t._fsm.currentState!==Li.INIT_WATCH_SUCCESS&&t._fsm.currentState!==Li.REBUILD_WATCH_SUCCESS||t._fsm.transition(Bi.NEED_REBUILD_WATCH));case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return void t.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:r.msgData.code}))}}t._availableRetries.CHECK_LAST&&t._availableRetries.CHECK_LAST>0?(t._availableRetries.CHECK_LAST--,t.scheduleSendACK()):t.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:e}))}})),this.handleCommonError=(e,t)=>{if(Da(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);default:return void t.onNotRetryableError(e)}}else{if(N(e))return void t.onTimeoutError(e);if(D(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId=`watchid_${+new Date}_${Math.random()}`,this._parentFSM=e.parentFSM,this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.queryType=e.queryType,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.getEJSON=e.getEJSON,this.getServiceContext=e.getServiceContext,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.timing=e.timing,this.debug=e.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new Ui({initialState:Li.UNINIT,states:ji,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new Na({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===Ci.CONNECTED&&this._login(),e.debug&&(this.wsclient=e.wsclient)}get initialized(){return Boolean(this.sessionInfo)}_cleanup(){this._parentFSM.unsubscribe(this._parentFSMListener)}_subscribeParentFSMEvents(){this._parentFSMListener=e=>{var{event:t,from:r,to:n}=e;if(this._fsm.currentState!==Li.CLOSED)if(t.type===Ti.DISCONNECT||t.type===Ti.CONNECTION_FAIL)switch(this._fsm.currentState){case Li.UNINIT:case Li.INIT_LOGGING_IN:case Li.INIT_LOGIN_FAIL:case Li.INIT_LOGGED_IN:case Li.INIT_WATCH_PENDING:case Li.INIT_WATCH_FAIL:this.closeWithError(t.error||new Error("websocket connection fail"),!1);break;default:t.type===Ti.DISCONNECT?(this._wsDisconnectionTS||(this._wsDisconnectionTS=Date.now()),this._fsm.transition(Bi.WS_DISCONNECTED)):this.closeWithError(t.error||new Error("websocket connection fail"),!1)}else if(t.type===Ti.CONNECTION_SUCCESS)switch(this._fsm.currentState){case Li.UNINIT:case Li.PAUSED:this._login();break;case Li.CLOSED:break;default:console.warn(`[realtime] current state should not be ${this._fsm.currentState} (parent event ${t})`)}},this._parentFSM.subscribe(this._parentFSMListener)}_subscribeFSMEvents(){this._FSMListener=e=>{var{event:t,from:r,to:n}=e;switch(t.type){case Bi.WS_CONNECTED:this._login().catch(Ba);break;case Bi.LOGIN_SUCCESS:r===Li.INIT_LOGGING_IN?this.initWatch().catch(Ba):r===Li.REBUILD_LOGGING_IN?this.rebuildWatch().catch(Ba):this.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${r}`}));break;case Bi.LOGIN_FAIL:r===Li.INIT_LOGGING_IN?this.useRetryTicket("INIT_WATCH")?this._login().catch(Ba):this.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):r===Li.REBUILD_LOGGING_IN?this.useRetryTicket("REBUILD_WATCH")?this._login().catch(Ba):this.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):this.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${r}`}));break;case Bi.INIT_WATCH_SUCCESS:this._availableRetries.INIT_WATCH=2,this._errors=[];break;case Bi.INIT_WATCH_FAIL:this.useRetryTicket("INIT_WATCH")?this._login().catch(Ba):this.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case Bi.REBUILD_WATCH_SUCCESS:this._availableRetries.REBUILD_WATCH=2,this._errors=[];break;case Bi.REBUILD_WATCH_FAIL:this.useRetryTicket("REBUILD_WATCH")?this._login().catch(Ba):this.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case Bi.NEED_REBUILD_WATCH:this._login().catch(Ba)}},this._fsm.subscribe(this._FSMListener)}useRetryTicket(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)}assertAsyncTaskStatus(){if(this.closeWatchInvoked)throw new R("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case Li.PAUSED:throw new R("pause",{subtype:"pause"});case Li.CLOSED:throw new R("close",{subtype:"close"})}}handleServerEvents(e){var t=this;return s()((function*(){try{t.scheduleSendACK(),yield t._handleServerEvents(e),t._postHandleServerEventsValidityCheck(e)}catch(e){throw Vt(qi,da,!0),e}}))()}_handleServerEvents(e){var t=this;return s()((function*(){var{requestId:r}=e,{events:n}=e.msgData;if(n.length&&t.sessionInfo){var o,i=t.sessionInfo;try{o=n.map(Ma)}catch(e){return void t.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e}))}for(var a=[...i.currentDocs],s=!1,l=function*(){var n=o[u];if(i.currentEventId>=n.id)return!o[u-1]||n.id>o[u-1].id?Vt(qi,pa,!0):(console.error(`[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ${r})`),Vt(qi,fa,!0)),"continue";if(i.currentEventId===n.id-1){switch(n.dataType){case"update":if(!n.doc)switch(n.queueType){case"update":case"dequeue":var l=a.find((e=>e._id===n.docId));if(l){var d=JSON.parse(JSON.stringify(l));if(n.updatedFields)for(var p in n.updatedFields)Pi(d,p,n.updatedFields[p]);if(n.removedFields)for(var f of n.removedFields)Di(d,f);n.doc=d}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),Vt(qi,ha,!0);break;case"enqueue":var h=new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId ${e.requestId})`});throw t.closeWithError(h),h}break;case"limit":if(!n.doc&&"dequeue"===n.queueType){var _=a.find((e=>e._id===n.docId));_?n.doc=_:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.")}break;case"replace":if(!n.doc){var g=new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="replace" (requestId ${e.requestId})`});throw t.closeWithError(g),g}break;case"remove":var v=a.find((e=>e._id===n.docId));v?n.doc=v:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),Vt(qi,_a,!0))}switch(n.queueType){case"init":s?a.push(n.doc):(s=!0,a=[n.doc]);break;case"enqueue":a.push(n.doc);break;case"dequeue":var m=a.findIndex((e=>e._id===n.docId));m>-1?a.splice(m,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),Vt(qi,ga,!0));break;case"update":var y=a.findIndex((e=>e._id===n.docId));y>-1?a[y]=n.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),Vt(qi,va,!0))}if(u===c-1||o[u+1]&&o[u+1].id!==n.id){var b=[...a],w=o.slice(0,u+1).filter((e=>e.id===n.id));t.sessionInfo.currentEventId=n.id,t.sessionInfo.currentDocs=a,t.sessionInfo.currentEventTS=Date.now();var A=new Ra({id:n.id,type:"init"===w[0].queueType?"init":void 0,docChanges:t.getEJSON().deserialize(w),docs:t.getEJSON().deserialize(b),EJSON:t.getEJSON(),requestId:r,watchId:t.watchId});F.surroundThirdByTryCatch((()=>t.listener.onChange(A)))(),t.debug&&t._snapshotHistory.push(A)}}else Vt(qi,ma,!0),t._fsm.transition(Bi.NEED_REBUILD_WATCH)},u=0,c=o.length;u<c;u++)yield*l()}}))()}_postHandleServerEventsValidityCheck(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn(`[realtime listener] internal non-fatal error: client eventId ${this.sessionInfo.currentEventId} does not match with server event id after server event handling ${e.msgData.currEvent} (requestId ${e.requestId})`)):console.error(`[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId ${e.requestId})`)}clearWaitExpectedEvent(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)}onMessage(e){switch(this._fsm.currentState){case Li.INIT_WATCH_SUCCESS:case Li.REBUILD_WATCH_SUCCESS:break;case Li.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn(`[realtime listener] internal non-fatal error: unexpected message received while state is ${this._fsm.currentState}`)}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((()=>{this._fsm.transition(Bi.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:`${e.msgData.code} - ${e.msgData.message}`}))}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")}closeWithError(e,t=!0){if(this._fsm.currentState!==Li.CLOSED&&this._fsm.transition(Bi.CLOSE),!this.userOnErrorInvoked){var r=this._fsm.getHistoryRepresentation({limit:20});S(e)?(e.errMsg+=`\nhistory ${r}`,e.history=r):e&&((e=new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`${e} \nhistory ${r}`})).history=r),this.clearACKSchedule(),F.surroundThirdByTryCatch((()=>this.listener.onError(e)))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),t&&this.sendCloseWatch().catch(Ba),this.sessionInfo=void 0}}}function Ma(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}var Fa={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}},ja=function(e){return e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired",e}({}),Ua=(e,t)=>{var r=Fa[e],n=r?`${r.name}, code ${e}, reason ${t||r.description}`:`code ${e}`;return new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:n})},$a=1;class Wa{constructor(e){var t=this;this._fsm=void 0,this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._totalConnectionTimeoutId=void 0,this._serviceContext=void 0,this._ws=void 0,this._lastPingSendTS=void 0,this._pingFailed=0,this._pongMissed=0,this._pingTimeoutId=void 0,this._pongTimeoutId=void 0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this._EJSON=void 0,this._defaultEnvId=void 0,this._connectionEnvId=void 0,this._retryLock=!1,this.initWebSocketConnection=function(){var e=s()((function*(e,r=t._maxReconnect){var n;if(t._EJSON||(n=function(){return qa.apply(this,arguments)}().then((e=>t._EJSON=e))),t._fsm.currentState===Ci.DISCONNECTED){t._fsm.transition(Ti.CONNECTION_START),t._logins=new Map,t._wsResponseWait=new Map;var o=!1,i=[],a=!1;if(!t._totalConnectionTimeoutId&&t._totalConnectionTimeout&&t._totalConnectionTimeout!==1/0){var s=t._totalConnectionTimeout;t._totalConnectionTimeoutId=setTimeout((()=>{a=!0,e&&t._retryLock&&(t._retryLock=!1),t._totalConnectionTimeoutId=void 0;var r=new O(`reconnect timeout (reach totalConnectionTimeout ${s}s)`,{subtype:"totalConnectionTimeout",retryable:!1});Vt(qi,aa,!0),t._fsm.transition({type:Ti.CONNECTION_FAIL,error:r})}),1e3*s)}if(e){if(t._retryLock)return void 0;0,t._retryLock=!0}for(var l=function*(){try{if(!(yield pe()).isConnected){if(!e)return t._fsm.transition({type:Ti.CONNECTION_FAIL,error:new Error("network offline")}),{v:void 0};if(yield new Promise((e=>{se&&se.isConnected?e():de.push(e)})),0===t._virtualWSClient.size)return t.clearTotalReconnectTimeout(),{v:void 0};Mt()&&(yield ue(100))}if(a)return{v:void 0};0;var r=yield t.getSignature(t._connectionEnvId);if(a)return{v:void 0};0;var s=Date.now();return yield new Promise(((e,n)=>{t._ws=te(t._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:r.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:n})})),a?{v:void 0}:(Yt({apiName:"_realtime.connectSocket",apiStartTime:s,apiEndTime:Date.now()}),yield t.initWebSocketEvent(),a||n&&(yield n,a)?{v:void 0}:(o=!0,"break"))}catch(e){if(i.unshift(e),e.errCode===E.TCB_PERMISSION_DENIED)return"break";var{isConnected:l}=yield pe();if(a)return{v:void 0};if(l&&(yield ue(t._reconnectInterval),a))return{v:void 0};if(Mt()&&(yield ue(0),a))return{v:void 0}}},u=t._maxReconnect;u>=0;u--){var c=yield*l();if("break"===c)break;if("object"==typeof c)return c.v}if(e&&t._retryLock&&(t._retryLock=!1),o)return t.clearTotalReconnectTimeout(),Vt(qi,e?Qi:Hi,!0),void t._fsm.transition(Ti.CONNECTION_SUCCESS);t.clearTotalReconnectTimeout(),Vt(qi,e?zi:Gi,!0),e?t._fsm.transition({type:Ti.CONNECTION_FAIL,error:new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(i.map((e=>e+"")))}`})}):t._fsm.transition({type:Ti.CONNECTION_FAIL,error:new I({errCode:E.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(i.map((e=>e+"")))}`})})}}));return function(t){return e.apply(this,arguments)}}(),this.initWebSocketEvent=()=>new Promise(((e,t)=>{if(!this._ws)throw new Error("can not initWebSocketEvent, ws not exists");var r=!1;this._ws.onOpen((t=>{this._context.debug&&console.warn("[realtime] ws event: open",t),r=!0,e()}));var n=null;this._ws.onError((e=>{n=e,this._logins=new Map,r?(this._context.debug&&console.error("[realtime] ws event: error",e),this.clearHeartbeat(),Vt(qi,Zi,!0)):(this._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),t(e),Vt(qi,Xi,!0))})),this._ws.onClose((e=>{this._logins=new Map,this.clearHeartbeat();var t=n||Ua(e.code);switch(e.code){case ja.ReconnectOnServerUpgrade:case ja.ReconnectWebSocket:case ja.NoRealtimeListeners:this._fsm.transition({type:Ti.DISCONNECT,error:t});break;case ja.HeartbeatPingError:case ja.HeartbeatPongTimeoutError:case ja.NormalClosure:case ja.AbnormalClosure:this._maxReconnect>0?(this._fsm.transition({type:Ti.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:Ti.CONNECTION_FAIL,error:t}),e.code===ja.HeartbeatPingError?Vt(qi,ta,!0):e.code===ja.HeartbeatPongTimeoutError?Vt(qi,ra,!0):Vt(qi,na,!0);break;case ja.UnauthenticatedIdleConnection:this._fsm.transition({type:Ti.CONNECTION_FAIL,error:Ua(e.code,e.reason)}),Vt(qi,oa,!0);break;case ja.ServerUpgrade:this._fsm.transition({type:Ti.DISCONNECT,error:t}),this.initWebSocketConnection(!0),Vt(qi,sa,!0);break;default:this._maxReconnect>0?(this._fsm.transition({type:Ti.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:Ti.CONNECTION_FAIL,error:Ua(e.code,e.reason)}),Vt(qi,ia,!0)}Vt(qi,ea,!0)}));var o={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:rr,autoReport:"_realtime.onSocketMessage"};this._ws.onMessage(tr(this.onSocketMessage,o)),this.heartbeat()})),this.isWSConnected=()=>Boolean(this._ws&&this._ws.readyState===$a),this.onSocketMessage=e=>{var t,r=e.data;this.heartbeat();try{t=JSON.parse(r)}catch(e){throw new Error(`[realtime] onMessage parse res.data error: ${e}`)}this._context.debug&&console.log(`[realtime] onMessage ${t.msgType} (${(new Date).toLocaleString()})`,t);var n=this._wsResponseWait.get(t.requestId);if(n){try{"ERROR"===t.msgType?n.reject(new Pa(t)):n.resolve(t)}catch(e){this._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{this._wsResponseWait.delete(t.requestId)}if(n.skipOnMessage)return}if("PONG"!==t.msgType){var o=t.watchId&&this._watchIdClientMap.get(t.watchId);if(o)o.onMessage(t);else switch(t.watchId?this._closedWatches.has(t.watchId)?Vt(qi,la,!0):Vt(qi,ua,!0):Vt(qi,ca,!0),t.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":(o=this._queryIdClientMap.get(t.msgData.queryID))&&o.onMessage(t)}}else if(this._lastPingSendTS){var i=Date.now()-this._lastPingSendTS;if(i>1e4)return void(this._context.debug&&console.warn(`[realtime] untrusted rtt observed: ${i}`));this._rttObserved.length>=3&&this._rttObserved.splice(0,this._rttObserved.length-3+1),this._rttObserved.push(i)}},this.login=function(){var e=s()((function*(e,r,n){if(e=e||t._context.env||t._defaultEnvId,!r)if(e){var o=t._logins.get(e);if(o){if(o.loggedIn&&o.loginResult)return o.loginResult;if(o.loggingInPromise)return o.loggingInPromise}}else{var i=t._logins.get("");if(i&&i.loggingInPromise)return i.loggingInPromise}var a=new Promise(function(){var o=s()((function*(o,i){try{var a=yield n?tr(t.getSignature(e,r),{timing:n,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):t.getSignature(e,r),s=(()=>{var e,t,r=te().wx;if(r&&r.version){e=r.version.version,t=r.version.updateTime;var n=r.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return{version:e,updateTime:t,updateDateInDashes:n?`${n[1]}-${n[2]}-${n[3]}`:"unknown"}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}})(),l={watchId:void 0,requestId:Wi(),msgType:"LOGIN",msgData:{envId:a.envId,signStr:a.signStr,secretVersion:a.secretVersion,referrer:"mp",sdkVersion:s.version,dataVersion:s.updateDateInDashes}},u=yield t.send({msg:l,waitResponse:!0,skipOnMessage:!0,timeout:5e3});u.msgData.code?i(new Error(`${u.msgData.code} ${u.msgData.message}`)):o({envId:a.envId})}catch(e){i(e)}}));return function(e,t){return o.apply(this,arguments)}}()),l=e&&t._logins.get(e),u=Date.now();l?(l.loggedIn=!1,l.loggingInPromise=a,l.loginStartTS=u):(l={loggedIn:!1,loggingInPromise:a,loginStartTS:u},t._logins.set(e||"",l));try{var c=yield a,d=t._logins.get(e||"");if(d&&d===l&&d.loginStartTS===u)return l.loggedIn=!0,l.loggingInPromise=void 0,l.loginStartTS=void 0,l.loginResult=c,c;if(d){if(d.loggedIn&&d.loginResult)return d.loginResult;if(d.loggingInPromise)return d.loggingInPromise;throw new Error("ws unexpected login info")}throw new Error("ws login info reset")}catch(e){throw l.loggedIn=!1,l.loggingInPromise=void 0,l.loginStartTS=void 0,l.loginResult=void 0,e}}));return function(t,r,n){return e.apply(this,arguments)}}(),this.getSignature=function(){var e=s()((function*(e,r){if(e=e||t._context.env||t._defaultEnvId,!r&&e&&t._signatures.has(e)){var n=t._signatures.get(e);if(Date.now()<n.expireTS)return n}else 0;var o=Date.now()+6e4,i=yield function(e,t){return To.apply(this,arguments)}(t._context,e);if(Date.now()-o>6e4)return t.getSignature(e,r);var a={...i,expireTS:o};return t._signatures.set(a.envId,a),e||(t._defaultEnvId=a.envId),a}));return function(t,r){return e.apply(this,arguments)}}(),this.getWaitExpectedTimeoutLength=()=>this._rttObserved.length?this._rttObserved.reduce(((e,t)=>e+t))/this._rttObserved.length*1.5:5e3,this.ping=s()((function*(){var e={watchId:void 0,requestId:Wi(),msgType:"PING",msgData:null};yield t.send({msg:e}),t._context.debug&&console.log("ping sent")})),this.send=e=>new Promise(function(){var r=s()((function*(r,n){if(t._fsm.currentState!==Ci.CONNECTED)return n(new Error("websocket not connected"));var o,i=!1,a=!1,l=e=>{i=!0,o&&clearTimeout(o),r(e)},u=e=>{a=!0,o&&clearTimeout(o),n(e)};e.timeout&&(o=setTimeout(s()((function*(){i&&a||(yield ue(0),i&&a||u(new O("wsclient.send timedout")))})),e.timeout));try{if(t._context.debug&&console.log(`[realtime] ws send ${e.msg.msgType} (${(new Date).toLocaleString()}): `,e),!t._ws)return void u(new Error("invalid state: ws connection not exists, can not send message"));if(t._ws.readyState!==$a)return void u(new Error(`ws readyState invalid: ${t._ws.readyState}, can not send message`));e.waitResponse&&t._wsResponseWait.set(e.msg.requestId,{resolve:l,reject:u,skipOnMessage:e.skipOnMessage}),t._ws.send({data:JSON.stringify(e.msg),success:t=>{e.waitResponse||l(t)},fail:r=>{u(r),e.waitResponse&&t._wsResponseWait.delete(e.msg.requestId)}})}catch(e){u(e)}}));return function(e,t){return r.apply(this,arguments)}}()),this.onWatchStart=(e,t)=>{this._queryIdClientMap.set(t,e)},this.onWatchClose=(e,t)=>{t&&this._queryIdClientMap.delete(t),this._watchIdClientMap.delete(e.watchId),this._virtualWSClient.delete(e),this._closedWatches.add(e.watchId),this._virtualWSClient.size||this.close(ja.NoRealtimeListeners)},this.getEJSON=()=>this._EJSON,this._fsm=new Ui({initialState:Ci.DISCONNECTED,states:Oi}),this._serviceContext=e.serviceContext}get _context(){return this._serviceContext}get _maxReconnect(){return this._context.appConfig.realtimeMaxReconnect}get _reconnectInterval(){return this._context.appConfig.realtimeReconnectInterval}get _totalConnectionTimeout(){return this._context.appConfig.realtimeTotalConnectionTimeout}heartbeat(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(s()((function*(){try{if(!t._ws||t._ws.readyState!==$a)return;t._lastPingSendTS=Date.now(),yield t.ping(),t._pingFailed=0,t._pongTimeoutId=setTimeout((()=>{t._context.debug&&console.error("pong timed out"),t._pongMissed<2?(t._pongMissed++,t.heartbeat(!0)):t.close(ja.HeartbeatPongTimeoutError)}),t._context.appConfig.realtimePongWaitTimeout)}catch(e){t._pingFailed<2?(t._pingFailed++,t.heartbeat()):t.close(ja.HeartbeatPingError)}})),e?0:this._context.appConfig.realtimePingInterval)}clearHeartbeat(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)}clearTotalReconnectTimeout(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)}close(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:Fa[e].name}),this._ws=void 0)}watch(e){var t={apiStartTime:Date.now()},r=!1,n=()=>{Yt({...t,apiName:e.reportAPIName})},o=e.onChange,i=e.onError;this._fsm.currentState===Ci.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));var a=new ka({...e,parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:()=>this._context,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:t,debug:this._context.debug,wsclient:this,onChange:l,onError:u});this._virtualWSClient.add(a),this._watchIdClientMap.set(a.watchId,a);var s=a.listener;return s;function l(...e){r||(r=!0,t.apiEndTime=Date.now(),n()),c(),F.surroundThirdByTryCatch((()=>s.onChange.apply(this,e)))()}function u(...e){r||(r=!0,t.apiEndTime=Date.now(),n()),c(),F.surroundThirdByTryCatch((()=>s.onError.apply(this,e)))()}function c(){s.onChange===l&&(s.onChange=o),s.onError===u&&(s.onError=i)}}}function qa(){return(qa=s()((function*(){var e=Date.now(),t=r(683);return Yt({apiName:"_realtime.importBSON",apiStartTime:e,apiEndTime:Date.now()}),t.EJSON}))).apply(this,arguments)}var Ha=function(e){return e.ASC="asc",e.DESC="desc",e}({}),Ga=e=>{class t{constructor(t,n){if(this.collectionName=void 0,this._query=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(Q(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Wa({serviceContext:e.serviceContext})),e.serviceContext.ws.watch({...t,envId:e.database.config.env||e.serviceContext.env,collectionName:this.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(this._query.where||{})),limit:this._query.limit,orderBy:this._query.order?this._query.order.reduce(((e,t)=>(e[t.fieldPath]=t.order,e)),{}):void 0,queryType:uo.WHERE,reportAPIName:"cloud.db.collection.watch"})),!t)throw new I({errCode:E.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=t,this._query=new r(n),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=n&&n.field||{}}field(e){return z(e,"object","field"),new t(this.collectionName,{...this._query.getProperties(),field:e})}where(e){return z(e,"condition","where"),this._query.where?new t(this.collectionName,{...this._query.getProperties(),where:Bo.and(this._query.where,e)}):new t(this.collectionName,{...this._query.getProperties(),where:e})}orderBy(e,r){return z(e,"fieldPath","orderBy"),z(r,"order","orderBy"),new t(this.collectionName,{...this._query.getProperties(),order:[...this._query.order||[],{fieldPath:e,order:r}]})}limit(e){return z(e,"max","limit"),new t(this.collectionName,{...this._query.getProperties(),limit:e})}skip(e){return z(e,"offset","skip"),new t(this.collectionName,{...this._query.getProperties(),offset:e})}get(t){var r="collection.get",n={apiStartTime:+new Date},o=()=>vo({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:uo.WHERE,options:Ei(this,e),instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var i=G(t),a=new Promise(function(){var e=s()((function*(e,i){try{var a=yield o();if(null!=t&&t.explain&&Mt())return void e(a);e({data:a.list,errMsg:ir(r)})}catch(e){i(C(e,r))}finally{Yt({...n,apiEndTime:+new Date,apiName:`cloud.db.${r}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{q(r,t,e)})).catch((e=>{H(r,t,e)}))}update(t){var r="collection.update",n={apiStartTime:+new Date},o=()=>{if(z(t,"options","update"),Q(t,{data:"object"}),!this._query.where)throw new I({errCode:-1,errMsg:"query condition must be provided"})},i=()=>yo({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:uo.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:n,explain:t.explain});var a=G(t),l=new Promise(function(){var e=s()((function*(e,a){try{o();var s=yield i();if(null!=t&&t.explain&&Mt())return e(s);e({stats:{updated:s.updated},errMsg:ir(r)})}catch(e){a(C(e,r))}finally{Yt({...n,apiEndTime:+new Date,apiName:`cloud.db.${r}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!a)return l;l.then((e=>{q(r,t,e)})).catch((e=>{H(r,t,e)}))}remove(t){var r="collection.remove",n={apiStartTime:+new Date},o=()=>{if(!this._query.where||0===Object.keys(this._query.where).length)throw new I({errCode:-1,errMsg:"query condition must be provided and not be empty"})},i=()=>_o({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:uo.WHERE,options:{multi:!0},instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var a=G(t),l=new Promise(function(){var e=s()((function*(e,a){try{o();var s=yield i();if(null!=t&&t.explain&&Mt())return e(s);e({stats:{removed:s.removed||0},errMsg:ir(r)})}catch(e){a(C(e,r))}finally{Yt({...n,apiEndTime:+new Date,apiName:`cloud.db.${r}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!a)return l;l.then((e=>{q(r,t,e)})).catch((e=>{H(r,t,e)}))}count(t){var r="collection.count",n={apiStartTime:+new Date},o=()=>Eo({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:uo.WHERE,instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var i=G(t),a=new Promise(function(){var e=s()((function*(e,i){try{var a=yield o();if(null!=t&&t.explain&&Mt())return e(a);e({total:a.total,errMsg:ir(r)})}catch(e){i(C(e,r))}finally{Yt({...n,apiEndTime:+new Date,apiName:`cloud.db.${r}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{q(r,t,e)})).catch((e=>{H(r,t,e)}))}toJSON(){}}class r{constructor(e){this.where=void 0,this.offset=void 0,this.limit=void 0,this.order=void 0,this.field=void 0,this.where=e&&e.where,this.offset=e&&e.offset,this.limit=e&&e.limit,this.order=e&&e.order,this.field=e&&e.field}getProperties(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}}}return t},Qa="document.get",za="document.update",Ka="document.set",Ya="document.remove",Va=e=>class{constructor(t,r){if(this._id=void 0,this.collection=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(Q(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Wa({serviceContext:e.serviceContext})),e.serviceContext.ws.watch({...t,envId:e.database.config.env||e.serviceContext.env,collectionName:this.collection.collectionName,query:JSON.stringify({_id:this._id}),queryType:uo.DOC,reportAPIName:"cloud.db.document.watch"})),this.collection=t,this._id=r,null==r)throw new I({errCode:E.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}field(e){return z(e,"object","field"),Q(e,"object","field"),this._field=e,this}get(t){var r=this,n={apiStartTime:+new Date},o=()=>vo({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),options:{projection:e.engine.ProjectionSerializer.encode(this._field)},queryType:uo.DOC,instanceContext:e,timing:n});var i=G(t),a=new Promise(function(){var e=s()((function*(e,t){try{var i=r._id,a=yield o();if(!a.list||!a.list.length)throw new Error(`cannot find document with _id ${i}, please make sure that the document exists and you have the corresponding access permission`);e({data:a.list[0],errMsg:ir(Qa)})}catch(e){t(C(e,Qa))}finally{Yt({...n,apiEndTime:+new Date,apiName:`cloud.db.${Qa}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{q(Qa,t,e)})).catch((e=>{H(Qa,t,e)}))}set(t){var r={apiStartTime:+new Date},n=()=>wo({env:e.database.config.env,collectionName:this.collection.collectionName,_id:this._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:r});var o=G(t),i=new Promise(function(){var e=s()((function*(e,o){try{Q(t,{data:"object"}),Y({name:"options.data",target:t.data});var i=yield n();e({_id:i._id,errMsg:ir(Ka),stats:{updated:i.updated,created:i.created}})}catch(e){o(C(e,Ka))}finally{Yt({...r,apiEndTime:+new Date,apiName:`cloud.db.${Ka}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return i;i.then((e=>{q(Ka,t,e)})).catch((e=>{H(Ka,t,e)}))}update(t){var r={apiStartTime:+new Date},n=()=>yo({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:uo.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:r});var o=G(t),i=new Promise(function(){var e=s()((function*(e,o){try{Q(t,{data:"object"}),Y({name:"options.data",target:t.data}),e({stats:{updated:(yield n()).updated},errMsg:ir(za)})}catch(e){o(C(e,za))}finally{Yt({...r,apiEndTime:+new Date,apiName:`cloud.db.${za}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return i;i.then((e=>{q(za,t,e)})).catch((e=>{H(za,t,e)}))}remove(t){var r=this,n={apiStartTime:+new Date},o=()=>_o({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),queryType:uo.DOC,options:{},instanceContext:e,timing:n});var i=G(t),a=new Promise(function(){var e=s()((function*(e,t){try{var i=r._id,a=yield o();if(0===a.removed)throw new Error(`cannot remove document with _id ${i}, please make sure that the document exists and you have the corresponding Write permission`);e({stats:{removed:a.removed||0},errMsg:ir(Ya)})}catch(e){t(C(e,Ya))}finally{Yt({...n,apiEndTime:+new Date,apiName:`cloud.db.${Ya}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{q(Ya,t,e)})).catch((e=>{H(Ya,t,e)}))}toJSON(){}},Ja=e=>{var t=Ga(e),r=Va(e),n=Oo(e);return class extends t{constructor(e){super(e),this.collectionName=void 0,this.__safe_props__=void 0,this.collectionName=e}doc(e){if(null==e)throw C({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new r(this,e)}add(t){var r="collection.add",n={apiStartTime:+new Date},o=()=>fo({env:e.database.config.env,collectionName:this.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:n});var i=G(t),a=new Promise(function(){var e=s()((function*(e,i){try{Q(t,{data:"object"}),e({_id:(yield o())._id,errMsg:ir(r)})}catch(e){i(C(e,r))}finally{Yt({...n,apiEndTime:+new Date,apiName:`cloud.db.${r}`})}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{q(r,t,e)})).catch((e=>{H(r,t,e)}))}aggregate(){return new n(this,[])}}},Xa=function(e){return new Za(e)};class Za{constructor(e){this.regexp=void 0,this.options=void 0,Q(e,{regexp:"string"},"RegExp options"),e.options&&Q(e.options,"string"),this.regexp=e.regexp,this.options=e.options||""}get _internalType(){return qn}toJSON(){return{$regex:this.regexp,$options:this.options}}}var es={},ts={};for(var rs in Yn)es[Yn[rs]]=`$${Yn[rs]}`;for(var ns in Hn)es[Hn[ns]]=`$${Hn[ns]}`;for(var os in eo)es[eo[os]]=`$${eo[os]}`;for(var is in no)"undefined"!=typeof IS_SDK_PACKAGE&&"toString"===no[is]||(ts[no[is]]=`$${no[is]}`);function as(e){return es[e]||`$${e.toLowerCase()}`}function ss(e){return ts[e]||`$${e.toLowerCase()}`}es[Yn.NEQ]="$ne",es[eo.REMOVE]="$unset",es[eo.SHIFT]="$pop",es[eo.UNSHIFT]="$push",es[Yn.GEO_NEAR]="$nearSphere",es[Yn.GEO_WITHIN]="$geoWithin",es[Yn.GEO_INTERSECTS]="$geoIntersects";class ls{static encodeStages(e){return(new us).encodeStages(e)}static encode(e){return(new us).encodeAny(e)}}class us{encodeStages(e){return e.map((e=>this.encodePipelineStage(e)))}encodeAny(e){return bi(e)?Po(e)?this.encodePipeline(e):Do(e)?this.encodePipelineStage(e):io(e)?this.encodeAggregateCommand(e):wi(e):p(e)?this.encodeObject(e):g(e)?e.map((e=>this.encodeAny(e))):e}encodeObject(e){var t={};for(var r in e)t[r]=this.encodeAny(e[r]);return t}encodePipeline(e){return e._stages.map((e=>this.encodeAny(e)))}encodePipelineStage(e){var t=`$${e.stage}`;return"match"===e.stage?{[t]:cs.encode(e.val)}:{[t]:this.encodeAny(e.val)}}encodeAggregateCommand(e){return{[ss(e.operator)]:this.encodeAny(e.operands[0])}}}class cs{constructor(){}static encode(e){return ds(e)}}var ds=e=>Kn(e)?fs(e):Zn(e)?hs(e):Po(e)||io(e)||Do(e)?ls.encode(e):p(e)?ps(e):wi(e),ps=e=>{var t=vi(e),r=[],n={[Hn.OR]:0,[Hn.NOR]:0,[Hn.AND]:0,[Hn.NOT]:0},o=function(e){var o=t[e];if(Kn(o))switch(o.operator){case Hn.OR:case Hn.NOR:case Hn.AND:n[o.operator]++,r.push({[as(o.operator)]:o.operands.map((t=>ds({[e]:t})))});break;case Hn.NOT:var i=o.operands[0];if(Kn(i))switch(i.operator){case Hn.AND:n[Hn.OR]++,r.push(fs(new zn(Hn.OR,i.operands.map((t=>({[e]:new zn(Hn.NOT,[t])}))))));break;case Hn.OR:n[Hn.NOR]++,r.push(fs(new zn(Hn.NOR,i.operands.map((t=>({[e]:t}))))));break;case Hn.NOR:n[Hn.OR]++,r.push(fs(new zn(Hn.OR,i.operands.map((t=>({[e]:t}))))));break;case Hn.NOT:r.push(ds({[e]:i.operands[0]}))}else r.push({[e]:fs(o)})}else Zn(o)?r.push({[e]:hs(o)}):r.push({[e]:wi(o)})};for(var i in t)o(i);return _s(r)},fs=e=>{switch(e.operator){case Hn.AND:if(e.operands.every((e=>Zn(e)))){var t={};for(var r of e.operands)Object.assign(t,hs(r));return t}return{[as(e.operator)]:e.operands.map(ds)};case Hn.OR:case Hn.NOR:return{[as(e.operator)]:e.operands.map(ds)};case Hn.NOT:var n=as(e.operator),o=e.operands[0];return{[n]:ds(o)};default:return{[as(e.operator)]:e.operands.map(ds)}}},hs=e=>{var t=as(e.operator);switch(e.operator){case Yn.EQ:case Yn.NEQ:case Yn.LT:case Yn.LTE:case Yn.GT:case Yn.GTE:case Yn.EXISTS:case Yn.SIZE:return{[t]:wi(e.operands[0])};case Yn.IN:case Yn.NIN:case Yn.MOD:return{[t]:wi(e.operands)};case Yn.ALL:return{[t]:e.operands.map(ds)};case Yn.ELEM_MATCH:case Yn.EXPR:return{[t]:ds(e.operands[0])};case Yn.GEO_NEAR:return{[t]:{$geometry:wi(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance}};case Yn.GEO_WITHIN:var r={};return e.operands[0].geometry&&(r.$geometry=wi(e.operands[0].geometry)),e.operands[0].centerSphere&&(r.$centerSphere=wi(e.operands[0].centerSphere)),{[t]:r};case Yn.GEO_INTERSECTS:return{[t]:{$geometry:wi(e.operands[0].geometry)}};default:return{[t]:e.operands.length>1?e.operands.map(ds):ds(e.operands[0])}}},_s=e=>{var t={$and:0,$or:0,$nor:0};for(var r of e)r.$and&&t.$and++,r.$or&&t.$or++,r.$nor&&t.$nor++;var n=t.$and>1||t.$or>1||t.$nor>1,o=!1,i={};for(var a of e)for(var s in a){var l=a[s];n?o?i.$and.push(a):"$and"===s||"$or"===s||"$nor"===s?(o=!0,i.$and=[a]):i[s]=l:i[s]=l}return i};class gs{constructor(){}static encode(e){return vs(e)}}var vs=e=>ms(e),ms=e=>{var t=vi(e),r={};for(var n in t){var o=t[n];if(ro(o)){var i=as(o.operator);switch(r[i]||(r[i]={}),o.operator){case eo.SET:case eo.INC:case eo.MUL:case eo.MIN:case eo.MAX:case eo.RENAME:case eo.BIT:r[i][n]=wi(o.operands[0]);break;case eo.REMOVE:r[i][n]="";break;case eo.PUSH:var a=void 0;a=1===o.operands.length&&p(o.operands[0])?{$each:o.operands[0].each.map(wi),$position:o.operands[0].position,$slice:o.operands[0].slice,$sort:o.operands[0].sort}:{$each:o.operands.map(wi)},r[i][n]=a;break;case eo.UNSHIFT:var s={$each:o.operands.map(wi),$position:0};r[i][n]=s;break;case eo.POP:r[i][n]=1;break;case eo.SHIFT:r[i][n]=-1;break;case eo.ADD_TO_SET:r[i][n]=p(o.operands[0])&&o.operands[0].each?{$each:o.operands[0].each}:o.operands[0];break;case eo.PULL:r[i][n]=cs.encode(o.operands[0]);break;case eo.PULL_ALL:default:r[i][n]=wi(o.operands[0])}}else r.$set||(r.$set={}),r.$set[n]=wi(o)}return r};class ys{constructor(){}static encode(e){return(new ys).encodeProjection(e)}encodeProjection(e){return lo(e)?this.encodeProjectionCommand(e):"object"===d(e)?this.encodeProjectionObject(e):e}encodeProjectionCommand(e){var t=as(e.operator);return e.operator,ao.SLICE,{[t]:e.operands[0]}}encodeProjectionObject(e){var t=vi(e);for(var r in t)!0===t[r]||1===t[r]?t[r]=1:!1===t[r]||0===t[r]?t[r]=0:lo(t[r])?t[r]=this.encodeProjectionCommand(t[r]):delete t[r];return t}}class bs{constructor(){}static decode(e){return(new bs).decodeData(e)}decodeData(e){switch(d(e)){case"object":return this.decodeObject(e);case"array":return e.map((e=>{if(p(e)){var t=Ai(e);return t!==e?t:this.decodeObject(e)}return e}));default:return e}}decodeObject(e){var t={...e};for(var r in t){var n=t[r];switch(d(n)){case"object":var o=Ai(n);t[r]=o!==n?o:this.decodeObject(t[r]);break;case"array":var i=this.decodeData(n);i!==n&&(t[r]=i);break;default:continue}}return t}}const ws=function(e,t){return new(Es(e.identifiers||{}))({context:e,config:t})};function As(e){return e.debug}var Es=r=>{var n,o;return class{constructor(i){this.identifiers=void 0,this.config=void 0,this.command=void 0,this.Geo=void 0,this.serverDate=void 0,this.RegExp=void 0,this.__safe_props__=void 0;var{config:a,context:s}=i;this.identifiers=r,this.config=a||{},o=Ja(n={database:this,serviceContext:s,engine:t}),a&&a.env&&Q(a.env,"string"),this.command=Bo,this.Geo=e,this.serverDate=ko,this.RegExp=Xa,a&&a.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get(){return As((e=n).database)?e.engine.QuerySerializer:void 0;var e},set(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get(){return As((e=n).database)?e.engine.UpdateSerializer:void 0;var e},set(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get(){return As((e=n).database)?e.engine.ProjectionSerializer:void 0;var e},set(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get(){return As((e=n).database)?e.engine.AggregateSerializer:void 0;var e},set(){}},Decoder:{enumerable:!1,configurable:!1,get(){return As((e=n).database)?e.engine.Decoder:void 0;var e},set(){}}})}collection(e){return new o(e)}toJSON(){}}};function Is(e){return{database:ws.bind(null,e)}}var Ss="database";function Cs(e){e.registerService(function(e){var t={name:Ss,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(Ss)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:Ss,context:t,getAPIs:Is.bind(null,t)}}(e))}function Ts(e){class t{constructor(e){this.cloudID=void 0,this._internalType=dr,this.cloudID=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toJSON(){return this.cloudID}toString(){return this.cloudID}}return function(e){return new t(e)}}function Os(e){class t{constructor(e){this.target=void 0,this._internalType=pr,this.target=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toString(){return JSON.stringify({target:this.target})}}return function(e){return new t(e)}}function xs(e){return{CloudID:Ts(),CDN:Os()}}var Ns="utils";function Rs(e){e.registerService(function(e){var t={name:Ns,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:Ns,context:t,getAPIs:xs.bind(null,t)}}(e))}class Ps{constructor(){}}var Ds="gateway.call";class Ls extends Error{constructor(e,t){super(e),this.code=void 0,this.code=t}}function Bs(e){return t=>{var r=new ks(t),n=t.domain?t.domain:`${t.id||t.appid}.preview.wxcloudrun.com`,o={name:"gateway-plugin",host:n,getMetadata:e=>({...e,host:n}),beforeRequest:e=>e,afterRequest:e=>e,beforeTunnelRequest:e=>e,afterTunnelRequest:e=>e,context:e,refreshTunnelInfo:"miniprogram"===hn().env?s()((function*(){var t=me();return(yield e.request({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({system:t.system,wx_app_version:t.version,scene:3})})).data})):void 0};return $s.set(r,o),r.tokenManager.invalidate(),r.exportAPI}}class ks extends Ps{constructor(e){super(),this.options=e,this.session=void 0,this.tokenManager=new yt(this.refreshToken.bind(this),(e=>Math.max(3e4,e)),(e=>Jt(e,"3"))),this.exportAPI=void 0,this.exportAPI={refresh:this.tokenManager.updateSession.bind(this.tokenManager),call:this.call.bind(this)}}refreshToken(e){this.session=e;var t=$s.get(this);return new Promise(((r,n)=>{t.refreshTunnelInfo?t.refreshTunnelInfo().then((e=>r(e))).catch((e=>n(e))):te()._requestSkipCheckDomain({url:`https://${t.host}/__wx__/auth?devtools_ignore=true`,method:"post",header:{"x-wx-accept-encryption":3,"x-wx-encryption-timestamp":Date.now(),"x-wx-lib-build-ts":1678888746406},data:JSON.stringify({session:e,fingerprint:"",timestamp:Date.now(),nonce:Math.random()}),success:({data:e})=>r(e),fail:e=>{n(e)}})}))}call(e){var t=this;return s()((function*(){var r,n,o=Date.now();e.stats={apiStartTime:o},e.context={apiStartTime:o};var i=yield t.tokenManager.getToken();e.stats.getServiceEndpoint=Date.now()-o;var a=new Uint8Array(null===(r=(n=u.wx).base64ToArrayBuffer)||void 0===r?void 0:r.call(n,i.key));Dr(e);var s=$s.get(t),l=s.host;e.stats.domain=l;var c=Be.V3.encodeRequest(a,{...e.header,"X-WX-TARGET-SERVICE":"HTTP","X-WX-HTTP-HOST":l,"X-WX-HTTP-PATH":e.path},e.method||"GET",e.data,e.stats);e.stats.requestStartTs=Date.now(),e.stats.callid=c.callId;var d=new Promise(((r,n)=>{try{te()._requestSkipCheckDomain({url:`https://${l}/__wx__/call?token=${i.token}&devtools_ignore=true`,method:"POST",header:{"X-WX-EV":3,"Content-Type":"application/octet-stream"},data:c.data.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,enableQuic:!0,timeout:e.timeout,success:o=>{if(e.stats||(e.stats={}),e.stats.requestSuccessTs=Date.now(),e.stats.profile=o.profile,e.stats.httpRequest=Date.now()-e.stats.requestStartTs,o.statusCode&&200!==o.statusCode){var s=Ms(o.data);n(new Ls(`${Ds}: fail invalid status code ${s}, status code: ${o.statusCode}, callid: ${e.stats.callid}`,o.statusCode))}else{try{Fs(e,o.header,o.data)}catch(e){return void n(e)}var{header:l,body:u,statusCode:d}=Be.V3.decodeResponse(a,new Uint8Array(o.data),e.stats);try{Fs(e,l,u)}catch(o){return 85104!==o.code||e.isRetry?void n(o):void i.invalidate().then((()=>{t.call({...e,isRetry:!0}).then(r).catch(n)})).catch(n)}var p=function(e,t,r){var n;return n="json"!==e.dataType&&e.dataType||Lr(r)?"text"===e.responseType?"string"==typeof t?t:Oe(t.buffer):"arraybuffer"===e.responseType?"string"==typeof t?xe(t):t.buffer:t:Ee("string"==typeof t?t:Oe(t.buffer)),n}(e,u,d);or(Ds,e,"v3"),r({data:p,statusCode:d,header:l,callID:c.callId,errMsg:`${Ds}:ok`})}},fail:n})}catch(e){n(e)}}));return d=function(e,t,r,n,o){var i;return null===(i=e.followRedirect)||void 0===i||i?function e(i,a){return new Promise(((s,l)=>{a.then((a=>{var u;if(Lr(a.statusCode)){var c=null!==(u=kr.get(t))&&void 0!==u?u:0;if(c>=5)l("reach the max redirect count");else{kr.set(t,c+1);var d="";for(var p in a.header)"location"===p.toLowerCase()&&(d=a.header[p]);if(d)if(d.startsWith("/")){var f=V(i);i.path=d,e(f,r(i)).then(s).catch(l)}else te(n.identifiers).request({url:d,method:i.method,header:i.header,data:i.data,dataType:i.dataType,responseType:i.responseType,timeout:i.timeout,success:e=>{s({...e,errMsg:`${o}:ok`})},fail:e=>{l(e.errMsg.replace(/^request/,o))}});else s(a)}}else s(a)})).catch(l)}))}(e,t):t}(e,d,t.call.bind(t),s.context,Ds),Ar(d,(()=>({url:`gateway.call${e.path}`,method:e.method,headers:e.header,reqBody:ar(e.data),timestampMs:o}))),yield d}))()}}function Ms(e){if(e instanceof ArrayBuffer)try{return Oe(e)}catch(e){}return e}function Fs(e,t,r){if(t["x-wx-system-error"]){var n=+t["x-wx-system-error"];throw r=Ms(r),new Ls(`${Ds}: fail wx system error ${r}, code: ${n}, callid: ${e.stats.callid}`,n)}if(t["x-wx-server-timing"]){var o=(t["x-wx-server-timing"]||"").split(",");o.length>=2&&(e.stats.serverStartTs=Number(o[0]),e.stats.serverEndTs=Number(o[1]))}if(t["x-envoy-upstream-service-time"]){var i=+t["x-envoy-upstream-service-time"];isNaN(i)||(e.stats.upstreamCost=i)}if(t["x-wx-mesh-upstream-service-time"]){var a=t["x-wx-mesh-upstream-service-time"].split(",");a.length>=2&&(e.stats.meshStartTs=Number(a[0]),e.stats.meshEndTs=Number(a[1]))}}function js(e){return{Gateway:{initRequired:!1,fn:Bs(e)}}}var Us="services",$s=new WeakMap;function Ws(e){e.registerService(function(e){var t={name:Us,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get appid(){return e.instanceOptions.appid},appConfig:{}};return{name:Us,context:t,getAPIs:js.bind(null,t)}}(e),"services")}function qs(e,t){e.fail&&e.fail(t),e.complete&&e.complete(t),e.fail=void 0,e.complete=void 0}var Hs=function(){var e=s()((function*(e){try{if(!e.appid)throw new Error("missing appid");var t={appid:e.appid,data:e.reqData},r=(yield new Promise(((r,n)=>te().wx.request({url:`${e.url||"https://servicewechat.com/wxa-qbase/jsoperatewxdata"}`,method:"POST",data:t,success:r,fail:n})))).data;0===r.base_resp.ret?function(e,t){e.success&&e.success(t),e.complete&&e.complete(t),e.success=void 0,e.complete=void 0}(e,{data:JSON.parse(r.data),rawData:r.data}):qs(e,{errMsg:`operateWXData:fail base_resp.ret ${r.base_resp.ret}`})}catch(t){qs(e,t)}}));return function(t){return e.apply(this,arguments)}}(),Gs={_operateWXData:Hs,invokeOperateWXData:Hs};function Qs(e){return{}}var zs="app";var Ks={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0};const Ys={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4,call_container_max_req_data_size:5242880,call_container_use_private_http:0};var Vs=function(e){return e[e.AutoRecording=1]="AutoRecording",e[e.SdkRecording=2]="SdkRecording",e}(Vs||{});function Js(){var e,t,r,n,o,i,a,s,l;return(null==kt||null===(e=kt.appContactInfo)||void 0===e||null===(t=e.stablePassThroughInfo)||void 0===t||null===(r=t.wxob_meta_data)||void 0===r?void 0:r.wxob_mode)===Vs.SdkRecording||(null==kt||null===(n=kt.appContactInfo)||void 0===n||null===(o=n.wxob_meta_data)||void 0===o?void 0:o.wxob_mode)===Vs.SdkRecording||void 0!==(null===(i=kt.appContactInfo)||void 0===i||null===(a=i.passThroughInfo)||void 0===a||null===(s=a.wxa_mgr)||void 0===s||null===(l=s.mgr_list)||void 0===l?void 0:l.find((e=>929===e.id&&1===e.value)))}function Xs(){var e,t,r;if(null!=kt&&null!==(e=kt.appContactInfo)&&void 0!==e&&null!==(t=e.stablePassThroughInfo)&&void 0!==t&&t.wxob_meta_data){var n,o,i=null==kt||null===(n=kt.appContactInfo)||void 0===n||null===(o=n.stablePassThroughInfo)||void 0===o?void 0:o.wxob_meta_data;return{isWhitelistMaskMode:i.is_whitelist_mask_mode,proportion:i.proportion,encrypt:i.encrypt,cloudServiceProvider:i.cloud_service_provider,minVersion:i.min_available_sdk_version,versionBlackList:i.sdk_version_black_list}}if(void 0!==(null==kt||null===(r=kt.appContactInfo)||void 0===r?void 0:r.wxob_meta_data)){var a,s=null==kt||null===(a=kt.appContactInfo)||void 0===a?void 0:a.wxob_meta_data;return{isWhitelistMaskMode:s.is_whitelist_mask_mode,proportion:s.proportion,encrypt:s.encrypt,cloudServiceProvider:s.cloud_service_provider,minVersion:s.min_available_sdk_version,versionBlackList:s.sdk_version_black_list}}}function Zs(){return"xxxxx-xxxx-xxxx-xxxx-xxxxx".replace(/[xy]/g,(e=>{var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function el(){var e=kt.system;if(!e||"ios"!==kt.platform)return!0;var[t,r]=e.split(" ");return"ios"!==t.toLowerCase()||function(e,t){for(var r=e.split(".").map(Number),n=t.split(".").map(Number),o=0;o<r.length;++o){if(n.length===o)return 1;if(r[o]!==n[o])return r[o]>n[o]?1:-1}return r.length!==n.length?-1:0}(r,"14.5")>=0}function tl(){return(tl=s()((function*(){var e,t,r,n,o,i,a={record:{uuid:Zs(),event:JSON.stringify([{type:102}]),path:"",projectKey:null!==(e=null===(t=kt.accountInfo)||void 0===t?void 0:t.appId)&&void 0!==e?e:"undefined_app_id",sdkVersion:null!==(r=kt.sdkVersion)&&void 0!==r?r:"",timestamp:Date.now(),webviewId:0}};yield Le("https://servicewechat.com/ob/wxob",{method:"POST",headers:{"Content-Type":"application/json","x-wx-ob-env":"appservice","x-wx-ob-sdkversion":null!==(n=kt.sdkVersion)&&void 0!==n?n:"","x-wx-ob-pack-version":"0","x-wx-ob-project-key":null!==(o=null===(i=kt.accountInfo)||void 0===i?void 0:i.appId)&&void 0!==o?o:"undefined_app_id"},body:JSON.stringify(a)})}))).apply(this,arguments)}function rl(e,t){return new Promise(((r,n)=>{(t||te()).invokeOperateWXData({...e,success:r,fail:n})}))}function nl(e){return ol.apply(this,arguments)}function ol(){return(ol=s()((function*(e){try{var t,r=yield rl({apiName:"webapi_getcloudstoragefederationtoken",reqData:{project_key:null===(t=kt.accountInfo)||void 0===t?void 0:t.appId,object_prefix:`${e}*`}});if(void 0===r.data)throw new Error("no cos info");if(!il(r.data))throw new Error("invalid cos info");if(r.data.expire_timestamp){var n=1e3*r.data.expire_timestamp-Date.now()-3e5;setTimeout(s()((function*(){null==le||le.log("[wxobs as] reset cosInfo");var t=yield nl(e);te().resetCosInfo({...t,prefix:e})})),n>0?n:1e3)}return r.data}catch(e){throw new Error(` COS : ${e.message}`)}}))).apply(this,arguments)}function il(e){return!(sl(e.bucket)||sl(e.region)||sl(e.secretid)||sl(e.secretkey)||sl(e.token))&&(!al(e.bucket)&&!al(e.region))}function al(e){return e.includes(".")||e.includes("?")||e.includes("/")||e.includes("#")}function sl(e){return!e||""===e.trim()}var ll=null,ul={autoStart:!0,isWhitelistMaskMode:!0,shouldCapturePage:()=>!0};class cl{constructor(e){var t,r,n,o;if(this.attrs={},this.encrypt=void 0,this.cloudServiceProvider=void 0,this.param=void 0,this.prefix=void 0,this.setupState=void 0,this.getUuid=()=>{var e;return null!==(e=this.param.uuid)&&void 0!==e?e:null},this.setAttrs=e=>{if(e){for(var t of Object.keys(e)){var r=e[t];"string"==typeof t&&"string"==typeof r?this.attrs[t]=r:console.warn("[wxobs appservice]the type of attributes must be string")}this.uploadAttrs()}},this.uploadAttrs=()=>{Object.keys(this.attrs).length>0&&te().emitCustomAttrEvent({...this.attrs})},this.param=e,this.cloudServiceProvider=e.cloudServiceProvider,this.encrypt=e.encrypt,null!==(t=Xs())&&void 0!==t&&t.versionBlackList&&kt.sdkVersion&&Xs().versionBlackList.indexOf(kt.sdkVersion)>=0)throw new Error("[wxobs as] this sdk version is blocked");if(!el())throw function(){tl.apply(this,arguments)}(),new Error("[wxobs as] this system version is not supported");this.prefix=`${(r=new Date).getFullYear().toString()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}${r.getHours().toString().padStart(2,"0")}${r.getMinutes().toString().padStart(2,"0")}`,this.param.uuid=`${this.prefix}/${Zs()}`,this.setupState=new Promise(((e,t)=>{n=e,o=t})),this.setup().then((()=>n())).catch((e=>o(e)))}setup(){var e=this;return s()((function*(){var t,r,n,o=yield nl(e.prefix),i={...ul,...e.param};te().setupUserBehaviorAnalytics({projectId:null!==(t=null===(r=kt.accountInfo)||void 0===r?void 0:r.appId)&&void 0!==t?t:"undefined_app_id",encrypt:e.encrypt,cloudServiceProvider:e.cloudServiceProvider,cosInfo:{...o,prefix:e.prefix},...i,dataAttrs:null===(n=e.param.captureDataAttrs)||void 0===n||n}),console.log("[wxobs appservice] obs is setup"),e.setAttrs(e.param.attrs)}))()}}function dl(){return(dl=s()((function*(e){var t={};if(!Js())return t.errMsg="sdk recording mode is not supported",t;if(ll)return t.errMsg="recording is already setup",t;try{var r,n=Xs();return console.log("[wxobs as] sdk record"),ll=new cl({...e,encrypt:null==n?void 0:n.encrypt,cloudServiceProvider:null==n?void 0:n.cloudServiceProvider}),yield ll.setupState,t.sessionId=null!==(r=ll.getUuid())&&void 0!==r?r:void 0,t}catch(e){return t.errMsg=`setup failed: ${e.message}`,t}}))).apply(this,arguments)}try{var pl;null===(pl=x)||void 0===pl||pl.onInitReady((()=>{try{kt.onReady((()=>{if((null==kt||null===(e=kt.appContactInfo)||void 0===e||null===(t=e.wxob_meta_data)||void 0===t?void 0:t.wxob_mode)===Vs.AutoRecording||(null==kt||null===(r=kt.appContactInfo)||void 0===r||null===(n=r.stablePassThroughInfo)||void 0===n||null===(o=n.wxob_meta_data)||void 0===o?void 0:o.wxob_mode)===Vs.AutoRecording){var e,t,r,n,o,i=Xs();if(console.log("[wxobs appservice]auto recording mode",i),void 0!==i)if(ll)console.warn("[wxobs appservice]already setup");else try{var{proportion:a,isWhitelistMaskMode:s,encrypt:l,cloudServiceProvider:u}=i;a>=100*Math.random()&&(console.log("[wxobs as] auto record"),ll=new cl({isWhitelistMaskMode:s,encrypt:l,cloudServiceProvider:u}))}catch(e){console.error("[wxobs appservice]setup failed: ",e)}else console.warn("[wxobs appservice]can not access recording param")}}))}catch(e){null==le||le.warn(e)}}))}catch(e){}const fl={setup:function(e){if(Js())if(ll)console.warn("[wxobs appservice] already setup");else try{var t=Xs();return console.log("[wxobs as] sdk record"),(ll=new cl({...e,encrypt:null==t?void 0:t.encrypt,cloudServiceProvider:null==t?void 0:t.cloudServiceProvider})).getUuid()}catch(e){return console.error("[wxobs appservice] setup failed: ",e),null}else console.warn("[wxobs appservice]sdk recording mode is not supported")},asyncSetup:function(e){return dl.apply(this,arguments)},setAttrs:function(e){ll?ll.setAttrs(e):console.warn("[wxobs appservice] not setup")}};var hl=(e={})=>{var{sdk:t}=e,r=e.identifiers||{};return t&&re(r,t),new gl(r,!1)},_l=(e={})=>hl(e).exportAPI;class gl{constructor(e,t){var r=this;this.inited=!1,this.isInstance=void 0,this.services={},this.apiServiceMap={},this.plugins=[],this.meta=void 0,this.config=void 0,this.identifiers=void 0,this.debug=!1,this.request=void 0,this.exportAPI=void 0,this.appConfig=void 0,this.apiPermissions=void 0,this.runtimeInfo=void 0,this.serviceEndpoint=void 0,this.authStorage=void 0,this.testSpeed=s()((function*(){var e,t,n=+new Date,o=n;return je((t=(e={cloud:r,apiName:"tcbapi_testspeed",serializedReqData:null}).cloud,{apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:{env:e.env},qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t}),{fireOnIdle:!0,onFire:()=>{n=+new Date,o=n}}).then((e=>{Yt({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:n,tunnelEndTime:+new Date,tunnelStartTime:o,tunnelTimeNoCSNetCost:e.data.baseresponse.stat.qbase_cost_time})})).catch((e=>{0}))})),this.identifiers=e,this.isInstance=t,this.runtimeInfo=hn(),this.serviceEndpoint=new Ct(e),this.request=Ue({cloud:this});var n,o=this;this.exportAPI={init:this.init.bind(this),obs:fl},this.isInstance||(this.exportAPI.Cloud=function(t){return new vl(e,o,t).exportAPI}),Rr(n=this),Cn(n),Cs(n),Rs(n),dn(n),Ws(n),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:ml()},this.appConfig={...Ys},this.apiPermissions={};try{kt.onReady((()=>{setTimeout((()=>{(()=>{if(!Ft)try{var e=te();e.wx.onAppShow&&e.wx.onAppShow((()=>{$t=Date.now()})),e.wx.getNetworkType({success:e=>{Wt=e.networkType},complete:()=>{Ft=!0,Kt()}}),e.wx.onNetworkStatusChange((e=>{Ft||(Ft=!0,Kt()),Wt=e.networkType}))}catch(e){}})()}),2e3),Pr()}))}catch(e){}}getMetaData(){if(!this.meta.sdk_version){var e=te(this.identifiers);if(e){var t=e.wx;t&&t.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version=`wx-miniprogram-sdk/${t.version.version} (${Date.parse(`${t.version.updateTime} GMT+0800`)} platform/${this.runtimeInfo.platform}})`:this.meta.sdk_version=`wx-web-sdk/undefined (${Date.parse("undefined GMT+0800")})`)}kt.onReady((()=>{var e;this.meta.filter_user_info="singlePage"===(null===(e=kt.appLaunchInfo)||void 0===e?void 0:e.mode)}))}return this.meta}getConfig(){return this.config}getEnvForService(e){if(this.isInstance)return this.instanceOptions.resourceEnv;var t=this.config;if(t.env)switch(d(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}}checkAPIPermission(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]}init(e={}){this.inited=!0,this.initConfig(e);try{Ae(500,this.identifiers)}catch(e){null==le||le.log("privateGetBackgroundFetchData error",e)}return Promise.all([this.sendInitRequest().then((()=>{Math.random()<.1&&this.testSpeed()}))]).then((()=>{}))}initConfig(e){this.config=JSON.parse(JSON.stringify(e)),this.plugins=(e.plugins||[]).map((e=>$s.get(e))).filter((e=>!!e)),this.config.database?this.config.database=c(this.config.database,ml()):this.config.database=ml(),"sdk"===this.runtimeInfo.platform&&oe(Gs)}sendInitRequest(){var e="string"==typeof this.config.env?this.config.env:void 0,t=JSON.stringify({trace_user:!1!==this.config.traceUser,env:e,region:this.config.region}),r=+new Date,n=r;return this.request({...this.config,apiName:"tcbapi_init",serializedReqData:t,env:e}).then((e=>{var t=+new Date,o=e.data;this.appConfig={...this.appConfig,...o.config};for(var i=o.tcb_api_list||[],a=0,s=i.length;a<s;a++)this.apiPermissions[i[a].apiname]=i[a].status;Yt({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:r,tunnelEndTime:t,tunnelStartTime:n,tunnelTimeNoCSNetCost:o.baseresponse.stat.qbase_cost_time})})).catch((e=>{console.error("cloud init error: ",e)}))}registerService(e,t){this.services[e.name]=e;var r=e.getAPIs();for(var n in r)if(this.apiServiceMap[n]=e.name,"function"==typeof r[n])this.registerFunction(n,!0,r[n],t);else{var{initRequired:o,fn:i}=r[n];this.registerFunction(n,o,i,t)}}registerFunction(e,t,r,n){var o=this,i=this.exportAPI;n&&(this.exportAPI[n]={},i=this.exportAPI[n]),i[e]=t?function(){if(!o.inited)throw new I({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n wx.cloud.init()  API"});if(!o.checkAPIPermission(e))throw new I({errCode:E.SDK_API_PERMISSION_DENIED,errMsg:E[E.SDK_API_PERMISSION_DENIED]});return r.apply(o,arguments)}:r}toJSON(){}}class vl extends gl{constructor(e,t,r){if(super(e,!0),this.defaultInstance=void 0,this.instanceOptions=void 0,this.webRequest=void 0,this._webCurrentRefreshTokenPromise=void 0,"web"===this.runtimeInfo.env){if(!r.identityless&&!r.appid)throw new Error("appid must be provided");if(!r.resourceAppid)throw new Error("resourceAppid must be provided")}if(!r.resourceEnv)throw new Error("resourceEnv must be provided");if(r.config||(r.config={}),this.defaultInstance=t,this.instanceOptions=JSON.parse(JSON.stringify(r)),this.meta=t.meta,this.apiPermissions=t.apiPermissions,this.instanceOptions.config.database=c(ml(),this.instanceOptions.config.database||{}),"web"===this.runtimeInfo.env){if(this.exportAPI.init=this.webInit.bind(this),this.webRequest=(0,pn.getBoundAuthRequest)(this),this.registerService((0,pn.createWebService)(this)),!this.instanceOptions.identityless&&(this.authStorage=this.defaultInstance.authStorage,!this.authStorage))throw new Error("authStorage not found")}else"sdk"===this.runtimeInfo.env?(this.exportAPI.init=this.webInit.bind(this),this.registerService((o={name:zs,identifiers:(n=this).identifiers,request:n.request,isInstance:n.isInstance,get debug(){return n.debug},get env(){return n.getEnvForService(zs)},cloud:n,appConfig:{}},{name:zs,context:o,getAPIs:Qs.bind(null,o)})),this.instanceOptions.identityless=!0):this.exportAPI.init=this.miniprogramInit.bind(this);var n,o;this.instanceOptions.resourceAppid&&(this.exportAPI.refreshAuth=this.refreshAuth.bind(this))}miniprogramInit(){var e=()=>super.init,t=this;return s()((function*(){if(!t.inited){if(t.instanceOptions.resourceAppid){var r=(yield t.refreshAuth()).data.env_auth_info;return 0===r.errCode?(e().call(t),{errCode:r.errCode,errMsg:r.errMsg,expireTime:1e3*r.expire_time}):{errCode:r.errCode,errMsg:r.errMsg}}e().call(t)}}))()}webInit(){var e=()=>super.init,t=this;return s()((function*(){if(!t.inited){if(!t.instanceOptions.identityless){var r=(yield t.refreshAuth()).data.env_auth_info;return 0===r.errCode?(t.sendInitRequest().then((()=>{t.testSpeed()})),e().call(t),{errCode:r.errCode,errMsg:r.errMsg,expireTime:1e3*r.expire_time}):{errCode:r.errCode,errMsg:r.errMsg}}t.inited=!0}}))()}webRefreshToken(){var e=this;return s()((function*(){return e._webCurrentRefreshTokenPromise||(e._webCurrentRefreshTokenPromise=new Promise(function(){var t=s()((function*(t,r){try{var n=(yield e.webRequest({url:"/refresh_token",method:"POST",json:{appid:e.instanceOptions.appid,refresh_token:e.authStorage.getItem("refreshToken")}})).data;e.authStorage.setItem("appid",n.access_token),t()}catch(e){r(e)}finally{e._webCurrentRefreshTokenPromise=void 0}}));return function(e,r){return t.apply(this,arguments)}}())),e._webCurrentRefreshTokenPromise}))()}refreshAuth(){var e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,r=t,n=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return n.then((e=>{var n=+new Date;Yt({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:n,tunnelStartTime:r})})),n}}function ml(){return{realtime:{maxReconnect:Ks.REALTIME_DB_MAX_RECONNECT,reconnectInterval:Ks.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:Ks.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}var yl=Symbol("CDN");class bl{constructor(e){this.symbol=yl,this.options=void 0,this.options=e}}function wl(e,t){return new Promise(((r,n)=>{(t||te()).uploadToCommonCDN({...e,success:r,fail:n})}))}var Al=function(){var e=s()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");var t=new WeakMap,r=[];e.data&&JSON.stringify(e.data,((n,o)=>o&&o.symbol===yl?void r.push(new Promise(((r,n)=>{var i,a={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},s=o;if("Object"===(i=s.options,Object.prototype.toString.call(i).slice(8,-1))){if(!s.options.filePath)throw new Error("filePath must be provided");a.filePath=s.options.filePath}else a.fileData=s.options;r(wl(a,e.sdk).then((e=>{t.set(o,e.fileUrl)})))}))):o)),yield Promise.all(r);var n,o,i,a=JSON.stringify(e.data,((e,r)=>r&&r.symbol===yl&&t.has(r)?t.get(r):r)),{data:s}=yield rl({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:a,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:1}},e.sdk);try{var l=s;if(n=l.request_id,0===l.errcode)o=JSON.parse(l.data);else{var u=`invokeService:fail ${l.errcode} ${l.errmsg} (requestId: ${n})`;(i=new Error(u)).errCode=l.errcode,i.errMsg=u,i.requestId=n}}catch(p){var c=`invokeService:fail inner protocol parse failed (requestId: ${n||"empty"})`;(i=new Error(c)).errCode=-1,i.errMsg=c,i.requestId=n}if(i)throw i;return{errMsg:"invokeService:ok",data:o,requestId:n}}catch(e){var d="invokeService:fail ";if(e&&e.errMsg&&e.err_code){d+=e.errMsg;var p=new Error(d+`(err_code ${e.err_code})`);throw p.errCode=e.err_code,p}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}}));return function(t){return e.apply(this,arguments)}}(),El=function(e){return e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp",e}({}),Il=function(e){return e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout",e}({}),Sl=function(e){return e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync",e}({}),Cl={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},Tl="exceed max timeout retry",Ol="empty call result",xl="exceed max poll retry",Nl="invokeService",Rl=2e4,Pl=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Dl=e=>e.join("->"),Ll=function(){var e=s()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");var t=new WeakMap,r=[];e.data&&JSON.stringify(e.data,((n,o)=>o&&o.symbol===yl?void r.push(new Promise(((r,n)=>{var i,a={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},s=o;if("Object"===(i=s.options,Object.prototype.toString.call(i).slice(8,-1))){if(!s.options.filePath)throw new Error("filePath must be provided");a.filePath=s.options.filePath}else a.fileData=s.options;r(wl(a,e.sdk).then((e=>{t.set(o,e.fileUrl)})))}))):o)),yield Promise.all(r);var n=JSON.stringify(e.data,((e,r)=>r&&r.symbol===yl&&t.has(r)?t.get(r):r)),o=`${Math.random()}_${Date.now()}`;if(e.async){var i={service_id:e.service,api_name:e.api,data:n,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:o,scene:El.CALL,retry_reason:Il.None,req_type:Sl.LongAsync},a=(yield rl({apiName:"webapi_servicemarket_jsapi_comm",reqData:i},e.sdk)).data;if(a.scene===El.FinalResp&&0===a.errcode)return{errMsg:"invokeService:ok",requestId:a.request_id};var l=C({errCode:Cl.SM_SYSTEM_ERROR,errMsg:`requestID ${a.request_id}, error message ${a.errmsg||"unknown"} (callid ${o})`},Nl);throw l.requestID=a.request_id,l}var{result:u,requestID:c}=yield function(e,t,r){return f.apply(this,arguments)}(e,n,o);return{errMsg:"invokeService:ok",data:u,requestId:c}}catch(e){var d="invokeService:fail ";if(e&&e.errMsg&&e.err_code){d+=e.errMsg;var p=new Error(d+`(err_code ${e.err_code})`);throw p.errCode=e.err_code,p}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}function f(){return f=s()((function*(e,t,r){return new Promise(((n,o)=>{var i=[Pl("start")],{resolve:a,reject:s}=g(i,n,o);h({param:e,data:t,callID:r,scene:El.CALL,retryReason:Il.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:i,resolve:a,reject:s})}))})),f.apply(this,arguments)}function h(e){return _.apply(this,arguments)}function _(){return _=s()((function*(t){var{param:r,data:n,callID:o,scene:i,retryReason:a,tryCount:l,trace:u,systemErrorRetry:c,timeoutErrorRetry:d,resolve:p,reject:f}=t,_={service_id:r.service,api_name:r.api,data:i===El.CALL?n:void 0,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:o,scene:i,retry_reason:a},g=!1,v=!1,m=()=>{clearTimeout(b),v=!0},y=+new Date,b=setTimeout(s()((function*(){if(!(+new Date-y>2e4&&(yield ue(),v))){if(!Mt()&&+new Date-y>60)return u.push(Pl("timeout, exceed max retry gap")),f(C({errCode:Cl.SM_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${o}) (trace: ${Dl(u)})`},Nl));g=!0,t.timeoutErrorRetry>0?(u.push(Pl("timeout, retry")),h({...t,scene:i,retryReason:Il.Timeout,tryCount:l-1,timeoutErrorRetry:d-1})):(u.push(Pl("timeout, abort")),f(C({errCode:Cl.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`${Tl} (callId: ${o}) (trace: ${Dl(u)})`},Nl)))}})),Rl);try{var w=yield rl({apiName:"webapi_servicemarket_jsapi_comm",reqData:_},e.sdk);try{if(g)return;m();var A=w.data;if(!A&&w.rawData)try{A=JSON.parse(w.rawData)}catch(e){}if(!A)return u.push(Pl("empty resp")),f(C({errCode:Cl.SM_EMPTY_CALL_RESULT,errMsg:Ol},Nl));if(A.scene!==El.PreResp){if(A.scene===El.FinalResp){if(0!==A.errcode){var E=C({errCode:Cl.SM_PROVIDER_EXECUTION_ERROR,errMsg:`requestID ${A.request_id}, error message ${A.provider_errmsg||"unknown"} (callid ${o})`},Nl);return E.requestID=A.request_id,f(E)}var I=A.data;try{I=JSON.parse(I)}catch(e){}return p({result:I,requestID:A.request_id})}return u.push(Pl("unexpected scene")),f(C({errCode:Cl.SM_UNKNOWN_SCENE,errMsg:`unknown scene ${A.scene} (callId: ${o}) (trace: ${Dl(u)})`},Nl))}if(!(l>=0))return u.push(Pl("too many polls, abort")),f(C({errCode:Cl.SM_EXCEED_MAX_POLL_RETRY,errMsg:`${xl} (callId: ${o}) (trace: ${Dl(u)})`},Nl));u.push(Pl("normal poll")),h({...t,scene:El.POLL,retryReason:Il.None,tryCount:l-1})}catch(e){f(C({errCode:Cl.SM_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${o})`},Nl))}}catch(e){if(g)return;m();var S=e instanceof Error?e:JSON.stringify(e);e&&e.operateWXDataFail&&c>0?(u.push(Pl(`system error (${S}), retry`)),h({...t,scene:i,retryReason:Il.SysErr,tryCount:l-1,systemErrorRetry:c-1})):(u.push(Pl(`system error (${S}), abort`)),f(C(`${S} (callId: ${o}) (trace: ${Dl(u)})`,Nl)))}})),_.apply(this,arguments)}function g(e,t,r){var n=t=>{e.push(Pl(`app ${t}`))};ge(n);return{resolve:e=>{ve(n),t(e)},reject:e=>{ve(n),r(e)}}}}));return function(t){return e.apply(this,arguments)}}();function Bl(e){return kl.apply(this,arguments)}function kl(){return(kl=s()((function*(e){var t=(yield rl({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:e.requestId}},e.sdk)).data;if(0===t.errcode)return t.provider_errmsg?{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:t.status,providerErrMsg:t.provider_errmsg,requestId:t.request_id}:{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(t.data),status:t.status,requestId:t.request_id};var r=new Error(`getAsyncResult:fail requestID ${t.request_id}, error message ${t.errmsg||"unknown"}`);throw r.errCode=t.errcode,r.errMsg=t.errmsg,r}))).apply(this,arguments)}var Ml="invokeService",Fl="getAsyncResult",jl=e=>{(Mt()&&!e.async?Al(e):Ll(e)).then((t=>{q(Ml,e,t)})).catch((t=>{H(Ml,e,t)}))},Ul=e=>{Bl(e).then((t=>{q(Fl,e,t)})).catch((t=>{H(Fl,e,t)}))};function $l(e={}){var{sdk:t}=e;return{invokeService:e=>(e=>G(e)?jl(e):Mt()&&!e.async?Al(e):Ll(e))({...e,sdk:t}),getAsyncResult:e=>(e=>G(e)?Ul(e):Bl(e))({...e,sdk:t}),CDN:bl}}})(),R=n})();var P=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var n=r(1),o=r(3),i=r(5),a=r(6),s=r(7),l=r(8),u=r(9),c=r(15),d=r(12),p=r(17),f=r(18),h=r(19),_=r(16),g=r(10),v=r(20),m=r(14),y=r(4),b=r(13),w=r(21);t.FreeTmpl=w,t.precompileTemplate=w.precompiler?w.precompiler.compile:null,t.precompiler=w.precompiler?w.precompiler:null,t.HtmlLLParser=w.htmlParser?w.htmlParser:null,t.LLParser=n,t.dataPath=s,t.dataUtils=i,t.Event=a,t.Element=u,t.TextNode=d,t.NativeNode=p,t.VirtualNode=f,t.ShadowRoot=h,t.Behavior=l,t.Component=c,t.Observer=g,t.DataGroup=_,t.ElementIterator=v,t.FakeDomElement=m,t.registerBehavior=l.create,t.registerElement=c.register,t.createElement=c.create,t.createTextNode=d.create,t.createVirtualNode=f.create,t.appendChild=u.appendChild,t.insertBefore=u.insertBefore,t.removeChild=u.removeChild,t.replaceChild=u.replaceChild,t.addListenerToElement=a.addListenerToElement,t.removeListenerFromElement=a.removeListenerFromElement,t.triggerEvent=a.triggerEvent,t.safeCallback=o.safeCallback,t.addGlobalErrorListener=o.addGlobalErrorListener,t.removeGlobalErrorListener=o.removeGlobalErrorListener,t.addGlobalWarningListener=o.addGlobalWarningListener,t.removeGlobalWarningListener=o.removeGlobalWarningListener,t.globalOptions=y,t.globalState=b,c._setDefaultTemplateEngine(w),(t.updateDefaultComponent=function(){delete c._list[""],c.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})})();var A=function(e){var t="";if(e instanceof P.Element&&(e.id&&(t+=' id="'+e.id+'"'),e.slot&&(t+=' slot="'+e.slot+'"'),e.__slotName&&(t+=' name="'+e.__slotName+'"'),e.classList&&(t+=' class="'+e.class+'"'),e.$$&&e.$$.getAttribute("style")&&(t+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof P.VirtualNode)return t;if(e instanceof P.Component)return c.listPublicProperties(e).forEach((function(r){t+=" "+r+"="+JSON.stringify(e[r])})),t;for(var r=e.attributes,n=0;n<r.length;n++)t+=" "+r[n].name+'="'+r[n].value+'"';return t},E=t.dumpElementToString=function(e,t,r){var n=null;y.hasDOMBackend&&(n=window);var o=0,i="";for(o=r=r||0;o;o--)i+="  ";var a="";if(e instanceof P.Element)a+=i+"<"+(e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+A(e)+">",a+=e instanceof P.VirtualNode?" [Exp-Virtual]":e instanceof P.NativeNode?" [Exp-Native]":" [Exp-Component]",a+="\n"+E(t?e.__wxSlotChildren:e.childNodes,t,r+1);else if(e instanceof P.TextNode)a+=i+e.textContent+" [Exp-Text]\n";else if(n&&n.HTMLElement&&e instanceof n.HTMLElement)a+=i+"<"+e.tagName.toLowerCase()+A(e)+"> [DOM-Element]",a+="\n"+E(t&&e.__wxSlotChildren||e.childNodes,t,r+1);else if(n&&n.Text&&e instanceof n.Text)a+=i+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(o=0;o<e.length;o++)a+=E(e[o],t,r);else a=i+"[unknown node]\n";return a};t.dumpElement=function(e,t){console.log(E(e,t))}},function(e,t,r){var n=null,o=function(){},i=o.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return n.llparser_create_descriptor(e,1)},s=function(e,t){var r=n.llparser_create_descriptor(e,0),o=!1;"^"===t[0]&&(o=!0);for(var i=o?1:0;i<t.length;i++){var a=t.charCodeAt(i);if("-"===t[i+1]){var s=t.charCodeAt(i+2);a<=s?(n.llparser_descriptor_add_range(r,a,s),i+=2):n.llparser_descriptor_add_char(r,a)}else n.llparser_descriptor_add_char(r,a)}return o&&n.llparser_descriptor_revert(r),r};o.create=function(e,t,i){n||(n=r(2));var l=new o;i=i||16384;var u=l._llp=n.llparser_create(i,128,128),c={},d={},p="";for(p in c.ALL=n.llparser_create_descriptor(u,0),n.llparser_descriptor_set_all(c.ALL),c.NULL=n.llparser_create_descriptor(u,0),n.llparser_descriptor_set_nil(c.NULL),e)c[p]=a(u);for(p in e)for(var f=e[p],h=c[p],_=0;_<f.length;_++){for(var g=f[_].id,v=f[_].states,m=[],y=0;y<v.length;y++){var b=v[y];c[b]||(c[b]=s(u,b)),m.push(c[b])}var w=0;"_raw"===g?w=1:"_jump"===g?w=65536:"_blank"===g&&(w=65537);var A=n.llparser_add_rule(u,w,h,m.length,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7]);0===w&&(d[A]=t[g])}return n.llparser_prepare(u),l._inputPtr=n.llparser_get_input_buffer(u),l._resultPtr=n.llparser_get_result(u),l._stateIdMap=c,l._ruleCbMap=d,l._charCountLimit=i,l};o.prototype.parse=function(e,t){var r=Date.now();(function(e,t,r,n){for(var o=n>e.length?e.length:n,i=0;i<o;i++)t[r+i]=e.charCodeAt(i);t[r+o]=0})(t,new Uint16Array(n.memory.buffer),this._inputPtr>>1,this._charCountLimit),i.copyIn=i.copyIn+Date.now()-r,r=Date.now();var o=n.llparser_parse(this._llp,this._stateIdMap[e]);if(i.parse=i.parse+Date.now()-r,r=Date.now(),o)throw new Error("Parsing failed at character position "+(o-1)+' near "'+t.slice(o-20,o)+'"');var a=function(e,t,r,n,o){for(var i=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,l=o.pos,u=!1,c=!1,d=!1;;){var p=t[l],f=t[l+1];if(f<0?(c=!0,f=-f-1):c=!1,p>=0){d=!0;var h=r.slice(p,f);s.c.push(h),u=c}else{if(-1===p&&0===f)break;d=!1;var _=-p,g=f,v={i:s.c.length-(u?1:0),r:_,n:c,cc:g,c:[]};if(u){var m=s.c.length-1,y=s.c[m];v.c.push(y),s.c[m]=v}else s.c.push(v);i.push(s),s=v,u=!1}if(!d||!u)for(;s.c.length===s.cc;){u=s.n;var b=i.pop();if(b.c[s.i]=n[s.r].call(e,s.c),s=b,u)break}l+=2}return a.c[0]}(this,new Int32Array(n.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return i.constructOut=i.constructOut+Date.now()-r,a},o.prototype.destroy=function(){n.llparser_destroy(this._llp)},e.exports=o},function(e,t){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";function n(e,t,r){return v.llparser_create(e,t,r)}function o(e){v.llparser_destroy(e)}function i(e,t){return v.llparser_create_descriptor(e,t)}function a(e){v.llparser_descriptor_set_all(e)}function s(e){v.llparser_descriptor_set_nil(e)}function l(e,t){v.llparser_descriptor_add_char(e,t)}function u(e,t,r){v.llparser_descriptor_add_range(e,t,r)}function c(e){v.llparser_descriptor_revert(e)}function d(e,t,r,n,o,i,a,s,l,u,c,d){return v.llparser_add_rule(e,t,r,n,o,i,a,s,l,u,c,d)}function p(e){v.llparser_prepare(e)}function f(e,t){return v.llparser_parse(e,t)}function h(e){return v.llparser_get_input_buffer(e)}function _(e){return v.llparser_get_result(e)}function g(){v.wasm_main()}r.r(t),r.d(t,"llparser_create",(function(){return n})),r.d(t,"llparser_destroy",(function(){return o})),r.d(t,"llparser_create_descriptor",(function(){return i})),r.d(t,"llparser_descriptor_set_all",(function(){return a})),r.d(t,"llparser_descriptor_set_nil",(function(){return s})),r.d(t,"llparser_descriptor_add_char",(function(){return l})),r.d(t,"llparser_descriptor_add_range",(function(){return u})),r.d(t,"llparser_descriptor_revert",(function(){return c})),r.d(t,"llparser_add_rule",(function(){return d})),r.d(t,"llparser_prepare",(function(){return p})),r.d(t,"llparser_parse",(function(){return f})),r.d(t,"llparser_get_input_buffer",(function(){return h})),r.d(t,"llparser_get_result",(function(){return _})),r.d(t,"wasm_main",(function(){return g})),r.d(t,"memory",(function(){return m}));var v=r(1),m=v.memory;v.__wbindgen_start()},function(e,t,r){"use strict";r.r(t),r.d(t,"memory",(function(){return i})),r.d(t,"rust_calloc",(function(){return a})),r.d(t,"rust_free",(function(){return s})),r.d(t,"llparser_create",(function(){return l})),r.d(t,"llparser_destroy",(function(){return u})),r.d(t,"llparser_create_descriptor",(function(){return c})),r.d(t,"llparser_descriptor_set_all",(function(){return d})),r.d(t,"llparser_descriptor_set_nil",(function(){return p})),r.d(t,"llparser_descriptor_add_char",(function(){return f})),r.d(t,"llparser_descriptor_add_range",(function(){return h})),r.d(t,"llparser_descriptor_revert",(function(){return _})),r.d(t,"llparser_add_rule",(function(){return g})),r.d(t,"llparser_prepare",(function(){return v})),r.d(t,"llparser_parse",(function(){return m})),r.d(t,"llparser_get_input_buffer",(function(){return y})),r.d(t,"llparser_get_result",(function(){return b})),r.d(t,"wasm_main",(function(){return w})),r.d(t,"__wbindgen_start",(function(){return A}));var n=new ArrayBuffer(1114112),o=function(e,t,r){function n(e){var t=0,r=0,n=0,o=0,i=0,l=0,u=0;r=(t=e+-8|0)+(e=-8&(o=h[e+-4>>2]))|0;e:{t:{r:{n:{o:if(!(1&o)){if(!(3&o))break n;if(e=(o=h[t>>2])+e|0,(0|(t=t-o|0))==h[262246]){if(3!=(3&h[r+4>>2]))break o;return h[262244]=e,h[r+4>>2]=-2&h[r+4>>2],h[t+4>>2]=1|e,void(h[e+t>>2]=e)}o>>>0>=256?s(t):(0|(n=h[t+8>>2]))==(0|(i=h[t+12>>2]))?(l=1048576,u=h[262144]&d(o>>>3),h[l>>2]=u):(h[n+12>>2]=i,h[i+8>>2]=n)}if(2&(o=h[r+4>>2]))h[r+4>>2]=-2&o,h[t+4>>2]=1|e,h[e+t>>2]=e;else{o:{if(h[262247]!=(0|r)){if((0|r)!=h[262246])break o;return h[262246]=t,e=h[262244]+e|0,h[262244]=e,h[t+4>>2]=1|e,void(h[e+t>>2]=e)}if(h[262247]=t,e=h[262245]+e|0,h[262245]=e,h[t+4>>2]=1|e,(0|t)==h[262246]&&(h[262244]=0,h[262246]=0),(r=h[262254])>>>0>=e>>>0)break n;if(!(e=h[262247]))break n;i:if(!((o=h[262245])>>>0<41))for(t=1049e3;;){if((n=h[t>>2])+h[t+4>>2]>>>0>e>>>0&&n>>>0<=e>>>0)break i;if(!(t=h[t+8>>2]))break}if(n=4095,e=h[262252]){for(t=0;t=t+1|0,e=h[e+8>>2];);n=t>>>0>4095?t:4095}if(h[262256]=n,o>>>0<=r>>>0)break n;return void(h[262254]=-1)}if(e=(n=-8&o)+e|0,n>>>0>=256?s(r):(0|(n=h[r+12>>2]))==(0|(r=h[r+8>>2]))?(l=1048576,u=h[262144]&d(o>>>3),h[l>>2]=u):(h[r+12>>2]=n,h[n+8>>2]=r),h[t+4>>2]=1|e,h[e+t>>2]=e,h[262246]==(0|t)){h[262244]=e;break n}}if(e>>>0<256)break r;if(a(t,e),e=h[262256]+-1|0,h[262256]=e,!e){if(e=h[262252])break t;e=4095;break e}}return}return e=1048584+((r=e>>>3)<<3)|0,o=h[262144],r=1<<(31&r),n=h[e+8>>2],o&r||(h[262144]=r|o,n=e),r=n,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,void(h[t+8>>2]=r)}for(t=0;t=t+1|0,e=h[e+8>>2];);e=t>>>0>4095?t:4095}h[262256]=e}function o(e,t,r,n,i){var a;if(b=a=b-48|0,h[a+44>>2]=e,h[a+40>>2]=t,h[a+36>>2]=r,h[a+32>>2]=n,h[a+28>>2]=i,h[h[a+40>>2]>>2]!=h[a+36>>2])for(h[h[a+40>>2]>>2]=h[a+36>>2],h[a+24>>2]=h[h[a+40>>2]+136>>2],h[a+20>>2]=1&(0!=h[a+28>>2]^-1^-1);h[a+24>>2];){for(h[a+20>>2]||(h[a+28>>2]=h[a+24>>2]),h[a+16>>2]=h[h[h[a+24>>2]>>2]+8>>2],1==h[h[a+16>>2]+4>>2]&&o(h[a+44>>2],h[a+16>>2],h[a+36>>2],h[a+32>>2],h[a+28>>2]),h[a+12>>2]=0;!(h[a+12>>2]>=128);)_[h[a+12>>2]+(h[a+16>>2]+8|0)|0]&&(v[h[a+28>>2]>>2]>=v[h[a+32>>2]+(h[a+12>>2]<<2)>>2]&&h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]||(h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]=h[h[a+28>>2]>>2])),h[a+12>>2]=h[a+12>>2]+1;h[a+24>>2]=h[h[a+24>>2]+4>>2]}b=a+48|0}function i(e,t,r,n){var o;for(h[44+(o=b-48|0)>>2]=e,h[o+40>>2]=t,h[o+36>>2]=r,h[o+32>>2]=n,h[o+28>>2]=h[h[o+40>>2]+136>>2];h[o+28>>2];){if(h[o+24>>2]=h[h[h[o+28>>2]>>2]+8>>2],h[o+24>>2]==h[o+40>>2])for(h[o+20>>2]=h[h[h[o+28>>2]>>2]+12>>2],h[o+16>>2]=0;!(h[o+16>>2]>=128);){e:{if(1!=h[h[o+20>>2]+4>>2]){if(!_[h[o+16>>2]+(h[o+20>>2]+8|0)|0])break e}else if(h[o+12>>2]=h[h[o+44>>2]+32>>2]+((h[o+20>>2]-h[h[o+44>>2]+24>>2]|0)/140<<9),!h[h[o+12>>2]+(h[o+16>>2]<<2)>>2])break e;v[h[o+28>>2]>>2]>=v[h[o+32>>2]+(h[o+16>>2]<<2)>>2]&&h[h[o+32>>2]+(h[o+16>>2]<<2)>>2]||(h[h[o+32>>2]+(h[o+16>>2]<<2)>>2]=h[h[o+28>>2]>>2])}h[o+16>>2]=h[o+16>>2]+1}h[o+28>>2]=h[h[o+28>>2]+4>>2]}}function a(e,t){var r=0,n=0,o=0,i=0;h[e+16>>2]=0,h[e+20>>2]=0,o=e,r=0,(n=t>>>8)&&(r=31,t>>>0>16777215||(r=62+((t>>>(6-(n=y(n))&31)&1)-(n<<1)|0)|0)),h[o+28>>2]=r,o=1048848+(r<<2)|0;e:{t:{r:{n:{if((i=h[262145])&(n=1<<(31&r))){if(n=h[o>>2],(-8&h[n+4>>2])!=(0|t))break n;r=n;break r}h[262145]=n|i,h[o>>2]=e,h[e+24>>2]=o;break e}for(o=t<<(31==(0|r)?0:25-(r>>>1)&31);;){if(!(r=h[(i=16+((o>>>29&4)+n|0)|0)>>2]))break t;if(o<<=1,n=r,(-8&h[r+4>>2])==(0|t))break}}return t=h[r+8>>2],h[t+12>>2]=e,h[r+8>>2]=e,h[e+24>>2]=0,h[e+12>>2]=r,void(h[e+8>>2]=t)}h[i>>2]=e,h[e+24>>2]=n}h[e+12>>2]=e,h[e+8>>2]=e}function s(e){var t,r=0,n=0,o=0,i=0,a=0,s=0;t=h[e+24>>2];e:{t:{if((0|e)==(0|(r=h[e+12>>2]))){if(o=h[(r=e+20|0)>>2],n=h[(o?20:16)+e>>2])break t;r=0;break e}n=h[e+8>>2],h[n+12>>2]=r,h[r+8>>2]=n;break e}for(o=o?r:e+16|0;i=o,(n=h[(o=(r=n)+20|0)>>2])||(o=r+16|0,n=h[r+16>>2]),n;);h[i>>2]=0}e:if(t){n=1048848+(h[e+28>>2]<<2)|0;t:{if((0|e)==h[n>>2]){if(h[n>>2]=r,r)break t;return a=1048580,s=h[262145]&d(h[e+28>>2]),void(h[a>>2]=s)}if(h[(h[t+16>>2]==(0|e)?16:20)+t>>2]=r,!r)break e}h[r+24>>2]=t,(n=h[e+16>>2])&&(h[r+16>>2]=n,h[n+24>>2]=r),(e=h[e+20>>2])&&(h[r+20>>2]=e,h[e+24>>2]=r)}}function l(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,r=0,n=0,o=0,i=0,l=0,u=0,f=0,_=0,g=0,m=0;e:{t:{r:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(o=-8&(e=e+11|0),!(f=h[262145]))break r;r=0-o|0,u=0,(e>>>=8)&&(u=31,o>>>0>16777215||(u=62+((o>>>(6-(e=y(e))&31)&1)-(e<<1)|0)|0));n:{o:{if(e=h[1048848+(u<<2)>>2]){for(i=o<<(31==(0|u)?0:25-(u>>>1)&31);;){if(!((l=-8&h[e+4>>2])>>>0<o>>>0||(l=l-o|0)>>>0>=r>>>0||(n=e,r=l))){r=0;break o}if(l=h[e+20>>2],e=h[16+((i>>>29&4)+e|0)>>2],t=l&&(0|l)!=(0|e)?l:t,i<<=1,!e)break}if(t){e=t;break o}if(n)break n}if(n=0,!(e=(0-(e=2<<(31&u))|e)&f))break r;if(!(e=h[1048848+(c(e&0-e)<<2)>>2]))break r}for(;n=(l=(i=(t=-8&h[e+4>>2])-o|0)>>>0<r>>>0&t>>>0>=o>>>0)?e:n,r=l?i:r,e=(t=h[e+16>>2])||h[e+20>>2];);if(!n)break r}if(r>>>0>=(e=h[262244])-o>>>0&&e>>>0>=o>>>0)break r;s(n);n:if(r>>>0>=16){if(h[n+4>>2]=3|o,h[4+(t=n+o|0)>>2]=1|r,h[t+r>>2]=r,r>>>0>=256){a(t,r);break n}e=1048584+((r>>>=3)<<3)|0,i=h[262144],r=1<<(31&r),u=h[e+8>>2],i&r||(h[262144]=r|i,u=e),r=u,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=r}else e=r+o|0,h[n+4>>2]=3|e,h[4+(e=e+n|0)>>2]=1|h[e+4>>2];return n+8|0}n:{o:{if(!(3&(e=(t=h[262144])>>>(n=31&(r=(o=e>>>0<11?16:e+11&-8)>>>3))))){if(o>>>0<=v[262244])break r;if(e)break o;if(!(e=h[262145]))break r;for(t=h[1048848+(c(e&0-e)<<2)>>2],r=(-8&h[t+4>>2])-o|0,i=t;;){if(!(e=h[t+16>>2])&&!(e=h[t+20>>2]))break n;r=(t=(n=(-8&h[e+4>>2])-o|0)>>>0<r>>>0)?n:r,i=t?e:i,t=e}}r=(e=h[1048592+(l=(n=r+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(i=h[e+8>>2]))==(0|(l=l+1048584|0))?(g=1048576,m=d(n)&t,h[g>>2]=m):(h[i+12>>2]=l,h[l+8>>2]=i),t=n<<3,h[e+4>>2]=3|t,h[4+(e=e+t|0)>>2]=1|h[e+4>>2];break t}return n=c(0-(e=(r=e<<n)&(0-(e=2<<n)|e))&e),e=h[1048592+(i=n<<3)>>2],(0|(r=h[e+8>>2]))==(0|(i=i+1048584|0))?(g=1048576,m=d(n)&t,h[g>>2]=m):(h[r+12>>2]=i,h[i+8>>2]=r),i=e+8|0,h[e+4>>2]=3|o,r=(t=n<<3)-o|0,h[4+(l=e+o|0)>>2]=1|r,h[e+t>>2]=r,(e=h[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=h[262246],o=h[262144],n=1<<(31&n),u=h[e+8>>2],o&n||(h[262144]=n|o,u=e),n=u,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=n),h[262246]=l,h[262244]=r,i}return s(i),r>>>0>=16?(h[i+4>>2]=3|o,h[4+(l=o+i|0)>>2]=1|r,h[r+l>>2]=r,(e=h[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=h[262246],o=h[262144],n=1<<(31&n),u=h[e+8>>2],o&n||(h[262144]=n|o,u=e),n=u,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=n),h[262246]=l,h[262244]=r):(e=r+o|0,h[i+4>>2]=3|e,h[4+(e=e+i|0)>>2]=1|h[e+4>>2]),i+8|0}r:{n:{o:{i:{if((t=h[262244])>>>0<o>>>0){if((e=h[262245])>>>0>o>>>0)break e;if(r=0,-1==(0|(t=p((e=o+65583|0)>>>16))))break t;if(!(n=t<<16))break t;if(e=(i=-65536&e)+h[262248]|0,h[262248]=e,t=h[262249],h[262249]=t>>>0>e>>>0?t:e,!(r=h[262247]))break i;for(e=1049e3;;){if((0|n)==((t=h[e>>2])+(l=h[e+4>>2])|0))break o;if(!(e=h[e+8>>2]))break}break n}return e=h[262246],(n=t-o|0)>>>0<=15?(h[262246]=0,h[262244]=0,h[e+4>>2]=3|t,o=4+(t=e+t|0)|0,r=1|h[t+4>>2]):(h[262244]=n,r=e+o|0,h[262246]=r,h[r+4>>2]=1|n,h[e+t>>2]=n,r=3|o,o=e+4|0),h[o>>2]=r,e+8|0}for((e=h[262255])>>>0<=n>>>0&&e||(h[262255]=n),e=0,h[262256]=4095,h[262251]=i,h[262250]=n,h[262253]=0;t=e+1048584|0,h[e+1048592>>2]=t,h[e+1048596>>2]=t,256!=(0|(e=e+8|0)););h[262247]=n,e=i+-40|0,h[262245]=e,h[n+4>>2]=1|e,h[4+(e+n|0)>>2]=40,h[262254]=2097152;break r}if(!(h[e+12>>2]|n>>>0<=r>>>0|t>>>0>r>>>0)){h[e+4>>2]=i+l,t=(e=h[262247])+15&-8,h[262247]=t+-8,r=8+((n=i+h[262245]|0)+(e-t|0)|0)|0,h[262245]=r,h[t+-4>>2]=1|r,h[4+(e+n|0)>>2]=40,h[262254]=2097152;break r}}e=h[262255],h[262255]=e>>>0<n>>>0?e:n,t=n+i|0,e=1049e3;n:{for(;;){if((0|t)!=h[e>>2]){if(e=h[e+8>>2])continue;break n}break}if(!h[e+12>>2]){h[e>>2]=n,h[e+4>>2]=i+h[e+4>>2],h[n+4>>2]=3|o,i=n+o|0,o=(t-n|0)-o|0;o:{i:{if((0|t)!=h[262247]){if(h[262246]==(0|t))break i;if(1==(3&(e=h[t+4>>2]))&&((r=-8&e)>>>0>=256?s(t):(0|(l=h[t+12>>2]))==(0|(u=h[t+8>>2]))?(g=1048576,m=h[262144]&d(e>>>3),h[g>>2]=m):(h[u+12>>2]=l,h[l+8>>2]=u),o=r+o|0,t=t+r|0),h[t+4>>2]=-2&h[t+4>>2],h[i+4>>2]=1|o,h[o+i>>2]=o,o>>>0>=256){a(i,o);break o}e=1048584+((t=o>>>3)<<3)|0,r=h[262144],t=1<<(31&t),u=h[e+8>>2],r&t||(h[262144]=t|r,u=e),r=u,h[e+8>>2]=i,h[r+12>>2]=i,h[i+12>>2]=e,h[i+8>>2]=r;break o}h[262247]=i,e=h[262245]+o|0,h[262245]=e,h[i+4>>2]=1|e;break o}h[262246]=i,e=h[262244]+o|0,h[262244]=e,h[i+4>>2]=1|e,h[e+i>>2]=e}return n+8|0}}for(e=1049e3;!((t=h[e>>2])>>>0<=r>>>0&&(l=t+h[e+4>>2]|0)>>>0>r>>>0);)e=h[e+8>>2];for(h[262247]=n,e=i+-40|0,h[262245]=e,h[n+4>>2]=1|e,h[4+(e+n|0)>>2]=40,h[262254]=2097152,h[(t=(e=(l+-32&-8)-8|0)>>>0<r+16>>>0?r:e)+4>>2]=27,e=h[262250],u=h[262251],_=h[262253],h[(f=t+16|0)>>2]=h[262252],h[f+4>>2]=_,h[t+8>>2]=e,h[t+12>>2]=u,h[262251]=i,h[262250]=n,h[262252]=t+8,h[262253]=0,e=t+28|0;h[e>>2]=7,l>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|r)&&(h[t+4>>2]=-2&h[t+4>>2],e=t-r|0,h[r+4>>2]=1|e,h[t>>2]=e,e>>>0>=256?a(r,e):(e=1048584+((t=e>>>3)<<3)|0,n=h[262144],t=1<<(31&t),u=h[e+8>>2],n&t||(h[262144]=t|n,u=e),t=u,h[e+8>>2]=r,h[t+12>>2]=r,h[r+12>>2]=e,h[r+8>>2]=t))}if(r=0,!((e=h[262245])>>>0<=o>>>0))break e}return r}return t=e-o|0,h[262245]=t,n=(e=h[262247])+o|0,h[262247]=n,h[n+4>>2]=1|t,h[e+4>>2]=3|o,e+8|0}(e))|!(3&_[t+-4|0])||function(e,t){if(t)for(;f[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(m(e|=0,t|=0))}function u(){}function c(e){return e?31-y(e+-1^e)|0:32}function d(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function p(t){t|=0;var n=0|r.byteLength/65536,o=n+t|0;if(n<o&&o<65536){var i=new ArrayBuffer(m(o,65536)),a=new e.Int8Array(i);a.set(f),f=a,f=new e.Int8Array(i),new e.Int16Array(i),h=new e.Int32Array(i),_=new e.Uint8Array(i),g=new e.Uint16Array(i),v=new e.Uint32Array(i),new e.Float32Array(i),new e.Float64Array(i),r=i}return n}var f=new e.Int8Array(r),h=(new e.Int16Array(r),new e.Int32Array(r)),_=new e.Uint8Array(r),g=new e.Uint16Array(r),v=new e.Uint32Array(r),m=(new e.Float32Array(r),new e.Float64Array(r),e.Math.imul),y=(e.Math.fround,e.Math.abs,e.Math.clz32),b=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:p},buffer:{get:function(){return r}}}),rust_calloc:l,rust_free:function(e){n(e|=0)},llparser_create:function(e,t,r){return 0|function(e,t,r){var n,o,i;return b=n=b-32|0,h[n+28>>2]=e,h[n+24>>2]=t,h[n+20>>2]=r,e=n,t=h[n+28>>2]?h[n+28>>2]:256,h[e+28>>2]=t,e=n,t=h[n+24>>2]?h[n+24>>2]:256,h[e+24>>2]=t,e=n,t=h[n+20>>2]?h[n+20>>2]:256,h[e+20>>2]=t,o=n,i=l(((((((m(h[n+24>>2],140)+52|0)+m(h[n+20>>2],44)|0)+(h[n+24>>2]<<9)|0)+(h[n+24>>2]<<9)|0)+m(h[n+20>>2],h[n+24>>2]<<3)|0)+(h[n+28>>2]<<1)|0)+(h[n+28>>2]<<3)|0,1),h[o+16>>2]=i,h[h[n+16>>2]+12>>2]=h[n+28>>2],h[h[n+16>>2]+16>>2]=h[n+24>>2],h[h[n+16>>2]+20>>2]=h[n+20>>2],h[h[n+16>>2]+4>>2]=0,h[h[n+16>>2]>>2]=0,h[h[n+16>>2]+8>>2]=0,h[n+12>>2]=h[n+16>>2]+52,h[h[n+16>>2]+24>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+m(h[n+24>>2],140),h[h[n+16>>2]+28>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+m(h[n+20>>2],44),h[h[n+16>>2]+32>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+(h[n+24>>2]<<9),h[h[n+16>>2]+36>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+(h[n+24>>2]<<9),h[h[n+16>>2]+40>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+m(h[n+20>>2],h[n+24>>2]<<3),h[h[n+16>>2]+44>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+(h[n+28>>2]<<1),h[h[n+16>>2]+48>>2]=h[n+12>>2],b=n+32|0,h[n+16>>2]}(e|=0,t|=0,r|=0)},llparser_destroy:function(e){!function(e){var t;b=t=b-16|0,h[t+12>>2]=e,n(h[t+12>>2]),b=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var r,n;return h[12+(r=b-16|0)>>2]=e,h[r+8>>2]=t,t=h[h[r+12>>2]+24>>2],n=h[r+12>>2],e=h[n+4>>2],h[n+4>>2]=e+1,h[r+4>>2]=t+m(e,140),h[h[r+4>>2]+4>>2]=h[r+8>>2]?1:0,h[r+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-1,f[h[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-2,f[h[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var r;h[12+(r=b-16|0)>>2]=e,h[r+8>>2]=t,f[h[r+8>>2]+(h[r+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,r){!function(e,t,r){var n;for(h[12+(n=b-16|0)>>2]=e,h[n+8>>2]=t,h[n+4>>2]=r,h[n>>2]=h[n+8>>2];!(h[n>>2]>h[n+4>>2]);)f[h[n>>2]+(h[n+12>>2]+8|0)|0]=1,h[n>>2]=h[n>>2]+1}(e|=0,t|=0,r|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(h[12+(t=b-16|0)>>2]=e,h[t+8>>2]=1;!(h[t+8>>2]>=127);)f[h[t+8>>2]+(h[t+12>>2]+8|0)|0]=1&(0!=_[h[t+8>>2]+(h[t+12>>2]+8|0)|0]^-1),h[t+8>>2]=h[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,r,n,o,i,a,s,l,u,c,d){return 0|function(e,t,r,n,o,i,a,s,l,u,c,d){var p;return b=p=b+-64|0,h[p+60>>2]=e,h[p+56>>2]=t,h[p+52>>2]=r,h[p+48>>2]=n,h[p+44>>2]=o,h[p+40>>2]=i,h[p+36>>2]=a,h[p+32>>2]=s,h[p+28>>2]=l,h[p+24>>2]=u,h[p+20>>2]=c,h[p+16>>2]=d,t=h[h[p+60>>2]+28>>2],r=h[p+60>>2],e=h[r>>2],h[r>>2]=e+1,h[p+12>>2]=t+m(e,44),h[h[p+12>>2]>>2]=h[p+52>>2],h[h[p+12>>2]+4>>2]=h[p+48>>2],h[p+48>>2]>0&&(h[h[p+12>>2]+8>>2]=h[p+44>>2]),h[p+48>>2]>1&&(h[h[p+12>>2]+12>>2]=h[p+40>>2]),h[p+48>>2]>2&&(h[h[p+12>>2]+16>>2]=h[p+36>>2]),h[p+48>>2]>3&&(h[h[p+12>>2]+20>>2]=h[p+32>>2]),h[p+48>>2]>4&&(h[h[p+12>>2]+24>>2]=h[p+28>>2]),h[p+48>>2]>5&&(h[h[p+12>>2]+28>>2]=h[p+24>>2]),h[p+48>>2]>6&&(h[h[p+12>>2]+32>>2]=h[p+20>>2]),h[p+48>>2]>7&&(h[h[p+12>>2]+36>>2]=h[p+16>>2]),h[h[p+12>>2]+40>>2]=h[p+56>>2],h[p+48>>2]>0&&function(e,t,r){var n;h[28+(n=b-32|0)>>2]=e,h[n+24>>2]=t,h[n+20>>2]=r,h[n+16>>2]=(h[n+20>>2]-h[h[n+28>>2]+24>>2]|0)/140,1==h[h[n+20>>2]+4>>2]&&(t=h[h[n+28>>2]+40>>2],r=h[n+28>>2],e=h[r+8>>2],h[r+8>>2]=e+1,h[n+12>>2]=t+(e<<3),h[h[n+12>>2]>>2]=h[n+24>>2],h[h[n+12>>2]+4>>2]=h[h[n+20>>2]+136>>2],h[h[n+20>>2]+136>>2]=h[n+12>>2])}(h[p+60>>2],h[p+12>>2],h[p+52>>2]),b=p- -64|0,h[p+12>>2]}(e|=0,t|=0,r|=0,n|=0,o|=0,i|=0,a|=0,s|=0,l|=0,u|=0,c|=0,d|=0)},llparser_prepare:function(e){!function(e){var t;for(b=t=b-32|0,h[t+28>>2]=e,h[t+24>>2]=0;!(h[t+24>>2]>=h[h[t+28>>2]+4>>2]);)h[t+20>>2]=h[h[t+28>>2]+24>>2]+m(h[t+24>>2],140),1==h[h[t+20>>2]+4>>2]&&o(h[t+28>>2],h[t+20>>2],h[t+20>>2],h[h[t+28>>2]+32>>2]+(h[t+24>>2]<<9)|0,0),h[t+24>>2]=h[t+24>>2]+1;for(h[t+16>>2]=0;!(h[t+16>>2]>=h[h[t+28>>2]+4>>2]);)h[t+12>>2]=h[h[t+28>>2]+24>>2]+m(h[t+16>>2],140),1==h[h[t+12>>2]+4>>2]&&(h[h[t+12>>2]>>2]=0,i(h[t+28>>2],h[t+12>>2],h[t+12>>2],h[h[t+28>>2]+36>>2]+(h[t+16>>2]<<9)|0)),h[t+16>>2]=h[t+16>>2]+1;b=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var r,n,o;return b=r=b-32|0,h[r+24>>2]=e,h[r+20>>2]=t,h[r+16>>2]=0,h[r+12>>2]=0,n=r,o=function e(t,r,n,o,i,a,s){var l,u=0,c=0;b=l=b-96|0,h[l+88>>2]=t,h[l+84>>2]=r,h[l+80>>2]=n,h[l+76>>2]=o,h[l+72>>2]=i,h[l+68>>2]=a,h[l+64>>2]=s,h[l+60>>2]=g[h[l+80>>2]+(h[h[l+76>>2]>>2]<<1)>>1],v[l+60>>2]>=128&&(h[l+60>>2]=1);e:if(h[h[l+72>>2]>>2]>(h[l+64>>2]-4|0))h[l+92>>2]=-1;else if(1==h[h[l+84>>2]+4>>2])if(h[l+56>>2]=h[h[l+76>>2]>>2],h[l+52>>2]=h[h[l+72>>2]>>2],h[l+48>>2]=0,h[l+44>>2]=0,h[l+40>>2]=h[h[l+88>>2]+32>>2]+((h[l+84>>2]-h[h[l+88>>2]+24>>2]|0)/140<<9),h[l+36>>2]=0,!h[h[l+40>>2]+(h[l+60>>2]<<2)>>2]|v[l+60>>2]<=0|v[l+60>>2]>=127?!h[l+60>>2]|!h[h[l+40>>2]+508>>2]?h[h[l+40>>2]>>2]&&(h[l+36>>2]=h[h[l+40>>2]>>2]):h[l+36>>2]=h[h[l+40>>2]+508>>2]:h[l+36>>2]=h[h[l+40>>2]+(h[l+60>>2]<<2)>>2],h[l+36>>2]){for(h[l+68>>2]||h[h[l+36>>2]+40>>2]||(h[l+48>>2]=h[h[l+72>>2]>>2],t=h[l+72>>2],h[t>>2]=h[t>>2]+2),h[l+32>>2]=0;h[l+32>>2]<h[h[l+36>>2]+4>>2];){if(h[l+28>>2]=h[l+68>>2],h[l+68>>2]||!h[h[l+36>>2]+40>>2]|h[h[l+36>>2]+40>>2]==(h[l+32>>2]+65536|0)||(h[l+28>>2]=1),u=l,c=e(h[l+88>>2],h[(h[l+36>>2]+8|0)+(h[l+32>>2]<<2)>>2],h[l+80>>2],h[l+76>>2],h[l+72>>2],h[l+28>>2],h[l+64>>2]),h[u+24>>2]=c,h[l+24>>2]<0){h[l+92>>2]=-1;break e}h[l+68>>2]|h[h[l+36>>2]+40>>2]!=(h[l+32>>2]+65536|0)||(h[l+44>>2]=h[l+24>>2]),h[l+32>>2]=h[l+32>>2]+1}for(h[l+68>>2]||(h[h[l+36>>2]+40>>2]?1==h[h[l+36>>2]+40>>2]&&(r=h[l+56>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r,h[l+44>>2]=h[h[l+72>>2]>>2],r=h[h[l+76>>2]>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r):(h[h[h[l+88>>2]+48>>2]+(h[l+48>>2]<<2)>>2]=0-h[l+36>>2],h[h[h[l+88>>2]+48>>2]+(h[l+48>>2]+1<<2)>>2]=h[h[l+36>>2]+4>>2],h[l+44>>2]=h[l+48>>2]+1));;){if(h[h[l+72>>2]>>2]>(h[l+64>>2]-4|0)){h[l+92>>2]=-1;break e}if(h[l+20>>2]=h[h[l+88>>2]+36>>2]+((h[l+84>>2]-h[h[l+88>>2]+24>>2]|0)/140<<9),h[l+16>>2]=0,h[l+60>>2]=g[h[l+80>>2]+(h[h[l+76>>2]>>2]<<1)>>1],v[l+60>>2]>=128&&(h[l+60>>2]=1),!h[h[l+20>>2]+(h[l+60>>2]<<2)>>2]|v[l+60>>2]<=0|v[l+60>>2]>=127?!h[l+60>>2]|!h[h[l+20>>2]+508>>2]||(h[l+16>>2]=h[h[l+20>>2]+508>>2]):h[l+16>>2]=h[h[l+20>>2]+(h[l+60>>2]<<2)>>2],!h[l+16>>2])break;for(h[l+68>>2]||(h[h[l+16>>2]+40>>2]?65536!=h[h[l+16>>2]+40>>2]&&(h[h[l+72>>2]>>2]=h[l+52>>2]):(h[h[h[l+88>>2]+48>>2]+(h[l+44>>2]<<2)>>2]=(0-h[h[h[l+88>>2]+48>>2]+(h[l+44>>2]<<2)>>2]|0)-1,h[l+48>>2]=h[h[l+72>>2]>>2],t=h[l+72>>2],h[t>>2]=h[t>>2]+2)),h[l+12>>2]=1;h[l+12>>2]<h[h[l+16>>2]+4>>2];){if(h[l+8>>2]=h[l+68>>2],h[l+68>>2]||!h[h[l+16>>2]+40>>2]|h[h[l+16>>2]+40>>2]==(h[l+12>>2]+65536|0)||(h[l+8>>2]=1),u=l,c=e(h[l+88>>2],h[(h[l+16>>2]+8|0)+(h[l+12>>2]<<2)>>2],h[l+80>>2],h[l+76>>2],h[l+72>>2],h[l+8>>2],h[l+64>>2]),h[u+4>>2]=c,h[l+4>>2]<0){h[l+92>>2]=-1;break e}h[l+68>>2]|h[h[l+16>>2]+40>>2]!=(h[l+12>>2]+65536|0)||(h[l+44>>2]=h[l+4>>2]),h[l+12>>2]=h[l+12>>2]+1}h[l+68>>2]||(h[h[l+16>>2]+40>>2]?1==h[h[l+16>>2]+40>>2]&&(r=h[l+56>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r,h[l+44>>2]=h[h[l+72>>2]>>2],r=h[h[l+76>>2]>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r):(h[h[h[l+88>>2]+48>>2]+(h[l+48>>2]<<2)>>2]=0-h[l+16>>2],h[h[h[l+88>>2]+48>>2]+(h[l+48>>2]+1<<2)>>2]=h[h[l+16>>2]+4>>2],h[l+44>>2]=h[l+48>>2]+1))}h[l+92>>2]=h[l+44>>2]}else h[l+92>>2]=-1;else{if(h[l+60>>2]&&(-1==h[h[l+84>>2]+4>>2]&&(t=h[l+76>>2],h[t>>2]=h[t>>2]+1),!h[h[l+84>>2]+4>>2])){if(!_[h[l+60>>2]+(h[l+84>>2]+8|0)|0]){h[l+92>>2]=-1;break e}t=h[l+76>>2],h[t>>2]=h[t>>2]+1}h[l+68>>2]||(r=h[h[l+76>>2]>>2],n=h[h[l+84>>2]+4>>2],o=h[h[l+88>>2]+48>>2],i=h[l+72>>2],t=h[i>>2],h[i>>2]=t+1,h[o+(t<<2)>>2]=r-(-2==(0|n)?0:1),r=h[h[l+76>>2]>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r),h[l+92>>2]=h[h[l+72>>2]>>2]-1}return b=l+96|0,h[l+92>>2]}(h[r+24>>2],h[r+20>>2],h[h[r+24>>2]+44>>2],r+12|0,r+16|0,0,h[h[r+24>>2]+12>>2]<<1),h[n+8>>2]=o,e=h[h[r+24>>2]+48>>2],t=h[r+16>>2],h[r+16>>2]=t+1,h[e+(t<<2)>>2]=-1,e=h[h[r+24>>2]+48>>2],t=h[r+16>>2],h[r+16>>2]=t+1,h[e+(t<<2)>>2]=0,g[h[h[r+24>>2]+44>>2]+(h[r+12>>2]<<1)>>1]|h[r+8>>2]<0?h[r+28>>2]=h[r+12>>2]+1:h[r+28>>2]=0,b=r+32|0,h[r+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+48>>2]},wasm_main:u,__wbindgen_start:u}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,n),i=o.memory,a=o.rust_calloc,s=o.rust_free,l=o.llparser_create,u=o.llparser_destroy,c=o.llparser_create_descriptor,d=o.llparser_descriptor_set_all,p=o.llparser_descriptor_set_nil,f=o.llparser_descriptor_add_char,h=o.llparser_descriptor_add_range,_=o.llparser_descriptor_revert,g=o.llparser_add_rule,v=o.llparser_prepare,m=o.llparser_parse,y=o.llparser_get_input_buffer,b=o.llparser_get_result,w=o.wasm_main,A=o.__wbindgen_start}])},function(e,t,r){var n=r(4),o=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};o.create=function(e){return new o(e)},o.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},o.prototype.remove=function(e){var t=this._arr,r=0;if("function"==typeof e)for(r=0;r<t.length;r++){var n=t[r].func;if(n===e)return t.splice(r,1),this.empty=!t.length,n}else for(r=0;r<t.length;r++)if(t[r].id===e){var o=t[r].func;return t.splice(r,1),this.empty=!t.length,o}return null},o.prototype.call=function(e,t,r){for(var n=this._arr,o=!1,i=0;i<n.length;i++){!1===a(this._type,n[i].func,e,t,r)&&(o=!0)}if(o)return!1};var i=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(n.throwGlobalError)throw e;console.error(e.stack)}},a=o.safeCallback=function(e,t,r,n,o){try{return t.apply(r,n)}catch(s){var a="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";r&&r.is&&(a+=r.is),a+="#"+(t.name||"(anonymous)"),o&&o.triggerLifeTime("error",[s]),i(s,{message:a,type:e,element:r,method:t,args:n})}},s=o.create();o.addGlobalErrorListener=function(e){return s.add(e)},o.removeGlobalErrorListener=function(e){return s.remove(e)};var l=null;o.addGlobalWarningListener=function(e){return(l=o.create()).add(e)},o.removeGlobalWarningListener=function(e){if(l){var t=l.remove(e);return l.empty&&(l=null),t}return null},o.hasGlobalWarningListeners=function(){return!!l},o.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;l.call(null,[t],null)},e.exports=o},function(e,t){var r={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,idPrefixGenerator:null,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document)};e.exports=r},function(e,t){var r=Object.prototype.hasOwnProperty,n=function(e,t){var o=typeof e;if("object"===o&&null!==e){var i=t?t.get(e):void 0;if(void 0!==i)return i;if(e instanceof Array){i=[],t&&t.set(e,i);for(var a=0;a<e.length;a++)i[a]=n(e[a],t)}else for(var s in i={},t&&t.set(e,i),e)r.call(e,s)&&(i[s]=n(e[s],t));return i}if("symbol"!==o)return e};t.deepCopy=function(e,t){var r=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return n(e,r)}},function(e,t,r){var n=r(3),o=(Object.prototype.hasOwnProperty,function(){});o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}});var i=null;o._setElementSystem=function(e){i=e,o._setElementSystem=null};var a=null;o._setComponent=function(e){a=e,o._setComponent=null};var s=Date.now();o.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},o.getInitTimeStamp=function(e){return s},o.create=function(e,t,r){var n=(r=r||{}).originalEvent,i=r.extraFields||{},a=Date.now()-s,l=new o;for(var u in l.currentTarget=null,l.type=e,l.timeStamp=a,l.mark=null,l.detail=t,l.bubbles=!!r.bubbles,l.composed=!!r.composed,l.__originalEvent=n,l.__hasCapture=!!r.capturePhase,l.__stopped=!1,l.__dispatched=!1,i)l[u]=i[u];return l},o.prototype.preventDefault=function(){this.__originalEvent&&!this.__originalEvent.__stopPreventDefault&&this.__originalEvent.preventDefault()},o.prototype.stopPropagation=function(){this.__stopped=!0},o.prototype.isStopped=function(){return!!this.__stopped},o.prototype.markMutated=function(){this.__mutatedMarked=!0},o.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var l=function(e,t,r,n){for(var o=e,a=e instanceof i?e.collectMarks():{},s=[],l=[],u=e;u;){if(o!==u&&(s.push(e),e=u,l.push(a),a=e instanceof i?e.collectMarks():{}),o=u.parentNode,!1===n(u,e,a))return;if(u.__wxHost){if(r)break;e=s.pop()||u.__wxHost,a=l.pop()||(e instanceof i?e.collectMarks():{}),o=u=u.__wxHost}else{var c=!0;u instanceof i&&(c=!1),u=c||r?u.parentNode:u.__wxSlotParent}}};o.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof i&&(e=e.shadowRoot)),t.target=e instanceof i?e.__methodCaller:e;var r=function(e,r,n){if(!(r&&r.length&&t.mutatedMarked())){var o=t.currentTarget=n instanceof i?n.__methodCaller:n,s=e.call(o,[t],n instanceof a?n:void 0);r&&r.length&&t.markMutated(),!1===s&&(t.__originalEvent&&!t.__originalEvent.__stopPreventDefault&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},n=t.type,o=!t.composed;if(t.__hasCapture){var s=[];l(e,0,o,(function(e,t,r){return e.__wxCaptureEvents&&e.__wxCaptureEvents[n]&&s.push([e,t,r]),!0}));for(var u=s.length-1;u>=0;u--){var c=s[u],d=c[0],p=c[1];t.target=p instanceof i?p.__methodCaller:p,t.mark=c[2];var f=d.__wxCaptureMutated&&d.__wxCaptureMutated[n];if(r(d.__wxCaptureEvents[n],f,d),t.__stopped)break}}if(t.target=e instanceof i?e.__methodCaller:e,!t.__stopped){var h=!t.bubbles;l(e,0,o,(function(e,o,a){t.target=o instanceof i?o.__methodCaller:o,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[n];return e.__wxEvents&&e.__wxEvents[n]&&r(e.__wxEvents[n],s,e),!h&&!t.__stopped}))}}},o.triggerEvent=function(e,t,r,n){var i=o.create(t,r,n);o.dispatchEvent(e,i)},o.addListenerToElement=function(e,t,r,o){var i=o&&o.mutated;if(i){var s=r;r=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var l=void 0;return o&&(o.useCapture||o.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=n.create("Event Listener")),l=e.__wxCaptureEvents[t].add(r),i&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(l))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=n.create("Event Listener")),l=e.__wxEvents[t].add(r),i&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(l))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,r,o]),l},o.removeListenerFromElement=function(e,t,r,n){var o=null;if(n&&(n.useCapture||n.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(o=e.__wxCaptureEvents[t].remove(r)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(i=e.__wxCaptureMutated[t].indexOf(r))&&e.__wxCaptureMutated[t].splice(i,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(o=e.__wxEvents[t].remove(r)),e.__wxMutated&&e.__wxMutated[t]){var i;-1!==(i=e.__wxMutated[t].indexOf(r))&&e.__wxMutated[t].splice(i,1)}o&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,o,n])},e.exports=o},function(e,t,r){var n=r(3),o=function(e){for(var t=e.str;e.cur<t.length;){var r=t[e.cur];if(" "!==r&&"\n"!==r&&"\r"!==r&&"\t"!==r&&"\f"!==r)break;e.cur+=1}return e.cur<t.length},i=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if(!(n>="0"&&n<="9"))break;r+=n,e.cur+=1}if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));return parseInt(r,10)},a=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length);else{r+=t[e.cur+1],e.cur+=1}else if(/^[_a-zA-Z]$/.test(n))r+=n;else{if(!(n>="0"&&n<="9"))break;if(""===r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name cannot start with digits)"));r+=n}e.cur+=1}return r},s=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length)r+="\\",e.cur+=1;else{var o=t[e.cur+1];"."===o||"["===o||"]"===o||"\\"===o?(r+=o,e.cur+=2):(r+="\\",e.cur+=1)}else{if("."===n||"["===n)break;r+=n,e.cur+=1}}return r},l=function(e){var t=e.str;if(o(e),"*"===t[e.cur]&&"*"===t[e.cur+1])return e.cur+=2,["**"];var r=a(e);if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (first field name illegal)"));for(var n=[r];e.cur<t.length&&o(e);){var s=t[e.cur];if("."===s){if(e.cur+=1,o(e),"*"===t[e.cur]&&"*"===t[e.cur+1]){n.push("**"),e.cur+=2;break}var l=a(e);if(!l)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name illegal)"));n.push(l)}else{if("["!==s)break;e.cur+=1,o(e);var u=i(e);if(o(e),"]"!==t[e.cur])throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,n.push(u)}}return n};t.parseSinglePath=function(e){var t=function(e){for(var t=e.str,r=[];e.cur<t.length;){var n=t[e.cur];if("."===n){e.cur+=1;var o=s(e);o&&r.push(o)}else if("["===n){e.cur+=1;var a=i(e);if("]"!==t[e.cur]&&e.cur<t.length)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,r.push(a)}else{var l=s(e);l&&r.push(l)}}return r}({str:e,cur:0});return t},t.parseMultiPaths=function(e){try{var t={str:e,cur:0},r=function(e){var t=[];for(t.push(l(e)),o(e);","===e.str[e.cur];)e.cur+=1,t.push(l(e)),o(e);return t}(t);if(t.cur!==e.length)throw new Error('data path descriptor "'.concat(e,'" is illegal at char ').concat(t.cur));return r}catch(e){return n.triggerWarning(e.message),[]}}},function(e,t,r){var n=r(3),o=r(4),i=r(7),a=["created","ready","cacheAttached","attached","moved","detached","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],l=function(){},u=i.parseMultiPaths,c=function(){};c.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var d=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t},p=function(e){var t={};for(var r in e)t[r]=e[r];return t},f=function(e,t){for(var r in t)hasOwnProperty.call(e,r)?"object"!=typeof e[r]||"object"!=typeof t[r]||null===t[r]||t[r]instanceof Array?e[r]=t[r]:(e[r]instanceof Array?e[r]=d(e[r]):e[r]=p(e[r]),f(e[r],t[r])):e[r]=t[r]};c.create=function(e){var t=new c;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.placeholder=e.placeholder||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:o.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:o.lazyRegistration)||c.prepare(t),e.is&&(c._list[e.is]=t),t},c.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.ancestors,o="",i=0;for(i=0;i<(t.behaviors||[]).length;i++){var d=t.behaviors[i],p=d;for(o in"string"==typeof p&&(p=c._list[d],n.hasGlobalWarningListeners()&&(p instanceof c||n.triggerWarning('behavior "'+d+'" is not found (when preparing "'+e.is+'").'))),p._unprepared&&c.prepare(p),"object"==typeof p.data&&(null===e.data?e.data=p.data:f(e.data,p.data)),p.generics){var h=p.generics[o];"object"!=typeof h&&(h={}),e.generics[o]={default:h.default}}for(o in p.properties)n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&n.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.properties[o]=p.properties[o];for(o in p.relations)e.relations[o]=p.relations[o];for(o in p.methods)n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&n.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[o]=p.methods[o];for(var _=0;_<p.ancestors.length;_++)r.indexOf(p.ancestors[_])<0&&r.push(p.ancestors[_])}for(o in"object"==typeof t.data&&(null===e.data?e.data=t.data:f(e.data,t.data)),t.properties){n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&n.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").');var g=t.properties[o];s.indexOf(g)>=0?g={type:g}:s.indexOf(g.type)<0&&g.optionalTypes&&g.optionalTypes.length>0&&(g.type=g.optionalTypes[0]),n.hasGlobalWarningListeners()&&s.indexOf(g.type)<0&&n.triggerWarning('the type of property "'+o+'" is illegal (when preparing "'+e.is+'").'),void 0===g.value&&(g.type===String?g.value="":g.type===Number?g.value=0:g.type===Boolean?g.value=!1:g.type===Array?g.value=[]:g.value=null),e.properties[o]={type:g.type,optionalTypes:g.optionalTypes,value:g.value,filter:g.filter,observer:g.observer,public:!!(void 0===g.public?e.options.publicProperties:g.public),availability:g.availability,observeAssignments:!!g.observeAssignments,reflectIdPrefix:!!g.reflectIdPrefix}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(o in t.lifetimes)e.lifetimes[o]=t.lifetimes[o];for(i=0;i<a.length;i++)void 0===e.lifetimes[a[i]]&&(e.lifetimes[a[i]]=t[a[i]]);for(o in t.listeners)e.listeners[o]=t.listeners[o];var v=t.observers;if(v instanceof Array)for(i=0;i<v.length;i++){var m=v[i];e.observers.push({paths:u(m.fields||"**"),observer:m.observer})}else for(o in v)e.observers.push({paths:u(o),observer:v[o]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(o in t.pageLifetimes)e.pageLifetimes[o]=t.pageLifetimes[o];for(o in t.relations){var y=t.relations[o];e.relations[o]={target:y.target||o,type:y.type,linked:y.linked||l,linkChanged:y.linkChanged||l,unlinked:y.unlinked||l,linkFailed:y.linkFailed||l}}for(o in t.methods)"function"==typeof t.methods[o]&&(n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&n.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[o]=t.methods[o]);r.push(e)}},c._list=Object.create(null),c.prototype.hasBehavior=function(e){this._unprepared&&c.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof c){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===c._list[e])return!0;return!1},c.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var n=this.ancestors[r];for(var o in n.listeners)Object.prototype.hasOwnProperty.call(e,o)?e[o].push(n.listeners[o]):e[o]=[n.listeners[o]]}return e},c.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,r=0;r<t.length;r++)for(var n=this.ancestors[r].observers,o=0;o<n.length;o++){var i=n[o];e.addObserver(i.observer,i.paths,this)}},c.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=n.create("Lifetime Method")}));for(var r=0;r<t.length;r++){var o=t[r];for(var i in o.lifetimes)o.lifetimes[i]&&(e[i]||(e[i]=n.create("Lifetime Method")),e[i].add(o.lifetimes[i]))}return e},c.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var o=t[r];for(var i in o.pageLifetimes)o.pageLifetimes[i]&&(e[i]||(e[i]=n.create("Page Lifetime Method")),e[i].add(o.pageLifetimes[i]))}return e},c.callDefinitionFilter=function(e){var t=e.definitionFilter,r=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?c._list[t]:t)&&t.definitionFilter&&(r.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,r)}:null},e.exports=c},function(e,t,r){var n=r(3),o=r(6),i=r(10),a=r(11),s=r(12),l=r(14),u=r(4),c=r(13),d=function(e){p(this,e||null)};d.prototype=Object.create(Object.prototype,{constructor:{value:d,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var r=this.ownerShadowRoot.__wxHost;r.__idCacheDirty=!0,this.__domElement&&r.__componentOptions.writeIdToDOM&&(r.__idPrefix?this.__domElement.id=r.__idPrefix+"--"+t:this.__domElement.id=t)}u.writeExtraInfoToAttr&&this.__domElement&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){if(e=String(e),this.__slot!==e){if(this.__inheritSlots)return void(n.hasGlobalWarningListeners()&&n.triggerWarning('slots-inherited nodes do not support "slot" attribute (in component "'+this.is+'").'));this.__slot=e,w(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})}},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return x.call(this,e)},configurable:!0}}),o._setElementSystem(d),a._setElementSystem(d);var p=d.initialize=function(e,t,r){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=c.backendExtractedDefault,e.__domElement=t,e.$$=t,t&&(t.__wxElement=e)};d._clone=function(e,t,r,n){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var o in t.__marks)e.__marks[o]=t.__marks[o];for(var i in e.__attributes=Object.create(null),t.__attributes)e.__attributes[i]=t.__attributes[i];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=c.backendExtractedDefault,e.__domElement=r,e.$$=r,r&&(r.__wxElement=e)};var f=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof d){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof d&&t(e.shadowRoot);for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n])}};t(e)}},h=function(e){if(e.__attached){var t=function(e){if(e instanceof d){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__attached=!1,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}};t(e)}},_=function(e){if(!e.__attached)return f(e);var t=function(e){if(e instanceof d){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},g=function(e,t,r){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var n,o=[r];n="add"===t?{type:"childList",target:e,addedNodes:o}:"remove"===t?{type:"childList",target:e,removedNodes:o}:{type:"childList",target:e,addedNodes:o,removedNodes:o},i._callObservers(e,"__childObservers",n)}},v=function(e,t){if(e instanceof d&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var r=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof d&&r(i)}};r(e)}};d._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var r=e.__idCache=Object.create(null),n=function(e){e.__id&&(r[e.__id]||(r[e.__id]=e));for(var t=e.childNodes,o=0;o<t.length;o++)t[o]instanceof d&&n(t[o])};n(t)}};var m=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,r=e.__wxHost,o=Object.create(null);t=void 0!==r.__singleSlot?{"":r.__singleSlot}:r.__slots;var i=function(e){void 0!==e.__slotName&&(o[e.__slotName]?n.hasGlobalWarningListeners()&&n.triggerWarning('More than one slot named "'+e.__slotName+'" are found inside a single component instance (in component "'+r.is+'"). The first one was accepted.'):o[e.__slotName]=e);for(var t=e.childNodes,a=0;a<t.length;a++)t[a]instanceof d&&i(t[a])};i(e),void 0!==r.__singleSlot?r.__singleSlot!==o[""]&&(o[""]&&(o[""].__wxSlotChildren=r.childNodes),y(r,o,t,!0),r.__singleSlot&&(r.__singleSlot.__wxSlotChildren=[]),r.__singleSlot=o[""]||null):(y(r,o,t,!1),r.__slots=o)}},y=function(e,t,r,n){var o=e.childNodes,i=0;if(n){var a=t[""];if(a)for(;i<o.length;i++)A(a,o[i],null,!1,!1,!1,-1);else if(a=r[""])for(;i<o.length;i++)A(a,null,o[i],!0,!1,!1,i)}else{var s=function(e){for(var n=0;n<e.length;n++){var o=e[n],i=o.__slot||"",a=t[i],l=r[i];a!==l&&(a?A(a,o,null,!1,!0,!0):A(l,null,o,!0,!0,!0)),o.__inheritSlots&&s(o.childNodes)}};s(o)}},b=function(e,t,r,n){for(var o=function(e,t,n){var i=e.childNodes,a=0;for(t&&(a=i.indexOf(t)+(n?0:1));a<i.length;a++){var s=i[a];if(s.__slot===r)return s;if(s.__inheritSlots){var l=o(s,null,!1);if(l)return l}}return null};t!==e;t=t.parentNode){var i=o(t.parentNode,t,n);if(i)return i;n=!1}return null},w=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var r=e.__slot||"",n=t.__slots[r];if(n){var o=b(t,e,r,!1);A(n,e,o,!1,!0,!0)}else(n=e.__wxSlotParent)&&A(n,null,e,!0,!0,!0)}},A=function(e,t,r,n,o,i,a){if(n&&(r.__wxSlotParent=null),o&&(a=e.__wxSlotChildren.indexOf(r)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&i){var l=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(l,1),s===e&&l<a&&a--}}var c=!1;(t&&t.__backendExtracted||r&&r.__backendExtracted)&&(c=!0),c||function(e,t,r,n,o){var i=e;if(i instanceof d){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!r){var s=a.__wxSlotChildren.indexOf(i);r=a.__wxSlotChildren[s+1]}i=a}i instanceof d&&(i=i.__domElement)}if(i){var l=n,u=null,c=null;if(t)if(t.__virtual){var p=document.createDocumentFragment(),f=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?f(r):p.appendChild(r.__domElement)}};f(t),u=p}else u=t.__domElement;if(r)if(r.__virtual){var h=e,_=0;if(n){var g=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?g(r):i.removeChild(r.__domElement)}};g(r),l=!1,_=o+1}else h=r.__wxSlotParent,_=r===t?o:h.__wxSlotChildren.indexOf(r);if(t){var v=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];if(!r.__virtual)return r;var n=v(r,0);if(n)return n}};r=null;for(var m=h;!(r=v(m,_))&&m.__virtual;m=m.__wxSlotParent)_=m.__wxSlotParent.__wxSlotChildren.indexOf(m)+1;r&&(c=r.__domElement)}}else c=r.__domElement;l?u?i.replaceChild(u,c):i.removeChild(c):u&&(c?i.insertBefore(u,c):i.appendChild(u))}else if(t&&t.__wxSlotParent){var y=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)y(e.__wxSlotChildren[t]);else{var r=e.__domElement;r&&r.parentNode&&r.parentNode.removeChild(r)}};y(t)}}(e,t,r,n,a),u.writeExtraInfoToAttr&&(n&&r instanceof d&&r.__domElement&&r.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof d&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),o&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,n?1:0,t):e.__wxSlotChildren.splice(a,n?1:0))},E=function(e,t){for(var r=e.childNodes,n=0;n<r.length;n++){var o=r[n];t(e,o),o.__inheritSlots&&E(o,t)}},I=d.insertChildToElement=function(e,t,r,n){if(void 0!==e.__slotName)return!1;var o=r>=0?e.childNodes[r]:null;n&&t===o&&(n=!1);var a=null,s=e,l=e;if(t){a=t.parentNode,t.parentNode=e;var u=e.__subtreeObserversCount;if(a){var c=a.childNodes.indexOf(t);a.childNodes.splice(c,1),a===e&&c<r&&r--,u-=a.__subtreeObserversCount}u&&i._updateSubtreeCaches(t,u)}for(var d=e;d&&d.__inheritSlots;)d=d.parentNode;for(var p=!d||!d.__slots,y=!p||e.__inheritSlots,w=a;w&&w.__inheritSlots;)w=w.parentNode;var I=!w||!w.__slots,S=!I||a&&a.__inheritSlots;if(p)void 0!==e.__singleSlot&&(s=l=e.__singleSlot),s?A(s,t,o,n,y,S,r):t&&t.__wxSlotParent&&A(t.__wxSlotParent,null,t,!0,S,!1),t&&!I&&t.__inheritSlots&&E(t,(function(e,t){A(e,t,null,!1,!0,!0,-1)}));else{var C="";if(t&&(C=t.__slot||"",s=d.__slots[C]||null),o&&(l=d.__slots[o.__slot||""]||null),o&&l&&n&&A(l,null,o,n,!0,!1),t)if(s){var T=o?b(d,o,C,!n):b(d,e,C,!1);A(s,t,T,!1,!0,S)}else t.__wxSlotParent&&A(t.__wxSlotParent,null,t,!0,S,!1);o&&n&&o.__inheritSlots&&E(o,(function(e,t){A(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&E(t,(function(t,r){var i=r.__slot||"",a=d.__slots[i]||null;if(a){var s=o?b(d,o,i,!n):b(d,e,i,!1);A(a,r,s,!1,!0,!0)}else r.__wxSlotParent&&A(r.__wxSlotParent,null,r,!0,!0,!1)}))}return n&&(e.__subtreeObserversCount&&i._updateSubtreeCaches(o,-e.__subtreeObserversCount),o.parentNode=null),-1===r&&(r=e.childNodes.length),t?e.childNodes.splice(r,n?1:0,t):e.childNodes.splice(r,n?1:0),e.ownerShadowRoot&&(n&&v(o,e.ownerShadowRoot),t&&v(t,e.ownerShadowRoot),m(e.ownerShadowRoot)),n&&(h(o),g(e,"remove",o)),t&&(a?_(t):f(t),a===e?g(e,"move",t):(a&&g(a,"remove",t),g(e,"add",t))),!0},S=function(e,t,r,n){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var o=n?r:t,i=-1;return r&&(i=e.childNodes.indexOf(r))<0?null:I(e,t,i,n)?o:null};d._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],A(t,e,null,!1,!1,0),e.__hostAssociated=!0,m(e)},d.appendChild=function(e,t){return S(e,t,null,!1)},d.insertBefore=function(e,t,r){return S(e,t,r,!1)},d.removeChild=function(e,t){return S(e,null,t,!0)},d.replaceChild=function(e,t,r){return S(e,t,r,!0)},d.prototype.appendChild=function(e){return S(this,e,null,!1)},d.prototype.insertBefore=function(e,t){return S(this,e,t,!1)},d.prototype.removeChild=function(e){return S(this,null,e,!0)},d.prototype.replaceChild=function(e,t){return S(this,e,t,!0)};var C=function(e){var t=!0,r=!0;if(e instanceof d?(e.__backendExtracted=!0,e.$$=e.__domElement=null,r=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,r=!1),t&&e.__wxSlotChildren)for(var n=0;n<e.__wxSlotChildren.length;n++){var o=e.__wxSlotChildren[n];C(o)}else if(r&&e.childNodes)for(var i=0;i<e.childNodes.length;i++)C(e.childNodes[i])};d.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return C(e),t};var T=function(e,t){if(!t){var r=l.toElement(e.__domElement);return e.$$=e.__domElement=r,r}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var n=l.toElement(e.__domElement);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null},O=function(e,t,r){var n=e instanceof d&&e.__virtual,o=t?t.childNodes[r]:void 0,i=!0,a=!0,l=null;if(e instanceof d)e.__backendExtracted=!1,n||(l=T(e,o)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,l=function(e,t){if(!t){var r=document.createTextNode(e.textContent);return e.$$=e.__domElement=r,r}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var n=document.createTextNode(e.textContent);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null}(e,o),i=!1,a=!1;else{var u=document.createDocumentFragment();if(u.__wxSlotChildren=e.__wxSlotChildren,o&&o.childNodes)for(;o.childNodes.length;)u.appendChild(o.childNodes[0]);l=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,o),e=u}l?(t.appendChild(l),o=l):o=t?t.childNodes[r]:void 0;var c=0;if(i&&e.__wxSlotChildren)for(var p=0;p<e.__wxSlotChildren.length;p++){var f=e.__wxSlotChildren[p];if(n)r=O(f,t,r);else if(f.asShadowRoot){for(var h=0;h<f.asShadowRoot.childNodes.length;h++)c=O(f.asShadowRoot.childNodes[h],o,c);e.shadowRoot=o,o.__wxHost=e,e.__wxSlotChildren[0]=o,o.__wxSlotParent=e,e.__singleSlot===f&&(e.__singleSlot=o)}else c=O(f,o,c)}else if(a&&e.childNodes)for(var _=0;_<e.childNodes.length;_++)c=O(e.childNodes[_],o,c);if(n)return r;for(;o.childNodes.length>c;)o.removeChild(o.childNodes[c]);return r+1};d.injectBackend=function(e,t){if(e.__backendExtracted){var r=document.createDocumentFragment();r.appendChild(t),O(e,r,0)}},d.prototype.triggerEvent=function(e,t,r){o.triggerEvent(this,e,t,r)},d.prototype.dispatchEvent=function(e){o.dispatchEvent(this,e)},d.prototype.addListener=function(e,t,r){o.addListenerToElement(this,e,t,r)},d.prototype.removeListener=function(e,t,r){o.removeListenerFromElement(this,e,t,r)},d.setMethodCaller=function(e,t){e.__methodCaller=t},d.getMethodCaller=function(e){return e.__methodCaller},d.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},d.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute(e,t)},d.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&this.__domElement.removeAttribute(e))},d.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},d.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var r in t.__marks)hasOwnProperty.call(e,r)||(e[r]=t.__marks[r]);return e};var x=d.prototype.setNodeStyle=function(e,t){this.__styleSegments[t||0]=e;var r=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var n=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof n)return void this.__domElement.setAttribute("style",n.call(this,r))}this.__domElement&&this.__domElement.setAttribute("style",r),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})};d.replaceDocumentElement=function(e,t){e.__attached||(t.parentNode.replaceChild(e.__domElement,t),f(e))},d.pretendAttached=function(e){e.__attached||f(e)},d.pretendDetached=function(e){e.__attached&&h(e)},d.isAttached=function(e){return e.__attached},d.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,m(e.ownerShadowRoot))},d.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},d.getInheritSlots=function(e){return e.__inheritSlots};var N=function(e,t){var r=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!r)return null;var n=r[1].slice(1),o=r[2].split(".");return o.shift(),n||o.length?{id:n,classes:o,relation:t||""}:null},R=d.parseSelector=function(e){for(var t=String(e||"").split(","),r=[],n=!1,o=0;o<t.length;o++){for(var i=t[o].split(/( |\t|>+)/g),a=[],s="",l=0;l<i.length;l++){var u=i[l];if(u&&" "!==u&&"\t"!==u)if(">"!==u[0]){var c=N(u,s);if(s="",!c)break;a.push(c)}else{if(""!==s)break;s=u,">>>"===u&&(n=!0)}}l===i.length&&a.length&&r.push(a)}return r.length?{crossShadow:n,union:r}:null},P=function(e,t,r,n,o){if(t===e)return!1;var i=r[n],a=!0;i.id&&i.id!==t.__id&&(a=!1);for(var s=i.classes,l=0;a&&l<s.length;l++)t.classList.contains(s[l])||(a=!1);if(!a&&">"===o)return!1;var u=t;if(a&&0===n){if(null===e)return!0;for(u=u.parentNode;u;u=u.parentNode)if(u===e)return!0;if(">>>"!==o)return!1;u=t,a=!1}var c=a?i.relation:o;do{u.parentNode?u=u.parentNode:">>>"===c?u=u.__wxHost:">>>"===o?(a=!1,u=u.__wxHost):u=null,u===e&&(u=null)}while(u&&!d.isSelectable(u));if(!u)return!1;if(a){if(P(e,u,r,n-1,c))return!0;if(">>>"!==o)return!1}return P(e,u,r,n,o)},D=function(e,t,r){if(!d.isSelectable(r))return!1;for(var n=e.union,o=0;o<n.length;o++){var i=n[o];if(P(t,r,i,i.length-1,">"))return!0}return!1},L=function(e,t,r,n,o){if(D(t,r,n)&&(e.push(n),o))return!0;if(n.shadowRoot&&t.crossShadow&&((n.ownerShadowRoot?n.ownerShadowRoot.__wxHost.__componentOptions.domain:u.domain)===n.__componentOptions.domain&&L(e,t,r,n.shadowRoot,o)&&o))return!0;for(var i=n.childNodes,a=0;a<i.length;a++)if(i[a]instanceof d&&L(e,t,r,i[a],o)&&o)return!0;return!1};d.prototype.querySelector=function(e){var t="object"==typeof e?e:R(e);if(!t)return null;var r=[];return L(r,t,this,this,!0),r[0]||null},d.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:R(e),r=[];return t?(L(r,t,this,this,!1),r):[]},d.matchSelector=function(e,t){var r="object"==typeof e?e:R(e);return!!r&&D(r,null,t)},d.prototype.matchSelector=function(e,t){var r="object"==typeof e?e:R(e);return!!r&&D(r,this,t)},d.isSelectable=function(e){return!!e.classList},e.exports=d},function(e,t,r){var n=r(3),o=function(){};o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),o.create=function(e){var t=new o;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},o.prototype.observe=function(e,t){var r=0,o=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(o),subtree:t.subtree?e:null}),r++),t.childList&&(e.__childObservers||(e.__childObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(o),subtree:t.subtree?e:null}),r++),t.characterData&&(e.__textObservers||(e.__textObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(o),subtree:t.subtree?e:null}),r++),t.subtree&&i(e,r),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(o),subtree:null}))},o.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var r=e[t];r.funcArr.remove(r.id),r.subtree&&i(r.subtree,-1)}this._binded=[]};var i=o._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var r=e.childNodes;if(r)for(var n=0;n<r.length;n++)i(r[n],t)};o._callObservers=function(e,t,r){do{e[t]&&e[t].call(e,[r]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},o._callSingleObserver=function(e,t,r){e[t]&&e[t].call(e,[r])},e.exports=o},function(e,t,r){var n=r(10),o=function(){},i=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,a=null;o._setElementSystem=function(e){a=e,o._setElementSystem=null};var s=Object.prototype.hasOwnProperty;o.create=function(e,t){var r=new o;for(var n in r._prefix="",r._addOriginalClass=!1,r._alias=t,r._resolvedAlias={},t)r._resolvedAlias[n]="";return r._rawNames=[],r._elem=e,r._owner=null,r};var l=function(e){var t="",r=e._rawNames,n=e._prefix,o=e._owner?e._owner._resolvedAlias:null,i=e._addOriginalClass;n&&(n+="--");for(var a=0;a<r.length;a++){var l=r[a];if(a&&(t+=" "),o&&s.call(o,l))t+=o[l];else if("~"===l[0])t+=l.slice(1);else if("^"===l[0]){l=l.slice(1);for(var u=e._owner||null;"^"===l[0];)l=l.slice(1),u=u?u._owner:null;var c=u?u._prefix:"";c&&(c+="--"),t+=c+l}else i&&(t+=l+" "),t+=n+l}return t},u=function(e){var t=e._elem.__domElement;if(t){var r=l(e);r?t.setAttribute("class",r):t.removeAttribute("class")}},c=function(e){var t=e.classList;t instanceof o&&(t._alias&&d(t),u(t));for(var r=e.childNodes,n=0;n<r.length;n++)r[n]instanceof a&&c(r[n])},d=function(e){var t=e._owner;if(!t)return!1;var r=!1;for(var n in e._alias){var o=e._alias[n],i=[];if(o)for(var l=0;l<o.length;l++){var u=o[l];if(s.call(t._alias,u)){var d=t._resolvedAlias[u];i.push(d)}else{var p=e._prefix&&u?e._prefix+"--"+u:u;i.push(p)}}var f=i.join(" ");e._resolvedAlias[n]!==f&&(r=!0,e._resolvedAlias[n]=f)}r&&e._elem.shadowRoot instanceof a&&c(e._elem.shadowRoot)};o.prototype.toggle=function(e,t){var r=this._rawNames.indexOf(e);void 0===t&&(t=r<0);var o=!1;if(t?r<0&&(this._rawNames.push(e),u(this),o=!0):r>=0&&(this._rawNames.splice(r,1),u(this),o=!0),o){var i=this._elem;(i.__propObservers&&!i.__propObservers.empty||i.__subtreeObserversCount)&&n._callObservers(i,"__propObservers",{type:"properties",target:i,propertyName:"class"})}},o.prototype.contains=function(e){for(var t=this._rawNames,r=0;r<t.length;r++){var n=t[r];if("~"===n[0]){if(n.slice(1)===e)return!0}else if("^"===n[0]){for(var o=1;"^"===n[o];)o++;if(n.slice(o)===e)return!0}else if(n===e)return!0}return!1},o.prototype._setOwnerOptions=function(e,t,r){var n=this._prefix;this._prefix=t,n!==t&&(this._addOriginalClass=r,this._owner=e,this._alias&&d(this),u(this))},o.prototype._setAlias=function(e,t){var r=this._owner,n=String(t).match(i);this._alias[e]=n;var o=[];if(n)for(var a=0;a<n.length;a++){var l=n[a];r&&s.call(r._alias,l)?o.push(r._resolvedAlias[l]):o.push(this._prefix?this._prefix+"--"+l:l)}this._resolvedAlias[e]=o.join(" "),c(this._elem.shadowRoot)},o.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(i)||[],u(this)},o.prototype.getClassNames=function(){return l(this)},o.prototype.getPrefix=function(){return this._prefix},o.prototype.getAddOriginalClass=function(){return this._addOriginalClass},o.prototype.getRawNames=function(){return this._rawNames},e.exports=o},function(e,t,r){var n=r(10),o=r(4),i=r(13),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var r=new a;r.__slot="";var n=null;return i.backendExtractedDefault||"dom"!==o.documentBackend?r.__textContent=e:(n=document.createTextNode(e||"")).__wxElement=r,r.$$=r.__domElement=n,r.__backendExtracted=i.backendExtractedDefault,r.__subtreeObserversCount=0,r.parentNode=null,r.ownerShadowRoot=t,r};a.create=function(e){return s(e,null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){this.__domElement?this.__domElement.textContent=e:this.__textContent=String(e),(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&n._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var r=function(e){this.tagName=e,this.id="",this.attrs={}};r.toElement=function(e){var t=document.createElement(e.tagName);for(var r in e.id&&(t.id=e.id),e.attrs)t.setAttribute(r,e.attrs[r]);return t},r.fromElement=function(e){var t=new r(e.tagName);t.id=e.id;for(var n=e.attributes,o=0;o<n.length;o++)t.attrs[n[o].name]=n[o].value;return t},r.prototype.cloneNode=function(){var e=new r;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},r.prototype.removeAttribute=function(e,t){delete this.attrs[e]},r.prototype.setAttribute=function(e,t){this.attrs[e]=t},r.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=r},function(e,t,r){var n=r(3),o=r(5),i=r(16),a=r(6),s=r(8),l=r(9),u=r(17),c=r(10),d=r(11),p=r(14),f=r(4),h=r(13),_=r(7),g=a.addListenerToElement,v=_.parseSinglePath,m=o.deepCopy,y=function(){};y.prototype=Object.create(l.prototype,{constructor:{value:y,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace([r],e[r]);t.doUpdates()},configurable:!0},$:{get:function(){return l._updateIdMap(this),this.__idCache},set:function(){}}});var b=function(){};b.prototype=Object.create(Object.prototype),a._setComponent(y);var w=null;y._setDefaultTemplateEngine=function(e){w=e,y._setDefaultTemplateEngine=null};var A=function(e,t,r,o,i){if(r)for(var a=0;a<r.length;a++)if(s.matchTypeWithValue(r[a],e))return e;return t===String?null==e?(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <String> but get null value. Use empty string instead.'),""):(n.hasGlobalWarningListeners()&&"object"==typeof e&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <String> but got object-typed value. Force converted.'),String(e)):t===Number?isFinite(e)?Number(e):(n.hasGlobalWarningListeners()&&("number"==typeof e?n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead.'):n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.')),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead.'),[]):t===Object?"object"==typeof e?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Object> but got non-object value. Used null instead.'),null):void 0===e?null:e};i.setPropUpdater((function(e,t,r,o){var i=e[0],a=this.__propData[i];r=A(r,t.type,t.optionalTypes,this,i);var s=!t.availability||function(e,t,r,o){var i=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,o?void 0:r];return!!n.safeCallback("Availablity Controller",t,e.__methodCaller,i,e)}(this,t.availability,r,o);if(!s)return n.hasGlobalWarningListeners()&&n.triggerWarning('the new value for property "'+i+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var l=n.safeCallback("Property Filter",t.filter,this.__methodCaller,o?[]:[r,a,e],this);void 0!==l&&(r=l)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[i]&&function(e,t,r,n){if(n&&e.ownerShadowRoot){var o=e.ownerShadowRoot.__wxHost.__idPrefix;o&&(r=o+"--"+r)}var i=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),a=typeof r;"boolean"===a?r?e.__domElement.setAttribute(i,""):e.__domElement.removeAttribute(i):"object"===a?e.__domElement.setAttribute(i,JSON.stringify(r)):e.__domElement.setAttribute(i,r)}(this,i,r,t.reflectIdPrefix),r})),i.setPropObserver((function(e,t,r,o,i,a){if(o.observeAssignments||e!==t){var s=r[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&n.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),o.observer&&n.safeCallback("Property Observer",o.observer,this.__methodCaller,i?[]:[e,t,r],this),o.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&c._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var E=function(e,t,r){t.__relationLinks||(t.__relationLinks={});for(var n=t.__relationLinks[r]=[],o=0;o<e.length;o++)n.push(null)},I=function(e,t,r,o,i){for(var a=y.prototype.hasBehavior,u="parent"===o,c="shadowHost"===o,d=0;d<e.length;d++){var p,f=e[d];if(p="object"!=typeof f.target?s._list[f.target]:f.target){var h=t[d],_=null;if(!i)for(var g=c?r.ownerShadowRoot&&r.ownerShadowRoot.__wxHost:r.parentNode;g;g=c?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(l.isSelectable(g)){if(a.call(g,p)){var v;v=u?g.__relationMap.child:c?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var m=0;m<v.length;m++){var b,w=v[m];if((b="object"!=typeof w.target?s._list[w.target]:w.target)&&a.call(r,b)){_={parent:g,relation:w};break}}}if(u||_)break}t[d]=_,!h||_&&h.parent===_.parent||(n.safeCallback("Relation Unlinked Callback",h.relation.unlinked,h.parent.__methodCaller,[r.__methodCaller],h.parent),n.safeCallback("Relation Unlinked Callback",f.unlinked,r.__methodCaller,[h.parent.__methodCaller],r)),!_||h&&h.parent===_.parent||(n.safeCallback("Relation Linked Callback",_.relation.linked,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Linked Callback",f.linked,r.__methodCaller,[_.parent.__methodCaller],r)),h&&_&&h.parent===_.parent&&(n.safeCallback("Relation Link Changed Callback",_.relation.linkChanged,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Link Changed Callback",f.linkChanged,r.__methodCaller,[_.parent.__methodCaller],r)),i||_||n.safeCallback("Relation Link Failed Callback",f.linkFailed,r.__methodCaller,[],r)}}},S=function(e,t,r){if(e instanceof l){var n=0,o=null;if(e instanceof y){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,r||[]),o=e.childNodes,n=0;n<o.length;n++)S(o[n],t,r);e=e.shadowRoot}for(o=e.childNodes,n=0;n<o.length;n++)S(o[n],t,r)}};y._list={},y.register=function(e){var t=e.options||{},r=s.create(e),n=void 0!==t.classPrefix?t.classPrefix:f.classPrefix;null!=n||(n=r.is||"");var o=new b;return o._unprepared=r,o.is=e.is||"",o.behavior=r,o.protoFunc=null,o.props=null,o.template=null,o.innerEvents=null,o.generics=r.generics,o.placeholder=r.placeholder,o.initiator=r.initiator||null,o.options={availability:t.availability||f.availability,domain:t.domain||f.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:f.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:f.allowInWriteOnly),classPrefix:n,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:f.addGlobalClass),templateEngine:t.templateEngine||f.templateEngine||w,renderingMode:t.renderingMode||f.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:f.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:f.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:f.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:f.writeIdToDOM),idPrefixGenerator:t.idPrefixGenerator||f.idPrefixGenerator,separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:f.separateInnerData),innerDataExclude:t.innerDataExclude||f.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:f.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:f.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:f.virtualHost)},r._unprepared||y.prepare(o),void 0!==e.is&&(y._list[r.is]=o),o},y.isPrepared=function(e){return!e._unprepared},y.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.options,o={};t._unprepared&&s.prepare(t),r.writeOnly&&(o.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var n=t.properties[e];a[e]={type:n.type,optionalTypes:n.optionalTypes,value:n.value,filter:"function"==typeof n.filter?n.filter:null==n.filter?null:t.methods[n.filter],observer:"function"==typeof n.observer?n.observer:null==n.observer?null:t.methods[n.observer],public:n.public,availability:n.availability,observeAssignments:n.observeAssignments,reflectIdPrefix:n.reflectIdPrefix},r.writeFieldsToNode&&(o[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var r=this.__dataProxy;r.scheduleReplace([e],t),r.doUpdates()}})}));var l=function(){};e.protoFunc=l;var u=l.prototype=Object.create(y.prototype,o);if(u.is=e.is,u.__componentOptions=r,u.__using=t.using,e.dataGroupObserverTree=i._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),u.__behavior=t,r.writeFieldsToNode)for(var c in t.methods)u[c]=t.methods[c];u.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),u.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var d=t.relations,p=u.__relationMap={};for(var f in d){var h=d[f],_=h.type;p[_]?p[_].push(h):p[_]=[h]}var g=[];p.parent&&g.push((function(e){I(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),p.ancestor&&g.push((function(e){I(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),p.shadowHost&&g.push((function(e){I(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<g.length;t++)g[t].call(this,e)};var v={},m={},b=t.data,w="";for(w in b)m[w]=b[w];for(w in a){var A=a[w];n.hasGlobalWarningListeners()&&void 0!==m[w]&&n.triggerWarning('data field "'+w+'" is overwritten by property with the same name (when preparing "'+t.is+'").'),m[w]=A.value,v[w]=A.public}var E=m,S=r.separateInnerData,C=r.innerDataExclude;if(C){for(var T in E={},m)C.test(T)||(E[T]=m[T]);S||(m=E)}var O=r.templateEngine;e.template=O.create(t,m,E,r),u.__propPublic=v;var x=t._getAllListeners(),N=e.innerEvents=[];for(var R in x){for(var P=x[R],D=R.indexOf("."),L=R.slice(D+1),B=D<1?"":R.slice(0,D),k=[],M=0;M<P.length;M++){var F=P[M];"function"!=typeof F&&(F=null==F?null:t.methods[F]),k.push(F)}N.push({id:B,name:L,funcs:k})}}};var C=1,T=Object.prototype.hasOwnProperty,O=function(e,t){return function(r){return e.call(t.__methodCaller,r,t)}},x=function(e,t,r){var o={};for(var i in e){var a=e[i],s=t[i];"object"!=typeof s&&T.call(y._list,s)&&(s=y._list[s]),"object"!=typeof s&&null!=a.default&&(s=y._list[a.default]),n.hasGlobalWarningListeners()&&(s||n.triggerWarning('generic "'+i+'" is not instantiated. The default component is used instead.')),s&&(o[i]=s)}if(n.hasGlobalWarningListeners())for(var l in t)void 0===e[l]&&n.triggerWarning('generic "'+l+'" is not defined. It will be ignored.');return o},N=y._advancedCreate=function(e,t,r,o,a,s){var u=t;u._unprepared&&y.prepare(u);var c=u.options,_=!c.availability||function(e,t,r){var o=[t?t.__wxHost.__componentOptions.domain:void 0];return!!n.safeCallback("Availablity Controller",r,e,o)}(u,r,c.availability);_||(n.hasGlobalWarningListeners()&&n.triggerWarning('the component "'+(u.is||"")+'" is currently not available. The default component is used instead.'),u=y._list[""]);var v=new(0,u.protoFunc);c.idPrefixGenerator&&(v.__idPrefix=String(c.idPrefixGenerator.call(v))),v.__placeholder=function(e,t){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}(a,u.placeholder);var b=u.generics;v.__generics=b?x(b,o||{}):{};var w=null,A=f.documentBackend;if(c.virtualHost){w=null;"dom"===f.documentBackend&&(w=void 0),l.initialize(v,w,r),v.__virtual=!0}else"dom"===A?(w=h.backendExtractedDefault?new p(e):document.createElement(e),l.initialize(v,w,r)):l.initialize(v,null,r);var I=0,S=v.__externalClassAlias={};if(u.behavior.externalClasses){var T=u.behavior.externalClasses;for(I=0;I<T.length;I++)S[T[I]]=null}if(v.classList=d.create(v,S),r){var N=r.__wxHost;v.classList._setOwnerOptions(N.classList,N.__componentOptions.classPrefix,N.__componentOptions.addGlobalClass),f.writeExtraInfoToAttr&&w&&w.setAttribute("exparser:info-class-prefix",N.__componentOptions.classPrefix&&N.__componentOptions.classPrefix+"--")}f.writeExtraInfoToAttr&&w&&(v.__componentInstanceId=C++,w.setAttribute("exparser:info-component-id",v.__componentInstanceId));var R=v.__templateInstance=u.template.createInstance(v,s);v.__propData=R.data;var P=c.separateInnerData;v.__innerData=P?m(v.__propData):null;var D=c.innerDataExclude;if(P&&D){var L={};for(var B in v.__innerData)D.test(B)||(L[B]=v.__innerData[B]);v.__innerData=L}v.__dataProxy=i._advancedCreate(v,v.__propData,v.__innerData,D,u.dataGroupObserverTree,(function(e,t,r,n){v.__templateInstance.updateValues(v,P?v.__innerData:v.__propData,e,t,r,n)})),R.beforeMergeValues&&v.__dataProxy.setBeforeMergeCb((function(e,t,r){v.__templateInstance.beforeMergeValues(e,t,r)})),R.beforeUpdateValues&&v.__dataProxy.setBeforeUpdateCb((function(e){v.__templateInstance.beforeUpdateValues(v,P?v.__innerData:v.__propData,e)})),c.writeOnly&&v.__dataProxy.setHidingValue(!0),v.__idCacheDirty=!1,v.__idCache=R.idMap,null===R.slots[""]&&(R.slots[""]=w),u.options.multipleSlots?v.__slots=R.slots:(v.__singleSlot=R.slots[""]||null,v.__singleSlot&&(v.__singleSlot.__wxSlotChildren=v.childNodes)),R.shadowRoot instanceof l?(v.shadowRoot=R.shadowRoot,l._attachShadowRoot(R.shadowRoot)):w instanceof p?(v.shadowRoot=w,w.__wxHost=v,v.__domElement.asShadowRoot=R.shadowRoot,v.__wxSlotChildren=[w],w.__wxSlotParent=v):(v.shadowRoot=w,w.__wxHost=v,v.__domElement.appendChild(R.shadowRoot),v.__wxSlotChildren=[w],w.__wxSlotParent=v);for(var k=R.listeners,M=0;M<k.length;M++){var F=k[M];g(F.target,F.name,O(F.func,v))}var j=u.innerEvents;for(I=0;I<j.length;I++){var U=j[I],$=U.id?"this"===U.id?v:v.__idCache[U.id]:v.shadowRoot;if($)for(var W=U.name,q=U.funcs,H=0;H<q.length;H++)g($,W,O(q[H],v))}var G=v.__relationMap;return G.parent&&(E(G.parent,v,"parent"),v.__relationHandler=u.relationHandler),G.ancestor&&(E(G.ancestor,v,"ancestor"),v.__relationHandler=u.relationHandler),G.shadowHost&&(E(G.shadowHost,v,"shadowHost"),v.__relationHandler=u.relationHandler),v.__propertyChangeListeners=null,u.initiator&&n.safeCallback("Component Initiator",u.initiator,v.__methodCaller,[],v),v.__lifeTimeFuncs.created.call(v.__methodCaller,[],v),v};y.createWithGenerics=function(e,t,r,o){return"object"==typeof e?N(e.is,e,null,r,null,o):e?e.indexOf("-")<0&&!t?u.create(e):(n.hasGlobalWarningListeners()&&(t||T.call(y._list,e)||"virtual"===e||n.triggerWarning('component "'+e+'" is not found. The default component is used instead.')),N(e.toLowerCase(),t||T.call(y._list,e)&&y._list[e]||y._list[""],null,r,null,o)):N("virtual",y._list[""],null,r,null,o)},y.create=function(e,t,r){return y.createWithGenerics(e,t,null,r)},y.listProperties=function(e){var t=[];for(var r in e.__propPublic)void 0!==e.__propPublic[r]&&t.push(r);return t},y.listPublicProperties=function(e){var t=[];for(var r in e.__propPublic)!0===e.__propPublic[r]&&t.push(r);return t},y.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},y.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},y.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},y.getMethod=function(e,t){return e.__behavior.methods[t]},y.getComponentOptions=function(e){return e.__componentOptions},y.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},y.prototype.triggerPageLifeTime=function(e,t){S(this,e,t)},y.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},y.prototype.getRootBehavior=function(){return this.__behavior},y.prototype.getPlaceholder=function(e){return this.__placeholder[e]},y.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var r=this.__relationMap[t.type],n=0;n<r.length&&r[n]!==t;n++);return this.__relationLinks[t.type][n]?[this.__relationLinks[t.type][n].parent]:[]}return function(e,t){var r=[],n=t.type,o="child"===n,i="shadowContent"===n,a=function(n){for(var s=n.childNodes,u=0;u<s.length;u++){var c=s[u];if(c instanceof l)if(l.isSelectable(c)){var d;if(c.__relationLinks)if(d=o?c.__relationLinks.parent:i?c.__relationLinks.shadowHost:c.__relationLinks.ancestor)for(var p=0;p<d.length;p++){var f=d[p];if(f&&f.parent===e&&f.relation===t){r.push(c);break}}i&&c instanceof y&&a(c.shadowRoot),o||a(c)}else a(c)}};return a(i?e.shadowRoot:e),r}(this,t)},y.prototype.hasExternalClass=function(e){return T.call(this.__externalClassAlias,e)},y.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},y.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},y.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},y.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},y.getInnerData=function(e){return e.__innerData},y.getDataProxy=function(e){return e.__dataProxy},y.replaceWholeData=function(e,t,r){e.__propData=t,e.__dataProxy.replaceWholeData(t,r)},y.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},y.prototype.setData=function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace(v(r),e[r]);t.doUpdates()},e.exports=y},function(e,t,r){var n=r(3),o=r(5),i=null,a=null,s=Object.prototype.hasOwnProperty,l=o.deepCopy,u=function(e,t,r,n,o,i){this._data=t,this._innerData=r,this._innerDataExclude=n,this._comp=e,this._updateCb=i,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=o._propFields,this._observers=o._observers,this._observerTree=o._observerTree,this._relatedObserverTreeObj=o,this._observerStatus=[]};u._advancedCreate=function(e,t,r,n,o,i){return new u(e,t,r,n,o,i)};var c=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};u._createObserverTree=function(e){return new c(e)},u.create=function(e,t,r){var n=new c({});return new u({__methodCaller:e},t,null,null,n,r)},u.setPropUpdater=function(e){i=e},u.setPropObserver=function(e){a=e},u.prototype.replaceWholeData=function(e,t){this._data=e},u.prototype.setHidingValue=function(e){this._hidingValue=!!e},u.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},u.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var d=function(e,t,r,o){for(var i=e,a=0;a<t.length;a++){var s=t[a];if("**"===s)return n.hasGlobalWarningListeners()&&a!==t.length-1&&n.triggerWarning('"**" can only be used at the end of a path descriptor (in "'+o.is+'").'),i["**"]||(i["**"]=[]),void i["**"].push(r);i[s]||(i[s]={}),i=i[s]}i["~"]||(i["~"]=[]),i["~"].push(r)},p=function(e,t,r,n){for(var o=0;o<t.length;o++)d(e,t[o],r,n)},f=function(e,t,r){for(var n=e,o=0,i="";o<t.length&&"**"!==(i=t[o]);o++){if(!n)return;n=n[i]}var a="**"===i?n["**"]:n["~"];if(a)for(o=0;o<a.length;o++)if(a[o]===r){a.splice(o,1);break}},h=function(e,t,r){for(var n=0;n<t.length;n++)f(e,t[n],r)};c.prototype.addObserver=function(e,t,r){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},p(this._observerTree,t,n,r),n},c.prototype.removeObserver=function(e){var t=this._observers[e];h(this._observerTree,t.pathObj,e),this._observers[e]=null},c.prototype.moveObserver=function(e,t){var r=this._observers[e];h(this._observerTree,r.pathObj,e),r.pathObj=t,p(this._observerTree,t,e)},u.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var _=function(e,t,r){for(var o=[],i=r.pathObj,a=0;a<i.length;a++){for(var s=i[a],l=t,u=0;u<s.length;u++){var c=s[u];if("**"===c)break;if("object"!=typeof l){l=void 0;break}l=l[c]}o[a]=l}n.safeCallback("Data Observer",r.func,e.__methodCaller,o,e)},g=function(e,t){var r=null,n=0;for(var o in e)if("~"!==o)if("**"!==o)g(e[o],t);else for(r=e["**"],n=0;n<r.length;n++)t[r[n]]=!0;else for(r=e["~"],n=0;n<r.length;n++)t[r[n]]=!0},v=function(e,t,r){for(var n=e,o=0;o<r.length;o++){if(n["**"])for(var i=n["**"],a=0;a<i.length;a++){t[i[a]]=!0}var l=r[o];if("number"==typeof l){if(!s.call(n,l)){n=null;break}}else if(!/^[_a-zA-Z]/.test(l)||!s.call(n,l)){n=null;break}n=n[l]}n&&g(n,t)},m=function(e,t,r,n,o){for(var i=0;i<e.length;i++){var a=e[i],s=t[i];s&&s&&(t[i]=!1,_(r,o?void 0:n,a))}};u.prototype.scheduleReplace=function(e,t,r){this._changes.push([e,t,r])},u.prototype.setChanges=function(e){this._changes=e},u.prototype.getChanges=function(){return this._changes},u.prototype.doUpdates=function(e,t){var r=this._propFields,n=this._comp,o=this._hidingValue,u=this._innerDataExclude,c=!!this._doingUpdates,d=this._relatedObserverTreeObj._observerIdInc,p=null,f=null,h=null;d?(c||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),p=this._doingUpdates.changedPaths,f=this._doingUpdates.changedValues,h=this._doingUpdates.combinedChanges):(p=[],f=[],h=[]);var _=this._changes;this._changes=[];var g=[];this._beforeMergeCb&&this._beforeMergeCb(_,g,e);for(var y=0;y<_.length;y++){var b=_[y],w=b[0],A=b[1],E=A,I=void 0,S=w[0],C=!!u&&u.test(S),T=r[S];if(T&&1===w.length)I=this._data[S],A=i.call(this._comp,w,T,A,this._hidingValue),C||(this._innerData?(E=l(A),g[y]||(this._innerData[S]=E)):E=A,b[1]=E),C&&!this._innerData||(this._data[S]=A);else{var O=this._data,x=S,N=null,R=1;if(!C||this._innerData){for(;R<w.length;R++)"number"==typeof(N=w[R])&&isFinite(N)?s.call(O,x)&&O[x]instanceof Array||(O[x]=[]):(!s.call(O,x)||null===O[x]||"object"!=typeof O[x]||O[x]instanceof Array)&&(O[x]={}),O=O[x],x=N;O[x]=A}if(this._innerData&&(O=this._innerData,x=S,!C)){for(R=1;R<w.length;R++)"number"==typeof(N=w[R])&&isFinite(N)?s.call(O,x)&&O[x]instanceof Array||(O[x]=[]):(!s.call(O,x)||null===O[x]||"object"!=typeof O[x]||O[x]instanceof Array)&&(O[x]={}),O=O[x],x=N;E=l(A),g[y]||(O[x]=E),b[1]=E}}v(this._observerTree,this._observerStatus,w),C||(p.push(w),f.push([E,I,A]),h.push(b)),d&&(this._doingUpdates.changesTotal+=1)}if(!c){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),d){var P=0;do{P=this._doingUpdates.changesTotal,m(this._observers,this._observerStatus,n,this._data,o)}while(P!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(p,f,h,e);for(var D=0;D<f.length;D++){var L=f[D];if(L){var B=p[D],k=r[B[0]];k&&a.call(n,L[2],L[1],B,k,o,t)}}}},e.exports=u},function(e,t,r){var n=r(9),o=r(11),i=r(14),a=r(4),s=r(13),l=function(){};l.prototype=Object.create(n.prototype,{constructor:{value:l,writable:!0,configurable:!0}});var u=l._advancedCreate=function(e,t){var r=new l;r.is=e.toLowerCase();var u=null;if("dom"===a.documentBackend&&(u=s.backendExtractedDefault?new i(e):document.createElement(e)),n.initialize(r,u,t),r.classList=o.create(r,null),t){var c=t.__wxHost;r.classList._setOwnerOptions(c.classList,c.__componentOptions.classPrefix,c.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",c.__componentOptions.classPrefix&&c.__componentOptions.classPrefix+"--")}return r};l.create=function(e){return u(e,null)};var c=l._advancedClone=function(e,t){var r=new l;r.is=e.is;var u=null;if(e.__domElement&&(u=e.__domElement instanceof i?s.backendExtractedDefault?e.__domElement.cloneNode():i.toElement(e.__domElement):s.backendExtractedDefault?i.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1)),n._clone(r,e,u,t),r.classList=o.create(r,null),t){var c=t.__wxHost;r.classList._setOwnerOptions(c.classList,c.__componentOptions.classPrefix,c.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",c.__componentOptions.classPrefix&&c.__componentOptions.classPrefix+"--")}return r};l.cloneNode=function(e){return c(e,null)},e.exports=l},function(e,t,r){var n=r(9),o=r(4),i=function(e,t){a(this,e,t)};i.prototype=Object.create(n.prototype);var a=i.initialize=function(e,t,r){e.is=t||"";var i=null;"dom"===o.documentBackend&&(i=void 0),n.initialize(e,i,r),e.__virtual=!0};i._advancedCreate=function(e,t){return new i(e,t)},i.create=function(e){return new i(e,null)},e.exports=i},function(e,t,r){var n=r(9),o=r(15),i=r(18),a=r(17),s=r(12),l=Object.prototype.hasOwnProperty,u=function(e){i.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};u.prototype=Object.create(i.prototype),u.create=function(e){var t=new u(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var r in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[r]||(t.__childrenPropsFilter[r]=e.ownerShadowRoot.__childrenPropsFilter[r]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};u.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},u.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},u.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},u.prototype.createVirtualNode=function(e){return i._advancedCreate(e,this)},u.prototype.getCompDefByTagName=function(e){var t=this.__wxHost;return l.call(t.__using,e)?t.__using[e]:l.call(t.__generics,e)?t.__generics[e]:e},u.prototype.createComponent=function(e,t,r,n){var i=null;i=void 0===t?e:t;var a=this.__wxHost;"object"!=typeof i&&("object"!=typeof(i=this.getCompDefByTagName(i))&&(i=o._list[i]||o._list[""]));var s=function(e,t){var r={};for(var n in e){var i=e[n];"object"!=typeof i&&l.call(t.__placeholder,i)&&(i=t.__placeholder[i],l.call(t.__using,i)?i=t.__using[i]:l.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),r[n]=i)}return r}(r,a);return r&&(r=function(e,t){var r={};for(var n in e){var i=e[n];"object"!=typeof i&&(l.call(t.__using,i)?i=t.__using[i]:l.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),r[n]=i)}return r}(r,a)),"object"==typeof e&&(e=i.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",r=0;r<8;r++){var n=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[n]}return t}()),a.__componentOptions.writeOnly&&!i.options.allowInWriteOnly&&(i=o._list[""]),o._advancedCreate(e,i,this,r,s,n)},u.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!(l.call(t.__using,e)||l.call(t.__placeholder,e)||l.call(t.__generics,e)||l.call(t.__placeholder,e))},u.prototype.getHostNode=function(){return this.__wxHost},u.prototype.getElementById=function(e){return n._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=u},function(e,t,r){var n=r(9),o=r(12),i=function(){};i.create=function(e,t,r){var a=new i;if(!(e instanceof n||e instanceof o))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=r||n;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,r,n,o){if(n<0&&e instanceof t&&!1===o(e))return!1;var i=r&&e.__wxSlotChildren||e.childNodes;if(i)for(var s=0;s<i.length;s++)if(!1===a(i[s],t,r,n,o))return!1;return!(n>0&&e instanceof t&&!1===o(e))};i.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,r,n){for(;e;e=r&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===n(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=i},function(e,t,r){var n=r(4),o=r(3),i=r(9),a=r(17),s=r(12),l=r(19),u=r(15),c=r(22),d=r(23),p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var f=function(){};f.prototype=Object.create(Object.prototype,{constructor:{value:f,writable:!0,configurable:!0}});var h=null;p.precompiler=h,p.htmlParser=null;var _=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},g=Object.prototype.hasOwnProperty,v=function(e,t){if(null!==e&&"object"==typeof e&&g.call(e,t))return e[t]},m=function(e,t,r,n){if(g.call(t,r)){var i=t[r];if("function"==typeof i)return o.safeCallback("Template Method",i,e,n)}},y=function(e,t){return[{t:1,n:"slot",a:[],c:[],p:null}]},b={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},w=function(e,t,r){e.classList.toggle(t,!!r)},A=function(e,t,r){e[t]=r},E=function(e,t,r){var n=e.__dataProxy;n.scheduleReplace([t],r),n.doUpdates()},I=function(e,t,r){e.class=r},S=function(e,t,r){e.setAttribute("style",r)},C=function(e,t,r){e.setAttribute("class",r)},T=function(e,t,r){e.textContent=r},O=function(e,t,r){e.dataset||(e.dataset={}),e.dataset[t]=r},x={$:function(e,t,r){!0===r?e.setAttribute(t,""):!1===r||null==r?e.removeAttribute(t):e.setAttribute(t,r)},":":A,c:w,s:function(e,t,r){var n=e.style;n&&(n[t]=r)},d:O},N=function(e,t,r){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};p.create=function(e,t,r,n){var i=void 0===e.template?N:e.template,a=i;"function"!=typeof i&&("undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node?a=p.precompileAndGetCreator(i):(o.hasGlobalWarningListeners()&&o.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),a=y));var s=Object.create(p.prototype);return s._initValuesJSON=JSON.stringify(r),s._dataJSON=t!==r?JSON.stringify(t):null,s._tagTreeRoot=R(a,r,e.methods,n),s._renderingMode=n.renderingMode,s};var R=function(e,t,r,o){var i="native"===o.renderingMode,s=i,l=!1,u=Object.create(null);i&&!n.hasDOMBackend&&(e=y);var c={},p=e(v,m,r),f=function(e){for(var r=0;r<e.length;r++){var n=e[r];if(3!==n.t){var o=n.n,u=!(i||"string"==typeof o&&o.indexOf("-")<0);"slot"===o&&""===n.sn&&(l=!0),n.n=o;var p=n.st;p&&p.e&&(p.o=S,s&&(p.v=p.e(t,c,null)));var h=n.cl;h&&h.e&&(h.o=i?C:I,s&&(h.v=h.e(t,c,null)));var g=null;u||(n.p=g=i?document.createElement(n.n):a.create(n.n),p&&void 0!==p.v&&g.setAttribute("style",p.v),i&&h&&void 0!==h.v&&g.setAttribute("class",h.v));for(var v=n.a,m=0;m<v.length;m++){var y=v[m];if(y.d)i||d[y.n].register(y.n,y,n);else{i||("bind"===y.n.slice(0,4)?(y.evCatch=!1,y.ev=_(y.n.slice(4)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))):"catch"===y.n.slice(0,5)&&(y.evCatch=!0,y.ev=_(y.n.slice(5)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))));var b=y.o;if(u)b?y.o="&"===b?x[":"]:x[b]:(y.o=x[":"],y.n=_(y.n)),y.o===A&&(y.o=E),s&&y.e&&(y.v=y.e(t,c,null));else if(!y.ev){var O=x;y.o=b?"&"===b?O[":"]:O[b]:O.$,s?(y.e&&(y.v=y.e(t,c,null)),(y.o!==w||i)&&y.o(g,y.n,y.v)):y.e||y.o(g,y.n,y.v)}}}f(n.c),i&&(1!==n.c.length||void 0===n.c[0].sn||n.c[0].compressed||(n.sn=n.c[0].sn,n.compressed=!0,n.c.pop()))}else n.e&&(n.o=T,n.c=s?n.e(t,c,null):"")}};return f(p,u,!0),i&&(l||p.push(b),1!==p.length||""!==p[0].sn||p[0].compressed||p.pop()),p},P=function(e,t){return function(r){if(this[e](r),t)return!1}},D=function(e,t,r,n,o,a,s,l){for(var p=null,f=0,h=null,_=0;_<e.length;_++){var g=s,v=e[_];if(3===v.t)p=v.e?t.createTextNode(v.e(n,o,null)):t.createTextNode(v.c),v.e&&c.addBindings(a,g,v.b,p,v),i.appendChild(r,p);else{var m=v.cl,y=v.st,b=v.a,I=!1;for(f=0;f<b.length;f++)if((h=b[f]).d){var S=d[h.n].create(h.n,h,v,n,o,a,g,l,t,D,r);if(d[h.n].requireBlock){p=S,i.appendChild(r,p),I=!0;break}}if(I)continue;if(v.v)p=t.createVirtualNode(v.n);else if(v.p){for(p=t.cloneNativeNode(v.p),f=0;f<b.length;f++)(h=b[f]).d||(h.ev?l(p,h.ev,h.v,h.evCatch):h.o===A?p.__domElement&&(h.o(p.__domElement,h.n,h.e(n,o,null)),c.addBindings(a,g,h.b,p.__domElement,h)):(h.e&&h.o(p,h.n,h.e(n,o,null)),(h.e||h.o===w||h.o===O)&&c.addBindings(a,g,h.b,p,h)));y&&y.e&&(p.setAttribute("style",y.e(n,o,null)),c.addBindings(a,g,y.b,p,y))}else{if(v.cpf){var C={},T=t.__wxHost;for(var x in v.cpf)!function(e){var t=v.cpf[e];C[e]=T.__behavior.methods[t]}(x);t.__childrenPropsFilter=C}for(p=t.createComponent(v.n,void 0,v.g,void 0),f=0;f<b.length;f++)if(!(h=b[f]).d){var N=h.v;h.o===E&&u.hasPublicProperty(p,h.n)?(h.e&&(N=h.e(n,o,null),c.addBindings(a,g,h.b,p,h)),h.e?E(p,h.n,N):p.__behavior.properties[h.n].type===Boolean?E(p,h.n,!0):E(p,h.n,N)):h.ev?l(p,h.ev,N,h.evCatch):h.o!==E&&(h.e&&(N=h.e(n,o,null),c.addBindings(a,g,h.b,p,h)),h.o(p,h.n,N))}y&&(y.e?(p.__domElement.setAttribute("style",y.e(n,o,null)),c.addBindings(a,g,y.b,p.__domElement,y)):p.__domElement.setAttribute("style",y.v))}v.id&&(p.id=v.id),m&&(m.e?p.class=m.e(n,o,null):p.class=m.v,m.o&&c.addBindings(a,g,m.b,p,m)),v.sl&&(p.slot=v.sl),void 0!==v.sn&&i.setSlotName(p,v.sn),i.appendChild(r,p),D(v.c,t,p,n,o,a,g,l)}}},L=function(e,t,r){for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof s||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(r[i.__slotName]=i),L(i,t,r))}},B=function(e,t,r,n,o,i){for(var a=null,s=0,l=null,u=0;u<e.length;u++){var d=e[u];if(void 0===d.n)a=document.createTextNode(d.c),d.e&&c.addBindings(o,i,d.b,a,d),t.appendChild(a);else{var p=d.cl,f=d.st,h=d.a;for(a=d.v?document.createElement("virtual"):document.importNode?document.importNode(d.p,!1):d.p.cloneNode(!1),s=0;s<h.length;s++)(l=h[s]).e&&c.addBindings(o,i,l.b,a,l);t.appendChild(a),d.id&&(r[d.id]=a),p&&p.e&&c.addBindings(o,i,p.b,a,p),f&&f.e&&c.addBindings(o,i,f.b,a,f),void 0!==d.sn&&(n[d.sn]=a),B(d.c,a,r,n,o,i)}}};p.prototype.createInstance=function(e){var t=Object.create(f.prototype),r=JSON.parse(this._initValuesJSON),o=null===this._dataJSON?r:JSON.parse(this._dataJSON),i=Object.create(null),a=Object.create(null),s=[],u=c.create("",null,null,null,null,[],(function(e,t){})),d=null;if("native"===this._renderingMode)"dom"===n.documentBackend&&(d=document.createDocumentFragment()),B(this._tagTreeRoot,d,i,a,u,{}),a[""]||(a[""]=null);else{if(d=l.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(d.__childrenPropsFilter)for(var p in e.ownerShadowRoot.__childrenPropsFilter)d.__childrenPropsFilter[p]||(d.__childrenPropsFilter[p]=e.ownerShadowRoot.__childrenPropsFilter[p]);else d.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;D(this._tagTreeRoot,d,d,r,{},u,{},(function(e,t,r,n){d.__wxHost?e.addListener(t,P(r,n).bind(d.__wxHost)):s.push({target:e,name:t,func:P(r,n)})})),L(d,i,a)}return t.data=o,t.shadowRoot=d,t.idMap=i,t.slots=a,t.listeners=s,t._topScope=u,t},f.prototype.updateValues=function(e,t,r){for(var n=i.getMethodCaller(e),o=0;o<r.length;o++){var a=r[o];c.updateBinding(this._topScope,a,t,{},n)}},e.exports=p},function(e,t){var r={create:function(e,t,r,o,i,a,s){for(var l={inc:1,name:e,exp:o,lp:i,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},u=0;u<a.length;u++){var c=a[u];null===c[0]?n(t,c,null,l):n(r[c[0]],c,null,l)}return l},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return n(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var r in e)t[r]={inc:1,linked:e[r],scopes:{},targets:{},children:null,__scopeBinded:[]},n(e[r],[null],null,t[r]);return t}},n=r.addBinding=function(e,t,r,n){for(var o=e,i=1;i<t.length;i++){var a=t[i];o.children||(o.children=Object.create(null));var s=o.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),o=s[a]}var l=e.inc++;return r?o.targets[l]=[r,n]:(o.scopes[l]=n,n.__scopeBinded.push([o,l])),l};r.addBindings=function(e,t,r,o,i){for(var a=0;a<r.length;a++){var s=r[a];s[0]?n(t[s[0]],s,o,i):n(e,s,o,i)}},r.updateLvaluePath=function(e,t){e.lp=t},r.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,r=0;r<t.length;r++){var n=t[r];delete n[0].scopes[n[1]]}};var o=function(e,t,r,n,o){if(e.linked)i(e,t,r,n,o);else{var a=n[e.name];n[e.name]=e.exp(r,n,o),i(e,t,r,n,o),n[e.name]=a}},i=r.updateBinding=function(e,t,r,n,i){for(var a=e,s=0,l=0;l<t.length;l++){for(s in a.scopes)o(a.scopes[s],t,r,n,i);var u=t[l];if(!a.children)return;var c=a.children;if(!c[u])return;a=c[u]}var d=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(r,n,i))}for(s in e.scopes)o(e.scopes[s],[],r,n,i);for(s in e.children)d(e.children[s])};d(a)};e.exports=r},function(e,t,r){e.exports={if:r(24),elif:r(24),else:r(24),for:r(26),key:r(27),"for-index":r(28),"for-item":r(29),alias:r(30)}},function(e,t,r){var n=r(22),o=r(25).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,r){},create:function(e,t,r,o,i,a,s,l,u,c,d){var p=u.createVirtualNode("wx:"+e);p.__wxIfCondValue=!0,p.__wxIfNextNode=null,p.__wxIfHasTrueCond=!0;var f=null;"if"!==e&&("wx:if"!==(f=d.childNodes[d.childNodes.length-1]).is&&"wx:elif"!==f.is?f=null:f.__wxIfNextNode=p),r.id&&(p.id=r.id);var h=p.__wxIfUpdateNode=function(){var e=p.__wxIfCondValue;if(f&&f.__wxIfHasTrueCond&&(e=!1),e&&!p.childNodes.length){var t=n.proxyTopScope(a),d=n.proxySubScopes(s);p.__wxTopScope=t,p.__wxSubScopes=d,c(r.c,u,p,o,i,t,d,l)}else if(!e&&p.childNodes.length){for(var h in n.removeBindingsForScope(p.__wxTopScope),p.__wxSubScopes)n.removeBindingsForScope(p.__wxSubScopes[h]);for(;p.childNodes.length;)p.removeChild(p.childNodes[0])}p.__wxIfNextNode&&p.__wxIfNextNode.__wxIfUpdateNode()},_=function(e){p.__wxIfCondValue=!!e,p.__wxIfHasTrueCond=p.__wxIfCondValue||f&&f.__wxIfHasTrueCond,h()};return"else"===e?_(!0):(n.addBindings(a,s,t.b,p,{e:t.d,o:function(e,t,r){_(r)}}),_(t.d(o,i,null))),p}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var r=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},n=t.STRING_ESCAPE_MAP={},o="";for(var i in r)n[r[i]]=i,o+=r[i];t.STRING_ESCAPE_REGEXP=new RegExp("["+o+"]","g")},function(e,t,r){var n=(r(18),r(22)),o=r(25).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,r){},create:function(e,t,r,o,i,a,s,l,u,c){var d=r._wxForIndex||"index",p=r._wxForItem||"item",f=r._wxKey,h=u.createVirtualNode("wx:for:list");r.id&&(h.id=r.id),n.create("",a,s,(function(e,r,n){var o=t.d(e,r,null);return y(o,e,r,n),o}),t.l,t.b);var _=function(e,t,o,i,f){var _=u.createVirtualNode("wx:for:item"),g=n.proxyTopScope(a),v=n.proxySubScopes(s);_.__wxTopScope=g,_.__wxSubScopes=v,_.__wxForToRemove=!1,_.__wxForKeyStr="";var m=n.create(d,g,v,null,null,[]),y=n.create(p,g,v,null,[o],[]);return v[d]=m,v[p]=y,t[d]=o,t[p]=i,c(r.c,u,_,e,t,g,v,l),void 0===f?h.appendChild(_):h.insertBefore(_,f),_},g=function(e,t,r,i,a,s){var l=e.__wxSubScopes[p];n.updateLvaluePath(l,[i]),a&&(s?h.insertBefore(e,s):h.appendChild(e));var u=e.__wxSubScopes[d];r[d]=i,n.updateBinding(u,[],o,r,t)},v=function(e,t,r,o,i,a){o[p]=i,n.updateBinding(e.__wxSubScopes[p],t,r,o,a)},m=function(e){for(var t in n.removeBindingsForScope(e.__wxTopScope),h.__wxSubScopes)n.removeBindingsForScope(e.__wxSubScopes[t]);h.removeChild(e)},y=function(e,t,r,n){var o="",i=e;"object"==typeof e&&null!==e||(i=[]);var a={};for(o in r)a[o]=r[o];var s=0;if(f){var l=[],u=e instanceof Array,c=[];if(!u){var d=i;for(o in i=[],d)i.push(d[o]),c.push(o)}for(s=0;s<i.length;s++)l.push(String(i[s][f]));if(0===i.length)for(;h.childNodes.length;)m(h.childNodes[0]);else{var p=Object.create(null),y=Object.create(null),b=h.childNodes,w=null,A="";for(s=0;s<b.length;s++)p[A=(w=b[s]).__wxForKeyStr]>=0?(m(w),s--):(p[A]=s,y[A]=w,w.__wxForToRemove=!0);var E=-1,I=0,S=1,C=[];for((I=p[i[0][f]])>=0||(I=-1),b[I]&&(b[I].__wxForToRemove=!1),s=1;s<i.length;s++)(S=p[i[s][f]])>=0&&(E<I&&(I<S||E>S)&&(C.push(b[I]),E=I),b[I=S]&&(b[I].__wxForToRemove=!1));for(E<I&&C.push(b[I]),s=0;s<b.length;s++)(w=b[s]).__wxForToRemove&&(m(w),s--);var T=C.shift(),O=0;for(s=0;s<i.length;s++){var x=i[s],N=y[x[f]];if(y[x[f]]=null,N){var R=!0;if(N===T){for(;b[O]!==T;)O++;O++,T=C.shift(),R=!1}g(w=N,n,a,u?s:c[s],R,b[O]),R&&b[O]===w&&O++,v(w,[],t,a,i[s],n)}else w=_(t,a,u?s:c[s],i[s],b[O]),O++,w.__wxForKeyStr=String(x[f])}}}else{for(;h.childNodes.length;)m(h.childNodes[0]);if(e instanceof Array)for(s=0;s<i.length;s++)_(t,a,s,i[s]);else for(o in i)_(t,a,o,i[o])}};return y(t.d(o,i,null),o,i,null),h}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,r){r._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,r){r._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,r){r._wxForItem=t.d},create:function(){}}},function(e,t,r){var n=r(22),o=r(25).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,r){},create:function(e,t,r,o,i,a,s,l,u,c){var d=t.s[0],p=n.create(d,a,s,t.d,t.l,t.b),f={},h="";for(h in s)f[h]=s[h];f[d]=p;var _={};for(h in i)_[h]=i[h];_[d]=t.d(o,i,null);var g=u.createVirtualNode("wx:alias");return r.id&&(g.id=r.id),c(r.c,u,g,o,_,a,f,l),g}}}]),D,L;(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{Behavior:()=>la,Component:()=>ma,CustomComponent:()=>ha,Page:()=>ya,SCL_TABBAR_VIEW_ID:()=>C,addView:()=>cs,attachView:()=>ds,beginTapMark:()=>Rn,checkTapMark:()=>Dn,componentAliases:()=>ui,componentExists:()=>ss,componentPathToAlias:()=>ci,convertComponentAliasToRoute:()=>ko,convertRouteToComponentAlias:()=>Bo,destroyCustomTabBarManager:()=>R,destroyDataThreadTabBar:()=>fs,dispatchViewRoute:()=>Oi,doDataThreadReplacePlaceholder:()=>ta,enableUpdateWxAppCode:()=>Ds,endTapMark:()=>Nn,endViewInfoCallback:()=>Ai,getAllPluginSubPackagePrefix:()=>Mo,getDomTreeByPageId:()=>Ba,getDomainByPluginId:()=>di,getEntryFile:()=>Vo,getGenericsByPath:()=>Gi,getNodeById:()=>Ts,getNodeId:()=>Os,getOwnerPluginAppId:()=>ra,getPageId:()=>Ps,getPlaceholderByPath:()=>Qi,getPluginRoutePrefix:()=>jo,getPluginSubPackagePrefix:()=>Fo,getRendererByPath:()=>zi,getRootCompName:()=>Rs,getRootNode:()=>xs,getRootNodeId:()=>Ns,getSubPackagePlugin:()=>Yo,getUsingByPath:()=>qi,getWorkletIdByName:()=>Sa,getXrFrameTouchEventBubbleByPath:()=>Ki,hideTabBar:()=>W,initBannedMap:()=>Xe,initViewThread:()=>Ra,injectWxss:()=>ea,isLazyLoad:()=>Vi,isSubPackageIndependent:()=>Wo,isViewAttached:()=>hs,matchSubPackageName:()=>$o,mergeData:()=>ks,newPage:()=>La,newTabBar:()=>Da,onComponentDef:()=>Wa,onLazyLoadError:()=>Ue,onMainPageFrameReady:()=>Ti,prepareSubPackagesStyle:()=>$a,processPluginPageGenerics:()=>na,publishDomainComponents:()=>fi,removeView:()=>ps,requestViewInfo:()=>wi,restoreView:()=>si,runComponentDef:()=>za,saveView:()=>ai,sendTabBarCreationRequest:()=>es,setGlobalUpdatePerformanceListener:()=>So,setLazyLoadTimeout:()=>Me,setModelValueData:()=>Yi,setPageRootCompPath:()=>us,setPageType:()=>ye,showTabBar:()=>$,showTabBarByRenderer:()=>q,triggerGenerateFuncReady:()=>Zi,updateWxAppCode:()=>Ls,wrapTapMark:()=>Pn,xrFrameTouchEvent:()=>gs});var n=void 0!==P?P:{},a="none";"undefined"!=typeof __useSclExparser__&&__useSclExparser__&&void 0!==f&&(a="scl"),"undefined"!=typeof __skylineEngine__&&(a="skyline"),"undefined"!=typeof xrFrame&&(a="xr-frame"),"scl"===a?n=f.exparser||n||{}:"skyline"===a?n=__skylineEngine__.getRuntime().getExparser()||n||{}:"xr-frame"===a&&(n=xrFrame.getExparser()||n||{});var c=()=>n,d=()=>__skylineEngine__.getRuntime(),p=()=>a,g=c(),v={WX_EVENT:11,REQUEST_SAVE:12,COMPONENT_DEF:21,SAVE_STATE:22,RESTORE_STATE:23,FLOW_INITIAL_RENDERING_CACHE:24,FLOW_CLEAR_INITIAL_RENDERING_CACHE:25,FLOW_SET_SUBPACKAGE_LOADED:26,SET_DATA_CALLBACK:32,FLOW_SET_DATA:33,FLUSH_BLOCKED:43,FLOW_GROUP:41,FLOW_GROUP_END:42,FLOW_DEPTH:2,FLOW_INITIAL_CREATION:3,FLOW_UPDATE:6,FLOW_DATA_OBSERVER:8,FLOW_APPLY_PROPERTY:4,FLOW_MINIPULATE_CHILD:7,FLOW_CREATE_NODE:5,FLOW_REPEAT:9,FLOW_VIEW_INFO:63,REQUEST_TAB:51,COMPONENT_DEF_TAB:52,FLOW_CREATE_TAB:53,DESTROY_TAB:54,FLOW_DESTROY_PAGE:55,SHOW_TAB:56,HIDE_TAB:57,SCL_CONTEXT_READY:58,REQUEST_BROADCAST_VIEW_ID:61,RESPONSE_BROADCAST_VIEW_ID:62,BANNING_MAP:90,CALL_METHOD_FROM_WXS:50,RESPONSE_VIEW_INFO:64,MODEL_VALUE_CHANGE:65,FLOW_SET_NODE_ANIMATION_INFO:100,ANIMATION_TRANSITION_END:101,FLOW_CLEAR_NODE_ANIMATION_INFO:102,CLEAR_ANIMATION_COMPLETE:103,FLOW_SET_NODE_NEXT_ANIMATION_INFO:104,LOAD_COMPONENT_DEF:110,FLOW_WAIT_COMPONENT:112,FLOW_REPLACE_PLACEHOLDER:113,FLOW_PEND_PLACEHOLDER_REPLACEMENT:114,FLOW_COMPONENT_DEF_ADD:120,FLOW_INJECT_SUBPACKAGE:121,FLOW_INJECT_COMPONENT:122,FLOW_HOT_UPDATE:900,FLOW_HOT_UPDATE_CHILD:901,FLOW_HOT_UPDATE_RESET:902,UPDATE_COMPONENT_DEF:903,UPDATE_PERFORMANCE_STAT:800,ENABLE_UPDATE_PERFORMANCE_STAT:801,DISABLE_UPDATE_PERFORMANCE_STAT:802,ENABLE_GLOBAL_UPDATE_PERFORMANCE_STAT:803,REQUEST_WORKLET_METHOD:200,RESPONSE_WORKLET_METHOD:201,FLOW_SET_NODE_ANIMATED_STYLE:202,FLOW_CLEAR_NODE_ANIMATED_STYLE:203,APPLY_NODE_ANIMATED_STYLE_END:204,CLEAR_NODE_ANIMATED_STYLE_END:205,XR_FRAME_CANVAS_CREATED:300,XR_FRAME_CANVAS_READY:301,FLOW_SET_ROOT_PROPERTIES:302,XR_FRAME_COMP_OPTIONS:303,LOAD_APP_PKG:1e3,LOAD_APP_PKG_READY:1001},b={};Object.keys(v).forEach((e=>{b[v[e]]=e}));var w=e=>b[e]||`UNKNOWN_EVENT_${e}`,A=0,E=1,I=2,S=4294967297,C=4294967298,T="custom-tab-bar/index";class O{constructor(){this.__instances=void 0,this.__instances=new Map}add(e,t,r){this.__instances.set(e,{tm:r,renderType:t})}get(e){var t=this.__instances.get(e);return t||s.warn(`[customTabBarManager] pageId: ${e} TabBar is not exists`),t}remove(e){this.__instances.delete(e)}has(e){return this.__instances.has(e)}getRenderType(e){var t;return(null===(t=this.__instances.get(e))||void 0===t?void 0:t.renderType)||"webview"}}O.MANAGER=void 0;var N=()=>(O.MANAGER||(O.MANAGER=new O),O.MANAGER),R=()=>{O.MANAGER=null},B=e=>{var t,r,n,o,i=(null===(t=m)||void 0===t||null===(r=t.tabBar)||void 0===r?void 0:r.renderer)||"webview";if(Array.isArray(null===(n=m)||void 0===n||null===(o=n.tabBar)||void 0===o?void 0:o.list))for(var a=m.tabBar.list,l=0;l<a.length;l++){var u=a[l];if(u.pagePath===`${e}.html`){"string"==typeof u.renderer&&(i=u.renderer);break}}return s.info(`[CustomTabBar] getCustomTabBarRenderer pagePath: ${e}, renderer: ${i}`),"cover-view"===i?"scl":i||"webview"},k=e=>{var t,r;if(Array.isArray(null===(t=m)||void 0===t||null===(r=t.tabBar)||void 0===r?void 0:r.list))for(var n=m.tabBar.list,o=0;o<n.length;o++){var i=n[o];if(i.pagePath===`${e}.html`)return!i.hide}return!1},M=()=>{var e,t;return!(null===(e=m)||void 0===e||null===(t=e.tabBar)||void 0===t||!t.custom)},F=(e,t,r)=>{var n,o,i=!0,a=null===(n=m)||void 0===n||null===(o=n.tabBar)||void 0===o?void 0:o.list;Array.isArray(a)&&(a.map((e=>null==e?void 0:e.pagePath)).filter((e=>!!e)).indexOf(`${t}.html`)>=0&&(i=!1));s.info(`[checkPageIncludingTabBar] rootCompName=${t}, viewId=${r}, needRemove=${i}`),i&&(e.tabDestroyed=!0,W(r))},j=()=>{var e,t,r=p();"skyline"===r?null===(e=window.__TAB_BAR__)||void 0===e||null===(t=e.__domElement)||void 0===t||t.setStyle("pointer-events: none; display: flex;"):"scl"===r&&f.showTabBarContainer()},U=()=>{var e,t,r=p();"skyline"===r?null===(e=window.__TAB_BAR__)||void 0===e||null===(t=e.__domElement)||void 0===t||t.setStyle("pointer-events: none; display: none;"):"scl"===r?f.hideTabBarContainer():"webview"===r&&window.__TAB_BAR__&&window.__TAB_BAR__.parentNode.removeChild(window.__TAB_BAR__)},$=e=>{var t=N().get(e),r=null==t?void 0:t.renderType;ge(v.SHOW_TAB,{},"skyline"===r?S:"scl"===r?C:e)},W=e=>{var t=N().get(e),r=null==t?void 0:t.renderType;"webview"!==r?ge(v.HIDE_TAB,{},"skyline"===r?S:"scl"===r?C:e):ge(v.DESTROY_TAB,[],e)},q=e=>{var t="skyline"===e?S:"scl"===e?C:void 0;void 0!==t&&ge(v.SHOW_TAB,{},t)},H=c(),G=/^[-+a-z]+:\/\//i,Q=function(e,t){if(G.test(t))return t;var r=e.match(G),n="";r&&(n=r[0],e=e.slice(n.length)),0===t.indexOf("/")&&(e="");var o=e.split("/");o.pop();for(var i=t.split("/");i.length;){var a=i.shift();""!==a&&"."!==a&&(".."!==a?o.push(a):o.pop())}return n+o.join("/")},z=t=>{var r=("undefined"==typeof window?e.g:window).__wcc_version_info__;if(r)return r[t]},K=()=>Math.floor(4294967296*(1+Math.random())).toString(16).slice(1),Y=e=>Object.keys(e).map((t=>e[t])),V=(e,t,r)=>{e instanceof H.Component&&(t>0&&r(e),t&&e.shadowRoot instanceof H.Element&&V(e.shadowRoot,t,r),t<0&&r(e));for(var n=e.childNodes,o=0;o<n.length;o++)n[o]instanceof H.Element&&V(n[o],t,r)},J=e=>{if(null==e)return e;var t=typeof e;if("string"===t||"number"===t||"boolean"===t)return e;if(Array.isArray(e)){for(var r=Array(e.length),n=0;n<e.length;++n)r[n]=J(e[n]),void 0===r[n]&&(r[n]=null);return r}if("object"===t){for(var o={},i=Object.keys(e),a=0;a<i.length;++a)o[i[a]]=J(e[i[a]]),void 0===o[i[a]]&&delete o[i[a]];return o}},X=e=>{var t={};return e.forEach((e=>{t[e]={ok:!1,callbacks:[]}})),{notify(e){t[e]&&(t[e].ok=!0,t[e].callbacks.forEach((e=>e())),t[e].callbacks=[])},on(e,r){t[e]&&(t[e].ok?r():t[e].callbacks.push(r))},isNotified:e=>t[e]&&t[e].ok}},Z={},ee=-1,te=null,re=!1,ne=()=>re,oe=[],ie=null,ae=null,se=!1,le=()=>u,ue={[S]:"skyline",[C]:"scl"},ce={},de={},pe=new Set,fe=(e,t)=>{var r="webview"===ue[t]||"scl"===ue[t]?e:"xr-frame"===ue[t]?[...e]:e.map((e=>J(e))),n=r.shift();if(""===n)return ee=t,void(te&&te(t));t=t||0,"webview"===p()&&(t=0),he(t,n,r)},he=(e,t,r)=>{var n,o=null;if(Z[e]&&(o=Z[e][t]),!o&&Z.$GLOBAL){if(pe.has(e))return;o=Z.$GLOBAL[t]}if(!(o||"skyline"!==p()||null!==(n=de[e])&&void 0!==n&&n.isReady))return de[e]||(de[e]={queue:[],isReady:!1}),void de[e].queue.push({ev:t,data:r});o?o(r,t,e):s.error(`[VD] recvData no handler for event=${t}, pageId=${e}`)},_e=()=>{ae&&(ae=clearTimeout(ae)),oe.length&&ce[ie].vdSyncBatch(oe,ie&&[ie]),ie=null,oe=[],se=!1},ge=(e,t,r,n)=>(t=[e].concat(t),"webview"!==ue[r]?ce[r]?void ce[r].vdSync(t,r&&[r]):void s.warn(`pageId: ${r}, ev: ${e}. Ignore sendData cause Page is removed. `):(ue[r],!se||n?(_e(),se=!0,void ce[r].vdSync(t,r&&[r])):(ie!==r&&_e(),ie=r,oe.push(t),se=!0,void(ae||(ae=setTimeout((()=>{ae=null,_e()}),15)))))),ve=e=>{e.__registered||(e.__registered=!0,e.onVdSync(((e,t)=>{void 0===ue[t]&&ye(t,"webview"),fe(e,t)})),e.onVdSyncBatch(((e,t)=>{void 0===ue[t]&&ye(t,"webview");for(var r=0;r<e.length;r++)fe(e[r],t)})))},me=()=>{ve(le()._virtualDOMTunnel)};void 0!==r&&r?x.onInitReady(me):me();var ye=(e,t)=>{var r;null!==(r=ce[e])&&void 0!==r&&r.__registered&&ue[e]===t||(ue[e]=t,ce[e]=le()._virtualDOMTunnel)},be=e=>ue[e],we=(e,t,r)=>{if(void 0!==r){if(""===e)return te=t,void(ee>=0&&te(ee));Z[r=r||0]||(Z[r]={}),Z[r][e]=t}},Ae=e=>{delete Z[e]},Ee={},Ie=(e,t)=>{Ee[e]=t},Se=e=>{Object.keys(Ee).forEach((t=>{we(t,Ee[t],e)})),de[e]&&(de[e].isReady=!0,de[e].queue.forEach((({ev:t,data:r})=>{he(e,t,r)})),de[e].queue=[])},Ce=e=>(t,r={})=>{if(0===t.length)return 0;s.info(`[Lazyload] loadJsFileTo${e}`);var n=Date.now(),o=x.loadJsFiles(t,null,{reportKey:void 0,isPageInitialScript:r.isPageInitialScript}),i=Date.now();return s.info(`[Lazyload] loadJsFileTo${e} done, cost: ${i-n}ms`),{cost:i-n,res:o}},Te=Ce("AppService"),Oe=(Ce("RenderContext"),new Set),xe=!1,Ne=[],Re=(Ce("SclContext"),(e,t,r=!1)=>{if(xe)Ne.push([e,t,r]);else{var n=e.filter((e=>Oe.has(e))),o=r?e:e.filter((e=>!Oe.has(e)));if(n.length>0&&s.info("[VD] loadJsFileToWebview ignored loaded: "+n.join(",")),0===o.length)return s.info("[VD] loadJsFileToWebview no files to load, return"),void t(0);o.forEach((e=>Oe.add(e)));var i={paths:o},a=void 0;"android"===m.platform?i.key=a:i.options={reportKey:a},xe=!0;var l=Date.now();h.invoke("loadJsFiles",i,(()=>{var e=Date.now();if(t(e-l),xe=!1,Ne.length>0){var r=Ne.shift();Re(...r)}}))}}),Pe=(e,t)=>{var r=Date.now();u.loadSubpackage({name:e,success(){var n=Date.now();t({cost:n-r,res:"ok",pkg:e}),s.info(`[VD] loadSubPackage ${e} success, cost ${n-r}`)},fail(){var n=Date.now();t({cost:n-r,res:"fail",pkg:e}),s.info(`[VD] loadSubPackage ${e} fail, cost ${n-r}`)},complete(t){s.info("[VD] loadSubpackage "+e+": ",t)}})},De=(e,t)=>{s.info("[VD] injectSubPackages: "+e.join(", ")),h.invoke("injectSubPackages",{subPackages:e},t)},Le=new Set,Be=(e,t)=>{var r=e.filter((e=>Le.has(e))),n=e.filter((e=>!Le.has(e)));if(r.length>0&&s.info(`[loadComponentsInDevTool] ignored loaded: [${r.length} comps]`),0===n.length)return s.info("[loadComponentsInDevTool] no comps to load, return"),0;n.forEach((e=>Le.add(e)));var o=Date.now();return h.invoke("loadComponents",{comps:n},(()=>{})),Date.now()-o},ke=5e3,Me=e=>{ke=e},Fe=()=>{},je=e=>{Fe(e)},Ue=e=>{Fe=e},$e=c();const We=class{constructor(){this._idNodeMap={}}getAll(){return this._idNodeMap}getNodeById(e){return this._idNodeMap[e]}getNodeId(e){return e.__wxTmplId}allocNodeId(e,t){var r=t||K();return e.__wxTmplId=r,this._idNodeMap[e.__wxTmplId]=e,r}addNode(){}removeNode(e){if(e.__wxTmplId&&delete this._idNodeMap[e.__wxTmplId],e.childNodes)for(var t=0;t<e.childNodes.length;t++)this.removeNode(e.childNodes[t]);e.shadowRoot instanceof $e.Element&&this.removeNode(e.shadowRoot)}},qe=_.asyncToGenerator;var He=e.n(qe),Ge=c(),Qe={},ze=1,Ke=(e,t,r)=>{void 0===e.__resizers?(e.__resizers=[],(e=>{var t=ze++;Qe[t]=e,Ge.Observer.create((e=>{"detached"===e.status&&delete Qe[t]})).observe(e,{attachStatus:!0})})(e),e.__resizers[t]=r):e.__resizers[t]=r},Ye=(e,t)=>{void 0!==e.__resizers&&(e.__resizers[t]=void 0)},Ve=c(),Je=null,Xe=e=>{0!==Object.keys(e).length&&(Je=e,Cs.listViewId().forEach((t=>{ge(v.BANNING_MAP,[e],t)})))},Ze=e=>{e.$$.style.display="none"},et=e=>{var t=e=>{e instanceof Ve.Component?Ze(e):e instanceof Ve.VirtualNode?e.childNodes.forEach((e=>{t(e)})):e instanceof Ve.TextNode&&(e.textContent=""),e.__banned=!0};t(e)},tt={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},rt={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},nt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],ot={CSS:{},springs:{}};function it(e,t,r){return Math.min(Math.max(e,t),r)}function at(e,t){return e.indexOf(t)>-1}function st(e,t){return e.apply(null,t)}var lt={arr:function(e){return Array.isArray(e)},obj:function(e){return at(Object.prototype.toString.call(e),"Object")},pth:function(e){return lt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||lt.svg(e)||e.$$},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return lt.hex(e)||lt.rgb(e)||lt.hsl(e)},key:function(e){return!tt.hasOwnProperty(e)&&!rt.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function ut(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function ct(e,t){var r=ut(e),n=it(lt.und(r[0])?1:r[0],.1,100),o=it(lt.und(r[1])?100:r[1],.1,100),i=it(lt.und(r[2])?10:r[2],.1,100),a=it(lt.und(r[3])?0:r[3],.1,100),s=Math.sqrt(o/n),l=i/(2*Math.sqrt(o*n)),u=l<1?s*Math.sqrt(1-l*l):0,c=l<1?(l*s-a)/u:-a+s;function d(e){var r=t?t*e/1e3:e;return r=l<1?Math.exp(-r*l*s)*(1*Math.cos(u*r)+c*Math.sin(u*r)):(1+c*r)*Math.exp(-r*s),0===e||1===e?e:1-r}return t?d:function(){var t=ot.springs[e];if(t)return t;for(var r=1/6,n=0,o=0;;)if(1===d(n+=r)){if(++o>=16)break}else o=0;var i=n*r*1e3;return ot.springs[e]=i,i}}function dt(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var pt,ft,ht=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function n(e){return 3*e}function o(e,o,i){return((t(o,i)*e+r(o,i))*e+n(o))*e}function i(e,o,i){return 3*t(o,i)*e*e+2*r(o,i)*e+n(o)}return function(t,r,n,a){if(0<=t&&t<=1&&0<=n&&n<=1){var s=new Float32Array(11);if(t!==r||n!==a)for(var l=0;l<11;++l)s[l]=o(l*e,t,n);return function(e){return t===r&&n===a||0===e||1===e?e:o(u(e),r,a)}}function u(r){for(var a=0,l=1;10!==l&&s[l]<=r;++l)a+=e;--l;var u=a+(r-s[l])/(s[l+1]-s[l])*e,c=i(u,t,n);return c>=.001?function(e,t,r,n){for(var a=0;a<4;++a){var s=i(t,r,n);if(0===s)return t;t-=(o(t,r,n)-e)/s}return t}(r,u,t,n):0===c?u:function(e,t,r,n,i){var a,s,l=0;do{(a=o(s=t+(r-t)/2,n,i)-e)>0?r=s:t=s}while(Math.abs(a)>1e-7&&++l<10);return s}(r,a,a+e,t,n)}}}(),_t=(pt={linear:function(){return function(e){return e}}},ft={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,r=4;e<((t=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var r=it(e,1,10),n=it(t,.1,2);return function(e){return 0===e||1===e?e:-r*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/n)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){ft[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(ft).forEach((function(e){var t=ft[e];pt["easeIn"+e]=t,pt["easeOut"+e]=function(e,r){return function(n){return 1-t(e,r)(1-n)}},pt["easeInOut"+e]=function(e,r){return function(n){return n<.5?t(e,r)(2*n)/2:1-t(e,r)(-2*n+2)/2}}})),pt);function gt(e,t){if(lt.fnc(e))return e;var r=e.split("(")[0],n=_t[r],o=ut(e);switch(r){case"spring":return ct(e,t);case"cubicBezier":return st(ht,o);case"steps":return st(dt,o);default:return st(n,o)}}function vt(e){try{return document.querySelectorAll(e)}catch(e){return}}function mt(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<r;i++)if(i in e){var a=e[i];t.call(n,a,i,e)&&o.push(a)}return o}function yt(e){return e.reduce((function(e,t){return e.concat(lt.arr(t)?yt(t):t)}),[])}function bt(e){return lt.arr(e)?e:(lt.str(e)&&(e=vt(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function wt(e,t){return e.some((function(e){return e===t}))}function At(e){var t={};for(var r in e)t[r]=e[r];return t}function Et(e,t){var r=At(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function It(e,t){var r=At(e);for(var n in t)r[n]=lt.und(e[n])?t[n]:e[n];return r}function St(e){return lt.rgb(e)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+r[1]+",1)":t:lt.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}(e):lt.hsl(e)?function(e){var t,r,n,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(o[1],10)/360,a=parseInt(o[2],10)/100,s=parseInt(o[3],10)/100,l=o[4]||1;function u(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(0==a)t=r=n=s;else{var c=s<.5?s*(1+a):s+a-s*a,d=2*s-c;t=u(d,c,i+1/3),r=u(d,c,i),n=u(d,c,i-1/3)}return"rgba("+255*t+","+255*r+","+255*n+","+l+")"}(e):void 0;var t,r}function Ct(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Tt(e,t){return lt.fnc(e)?e(t.target,t.id,t.total):e}function Ot(e,t){return e.getAttribute(t)}function xt(e,t,r){if(e=e.$$||e,wt([r,"deg","rad","turn"],Ct(t)))return t;var n=ot.CSS[t+r];if(!lt.und(n))return n;var o=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(o),o.style.position="absolute",o.style.width=100+r;var a=100/o.offsetWidth;i.removeChild(o);var s=a*parseFloat(t);return ot.CSS[t+r]=s,s}function Nt(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[t]||getComputedStyle(e.$$||e).getPropertyValue(n)||"0";return r?xt(e,o,r):o}}function Rt(e,t){return lt.dom(e)&&!lt.inp(e)&&(Ot(e,t)||lt.svg(e)&&e[t])?"attribute":lt.dom(e)&&wt(nt,t)?"transform":lt.dom(e)&&"transform"!==t&&Nt(e,t)?"css":null!=e[t]?"object":void 0}function Pt(e){if(lt.dom(e)){for(var t,r=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,o=new Map;t=n.exec(r);)o.set(t[1],t[2]);return o}}function Dt(e,t,r,n){var o=at(t,"scale")?1:0+function(e){return at(e,"translate")||"perspective"===e?"px":at(e,"rotate")||at(e,"skew")?"deg":void 0}(t),i=Pt(e).get(t)||o;return r&&(r.transforms.list.set(t,i),r.transforms.last=t),n?xt(e,i,n):i}function Lt(e,t,r,n){switch(Rt(e,t)){case"transform":return Dt(e,t,n,r);case"css":return Nt(e,t,r);case"attribute":return Ot(e,t);default:return e[t]||0}}function Bt(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=Ct(e)||0,o=parseFloat(t),i=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return o+i+n;case"-":return o-i+n;case"*":return o*i+n}}function kt(e,t){if(lt.col(e))return St(e);if(/\s/g.test(e))return e;var r=Ct(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function Mt(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ft(e){for(var t,r=e.points,n=0,o=0;o<r.numberOfItems;o++){var i=r.getItem(o);o>0&&(n+=Mt(t,i)),t=i}return n}function jt(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*Ot(e,"r")}(e);case"rect":return function(e){return 2*Ot(e,"width")+2*Ot(e,"height")}(e);case"line":return function(e){return Mt({x:Ot(e,"x1"),y:Ot(e,"y1")},{x:Ot(e,"x2"),y:Ot(e,"y2")})}(e);case"polyline":return Ft(e);case"polygon":return function(e){var t=e.points;return Ft(e)+Mt(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function Ut(e,t){var r=t||{},n=r.el||function(e){for(var t=e.parentNode;lt.svg(t)&&lt.svg(t.parentNode);)t=t.parentNode;return t}(e),o=n.getBoundingClientRect(),i=Ot(n,"viewBox"),a=o.width,s=o.height,l=r.viewBox||(i?i.split(" "):[0,0,a,s]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:s/l[3]}}function $t(e,t){function r(r){void 0===r&&(r=0);var n=t+r>=1?t+r:0;return e.el.getPointAtLength(n)}var n=Ut(e.el,e.svg),o=r(),i=r(-1),a=r(1);switch(e.property){case"x":return(o.x-n.x)*n.w;case"y":return(o.y-n.y)*n.h;case"angle":return 180*Math.atan2(a.y-i.y,a.x-i.x)/Math.PI}}function Wt(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=kt(lt.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:lt.str(e)||t?n.split(r):[]}}function qt(e){return mt(e?yt(lt.arr(e)?e.map(bt):bt(e)):[],(function(e,t,r){return r.indexOf(e)===t}))}function Ht(e){var t=qt(e);return t.map((function(e,r){return{target:e,id:r,total:t.length,transforms:{list:Pt(e)}}}))}function Gt(e,t){var r=At(t);if(/^spring/.test(r.easing)&&(r.duration=ct(r.easing)),lt.arr(e)){var n=e.length;2===n&&!lt.obj(e[0])?e={value:e}:lt.fnc(t.duration)||(r.duration=t.duration/n)}var o=lt.arr(e)?e:[e];return o.map((function(e,r){var n=lt.obj(e)&&!lt.pth(e)?e:{value:e};return lt.und(n.delay)&&(n.delay=r?0:t.delay),lt.und(n.endDelay)&&(n.endDelay=r===o.length-1?t.endDelay:0),n})).map((function(e){return It(e,r)}))}function Qt(e,t){var r=[],n=t.keyframes;for(var o in n&&(t=It(function(e){for(var t=mt(yt(e.map((function(e){return Object.keys(e)}))),(function(e){return lt.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),r={},n=function(n){var o=t[n];r[o]=e.map((function(e){var t={};for(var r in e)lt.key(r)?r==o&&(t.value=e[r]):t[r]=e[r];return t}))},o=0;o<t.length;o++)n(o);return r}(n),t)),t)lt.key(o)&&r.push({name:o,tweens:Gt(t[o],e)});return r}function zt(e,t){var r;return e.tweens.map((function(n){var o=function(e,t){var r={};for(var n in e){var o=Tt(e[n],t);lt.arr(o)&&1===(o=o.map((function(e){return Tt(e,t)}))).length&&(o=o[0]),r[n]=o}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,t),i=o.value,a=lt.arr(i)?i[1]:i,s=Ct(a),l=Lt(t.target,e.name,s,t),u=r?r.to.original:l,c=lt.arr(i)?i[0]:u,d=Ct(c)||Ct(l),p=s||d;return lt.und(a)&&(a=u),o.from=Wt(c,p),o.to=Wt(Bt(a,c),p),o.start=r?r.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=gt(o.easing,o.duration),o.isPath=lt.pth(i),o.isColor=lt.col(o.from.original),o.isColor&&(o.round=1),r=o,o}))}var Kt={css:function(e,t,r){if(e.$$)return`${t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${wx.transformRpx(" "+r)};`;e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,o){if(n.list.set(t,r),t===n.last||o){var i="";if(n.list.forEach((function(e,t){i+=t+"("+e+") "})),e.$$)return`transform:${wx.transformRpx(" "+i)};`;e.style.transform=i}return""}};function Yt(e,t){Ht(e).forEach((function(e){for(var r in t){var n=Tt(t[r],e),o=e.target,i=Ct(n),a=Lt(o,r,i,e),s=Bt(kt(n,i||Ct(a)),a),l=Rt(o,r);Kt[l](o,r,s,e.transforms,!0)}}))}function Vt(e,t){return mt(yt(e.map((function(e){return t.map((function(t){return function(e,t){var r=Rt(e.target,t.name);if(r){var n=zt(t,e),o=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:o.end,delay:n[0].delay,endDelay:o.endDelay}}}(e,t)}))}))),(function(e){return!lt.und(e)}))}function Jt(e,t){var r=e.length,n=function(e){return e.timelineOffset?e.timelineOffset:0},o={};return o.duration=r?Math.max.apply(Math,e.map((function(e){return n(e)+e.duration}))):t.duration,o.delay=r?Math.min.apply(Math,e.map((function(e){return n(e)+e.delay}))):t.delay,o.endDelay=r?o.duration-Math.max.apply(Math,e.map((function(e){return n(e)+e.duration-e.endDelay}))):t.endDelay,o}var Xt=0;var Zt,er=[],tr=function(){function e(){Zt=requestAnimationFrame(t)}function t(t){var r=er.length;if(r){for(var n=0;n<r;){var o=er[n];if(o.paused){var i=er.indexOf(o);i>-1&&(er.splice(i,1),r=er.length)}else o.tick(t);n++}e()}else Zt=cancelAnimationFrame(Zt)}return e}();function rr(e){void 0===e&&(e={});var t,r=0,n=0,o=0,i=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var l=function(e){var t=Et(tt,e),r=Et(rt,e),n=Qt(r,e),o=Ht(e.targets),i=Vt(o,n),a=Jt(i,r),s=Xt;return Xt++,It(t,{id:s,children:[],animatables:o,animations:i,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);s(l);function u(){var e=l.direction;"alternate"!==e&&(l.direction="normal"!==e?"normal":"reverse"),l.reversed=!l.reversed,t.forEach((function(e){return e.reversed=l.reversed}))}function c(e){return l.reversed?l.duration-e:e}function d(){r=0,n=c(l.currentTime)*(1/rr.speed)}function p(e,t){t&&t.seek(e-t.timelineOffset)}function f(e){for(var t=0,r=l.animations,n=r.length,o=[];t<n;){var i=r[t],a=i.animatable,s=i.tweens,u=s.length-1,c=s[u];u&&(c=mt(s,(function(t){return e<t.end}))[0]||c);for(var d=it(e-c.start-c.delay,0,c.duration)/c.duration,p=isNaN(d)?1:c.easing(d),f=c.to.strings,h=c.round,_=[],g=c.to.numbers.length,v=void 0,m=0;m<g;m++){var y=void 0,b=c.to.numbers[m],w=c.from.numbers[m]||0;y=c.isPath?$t(c.value,p*b):w+p*(b-w),h&&(c.isColor&&m>2||(y=Math.round(y*h)/h)),_.push(y)}var A=f.length;if(A){v=f[0];for(var I=0;I<A;I++){f[I];var S=f[I+1],C=_[I];isNaN(C)||(v+=S?C+S:C+" ")}}else v=_[0];var T=Kt[i.type](a.target,i.property,v,a.transforms);o.push(T),i.currentValue=v,t++}1===l.animatables.length&&l.animatables[0].target.$$&&l.animatables[0].target.setNodeStyle(o.join(" "),E)}function h(e){l[e]&&!l.passThrough&&l[e](l)}function _(e){var d=l.duration,_=l.delay,g=d-l.endDelay,v=c(e);l.progress=it(v/d*100,0,100),l.reversePlayback=v<l.currentTime,t&&function(e){if(l.reversePlayback)for(var r=i;r--;)p(e,t[r]);else for(var n=0;n<i;n++)p(e,t[n])}(v),!l.began&&l.currentTime>0&&(l.began=!0,h("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,h("loopBegin")),v<=_&&0!==l.currentTime&&f(0),(v>=g&&l.currentTime!==d||!d)&&f(d),v>_&&v<g?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,h("changeBegin")),h("change"),f(v)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,h("changeComplete")),l.currentTime=it(v,0,d),l.began&&h("update"),e>=d&&(n=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(r=o,h("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&u()):(l.paused=!0,l.completed||(l.completed=!0,h("loopComplete"),h("complete"),!l.passThrough&&"Promise"in window&&(a(),s(l)))))}return l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children;for(var r=i=t.length;r--;)l.children[r].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,f(l.reversed?l.duration:0)},l.set=function(e,t){return Yt(e,t),l},l.tick=function(e){o=e,r||(r=o),_((o+(n-r))*rr.speed)},l.seek=function(e){_(c(e))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,er.push(l),d(),Zt||tr())},l.reverse=function(){u(),d()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function nr(e,t){for(var r=t.length;r--;)wt(e,t[r].animatable.target)&&t.splice(r,1)}rr.version="3.1.0",rr.speed=1,rr.running=er,rr.remove=function(e){for(var t=qt(e),r=er.length;r--;){var n=er[r],o=n.animations,i=n.children;nr(t,o);for(var a=i.length;a--;){var s=i[a],l=s.animations;nr(t,l),l.length||s.children.length||i.splice(a,1)}o.length||i.length||n.pause()}},rr.get=Lt,rr.set=Yt,rr.convertPx=xt,rr.path=function(e,t){var r=lt.str(e)?vt(e)[0]:e,n=t||100;return function(e){return{property:e,el:r,svg:Ut(r),totalLength:jt(r)*(n/100)}}},rr.setDashoffset=function(e){var t=jt(e);return e.setAttribute("stroke-dasharray",t),t},rr.stagger=function(e,t){void 0===t&&(t={});var r=t.direction||"normal",n=t.easing?gt(t.easing):null,o=t.grid,i=t.axis,a=t.from||0,s="first"===a,l="center"===a,u="last"===a,c=lt.arr(e),d=c?parseFloat(e[0]):parseFloat(e),p=c?parseFloat(e[1]):0,f=Ct(c?e[1]:e)||0,h=t.start||0+(c?d:0),_=[],g=0;return function(e,t,v){if(s&&(a=0),l&&(a=(v-1)/2),u&&(a=v-1),!_.length){for(var m=0;m<v;m++){if(o){var y=l?(o[0]-1)/2:a%o[0],b=l?(o[1]-1)/2:Math.floor(a/o[0]),w=y-m%o[0],A=b-Math.floor(m/o[0]),E=Math.sqrt(w*w+A*A);"x"===i&&(E=-w),"y"===i&&(E=-A),_.push(E)}else _.push(Math.abs(a-m));g=Math.max.apply(Math,_)}n&&(_=_.map((function(e){return n(e/g)*g}))),"reverse"===r&&(_=_.map((function(e){return i?e<0?-1*e:-e:Math.abs(g-e)})))}return h+(c?(p-d)/g:d)*(Math.round(100*_[t])/100)+f}},rr.timeline=function(e){void 0===e&&(e={});var t=rr(e);return t.duration=0,t.add=function(r,n){var o=er.indexOf(t),i=t.children;function a(e){e.passThrough=!0}o>-1&&er.splice(o,1);for(var s=0;s<i.length;s++)a(i[s]);var l=It(r,Et(rt,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=lt.und(n)?u:Bt(n,u),a(t),t.seek(l.timelineOffset);var c=rr(l);a(c),i.push(c);var d=Jt(i,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},rr.easing=gt,rr.penner=_t,rr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const or=rr;var ir=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom","borderRadius"],ar=["easeInElastic","easeOutElastic","easeInOutElastic","easeSpringElastic"],sr=Object.assign,lr=Object.keys,ur=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","delay","duration","offset","easing"],cr=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier","steps"],dr=(e,t)=>(e="undefined"!=typeof __webViewSDK__?__webViewSDK__.predefinedColor[e]||e:__skylineSDK__.predefinedColor[e]||e,t?[e,e]:e),pr=(e,t)=>{var r=e.length,n=0;return e.map(((e,o)=>{var i,a={};i="offset"in e?e.offset:1===r?1:o/(r-1);var s=n===i;return lr(e).forEach((t=>{ur.indexOf(t)>-1||("transform"!==t?a[t]=dr(e[t],s):sr(a,((e,t)=>{if("none"===(e=e.toLowerCase().trim()))return{};for(var r,n={},o=ur.map((e=>e.toLowerCase())),i={scale3d:"AAA",translate:"Aa",translate3d:"AAA",rotate3d:"AAAA",matrix3d:"AAAAAA",matrix:"AAAAAAAAAAAAAAAA"},a=["rotate3d","matrix","matrix3d"],s=/\s*(\w+)\(([^)]*)\)/g,l=0;r=s.exec(e);){if(r.index!==l)return{};l=r.index+r[0].length;var u=r[1],c=r[2].split(",");if(o.indexOf(u)>-1)n[u.replace(/(x|y|z)$/,(e=>e.toUpperCase()))]=dr(c.join(" "),t);else{if(!(lr(i).indexOf(u)>-1))return{};var d=i[u];if(c.length>d.length)return{};for(var p=d.length-1;p>=0;p--){var f=d[p];if("a"!==f||c[p]){if("A"===f&&!c[p])return{};-1===a.indexOf(u)&&(n[u.replace("3d","")+String.fromCharCode(88+p)]=dr(c[p].trim(),t))}}}}return n})(e[t],s)))})),s?a.duration=0:(a.duration=(i-n)*t,n=i),a}))},fr=e=>{for(var t=0;t<cr.length&&0!==e.indexOf(cr[t]);t++);if(t===cr.length)return"linear";switch(e){case"ease":return"cubicBezier(0.25, 0.1, 0.25, 1)";case"ease-in":return"cubicBezier(0.42, 0, 1, 1)";case"ease-out":return"cubicBezier(0, 0, 0.58, 1)";case"ease-in-out":return"cubicBezier(0.42, 0, 0.58, 1)";default:return e.replace(/^cubic-bezier/,"cubicBezier")}};class hr{constructor(e,t){this._nativeSupported="function"==typeof HTMLElement.prototype.animate;var r=e.keyframeOptions,n=this.direction=r.direction;if(this.timeline=t,this._nativeSupported){var o=((e,t)=>{var r=t.easing;return delete t.easing,e.map((e=>(e.easing=r,e)))})(e.keyframeSet,r);this._inst=e.element.$$.animate(o,sr(r,{fill:"both"})),this._inst.pause()}else this._inst=or({targets:e.element,keyframes:pr(e.keyframeSet,r.duration),autoplay:!1,loop:r.iterations===1/0||r.iterations,easing:fr(r.easing),direction:"normal",delay:"reverse"===n?r.endDelay:r.delay,endDelay:"reverse"===n?r.delay:r.endDelay});t._driven(this)}set currentTime(e){if(!isNaN(e)){var t=this._inst;this._nativeSupported?t.currentTime=e:"reverse"===this.direction?t.seek(t.duration-e):t.seek(e)}}cancel(){this._nativeSupported?this._inst.cancel():this._inst.reset(),this.timeline._destroy(),this._inst=null}}class _r{constructor(e,t){if(t.scrollSource){if(this._scrollNode=window.__DOMTree__.shadowRoot.querySelector(t.scrollSource),this._scrollNode||(this._scrollNode=e&&e.querySelector(t.scrollSource)),!this._scrollNode)throw new Error(`Cannot find scroll source by ${t.scrollSource} selector.`)}else this._scrollNode=window.__DOMTree__;this.orientation=t.orientation||"vertical",this.startScrollOffset=t.startScrollOffset,this.endScrollOffset=t.endScrollOffset,this.timeRange=t.timeRange,this.fill=t.fill||"both",this._scroll=this._scroll.bind(this)}_calcCurrentTime(e,t){var r=this.startScrollOffset,n=this.endScrollOffset,o=this.fill,i=this.timeRange,a=e.scrollTop,s=e.scrollHeight-t.$$.offsetHeight;return"horizontal"===this.orientation&&(a=e.scrollLeft,s=e.scrollWidth-t.$$.offsetWidth),a<r?"none"===o||"forwards"===o?NaN:0:a>=n?n<s&&("none"===o||"backwards"===o)?NaN:i:r>=n?NaN:(a-r)/(n-r)*i}_scroll(){var e=this._calcCurrentTime(this._scrollNode===window.__DOMTree__?window.__DOMTree__.$$:this._scrollNode.getScrollPosition(),this._scrollNode);this._animation.currentTime=e}_driven(e){this._animation=e,this._scrollNode===window.__DOMTree__?document.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}),this._scroll()}_destroy(){this._scrollNode===window.__DOMTree__?document.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0})}}var gr=(e,t,r,n,o)=>{var i={element:t,keyframeSet:r.map((e=>{var t={};return Object.entries(e).forEach((([e,r])=>{t[e]=Tr(r)})),t})),keyframeOptions:{delay:n.delay||0,direction:n.direction||"normal",duration:n.duration||0,easing:n.easing||"linear",endDelay:n.endDelay||0,iterations:1}},a=new _r(e,o);t.__scrollAnimations=t.__scrollAnimations||[],t.__scrollAnimations.push(new hr(i,a))},vr=(e,t)=>{for(var r=[],n=0;n<e.length;++n)r.push(Object.assign({},e[n]));r[0].offset=0,r[r.length-1].offset=1;for(var o=function(e){r[e].offset=function(e,t){if("number"==typeof t[e].offset)return t[e].offset;for(var r=e+1;r<t.length;++r)if(t[r].offset)return(t[r].offset-t[e-1].offset)/(r-e+1)+t[e-1].offset;return 0}(e,r),r[e].duration=0===e?0:(r[e].offset-r[e-1].offset)*t,ar.some((t=>r[e].ease&&r[e].ease.startsWith(t)))&&(r[e].type="animeJS")},i=0;i<r.length;++i)o(i);return r},mr=c(),yr={},br={},wr=0,Ar=1,Er=2,Ir=function(e){return Object.keys(e).filter((t=>{var r=t.toLocaleLowerCase();return!((r.includes("transform")||r.includes("transition"))&&""===e[t]||""===t.trim()||void 0===e[t]||""===e[t]||!isNaN(parseInt(t,10)))})).map((t=>`${t.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${e[t]}`)).join(";")},Sr=(e,t)=>{var{nodeId:r,webviewId:n,options:o,selector:i,reqId:a,hasCallback:s,fromWxs:l}=e,u=Ts(r,n);if(u){var c=u.shadowRoot,d=t||c.querySelectorAll(i);if(t){var p=()=>{var e=Cs.getByNode(t);if(l){var r=e.clearAnimationCbMap[a];"function"==typeof r&&(delete e.clearAnimationCbMap[a],mr.safeCallback("Clear Animation",r,null,[]))}else ge(v.CLEAR_ANIMATION_COMPLETE,{reqId:a},e.viewId)};if((e=>{(e.__scrollAnimations||[]).forEach((e=>{e.cancel()})),e.__scrollAnimations=[]})(d),!o||"function"==typeof o||!d.__styleObj)return d.__animeOptions&&(d.__animeOptions.forEach((e=>"function"==typeof e.reset&&e.reset())),d.__animeOptions=[]),d.setNodeStyle("",E),Ye(d,E),d.__styleObj=null,d.__animateStatus=wr,d.__animationPendingQueue=[],void p();var f=d.__styleObj.transform.split(" ");for(var h of Object.keys(o))if(o[h])if(d.__styleObj["backgroundColor"===h?"background-color":h])delete d.__styleObj["backgroundColor"===h?"background-color":h];else for(var _=0;_<f.length;++_)f[_].indexOf(h)>=0&&f.splice(_,1);d.__styleObj.transform=f.join(" "),d.__styleObj["-webkit-transform"]=f.join(" "),d.__styleObj.transition="unset",d.__styleObj.transitionProperty="unset",d.__styleObj["-webkit-transition"]="unset",d.__styleObj["-webkit-transition-property"]="unset";var g=e=>{d.setNodeStyle(wx.transformRpx(e,!0),E)};g(Ir(d.__styleObj)),Ke(d,E,g),d.__animateStatus=wr,--br[a],0===br[a]&&s&&p()}else{br[a]=d.length;for(var m=0;m<d.length;++m)Sr(e,d[m])}}},Cr=(e,t)=>{var{nodeId:r,webviewId:n,selector:o}=e,i=Ts(r,n);if(i){var a=i.shadowRoot,s=t||a.querySelectorAll(o);if(t)s.__animationPendingQueue&&s.__animationPendingQueue.length>0&&(s.__animateStatus=Er,setTimeout((()=>{Or(s.__animationPendingQueue.shift(),s,!0)}),32));else for(var l=0;l<s.length;++l)Cr(JSON.parse(JSON.stringify(e)),s[l])}},Tr=e=>("string"==typeof e?e=wx.transformRpx(e,!0):"object"==typeof e&&"string"==typeof e.value?e.value=wx.transformRpx(e.value,!0):Array.isArray(e)&&e.map((e=>{if("string"==typeof e.value)e.value=wx.transformRpx(e.value,!0);else if("string"==typeof e)return wx.transformRpx(e,!0);return e})),e),Or=(e,t,r)=>{wx.nextTick((()=>{var{nodeId:n,webviewId:o,options:i,selector:a,reqId:s,hasCallback:l,type:u,isLastAnimation:c,fromWxs:d}=e,p=Ts(n,o);if(p){var f=p.shadowRoot,h=t||f.querySelectorAll(a);if(t){if(h.__animateStatus===Ar||h.__animateStatus===Er&&!r)return h.__animationPendingQueue||(h.__animationPendingQueue=[]),void h.__animationPendingQueue.push(JSON.parse(JSON.stringify(e)));h.__hasCallback=l,h.__reqId=s,h.__args=JSON.stringify(e);var _=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom"],g=["opacity","backgroundColor","width","height","left","top","bottom"],m=["rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ"],y="animeJS"===u,b=(r,n=!0)=>{if(h.__animateStatus===Ar){if(--yr[h.__reqId],h.__animationPendingQueue&&h.__animationPendingQueue.length>0&&!h.__hasCallback?(h.__animateStatus=Er,Or(h.__animationPendingQueue.shift(),h,!0)):h.__animateStatus=wr,"function"==typeof r)h.__styleObj.transition="unset",h.__styleObj.transitionProperty="unset",h.__styleObj["-webkit-transition"]="unset",h.__styleObj["-webkit-transition-property"]="unset",r(Ir(h.__styleObj));if(0===yr[h.__reqId]&&h.__hasCallback&&n){var o=Cs.getByNode(t);if(d){var i=o.applyAnimationCbMap[h.__reqId];"function"==typeof i&&(delete o.applyAnimationCbMap[h.__reqId],mr.safeCallback("Animation",i,null,[])),Cr(e)}else ge(v.ANIMATION_TRANSITION_END,{reqId:h.__reqId,args:h.__args},o.viewId)}}},w=[];for(var A of Object.keys(i))_.indexOf(A)>=0&&(g.indexOf(A)>=0?w.push({type:"style",args:["backgroundColor"===A?"background-color":A,i[A]]}):m.indexOf(A)>=0?w.push({type:A,args:[i[A]]}):w.push({type:A,args:i[A]}));var I={transition:{delay:i.delay||0,duration:i.duration||0,timingFunction:i.ease||"linear"},transformOrigin:i.transformOrigin||"50% 50% 0"},S={option:I,animates:w},{transition:C,transitionProperty:T,transform:O,transformOrigin:x,style:N}=wx.animationToStyle(S),R=h.__styleObj?Object.assign({},h.__styleObj,{transition:C,transform:O,transitionProperty:T,transformOrigin:x}):{transition:C,transform:O,transitionProperty:T,transformOrigin:x};for(var P of(R["-webkit-transition"]=R.transition,R["-webkit-transform"]=R.transform,R["-webkit-transition-property"]=R.transitionProperty,R["-webkit-transform-origin"]=R.transformOrigin,Object.keys(N||{})))R[P]=N[P];if(h.__styleObj&&R.transform===h.__styleObj.transform){var D=!0;for(var L of Object.keys(R))g.indexOf(L)>=0&&h.__styleObj[L]!==R[L]&&(D=!1);if(D)return void setTimeout((()=>{h.__animationPendingQueue&&h.__animationPendingQueue.length>0&&Or(h.__animationPendingQueue.shift(),h,!0)}),I.duration)}if(0===I.transition.duration?(R.transition="unset",R.transitionProperty="unset",R["-webkit-transition"]="unset",R["-webkit-transition-property"]="unset"):h.__animateStatus=Ar,h.__styleObj=R,y){i.targets=h,i.ease&&(i.easing=i.ease,delete i.ease),(e=>{Object.keys(e).forEach((t=>{ir.includes(t)&&(e[t]=Tr(e[t]))}))})(i),h.__animateStatus=Ar,h.__banned&&Ze(h);var B=i.complete;i.complete=(...e)=>{b(void 0,c),"function"==typeof B&&B(...e)};var k=or(i);h.__animeOptions||(h.__animeOptions=[]),h.__animeOptions.push(k)}else{var M=Ir(R),F=e=>{var t=()=>{h.setNodeStyle(wx.transformRpx(e,!0),E)};t(),Ke(h,E,t)};0===I.transition.duration?F(M):setTimeout((()=>{F(M)}),32),h.__banned&&Ze(h),h.__animationListener||(h.addListener("transitionend",(()=>{b(F)})),h.__animationListener=!0),0===I.transition.duration&&(h.__animationPendingQueue&&h.__animationPendingQueue.length>0?(h.__animateStatus=Er,Or(h.__animationPendingQueue.shift(),h,!0)):h.__animateStatus=wr)}}else{yr[s]=h.length;for(var j=0;j<h.length;++j)Or(JSON.parse(JSON.stringify(e)),h[j])}}}))},xr=(e,t,r)=>{var n=e.$$,o={},i=null,a=new Set,s=e=>{a.add(e),e((()=>{a.delete(e),0===a.size&&"function"==typeof i&&i(o)}))};if(t.id&&(o.id=e.id||""),t.dataset&&(o.dataset=e.dataset||{}),t.mark&&(o.mark=e.collectMarks()||{}),(t.rect||t.size)&&s((e=>{((e,t)=>{"webview"===p()?t(e.getBoundingClientRect()):e.getBoundingClientRect((e=>{t(e)}))})(n,(r=>{t.rect&&(o.left=r.left,o.right=r.right,o.top=r.top,o.bottom=r.bottom),t.size&&(o.width=r.width,o.height=r.height),e()}))})),t.properties&&t.properties.forEach((t=>{var r=t.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));mr.Component.hasPublicProperty(e,r)&&(o[r]=e[r])})),t.scrollOffset)if("function"==typeof e.hasBehavior&&e.hasBehavior("wx-positioning-container")){var l=e.getScrollPosition();o.scrollLeft=l.scrollLeft,o.scrollTop=l.scrollTop,o.scrollWidth=l.scrollWidth,o.scrollHeight=l.scrollHeight}else o.scrollLeft=0,o.scrollTop=0,o.scrollWidth=0,o.scrollHeight=0;if(t.computedStyle&&t.computedStyle.length){var u="webview"!==p()?e.__backendContext:null;s((e=>{((e,t,r)=>{"webview"===p()?r(window.getComputedStyle(t)):"function"==typeof(null==e?void 0:e.getComputedStyle)?e.getComputedStyle(t,(e=>{r(e||{})})):r({})})(u,n,(r=>{for(var n=0,i=t.computedStyle.length;n<i;n++){var a=t.computedStyle[n];a&&void 0!==r[a]&&(o[a]=r[a])}e()}))}))}if(t.context&&(o.contextIs=e.is,o.contextId="function"==typeof e.getContextId&&e.getContextId(),o.contextCanvasId=e.canvasId||"","xr-frame"===p()&&(o.__context=n.__xrElement)),t.node&&(o.nodeIs=e.is,o.nodeId="function"==typeof e.getContextId&&e.getContextId(),o.nodeCanvasId=e.canvasId||"",o.nodeCanvasType=e.type||"",o.nodeNodeId=e.getNodeId()),0!==a.size){if("function"!=typeof r)throw new Error("Framework Error: getNetInfo called asynchronously without a callback");i=r}else{if("function"!=typeof r)return o;r(o)}},Nr=(e,t)=>"webview"===p()?xr(e,t):new Promise((r=>{xr(e,t,(e=>{r(e)}))})),Rr=function(){var e=He()((function*(e,t){var r=[],{pluginId:n,queue:o}=e;return o.forEach((e=>{var o=e.component,i=e.selector,a=e.single,s=e.fields,l=null;if(0===o)l=((e,t)=>{var r={},n=e=>"webview"===p()?document.documentElement[e]||document.body[e]:t.root.getBackendContext()[e];return e.id&&(r.id=""),e.dataset&&(r.dataset={}),e.mark&&(r.mark={}),e.rect&&(r.left=0,r.right=0,r.top=0,r.bottom=0),e.size&&(r.width=n("clientWidth"),r.height=n("clientHeight")),e.scrollOffset&&(r.scrollLeft=n("scrollLeft"),r.scrollTop=n("scrollTop"),r.scrollWidth=n("scrollWidth"),r.scrollHeight=n("scrollHeight")),r})(s,t);else{var u=t.nodeId.getNodeById(o),c=!1;if(u?(mr.Component.getComponentOptions(u).writeOnly&&(c=!0),u=u.shadowRoot):n||(u=window.__DOMTree__?window.__DOMTree__.shadowRoot:null),a){var d=u&&!c?u.querySelector(i):null;l=d?Nr(d,s):null}else{var f=u&&!c?u.querySelectorAll(i):[];l=[];for(var h=0;h<f.length;h++)l.push(Nr(f[h],s));l=Promise.all(l)}}r.push(l)})),Promise.all(r)}));return function(t,r){return e.apply(this,arguments)}}(),Pr=c(),Dr={},Lr={},Br={},kr=function(){var e=He()((function*(e){return yield new Promise((t=>{"webview"===p()?t(e.$$.getBoundingClientRect()):e.$$.getBoundingClientRect((e=>t(e)))}))}));return function(t){return e.apply(this,arguments)}}(),Mr=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Fr=(e,t)=>{var r={left:e.left<t.left?t.left:e.left,top:e.top<t.top?t.top:e.top,right:e.right>t.right?t.right:e.right,bottom:e.bottom>t.bottom?t.bottom:e.bottom,width:0,height:0};return r.right>r.left?r.width=r.right-r.left:r.right=r.left=r.bottom=r.top=0,r.bottom>r.top?r.height=r.bottom-r.top:r.right=r.left=r.bottom=r.top=0,r},jr=function(){var e=He()((function*(e){for(var t="webview"===p()?document.documentElement.clientWidth:m.screenWidth||500,r="webview"===p()?document.documentElement.clientHeight:m.screenHeight||1e3,n=null,o=0;o<e.length;o++){var{node:i,margins:a}=e[o],s=i?yield kr(i):{left:0,top:0,right:t,bottom:r,width:t,height:r},l={left:s.left-a.left,top:s.top-a.top,right:s.right+a.right,bottom:s.bottom+a.bottom};n=n?Fr(n,l):l}return n}));return function(t){return e.apply(this,arguments)}}(),Ur=function(){var e=He()((function*(e){var{targetNode:t,relatives:r,thresholds:n,minWidthOrHeight:o,cb:i,currentRatio:a}=e,s=yield jr(r),l=Mr(yield kr(t));l.right-l.left<o&&(l.right=l.left+o,l.width=o),l.bottom-l.top<o&&(l.bottom=l.top+o,l.height=o);var u=Fr(s,l),c=l.width*l.height,d=c?u.width*u.height/c:0;e.currentRatio=d;var p=void 0===a;d!==a&&n.forEach((e=>{if(p)return!1;(d<=e&&a>=e||d>=e&&a<=e)&&(p=!0)})),p&&i.call(t,{id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:l,intersectionRatio:d,intersectionRect:Mr(u),relativeRect:s})}));return function(t){return e.apply(this,arguments)}}(),$r=function(){var e=He()((function*(){for(var e of Object.keys(Dr))Dr[e]&&(yield Ur(Dr[e]))}));return function(){return e.apply(this,arguments)}}(),Wr=e=>({left:(e=e||{}).left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}),qr=(e,t,r,n,o,i)=>{var a=K();if(!e.length||!t.length)return a;var s=e.length;return Br[a]=s,e.forEach(((e,l)=>{var u=a+"#"+l,c={targetNode:e,relatives:t,thresholds:r,currentRatio:n,minWidthOrHeight:o,cb:i};if("webview"===p()){var d=Pr.Observer.create((e=>{"attached"===e.status?(Dr[u]=c,requestAnimationFrame((()=>{Ur(c)}))):"detached"===e.status&&(delete Dr[u],d.disconnect(),delete Lr[u],--s||delete Br[a])}));Lr[u]=d,d.observe(e,{attachStatus:!0}),Pr.Element.isAttached(e)&&(Dr[u]=c,requestAnimationFrame((()=>{Ur(c)})))}else if("skyline"===p()){var f=new __skylineEngine__.RuntimeCore.intersectionObserver(function(){var e=He()((function*(e){var{targetNode:t}=c,r=yield jr(c.relatives);i({id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:e[0].boundingClientRect,intersectionRatio:e[0].intersectionRatio,intersectionRect:Mr(e[0].intersectionRect),relativeRect:r})}));return function(t){return e.apply(this,arguments)}}(),{rootMargin:c.relatives,thresholds:c.thresholds});Lr[u]=f,f.observe(e.$$)}})),a},Hr=!1,Gr=()=>{Hr||(Hr=!0,requestAnimationFrame((()=>{Hr=!1,$r()})))};"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.addEventListener&&"webview"===p()&&(wx.onPageReRender((()=>{Gr()})),window.addEventListener("scroll",(()=>{Gr()}),{capture:!0,passive:!0}));var Qr=(e,t,r)=>{if("addIntersectionObserver"===e.type){var n=null;if(e.nodeId){var o=t.nodeId.getNodeById(e.nodeId);if(!o)return;n=o.shadowRoot}else e.pluginId||(n=window.__DOMTree__.shadowRoot);if(!n)return;var i=((e,t,r,n,o)=>{var i=null;if((n=n||{}).observeAll)i=e.querySelectorAll(t);else{var a=e.querySelector(t);i=a?[a]:[]}i.length||console.warn('For developer:Node "'+t+'" is not found. Intersection observer will not trigger.');var s=[];return r.forEach((t=>{var{selector:r,margins:n}=t,o=null==r?null:e.querySelector(r);o||null==r?s.push({node:o,margins:Wr(n)}):console.warn('For developer:Node "'+r+'" is not found. The relative node for intersection observer will be ignored.')})),s.length||console.warn("For developer:Intersection observer will be ignored because no relative nodes are found."),qr(i,s,n.thresholds||[0],n.initialRatio||0,n.minWidthOrHeight||0,o)})(n,e.targetSelector,e.relativeInfo,e.options,(e=>{r({info:e})}));return{observerId:i}}if("removeIntersectionObserver"===e.type)return(e=>{var t=Br[e];delete Br[e];for(var r=0;r<t;r++){var n=e+"#"+r,o=Lr[n];if(!o)break;delete Dr[n],o.disconnect(),delete Lr[n]}})(e.observerId),{reqEnd:!0}},zr=1,Kr={},Yr=(e,t)=>{var r=(e=>{if("object"!=typeof e)return"";var t="";return["minWidth","maxWidth","width","minHeight","maxHeight","height"].forEach((r=>{if(void 0!==e[r]){var n=Number(e[r]);n>=0||(n="");var o=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${o}: ${n}px)`}})),["orientation"].forEach((r=>{if(void 0!==e[r]){var n=/^[-_a-z0-9]+$/i.test(e[r])?e[r]:"",o=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${o}: ${n})`}})),t})(e),n=window.matchMedia(r),o=zr++,i=e=>{t({matches:e.matches})};return Kr[o]={observer:n,listener:i},n.addListener(i),t({matches:n.matches}),o},Vr=(e,t)=>"addMediaQueryObserver"===e.type?{observerId:Yr(e.mediaQueryCond,(e=>{t({info:e})}))}:"removeMediaQueryObserver"===e.type?((e=>{var{observer:t,listener:r}=Kr[e];t.removeListener(r),delete Kr[e]})(e.observerId),{reqEnd:!0}):void 0;function Jr(e){var{hasCallback:t,reqId:r,nodeId:n,pageId:o,selector:i,updaterId:a,userConfig:l}=e[0],u=Cs.get(o),c=u.nodeId.getNodeById(n);if(c){var p=d(),f=p.proxyCreateAnimatedStyle(o,a,l),{mapperId:h}=f,_=c.shadowRoot.querySelectorAll(i),g=0;_.forEach((e=>{e.__virtual?s.warn("[WABaseLib.Critical] applyAnimatedStyle can not be used on virtual component"):(e.$$.addAnimatedStyle(f),g++)})),0===g&&(p.proxyStopMapper(o,h),s.info(`[WABaseLib.Critical] applyAnimatedStyle can not find valid element, stopMapper(${h})`)),t&&ge(v.APPLY_NODE_ANIMATED_STYLE_END,{reqId:r,styleId:h},u.viewId)}}var Xr=c();class Zr{constructor(e,t,r){this._treeManager=e,this._arr=t,this._depth=0,this._startCb=r}_consumeHead(){return this._arr.shift()}nextStepType(){return this._arr[0][0]}nextStep(){for(;this._arr[0][0]===v.FLOW_DEPTH;)this._startCb(this._treeManager);if(this._arr[0][0]===v.FLOW_REPEAT){var e=this._arr[0][2];return--this._arr[0][1]||this._consumeHead(),[e]}return this._consumeHead()}nextStepIf(e){for(;this._arr[0][0]===v.FLOW_DEPTH;)this._startCb(this._treeManager);return this._arr[0][0]===e?this._consumeHead():null}expectStart(){var e=this._consumeHead();if(this._depth++,e[0]!==v.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect START descriptor with depth ${this._depth} but get ${w(e[0])})`);return e[2]}expectEnd(){for(;this._arr[0][0]===v.FLOW_DEPTH&&this._arr[0][1]!==this._depth-1;)this._startCb(this._treeManager);var e=this._consumeHead();if(this._depth--,e[0]!==v.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect END descriptor with depth ${this._depth} but get ${w(e[0])})`)}skipToEnd(){for(;this._arr[0];)if(this._arr[0][0]!==v.FLOW_DEPTH)this._consumeHead();else{if(this._arr[0][1]===this._depth-1)break;this._startCb(this._treeManager)}}getQueueLength(){return this._arr.length}getDepth(){return this._depth}}class en{constructor(e,t){var r=this;this._viewId=e,this._treeManager=t,this._depth=0,this._curWinSize=0,this._setDataCallbackInc=1,this._pendingSetDataCallbacks=[],this._setDataCallbackMap={},this._received=[],this._cache=[],this._blocked=[],this._isBlocked=!0,this._fetchingViewInfoCallbacks=[];var n=(e,t)=>{if(this._received.push([t].concat(e)),t===v.FLOW_DEPTH&&(this._depth=e[0],0===this._depth)){var r=this._received;this._received=[],this._isBlocked?this._blocked.push(r):(this.iterator=new Zr(this._treeManager,r,en._startCb),en._startCb(this._treeManager),this.onFinished())}},o=function(){if("FLOW_"!==i.slice(0,5))return"continue";if("FLOW_SET_DATA"===i)we(v[i],(([e])=>{r._pendingSetDataCallbacks.push(e)}),e);else if("FLOW_VIEW_INFO"===i){var t=function(){var e=He()((function*([e,t,n]){var o=null;"selectorQuery"===e?o=yield Rr(t,r._treeManager):"intersection"===e?o=Qr(t,r._treeManager,(e=>{ge(v.RESPONSE_VIEW_INFO,[e,n],r._viewId)})):"matchMedia"===e&&(o=Vr(t,(e=>{ge(v.RESPONSE_VIEW_INFO,[e,n],r._viewId)}))),o&&ge(v.RESPONSE_VIEW_INFO,[o,n],r._viewId)}));return function(t){return e.apply(this,arguments)}}();we(v[i],(e=>{r._received.length||r._isBlocked?r._fetchingViewInfoCallbacks.push(t.bind(r,e)):t(e)}),e)}else we(v[i],"FLOW_SET_NODE_ANIMATION_INFO"===i?e=>{"scrollTimeline"===e[0].type?"webview"===p()?(({nodeId:e,selector:t,options:r,duration:n,timeline:o},i)=>{for(var a=i.nodeId.getNodeById(e),s=(a=a?a.shadowRoot:window.__DOMTree__?window.__DOMTree__.shadowRoot:null)?a.querySelectorAll(t):[],l=0;l<s.length;l++)gr(a,s[l],r,{duration:n},o)})(e[0],r._treeManager):"skyline"===p()&&console.warn("component rendered with skyline does not support timeline animation, 'animate' call will be ignored."):Or(e[0])}:"FLOW_CLEAR_NODE_ANIMATION_INFO"===i?e=>{Sr(e[0])}:"FLOW_SET_NODE_ANIMATED_STYLE"===i?e=>{r._received.length||r._isBlocked?r._fetchingViewInfoCallbacks.push(Jr.bind(null,e)):Jr(e)}:"FLOW_CLEAR_NODE_ANIMATED_STYLE"===i?e=>{!function(e){var{hasCallback:t,reqId:r,nodeId:n,pageId:o,selector:i,styleIds:a}=e[0],l=Cs.get(o),u=l.nodeId.getNodeById(n);u&&(u.shadowRoot.querySelectorAll(i).forEach((e=>{if(e.__virtual)s.warn("[WABaseLib.Critical] clearAnimatedStyle can not be used on virtual component");else{var t=Array.isArray(a)?a:[a];"function"==typeof e.$$.clearAnimatedStyle&&e.$$.clearAnimatedStyle(t)}})),t&&ge(v.CLEAR_NODE_ANIMATED_STYLE_END,{reqId:r},l.viewId))}(e)}:"FLOW_SET_NODE_NEXT_ANIMATION_INFO"===i?e=>{Cr(e[0])}:n,e)};for(var i of Object.keys(v))o();we(v.SET_DATA_CALLBACK,(([e])=>{this.triggerSetDataCallbacks(e)}),e)}flushBlocked(){for(;this._blocked.length&&!this._isBlocked;)try{var e=this._blocked.shift();this.iterator=new Zr(this._treeManager,e,en._startCb),en._startCb(this._treeManager),this.onFinished()}catch(e){console.error(e.message),i.errorReport({key:"webviewScriptError",error:e})}}unblock(){this._isBlocked=!1,this.flushBlocked()}block(){this._isBlocked||(this._isBlocked=!0)}sendInIndividualFlow(e){this.start(Date.now()),this.push(e),this.end()}start(){this.flush(),this._depth++,ge(v.FLOW_DEPTH,[this._depth,Date.now()],this._viewId)}dedupe(){var e=this._cache;if(this._curWinSize){if(2===e.length){var t=e[1][2];if(e[0][0]!==t){var r=e.pop(),n=r.shift();ge(n,r,this._viewId)}else e.shift(),e[0][1]++}}else{var o=0;if(e.length>2&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]&&e[0][0]!==v.FLOW_SET_DATA&&e[0][0]!==v.FLOW_VIEW_INFO&&(o=1),o){var i=e[0][0];e.splice(0,3),this.flush(),this._curWinSize=1,e.unshift([v.FLOW_REPEAT,3,i])}else if(e.length>3){var a=e.pop(),s=a.shift();ge(s,a,this._viewId)}}}push(e){this._cache.unshift(e),1!==e.length?this.flush():this.dedupe()}flush(){for(this._curWinSize=0;this._cache.length;){var e=this._cache.pop(),t=e.shift();ge(t,e,this._viewId)}}end(){this.flush(),this._depth--,ge(v.FLOW_DEPTH,this._depth,this._viewId),0===this._depth&&_e()}checkDelayFetchingViewInfo(){if(this._fetchingViewInfoCallbacks.length){var e=this._fetchingViewInfoCallbacks;this._fetchingViewInfoCallbacks=[],e.forEach((e=>e()))}}registerSetDataCallback(e,t,r){var n=this._setDataCallbackInc++;this._setDataCallbackMap[n]=[e,t,r],this.push([v.FLOW_SET_DATA,n])}triggerSetDataCallbacks(e){for(var t=0;t<e.length;t++){var r=e[t];if(this._setDataCallbackMap[r]){var[n,o,i]=this._setDataCallbackMap[r];delete this._setDataCallbackMap[r],Xr.safeCallback("SetData Callback",n,o,[],i)}else s.error("setDataCallback error")}}onFinished(){if(wx.triggerPageReRender(),"skyline"===p()){var e=d();this._viewId===S?this._treeManager.__attached?e.getTabBarContext().startRender((()=>{s.info("[Skyline.Critical] tabbar startRender callback, doing nothing.")})):s.error("[OperationFlow] [Skyline.Critical] tabBar startRender ignored, because root element is not attached (may be due to some unexpected error). pageId="+this._viewId):!0!==this._treeManager.__attached?s.error("[OperationFlow] [Skyline.Critical] startRender ignored, because root element is not attached (may be due to some unexpected error). pageId="+this._viewId):e.getContext(this._viewId).startRender((()=>{s.info("[Skyline.Critical] page startRender callback, doing nothing. pageId="+this._viewId)}))}this._blocked.length||(ge(v.SET_DATA_CALLBACK,[this._pendingSetDataCallbacks],this._viewId,!0),this._pendingSetDataCallbacks=[],this.checkDelayFetchingViewInfo())}static setStartOperation(e){en._startCb=e}}const tn=en;var rn=c(),nn=Object.prototype.hasOwnProperty,on=rn.dataUtils.deepCopy,an=(e,t,r,n,o)=>{for(var i=o?on(e):e,a=0;a<t.length;a++){var s=t[a],l=s[0],u=s[1],c=s[2];if(void 0!==u){for(var d=i,p=l[0],f=1;f<l.length;f++)if(null!=(d=d[p])&&d.__wxspec__&&(d=d.__value__),p=l[f],null!=d&&!nn.call(d,p)){d=null;break}null!=d&&nn.call(d,p)&&(r?null!=c&&"object"==typeof u&&u instanceof Array==c instanceof Array?d[p]={__value__:c,__wxspec__:!0}:null!=d[p]&&d[p].__wxspec__||(d[p]={__value__:d[p],__wxspec__:!0}):d[p]=n?on(u,!1):u)}}return i};const sn={restoring:null,idDataMap:null,compIdArr:null,compExtraDataMap:null,compIdArrIndex:0,onReady:()=>{}};var ln=c(),un={},cn=(e,t)=>{var r=ln.Component.getComponentOptions(e).domain;if("/"!==r&&"//"!==r&&r){var n=r.split("/",1)[0],o=t.viewId;if(un[o]||(un[o]={}),!un[o][n]){un[o][n]=!0;var a=[n,u.pluginInfos[n].version,t.rootCompName,u.getLaunchOptionsSync().sessionid||u.getLaunchOptionsSync().sessionId||"",0,""].map(encodeURIComponent).join(",");void 0!==i&&(i.reportKeyValue({key:"PluginDisplay",value:a,force:!0}),i.reportIDKey({key:"pluginDisplayInPage",force:!0}))}}},dn=0,pn=0,fn=0,hn=(e,t,r,n)=>{var o=r-t,a=r-e,s=Math.ceil(fn/(pn||1)),l=[dn,1,o,pn,s,1,a,n].map(encodeURIComponent).join(",");dn=0,pn=0,fn=0,void 0!==i&&i.reportKeyValue({key:"SetDataPerf",value:l,force:!0})},_n=0,gn=0,vn=0,mn=0,yn=0,bn=0,wn=()=>{var e=["libVersion","isFirstPage","isWebview","totalComps","loadedComps","lazyedComps","loadTime","lazyLoadTime"],t=new Set(e),r={},n=!1,o=(o,a)=>{n||(r[o]=a,t.has(o)&&t.delete(o),0===t.size&&((()=>{if(void 0!==i){var t=e.map((e=>encodeURIComponent(r[e]))).join(",");i.reportKeyValue({key:"LazyCodeLoading",value:t,immediately:!0})}})(),n=!0))};return o("libVersion",wx.version.version),o("isWebview",!1),o("lazyedComps",0),o("lazyLoadTime",0),{set:o}},An=e=>{var t={};return r=>(t[r]||(t[r]=e(r)),t[r])},En=/-[a-z]/g,In=/([A-Z])/g,Sn=An((e=>e.indexOf("-")<=0?e:e.replace(En,(e=>e[1].toUpperCase())))),Cn=An((e=>e.replace(In,"-$1").toLowerCase())),Tn=0,On=[],xn=(...e)=>{On.push(e)};y.onLoad((()=>{xn=setTimeout,On.forEach((e=>{setTimeout(...e)}))}));var Nn=function(e){Tn===e&&(Tn=0)},Rn=function(){return Tn=Date.now()+Math.random()},Pn=function(e){var t,r=Rn();try{t=e(r)}catch(e){throw xn((()=>{Nn(r)}),0),e}return xn((()=>{Nn(r)}),0),t},Dn=function(){return!!Tn},Ln=c(),Bn=(Object.prototype.hasOwnProperty,null),kn=(e,t)=>Bn?Bn(e,"nv_",t?2:void 0):e,Mn=(e,t=!1)=>Bn?Bn(e,void 0,t?2:void 0):e,Fn=(e,t,r)=>t?r?t+e+r:t||"":r||"",jn=([e,t,r,n,o])=>{if(n||(n={}),t){var i=Cs.get(e);if(!i)return;var a=i.nodeId.getNodeById(t);if(!a)return;var s=Ln.Element.getMethodCaller(a);s&&"function"==typeof s[r]&&(o?Pn((()=>{s[r](n)})):s[r](n))}else{var l=L.getCurrentPagesByDomain("");if(!l.length)return;var u=l[l.length-1];u&&"function"==typeof u[r]&&(o?Pn((()=>{u[r](n)})):u[r](n))}};y.onLoad((()=>{u.onCallMethodFromWxs(jn)}));var Un=(e,t,r)=>{if(t.__wxsStyle||t.__wxsClass){var n={wxsStyle:t.__wxsStyle,wxsClass:t.__wxsClass,index:r,wxsState:Mn(t.__wxsState)};if(t.ownerShadowRoot){var o=Cs.getByNode(t).nodeId.getNodeId(t.ownerShadowRoot.__wxHost);e._custom=e._custom||{},(e=e._custom)[o]=e[o]||{},e=e[o]}e[t.is]=e[t.is]||[],e[t.is].push(n)}},$n=(e,t,r)=>{if(e){var n=null;if(t.ownerShadowRoot&&e._custom){var o=Cs.getByNode(t).nodeId.getNodeId(t.ownerShadowRoot.__wxHost);if(!(e=e._custom)[o])return;e=e[o]}e[t.is]&&e[t.is].length&&e[t.is][0]&&e[t.is][0].index===r&&(n=e[t.is].shift()),n&&((e,t)=>{if(e.__wxsStyle=t.wxsStyle,e.__wxsClass=t.wxsClass,e.__wxsState=kn(t.wxsState),t.wxsStyle){var r=()=>{var t=window.wx.transformRpx(e.__wxsStyle,!0);e.setNodeStyle(t,I)};r(),Ke(e,I,r)}t.wxsClass&&(e.class=Fn(" ",e.class,t.wxsClass))})(t,n)}};var Wn=c(),qn=Wn.Component.getComponentOptions,Hn=e=>e instanceof Wn.Component?Cs.get(e.__wxWebviewId__).nodeId.getNodeById(e.__wxExparserNodeId__):e,Gn=(e,t,r)=>{var n=Hn(e);return r&&n instanceof Wn.VirtualNode&&(n.id||Object.getOwnPropertyNames(n.dataset).length||(n=Hn(r))),{id:t?"":n.id,dataset:t?{}:n.dataset}},Qn=(e,t,r,n,o,i,a,s)=>{var l=i?"__wxEventCaptureHandleName":"__wxEventHandleName";t[l]||(t[l]=Object.create(null)),void 0===t[l][r]&&t.addListener(r,(function(e){var n=t[l][r],i=e.mutatedMarked();if((!s||!e.mutatedMarked())&&(s&&e.markMutated(),n)){e._hasListeners=!0;var u=t.ownerShadowRoot;if(u){var c=u.getHostNode(),d=Wn.Component.getComponentOptions(c).writeOnly;if(!d||e._allowWriteOnly){if(a&&"function"==typeof n)return void console.warn('Cannot use wxs function to handle custom event "'+e.type+'".');var p=Wn.Element.getMethodCaller(c);"function"!=typeof p[n]?console.warn('Component "'+c.is+'" does not have a method "'+n+'" to handle event "'+e.type+'".'):p[n]({type:e.type,timeStamp:e.timeStamp,target:Gn(e.target,d,this),currentTarget:Gn(this,d,null),mark:e.mark,detail:e.detail,touches:e.touches,changedTouches:e.changedTouches,mut:i,_requireActive:e._requireActive})}}return!o&&void 0}}),{capture:i}),a?t[l][r]=n:(t[l][r]=null==n?"":String(n),t.__eventHandlerChangeListener__&&(t.__eventHandlerChangeListener__(r,t[l][r],i),"function"==typeof t.__domElement.setListenerOption&&t.__domElement.setListenerOption(r,!o,i)))},zn=(e,t,r,n)=>{var o=Cs.getByNode(e);e.__component__&&!sn.restoring&&e.__isXrFrame__&&(o.operationFlow.start(),o.operationFlow.push([v.FLOW_SET_ROOT_PROPERTIES,Wn.dataUtils.deepCopy(t),Wn.dataUtils.deepCopy(r),Wn.dataUtils.deepCopy(n)])),e.dataset=e.dataset||{};var i=0,a=!1,l=[],u=e instanceof Wn.Component,c=u&&"//"===qn(e).domain,d=Wn.Component.getDataProxy(e),f=function(){var o,f=t[h],_=null;if("slot"===e.is&&e instanceof Wn.VirtualNode&&"name"===h)return Wn.Element.setSlotName(e,f),"continue";if("id"===h)return e.id=null==f?"":f,"continue";if("slot"===h)return e.slot=null==f?"":f,"continue";if("class"===h){if(u)e.class=e.__wxsClass?Fn(" ",null==f?"":f,e.__wxsClass):null==f?"":f,u&&e.hasExternalClass("class")&&e.setExternalClass("class",f);else e.class=f;return"continue"}if("style"===h)if(u&&e.$$){var g=wx.transformRpx(f,!0);e.setNodeStyle(g,A),g!==f?Ke(e,A,(()=>{var t=wx.transformRpx(f,!0);e.setNodeStyle(t,A),e.__transformedPropValue=t})):Ye(e,A),e.__banned&&Ze(e)}else e.$$&&e.setNodeStyle(f,A);if(u&&Wn.Component.hasPublicProperty(e,h)){!c&&sn.restoring||(d.scheduleReplace([h],f,null!=r?r[h]:null),c?d.doUpdates(void 0,!0):(a=!0,e.isInnerDataExcluded(h)||i++));var v=n&&n["model:"+Cn(h)];if(v){var m=v.match(/^\{\{(.*?)\}\}$/);if(m){var y=m[1].match(/^\s*([_a-zA-Z$][_a-zA-Z0-9$]+)\s*$/);if(y){var b=y[1];e.__modelValueName=Object.assign(e.__modelValueName||{},{[h]:b}),l.push(h)}else console.warn("For developer:Two-way binding does not support complex data paths currently. This two-way binding is ignored.")}else console.warn(`For developer:"${v}" is not an assignable expression. This two-way binding is ignored.`)}return"continue"}if("style"===h)return"continue";if(h.startsWith("data-")){var w=Sn(h.slice(5).toLowerCase());if(e.dataset[w]=f,e.setAttribute(h,f),e.__componentOptions&&"//"===e.__componentOptions.domain){var I=Wn.Element.getMethodCaller(e),S=I.onPropertyUpdate;"function"==typeof S&&S.call(I,"dataset",w,f)}return"continue"}if("$gdc"===h)return"function"==typeof(o=f)&&(Bn=o),"continue";if((_=h.match(/^\$wxs:(capture-)?(mut-)?(bind|catch):?(.+)$/))&&("function"==typeof f||!f))return Qn(0,e,_[4],f,"catch"===_[3],_[1],!0,_[2]),ne(),"continue";if(_=h.match(/^(capture-)?(mut-)?(bind|catch):?(.+)$/))return Qn(0,e,_[4],f,"catch"===_[3],_[1],!1,_[2]),ne(),"continue";if("on"===h.slice(0,2))return Qn(0,e,h.slice(2),f,!1,!1,!1),"continue";if("animation"===h){if(u&&e.$$&&null!==f&&"object"==typeof f&&f.actions&&f.actions.length>0){var C=0,T=f.actions,O=f.actions.length;function R(){if(C<O){var{transition:t,transitionProperty:r,transform:n,transformOrigin:o,style:i}=wx.animationToStyle(T[C]),a=e.__styleObj?Object.assign({},e.__styleObj,{transition:t,transform:n,transitionProperty:r,transformOrigin:o}):{transition:t,transform:n,transitionProperty:r,transformOrigin:o};for(var s of(a["-webkit-transition"]=a.transition,a["-webkit-transform"]=a.transform,a["-webkit-transition-property"]=a.transitionProperty,a["-webkit-transform-origin"]=a.transformOrigin,Object.keys(i||{})))a[s]=i[s];e.__styleObj=a,""!==a.transform&&(e.__transformNoneEnabled=!0);var l=Object.keys(a).filter((t=>!(t.toLowerCase().includes("transition")&&""===a[t]||""===t.trim()||void 0===a[t]||!t.toLowerCase().includes("transform")&&""===a[t]||!isNaN(parseInt(t,10)))&&(t.toLowerCase().includes("transform")&&""===a[t]&&e.__transformNoneEnabled&&(a[t]="none"),!0))).map((e=>`${e.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${a[e]}`)).join(";"),u=()=>{e.setNodeStyle(wx.transformRpx(l,!0),E)};u(),Ke(e,E,u),e.__banned&&Ze(e)}}e.addListener("transitionend",(()=>{C+=1,R()})),R()}return"continue"}if(_=h.match(/^\$wxs:change:(.+)$/))return e.wxsObserver=e.wxsObserver||{},e.wxsObserver[_[1]]=e.wxsObserver[_[1]]||{},e.wxsObserver[_[1]].observer=f,"continue";if(_=h.match(/^mark:(.+)$/))return e.setMark(_[1],f),"continue";var x=Cn(h);if(u&&e.hasExternalClass(x))return e.setExternalClass(x,f),"continue";if("webview"!==p()&&e instanceof Wn.NativeNode){var N="skyline"===p()?Sn(h):Cn(h);if(void 0!==e.__extraAttributeFilters&&"function"==typeof e.__extraAttributeFilters[N])try{e.__extraAttributeFilters[N](e,N,f,(t=>{e.setAttribute(N,t)}))}catch(P){s.error(`[Skyline] attribute filter error, on node <${e.is}>, attr [${N}], msg: ${P.message}`),e.setAttribute(N,f)}else e.setAttribute(N,f)}};for(var h of Object.keys(t||{}))f();a&&d.doUpdates(i,!1);for(var _=function(){var t=l[g];e.__wxPropertyListener__&&e.__wxPropertyListener__[t]||(e.setPropertyChangeListener(t,(r=>{var n=e.ownerShadowRoot.getHostNode();n.setData({[e.__modelValueName[t]]:r})})),e.__wxPropertyListener__=e.__wxPropertyListener__||{},e.__wxPropertyListener__[t]=!0)},g=0;g<l.length;g++)_();e.__component__&&!sn.restoring&&(o.operationFlow.push([v.FLOW_APPLY_PROPERTY]),e.__isXrFrame__&&o.operationFlow.end())},Kn=Object.create(null),Yn=!1,Vn={},Jn=function(e,t){Yn&&(Kn[e]=t)},Xn=function(){return Yn},Zn={},eo={},to=e=>{Object.keys(Zn).length>0&&ge(v.XR_FRAME_COMP_OPTIONS,[Zn,eo],e)};var ro=c(),no=ro.dataUtils.deepCopy,oo={tag:"shadow",children:[]},io=(t,r)=>{var n,o=Date.now(),i=t?t(r,null,e.g):oo;return n=Date.now()-o,pn+=1,fn+=n,i.tag="shadow",i},ao=(e,t)=>{if(Xn()){t.operationFlow.start(Date.now()),t.operationFlow.push([v.FLOW_HOT_UPDATE_RESET,t.nodeId.getNodeId(e)]);var r="";e===t.root?r="body":e===t.tabRoot&&(r="tab-bar");var n=e.__vtObj,o=e.ownerShadowRoot?e.ownerShadowRoot.createComponent(n.tag,void 0,n.generics,t):ro.createElement(r,ro.Component._list[e.is],t);t.operationFlow.push([v.FLOW_HOT_UPDATE_RESET]);var i=t.nodeId.getNodeId(e);if(t.nodeId.removeNode(e),t.nodeId.allocNodeId(o,i),e===t.root){ro.Element.pretendDetached(e),t.root=o,ro.Element.getMethodCaller(o).__wxExparserNodeId__=i,ro.Element.pretendAttached(o);var a={},s=!1;Object.keys(t.initialRootData).forEach((e=>{ro.Component.hasProperty(o,e)&&(a[e]=t.initialRootData[e],s=!0)})),s&&t.root.setData(a)}else if(e===t.tabRoot){t.tabRoot=o,ro.Element.getMethodCaller(o).__wxExparserNodeId__=i}else{o.__vtObj=n;var l=n.attr;for(zn(o,l,n.raw,n.rawAttr);e.childNodes.length;)o.appendChild(e.childNodes[0]);e.parentNode.replaceChild(o,e)}t.operationFlow.end()}},so=(e,t,r,n)=>{var o,i=Zn[o=e]||Zn[eo[o]]||{},a=null;return i.isXrComp&&"xr-frame"!==be(n.viewId)&&"xr-frame"!==p()?(s.info(`[VirtualTreeCreate] <${t.tag}>[${e}] will be created as xr-frame`),(a=u.xrFrame.createXrFrame(e,r,t.generics,n.viewId)).__isXrFrame__=!0):a=r.createComponent(t.tag,void 0,t.generics,n),cn(a,n),a},lo=(e,t,r,n,o)=>{var i=null;if("shadow"===e.tag&&t)r=i=ro.ShadowRoot.create(t);else if("virtual"===e.tag||"shadow"===e.tag){var a="virtual";1===e.wxXCkey||3===e.wxXCkey?a="wx:if":2!==e.wxXCkey&&4!==e.wxXCkey||(a="wx:for"),i=r.createVirtualNode(a),ro.Element.setInheritSlots(i),i.__treeManager__=n}else if("wx-slot"===e.tag)i=r.createVirtualNode("slot"),ro.Element.setSlotName(i,"");else{if(r.tagNameUsed(e.tag)){var s=r.getHostNode(),l=r.getCompDefByTagName(e.tag);"string"==typeof l.is&&(l=l.is);var u=s.getPlaceholder(e.tag);n.compManager.shouldUsePlaceholder(l)&&!!u?((i=r.createComponent(e.tag,u,e.generics,n)).__placeholder__=!0,n.compManager.arrangePlaceholderReplace(l,(()=>{var e=i.__vtObj,t=so(l,e,r,n);uo(e,t,n,o);var a=[...i.childNodes];i.parentNode&&i.parentNode.insertBefore(t,i),a.forEach((e=>{t.appendChild(e)})),i.parentNode&&i.parentNode.removeChild(i)}))):i=so(l,e,r,n)}else(i=r.createVirtualNode(e.tag)).__treeManager__=n}uo(e,i,n,o);var c=e.children;if(c)for(var d=0;d<c.length;d++){var p=c[d];if(null!=p)if("object"==typeof p){var f=lo(p,null,r,n,o);i.appendChild(f)}else{var h=r.createTextNode(p);i.appendChild(h)}}return i},uo=(e,t,r,n)=>{(Xn()||!0===t.__placeholder__)&&(t.__vtObj=e),3!==e.wxXCkey&&4!==e.wxXCkey||(t.__wxDynamicSync__=4===e.wxXCkey?"wx:for":"wx:if");var o=t.__component__,i=t.__placeholder__,a=t.__isXrFrame__;if(o||i||a){var s=r.nodeId.allocNodeId(t,r.nodeId.getNodeId(t));ro.Element.getMethodCaller(t).__wxExparserNodeId__=s,r.operationFlow.push([v.FLOW_CREATE_NODE,s])}var l=n?no(e.attr):e.attr;zn(t,l,e.raw,e.rawAttr),t.__isXrFrame__},co=e=>{e.operationFlow.push([v.FLOW_MINIPULATE_CHILD])},po=Object.prototype.hasOwnProperty,fo=e=>"number"==typeof e&&isNaN(e),ho=(e,t)=>{for(var r=(e=>{for(var t={},r=0;r<e.length;++r){var n=e[r],o=n&&n.wxKey;o?po.call(t,o)?n.wxKey=void 0:t[o]=r:fo(o)&&(n.wxKey=void 0)}return t})(e),[n,o]=(e=>{for(var t={},r=[],n=0;n<e.length;++n){var o=e[n],i=o&&o.wxKey;i?po.call(t,i)?(console.warn(`For developer:Do not set same key "${i}" in wx:key.`),o.wxKey=void 0,r.push(n)):t[i]=n:(fo(i)&&(o.wxKey=void 0),r.push(n))}return[t,r]})(t),i=[],a=[],s=[],l=0,u=0,c=0;c<e.length;++c){var d=e[c].wxKey;if(d)if(po.call(n,d)){var p=n[d];i.push(t[p])}else a.push(c-u),++u,i.push(null);else if(l<o.length){var f=o[l];i.push(t[f]),++l}else a.push(c-u),++u,i.push(null)}for(var h=i,_=0,g=[],v=0;v<t.length;){for(var m=t[v],y=m&&m.wxKey,b=h[_],w=b&&b.wxKey;null===b;)w=(b=h[++_])&&b.wxKey;_>=h.length?(s.push({oldIndex:r[y],index:v,pos:-1}),++_,++v):w===y?(g.push(_),++_,++v):y?(w?n[w]===v+1?s.push({oldIndex:r[y],index:v,pos:_}):(b=h[++_])&&b.wxKey===y?(g.push(_),++_):(--_,s.push({oldIndex:r[y],index:v,pos:_})):s.push({oldIndex:r[y],index:v,pos:_}),++v):++_}for(var A=0,E=0;E<s.length;E++){var I=s[E].pos;if(-1===I)break;for(;A<g.length&&I>g[A];)A++;A>=g.length?s[E].pos=-1:s[E].pos=g[A]}return{children:i,removes:a,inserts:s}},_o=(e,t,r)=>{if(e!==t&&(!e||r))if(null==t)r.parentNode.removeChild(r);else if("object"==typeof t)if("object"!=typeof e||null===e||e.tag!==t.tag||String(e.wxKey)!==String(t.wxKey)||"virtual"===e.tag&&e.wxVkey!==t.wxVkey){var n=Cs.getByNode(r),o=r.parentNode,i=lo(t,null,o.ownerShadowRoot,n,!1);o&&("wx:for"===o.__wxDynamicSync__||"wx:if"===r.__wxDynamicSync__?(n.nodeId.addNode(i),o.replaceChild(i,r),co(n),n.nodeId.removeNode(r)):o.replaceChild(i,r),r.__banned&&et(i))}else{if(t.n&&t.n.length){for(var a=t.n,s=t.attr,l={},u=0;u<a.length;u++){var c=a[u];l[c]=s[c]}zn(r,l,t.raw,t.rawAttr)}void 0!==t.wxScopeData&&(r.__wxScopeData__=t.wxScopeData),void 0!==r.__vtObj&&(r.__vtObj=t),go(e,t,r)}else if("string"==typeof e)t!==e&&(r.textContent=t);else{var d=r.ownerShadowRoot.createTextNode(t);r.parentNode.replaceChild(d,r)}},go=(e,t,r)=>{var n=!!z("customComponents"),o=e.children,i=t.children,a="virtual"===e.tag&&(2===e.wxXCkey||4===e.wxXCkey||void 0===e.wxXCkey)||!n&&o.length!==i.length,s=null,l=null;if(a){var u=ho(o,t.children);i=u.children,s=u.removes,l=u.inserts}for(var c=r.childNodes,d=0;d<o.length;d++){var p=o[d],f=i[d];!f&&a||_o(p,f,c[d])}a&&((e,t,r,n)=>{for(var o=Cs.getByNode(r),i=r.childNodes,a=[],s=0;s<t.length;s++){var l=t[s];a.push({node:void 0!==l.oldIndex?i[l.oldIndex]:null,before:l.pos>=0?i[l.pos]:void 0,index:l.index})}for(var u=0;u<e.length;u++){var c=i[e[u]];r.removeChild(c),"wx:for"===i.__wxDynamicSync__&&(co(o),o.nodeId.removeNode(c))}for(var d=0;d<a.length;d++){var{before:p,index:f}=a[d],h=a[d].node;null===h&&(h=lo(n[f],null,r.ownerShadowRoot,o,!1)),"wx:for"===r.__wxDynamicSync__?(o.nodeId.addNode(h),r.insertBefore(h,p),co(o)):r.insertBefore(h,p)}r.__banned&&et(r)})(s,l,r,t.children)},vo=c(),mo=null,yo={},bo=1,wo=[],Ao=(e,t)=>{if(yo[e]||null!==mo){var r=yo[e]||mo,n=wo[wo.length-1],o=wo[wo.length-2],{isMergedUpdate:i,dataPaths:a,pendingStartTimestamp:s,updateStartTimestamp:l,updateEndTimestamp:u,pageId:c}=t(r);ge(v.UPDATE_PERFORMANCE_STAT,[e,{isMergedUpdate:i,dataPaths:a,updateProcessId:n,parentUpdateProcessId:o,pendingStartTimestamp:s,updateStartTimestamp:l,updateEndTimestamp:u}],c)}},Eo=null,Io=null,So=(e,t)=>{Eo=t,Io=e};var Co=c(),To=Co.dataUtils.deepCopy,Oo=e=>{if("object"!=typeof e||!e)return e;var t=e.slice();return t.shift()(...t)},xo=function(e,t,r){for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof Co.TextNode||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(r[i.__slotName]=i),xo(i,t,r))}};class No{createInstance(e,t){var r=new Ro,n=t;if(r._template=this,r._generateFunc=this._generateFunc,r.data=To(this._data),r.idMap=Object.create(null),r.slots=Object.create(null),sn.restoring){if(sn.compIdArrIndex>=sn.compIdArr.length)throw new Error("Component count unmatched while page recovering");n.nodeId.allocNodeId(e,sn.compIdArr[sn.compIdArrIndex++]);var o=sn.idDataMap[n.nodeId.getNodeId(e)];r._virtualTree=io(this._generateFunc,o)}else r._virtualTree=this._virtualTree;return r.shadowRoot=lo(r._virtualTree,e,null,t,!0),xo(r.shadowRoot,r.idMap,r.slots),r.listeners=[],this._isSimpleComponent||(e.__component__=!0),e.__treeManager__=n,r.shadowRoot.__treeManager__=n,n.operationFlow.registerSetDataCallback((()=>{e.triggerLifeTime("ready")})),r._delayedUpdateValues=null,r}updateGenerateFunc(e){this._generateFunc=Oo(e),this._virtualTree=io(this._generateFunc,this._initValues),Cs.list().forEach((t=>{[t.root,t.tabRoot].forEach((r=>{r&&V(r,1,(r=>{r instanceof Co.Component&&r.__templateInstance._template===this&&(r.__templateInstance._generateFunc=e,r.__templateInstance._resetShadowChildren(r,r.data,t))}))}))}))}}No.create=function(e,t,r,n){var o=new No;o._initValues=r,o._data=t;var i=e.template;return o._generateFunc=Oo(i.func),o._virtualTree=io(o._generateFunc,o._initValues),o._isSimpleComponent="simple://"===n.domain.slice(0,9),Jn(i.path,(e=>{i.func=e,o.updateGenerateFunc(e)})),o};class Ro{beforeMergeValues(e,t,r){if("number"!=typeof r)e.forEach(((e,r)=>{void 0!==e[1]?t[r]=!1:(t[r]=!0,console.warn('Setting data field "'+e[0].join(".")+'" to undefined is invalid.'))}));else{for(var n=0;n<r;n++)t[n]=!1;for(var o=r;o<e.length;o++){var i=e[o];void 0!==i[1]?t[o]=!1:(t[o]=!0,console.warn('Setting data field "'+i[0].join(".")+'" to undefined is invalid.'))}}}beforeUpdateValues(e,t,r){}updateValues(e,t,r,n,o,i){if(!sn.restoring){var a=null,s="number"!=typeof i;if(a=e.__treeManager__,s){a.operationFlow.start(Date.now());var l=[];o.forEach((e=>{void 0!==e[1]&&l.push(e)})),a.operationFlow.push([v.FLOW_UPDATE,a.nodeId.getNodeId(e),To(l)])}else{for(var u=[],c=i;c<o.length;c++){var d=o[c];void 0!==d[1]&&u.push(d)}a.operationFlow.push([v.FLOW_DATA_OBSERVER,To(u)])}if(this._delayedUpdateValues)this._delayedUpdateValues.push([To(t),r,n,o,i]);else{this._delayedUpdateValues=[];try{this._updateValues(e,t,r,n,o,i);var p=this._delayedUpdateValues;this._delayedUpdateValues=null;for(var f=0;f<p.length;f++){var h=p[f];this._updateValues(e,h[0],h[1],h[2],h[3],h[4])}}catch(e){throw this._delayedUpdateValues=null,e}}s&&a.operationFlow.end()}}_updateValues(e,t,r,n,o,i){var a="number"!=typeof i,s=!z("propValueDeepCopy"),l=an(t,o,!0,!1,s),u=io(this._generateFunc,l);an(t,o,!1,a,!1);var c=this._virtualTree;this._virtualTree=u,_o(c,u,this.shadowRoot)}_resetShadowChildren(e,t,r){var n=()=>{r.operationFlow.push([v.FLOW_HOT_UPDATE_CHILD])};r.operationFlow.start(Date.now()),r.operationFlow.push([v.FLOW_HOT_UPDATE,r.nodeId.getNodeId(e)]);for(var o=this.shadowRoot,i=(this._virtualTree.children||[]).length,a=0;a<i;a++)o.removeChild(o.childNodes[0]);n();var s=io(this._generateFunc,t);n(),this._virtualTree=s;for(var l=lo(s,null,e.shadowRoot,r,!0).childNodes,u=l.length,c=0;c<u;c++)o.insertBefore(l[0],o.childNodes[c]);r.operationFlow.end()}}var Po=c(),Do=null,Lo=()=>{Do={};var e=null;m&&m.plugins?e=m.plugins:"undefined"!=typeof window&&window&&window.__wxConfigAppService__&&window.__wxConfigAppService__.plugins&&(e=window.__wxConfigAppService__.plugins);var t=!1;if(e)for(var r of Object.keys(e)){var n=e[r].provider,o=e[r].subpackage;if(void 0!==o){t=!0;var i=o||"";"__APP__"===i&&(i=""),"/"===i[0]&&(i=i.slice(1)),i&&"/"!==i.slice(-1)&&(i+="/"),Do[n]=i}}if(!t){var a;if(m&&m.subPackages)a=m.subPackages;else{if("undefined"==typeof window||!window||!window.__subPackages)return;a=window.__subPackages}a.length&&a.forEach((e=>{if(e){var t=e.root||"";if(t&&"/"!==t.slice(-1)&&(t+="/"),e.plugins)for(var r of Object.keys(e.plugins)){var n=e.plugins[r]&&e.plugins[r].provider;n&&(Do[n]=t)}}}))}},Bo=e=>{var t=e.match(/(?:^|\/)__(wx|plugin)__\/(.*)$/);return t?"wx"===t[1]?"wx://"+t[2]:"plugin-private://"+t[2]:e},ko=e=>(Do||Lo(),(Po.Component._list[e]&&Po.Component._list[e].is||e).replace(/^plugin-private:\/\/([0-9a-zA-Z]+)\//,((e,t)=>(Do[t]||"")+"__plugin__/"+t+"/")).replace(/^wx:\/\//,"__wx__/")),Mo=()=>(Do||Lo(),Do),Fo=e=>Do[e]||"",jo=e=>(Do||Lo(),(Do[e]||"")+"__plugin__/"+e+"/"),Uo=e=>{Do||Lo();var t,r,n,o=e.match(/^plugin:\/\/(.+?)\//);if(o)return Uo(Do[o[1]]||"");if(o=e.match(/^plugin-private:\/\/([0-9a-zA-Z]+)\//))return Uo(Do[o[1]]||"");t=null!==(r=null===(n=m)||void 0===n?void 0:n.subPackages)&&void 0!==r?r:[];for(var i=0;i<t.length;++i){var a=t[i].root||"";if(a&&"/"!==a.slice(-1)&&(a+="/"),e.slice(0,a.length)===a)return t[i]}return null},$o=e=>{var t=Uo(e);if(!t)return"__APP__";var r=t.root||"";return"/"===r.slice(-1)?r:r+"/"},Wo=e=>{var t=Uo(e);return!!t&&t.independent},qo={main:"app-service.js",sub:"app-service.js",lazyCommon:"common.app.js",lazyApp:"appservice.app.js",plugin:"appservice.js"},Ho=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],Go=e=>("__APP__"===e||("/"!==e[0]&&(e="/"+e),"/"!==e[e.length-1]&&(e+="/")),e),Qo={},zo=(e,t)=>{e=Go(e),"string"!=typeof t.subpackage&&(t.subpackage=e),void 0===Qo[e]?Qo[e]=[t]:Qo[e].push(t)},Ko=X(["ready"]),Yo=(e,t)=>{Ko.on("ready",(()=>{t(Qo[e]||[])}))};m.onReady((()=>{var e=new Set,t={};Object.keys(m.plugins||{}).forEach((r=>{var n=m.plugins[r];"string"==typeof n.subpackage?zo(n.subpackage,n):(e.add(n.provider),t[n.provider]=n)})),(m.subpackages||[]).forEach((r=>{Object.keys(r.plugins||{}).forEach((n=>{var o=r.plugins[n],i=o.provider;e.has(i)&&(e.delete(i),delete t[i],zo(r.root,o))}))})),Array.from(e).forEach((e=>{zo("__APP__",t[e])})),Ko.notify("ready")}));var Vo=(e,t)=>{t(`isLazyLoad: ${Vi()}`),t(`moduleName: ${e}`);var r="devtools"===m.platform?[]:(Qo[Go(e)]||[]).map((e=>{var t=e.provider,r=`__plugin__/${t}`;return{plugin_id:t,prefix_path:Ho.includes(t)?null:r}}));t(`separatedPlugins: ${JSON.stringify(r)}`);var n="__APP__"===e,o=n?"":e;if(Vi()){var i=[];return r.forEach((e=>{var t=(o+e.prefix_path+"/").replace(/\/\/$/,"/");e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),i.push(t+qo.plugin)})),i.push(o+qo.lazyCommon,o+qo.lazyApp),t(`all files to inject: ${JSON.stringify(i)}`),i}var a=r.map((e=>{var t=(o+e.prefix_path+"/").replace(/\/\/$/,"/");return e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),t+qo.plugin}));return n?a.push(o+qo.main):a.push(o+qo.sub),t(`all files to inject: ${JSON.stringify(a)}`),a},Jo=c(),Xo=(e,t,r)=>{if(e instanceof Jo.Component){e!==window.__DOMTree__&&(t.compCount++,e.hasBehavior("wx-base")?(r&&t.rootInternalCompCount++,e.hasBehavior("wx-native")&&t.nativeCompCount++):r&&t.rootCustomCompCount++);var n=e===window.__DOMTree__&&r;e.shadowRoot instanceof Jo.Element&&Xo(e.shadowRoot,t,n)}for(var o=e.childNodes,i=0,a=o.length;i<a;i++){var s=(o[i]instanceof Jo.VirtualNode||e===window.__DOMTree__||e===window.__DOMTree__.shadowRoot)&&r;o[i]instanceof Jo.Element&&Xo(o[i],t,s)}},Zo={id:null,prev:null,data:[]};we(v.SAVE_STATE,(()=>{"function"==typeof wx.webViewReadyToTerminate&&wx.webViewReadyToTerminate({})})),we(v.RESTORE_STATE,(([e,t,r,n],o,a)=>{if(e&&e.isSplitData){var{id:s,index:l,total:u,data:c}=e.splitInfo;if(1!==l&&(l!==Zo.prev+1||s!==Zo.id))return Zo.id=null,Zo.prev=null,void(Zo.data=[]);if(l!==u)return Zo.id=s,Zo.prev=l,void Zo.data.push(c);Zo.data.push(c);var d=Zo.data.join("");try{d=JSON.parse(d)}catch(e){console.error("Expected parse completed data with split data but got error"),i.errorReport({key:"webviewScriptError",error:new Error("Expected parse completed data with split data but got error")}),d=null}if(Zo.id=null,Zo.prev=null,Zo.data=[],!d)return;e=d[0],t=d[1],r=d[2],n=d[3]}sn.restoring=e||{},sn.idDataMap=t,sn.compIdArr=r,sn.compIdArrIndex=0;var p=Cs.get(a).compManager;p.restore(n),sn.onReady=p.onRestoreInjectDone.bind(p)}));var ei=e=>{(e=>{var t=document.body.scrollTop||document.documentElement.scrollTop;e.__page__={scrollTop:t}})(e),e.compExtraDataMap={};var t=0;window.__TAB_BAR__&&(V(window.__TAB_BAR__,1,(r=>{r.triggerLifeTime("saved",[e]),Un(e.compExtraDataMap,r,t++)})),e.compExtraDataMap),V(window.__DOMTree__,1,(r=>{r.triggerLifeTime("saved",[e]),Un(e.compExtraDataMap,r,t++)})),e.compExtraDataMap},ti=e=>{(e=>{var t=e.__page__;if(t){var r=parseInt(t.scrollTop,10);requestAnimationFrame((()=>{document.body.scrollTop=document.documentElement.scrollTop=r}))}})(e);var t=0;window.__TAB_BAR__&&(V(window.__TAB_BAR__,1,(r=>{r.triggerLifeTime("restored",[e]),$n(e.compExtraDataMap,r,t++)})),e.compExtraDataMap),V(window.__DOMTree__,1,(r=>{r.triggerLifeTime("restored",[e]),$n(e.compExtraDataMap,r,t++)})),e.compExtraDataMap},ri=()=>{__webViewSDK__.publish("recycleStatistics",(()=>{var e={compCount:0,customCompCount:0,nativeCompCount:0,rootCustomCompCount:0,rootInternalCompCount:0};try{Xo(window.__DOMTree__,e,!0)}catch(e){}var{compCount:t,customCompCount:r,nativeCompCount:n,rootCustomCompCount:o,rootInternalCompCount:i}=e,a=o+i;return{compCount:t,customCompCount:r,nativeCompCount:n,rootCompCount:a,rootCustomCompCount:o,rootCustomCompRatio:a?Math.floor(100*o/a):0,rootInternalCompCount:i}})());var e={};ei(e),ge(v.REQUEST_SAVE,e,0,!0)},ni=c(),oi=262144,ii=Date.now(),ai=(e,t)=>{var r=Cs.get(e);r&&(r.statesData=t,r.tabRoot&&V(r.tabRoot,1,(e=>{e.triggerLifeTime("saved")})),V(r.root,1,(e=>{e.triggerLifeTime("saved")})),ge(v.SAVE_STATE,[],e))},si=e=>{var t=Cs.get(e);if(t){var r=t.nodeId.getAll(),n={},o=[],i=e=>{var i=t.nodeId.getNodeId(e);void 0!==i&&(o.push(i),n[i]=ni.Component.getInnerData(r[i]))};t.tabRoot&&!t.tabDestroyed&&V(t.tabRoot,1,i),V(t.root,1,i);var a=t.compManager.getRestoredData(),s=[t.statesData||{},n,o,a],l=JSON.stringify(s),u=l.length;if(u>oi){for(var c=[],d=0;u>d;)c.push(l.substr(d,oi)),d+=oi;for(var p=++ii,f=0,h=c.length;f<h;f++)ge(v.RESTORE_STATE,[{isSplitData:!0,splitInfo:{id:p,index:f+1,total:h,data:c[f]}}],e)}else ge(v.RESTORE_STATE,s,e);if(t.statesData=void 0,!t.tabDestroyed&&t.tabRoot){ge(v.COMPONENT_DEF_TAB,t.tabUsedDef,e);var _=t.tabRoot;t.operationFlow.start(),t.operationFlow.push([v.FLOW_CREATE_TAB,_.is,t.nodeId.getNodeId(_)]),t.operationFlow.push([v.FLOW_CREATE_TAB]),t.operationFlow.end()}ge(v.COMPONENT_DEF,t.usedDef,e);var g=t.root;t.operationFlow.start(),t.operationFlow.push([v.FLOW_INITIAL_CREATION,g.is,t.nodeId.getNodeId(g),{}]),t.operationFlow.push([v.FLOW_INITIAL_CREATION]),t.operationFlow.end(),t.tabRoot&&V(t.tabRoot,1,(e=>{e.triggerLifeTime("restored")})),V(t.root,1,(e=>{e.triggerLifeTime("restored")}))}},li=c(),ui={},ci={},di=function(e,t){return e+"/"+t},pi=function(e,t,r,n=!0){var o=t.match(/^plugin-private:\/\/(.*?)\//);if(!o)return!1;var i=o[1];if(n&&di(i,"0")!==e)return!1;var a=r.match(/^plugin:\/\/(.*?)\//);if(!a)return!1;var s=a[1];return(!n||di(s,"0")===e)&&(li.Component._list[r]?(console.error('"'+r+'" has been used as another component or page. Please do not register multiple components or pages with the same alias.'),!1):(((e,t)=>{eo[e]=t})(r,t),li.Component._list[r]=li.Component._list[t],ui[r]=t,ci[t]=r,!0))},fi=function(e,t){for(var r in t)pi(e,t[r],r)};var hi=c(),_i=0;function gi(e){e&&".html"!==e.slice(5)&&(e+=".html");var t="";return __wxConfigWindow__&&__wxConfigWindow__.initialRenderingCache&&(t=String(__wxConfigWindow__.initialRenderingCache)),t}function vi(e,t){var r=Date.now(),n={},o={},i=document.head.querySelectorAll("style")||[],a=[];hi.ElementIterator.create(e,"composed-descendants-root-first",hi.Component).forEach((e=>{e.hasBehavior("wx-base")||(n["./"+e.is+".wxss"]=!0)})),Object.keys(hi.Component._list).forEach((e=>{o["./"+e+".wxss"]=!0}));for(var s=0;s<i.length;s++){var l=i[s],u=l.getAttribute("wxss:path");null!=u&&(!o[u]||n[u]?a.push("<style>"+l.innerHTML+"</style>"):l.innerHTML.length+15)}var c=a.join(""),d=c+e.$$.innerHTML;wx.saveInitialRenderingCache({content:d,appserviceData:t});Date.now();c.length}function mi(){wx.saveInitialRenderingCache({content:""})}function yi(e,t){return"dynamic"!==gi(window.__route__)?(console.error('An initial rendering cache state is ignored, because initialRenderingCache mode is not "dynamic".'),!1):(e?vi(e,t):mi(),!0)}var bi=c(),wi=(e,t,r,n)=>{var o=`${Math.random()}-${+new Date}`,i=Cs.get(r);if(i)return i.operationFlow.push([v.FLOW_VIEW_INFO,e,t,o]),"function"==typeof n&&(i.viewInfoCbMap[o]=n),o},Ai=(e,t)=>{var r=Cs.get(e);r&&delete r.viewInfoCbMap[t]},Ei=c(),Ii=c(),Si=c(),Ci={},Ti=(e,t)=>{void 0===Ci[e]&&(Ci[e]=X(["ready"])),Ci[e].on("ready",t)},Oi=(e,t)=>{if(wx.traceBeginEvent("Framework","dispatchViewRoute"),"webview"!==p()&&!m.isLazyLoad){var r=e.replace(/\.html$/,"").replace(/^\//,"");wx.traceBeginEvent("Framework","injectWxss"),ea(r),wx.traceEndEvent(),wx.traceBeginEvent("Framework","triggerGenerateFuncReady"),Zi(r,t),wx.traceEndEvent()}wx.traceEndEvent()},xi=Si.dataUtils.deepCopy,Ni={lazyRegistration:!0,publicProperties:!0},Ri={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",templateEngine:No,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,idPrefixGenerator:null,separateInnerData:!0,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},Pi={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",renderingMode:"full",templateEngine:No,multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!0,idPrefixGenerator:null,separateInnerData:!1,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},Di="undefined"!=typeof WeakMap?new WeakMap:{},Li={},Bi={},ki={},Mi={},Fi={},ji={},Ui=1,$i=Object.prototype.hasOwnProperty,Wi="wx-",qi=(e,t)=>{var r={},n=(t[e+".json"]||{}).usingComponents||{};for(var o of Object.keys(n))r[Wi+o]=Q(e,String(n[o]));return r},Hi=(e,t)=>{for(var r in t){var n=t[r];n.target=null!=n.target?String(n.target):Q(e,String(r))}return t},Gi=(e,t)=>{var r={},n=(t[e+".json"]||{}).componentGenerics||{};for(var o of Object.keys(n)){var i=n[o];"object"==typeof i?r[Wi+o]={default:Q(e,String(i.default||""))}:null!=i&&(r[Wi+o]={})}return r},Qi=(e,t)=>{var r=t[e+".json"]||{},n={},o=r.componentPlaceholder||{};return Object.keys(o).forEach((e=>{n[Wi+e]=Wi+String(o[e])})),n},zi=(e,t)=>(t[e+".json"]||{}).renderer,Ki=(e,t)=>(t[e+".json"]||{}).xrFrameTouchEventBubble,Yi=(e,t,r,n)=>{var o=Cs.get(r).nodeId.getNodeById(n,r);o&&t&&Si.Element.getMethodCaller(o).setData({[t]:e})},Vi=()=>m.isLazyLoad,Ji=e=>{var t="__plugin__/",r=e.indexOf(t);return-1===r?e:"plugin-private://"+e.slice(r+t.length)},Xi=e=>{if(-1===e.indexOf("plugin://"))return e;var t=e.match(/\w+\//);if(!t)return e;t=t[0].slice(0,t[0].length-1);var r,n,o=(r=t,(n=m.plugins||{})[r]?n[r].provider:null);if(!o)return e;var i=e.replace(t,o);return ui[i]?ui[i]:i},Zi=(e,t)=>{var r=Ji(e);s.info(`[triggerGenerateFuncReady] dispatch generateFuncReady from vd, comp=${r}`);var n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[r+".wxml"];Array.isArray(n)&&(n=n[0][n[1]]),window.__wxAppCodeReadyCallback__?window.__wxAppCodeReadyCallback__(n):window.document.dispatchEvent(new CustomEvent("generateFuncReady",{detail:{generateFunc:n,pageId:t}}))},ea=e=>{var t=p();if("webview"===t){var r=Ji(e);s.info(`[injectWxss] inject page wxss from vd, comp=${r}`);var n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[r+".wxss"];void 0!==n&&"function"==typeof n||(s.warn("codeMap does not contain valid wxss "+(r+".wxss")),n=()=>{}),window.__setCssStartTime__=Date.now(),n(),window.__setCssEndTime__=Date.now()}else s.info(`[injectWxss] current renderer is ${t}, handle root wxss by priority`)},ta=(e,t,r,n)=>{to(e.viewId);var o=[[],[],t,ui];ia(o,t,Object.create(null),"",e);var i=new Set(e.usedDef[0].map((e=>e.is))),a=new Set(e.usedDef[0].map((e=>e.is))),s=[],l=[];o[0].forEach((e=>{i.has(e.is)||(s.push(e),i.add(e.is))})),o[1].forEach((e=>{a.has(e.is)||(l.push(e),a.add(e.is))})),o[0]=s,o[1]=l,e.usedDef[0].push(...o[0]),e.usedDef[1].push(...o[1]),e.operationFlow.sendInIndividualFlow([v.FLOW_COMPONENT_DEF_ADD,n,o]),e.operationFlow.sendInIndividualFlow([v.FLOW_WAIT_COMPONENT,n]),e.operationFlow.start(Date.now()),e.operationFlow.push([v.FLOW_REPLACE_PLACEHOLDER,n]),r.replacers.forEach((e=>{e()})),e.operationFlow.end()},ra=e=>{var t=ca(e);return t?ua(t):""},na=e=>{var t=ci[e];if(!t)return{};var r=t.match(/^plugin:\/\/(wx[0-9a-f]{16})\/(.+)$/);if(!r)return{};var n=r[1],o=r[2],i=Y(m.plugins).find((e=>e.provider===n));if(!i)return{};if(!i.genericsImplementation)return{};var a=i.genericsImplementation[o]||{},s={},l=Fo(n);return Object.keys(a).forEach((e=>{s[Wi+e]=Q(l,String(a[e]))})),s},oa=(e,t,r)=>{if("wx://"!==t.slice(0,5)){var n=Bi[t];if(!n)throw new Error('"'+t+'" is not a behavior registered by Behavior()');e[0].unshift(n),r[t]=!0;var o=Fi[n.is];if(o)for(var i=0;i<o.length;i++){var a=o[i];r[a]||oa(e,a,r)}}},ia=(e,t,r,n,o,i=!1)=>{$i.call(ui,t)&&(t=ui[t]);var a=Li[t];if(!o.compManager.shouldUsePlaceholder(t)||!i)if(a){var s=ji[t];"wx://"!==t.slice(0,5)&&e[1].unshift(a),r[t]=!0;var l=ki[a.is],u=Mi[a.is];for(var c of Object.keys(l||{})){var d=l[c];r[d]||ia(e,d,r,t,o,!!s[c])}for(var p of Object.keys(u||{})){var f=u[p].default;f&&(r[f]||ia(e,f,r,t,o,!!s[p]))}var h=Fi[a.is];if(h)for(var _=0;_<h.length;_++){var g=h[_];r[g]||oa(e,g,r)}}else console.error(`Component is not found in path "${t}"${n?` (using by "${n}")`:""}`)},aa=(e,t)=>{var r={};for(var n in e.properties){var o=e.properties[n];if(null===o)r[n]={type:null};else if(o===Number||o===String||o===Boolean||o===Object||o===Array)r[n]={type:o.name};else if(void 0===o.public||o.public){var i=o.type,a=null;i!==Number&&i!==String&&i!==Boolean&&i!==Object&&i!==Array||(a=i.name);var s=void 0;if(o.optionalTypes){s=[];for(var l=0;l<o.optionalTypes.length;l+=1){var u=o.optionalTypes[l];u!==Number&&u!==String&&u!==Boolean&&u!==Object&&u!==Array||s.push(u.name)}}r[n]={type:a,optionalTypes:s,value:o.value}}}var c=e.options.innerDataExclude;return{is:e.is,using:e.using,generics:e.generics,placeholder:e.placeholder,behaviors:e.behaviors,data:e.data,properties:r,externalClasses:e.externalClasses,template:t,options:{domain:e.options.domain,writeOnly:e.options.writeOnly||void 0,multipleSlots:e.options.multipleSlots||void 0,writeIdToDOM:e.options.writeIdToDOM||void 0,styleIsolation:e.options.styleIsolation||void 0,addGlobalClass:e.options.addGlobalClass||void 0,hasObservers:!!e.observers,innerDataExcludeString:c?c.toString():null,virtualHost:e.options.virtualHost||void 0}}},sa=function(e){if(e.behaviors){for(var t=[],r=0;r<e.behaviors.length;r++){var n=String(e.behaviors[r]);if("/"!==n[0]&&"wx://"!==n.slice(0,5))throw new Error("Behaviors should be constructed with Behavior()");t.push(n)}e.behaviors=t,Fi[e.is]=t}else e.behaviors=null},la=function(e){var t="/"+Ui+++"/"+K(),r={};for(var n in e)r[n]="data"===n?xi(e[n]):e[n];return r.is=t,sa(r),r.options=Ni,Bi[t]=aa(r),r.definitionFilter=Si.Behavior.callDefinitionFilter(r),Si.registerBehavior(r),r.is},ua=e=>Si.Component.getComponentOptions(e).domain.split("/",1)[0],ca=e=>Di.get(e),da=(e,t,r)=>{var n=Si.Component.getComponentOptions(t).domain,o=Si.Component.getMethod(t,"__export__"),i=n===e?Si.Element.getMethodCaller(t):null;if(o){var a=n===e?r:null,s=o.call(Si.Element.getMethodCaller(t),a);return void 0===s?i:s}return i},pa=(e,t,r)=>{var n=ca(e),o=Si.Component.getComponentOptions(n).domain,i=n.shadowRoot;if(r)return i.querySelectorAll(t).map((t=>da(o,t,e)));var a=i.querySelector(t);return a?da(o,a,e):null},fa=(e,t,r)=>{e!==_a&&Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})};function ha(){}var _a=ha.prototype=Object.create(Object.prototype,{is:{get(){return ca(this).is},set(e){fa(this,"is",e)}},id:{get(){var e=ca(this);return Si.Component.getComponentOptions(e).writeOnly?"":e.id},set(e){fa(this,"id",e)}},getPageId:{get:()=>function(){return"pageId:"+ca(this).__treeManager__.viewId},set(e){fa(this,"getPageId",e)}},router:{get(){return ca(this).__pageRouter__},set(e){fa(this,"router",e)}},pageRouter:{get(){return(e=>{for(var t=ca(e),r=Si.Component.getComponentOptions(t).domain;;){var n=t.ownerShadowRoot;if(!n)break;if(!(n instanceof Si.ShadowRoot))return null;var o=n.getHostNode();if(!o)return null;if(Si.Component.getComponentOptions(o).domain!==r)return null;t=o}return t})(this).__pageRouter__},set(e){fa(this,"pageRouter",e)}},renderer:{get(){var e=ca(this).__treeManager__;return be(e.viewId)},set(e){fa(this,"renderer",e)}},dataset:{get(){var e=ca(this);return Si.Component.getComponentOptions(e).writeOnly?null:e.dataset},set(e){fa(this,"dataset",e)}},properties:{get(){return this.__data__},set(e){fa(this,"properties",e)}},data:{get(){return this.__data__},set(e){fa(this,"data",e)}},setData:{get:()=>u.useTracedApiEnd((function(e,t){var r=ca(this),n=r.__treeManager__;return u.traceBeginAPI("setData",{is:this.is,viewId:n.viewId}),"function"==typeof t&&n.operationFlow.registerSetDataCallback(t,this,r),r.setData(e)})),set(e){fa(this,"setData",e)}},groupSetData:{get:()=>function(e){var t=ca(this).__treeManager__;t.operationFlow.start(Date.now()),t.operationFlow.push([v.FLOW_GROUP]);var r=null;try{e.call(this)}catch(e){r=e}if(t.operationFlow.push([v.FLOW_GROUP_END]),t.operationFlow.end(),r)throw r},set(e){fa(this,"setData",e)}},replaceDataOnPath:{get(){return(e,t)=>ca(this).replaceDataOnPath(e,t)},set(e){fa(this,"replaceDataOnPath",e)}},mergeDataOnPath:{get(){return(e,t)=>ca(this).mergeDataOnPath(e,t)},set(e){fa(this,"mergeDataOnPath",e)}},applyDataUpdates:{get(){return()=>ca(this).applyDataUpdates()},set(e){fa(this,"applyDataUpdates",e)}},hasBehavior:{get(){return e=>ca(this).hasBehavior(e)},set(e){fa(this,"hasBehavior",e)}},triggerEvent:{get(){return(e,t,r)=>ca(this).triggerEvent(e,t,r)},set(e){fa(this,"triggerEvent",e)}},createSelectorQuery:{get(){return()=>u._createSelectorQuery({},ua(ca(this))).in(this)},set(e){fa(this,"createSelectorQuery",e)}},createIntersectionObserver:{get(){return e=>u._createIntersectionObserver(this,e,ua(ca(this)))},set(e){fa(this,"createIntersectionObserver",e)}},createMediaQueryObserver:{get(){return e=>u._createMediaQueryObserver(this,e,ua(ca(this)))},set(e){fa(this,"createMediaQueryObserver",e)}},getOpenerEventChannel:{get(){return()=>this.__eventChannel},set(e){fa(this,"getOpenerEventChannel",e)}},applyAnimation:{get(){return(e,t,r,n,o)=>{var i=ca(this);!function(e,t,r,n,o,i,a,s){var l=`${Math.random()}-${+new Date}`;"function"==typeof a&&(t.applyAnimationCbMap[l]=a),t.operationFlow.push([v.FLOW_SET_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof a,reqId:l,nodeId:t.nodeId.getNodeId(e),webviewId:r,selector:n,options:o,type:i?"animeJS":void 0,isLastAnimation:s}])}(i,i.__treeManager__,this.__wxWebviewId__,e,t,r,n,o)}},set(e){fa(this,"applyAnimation",e)}},clearAnimation:{get(){return(e,t,r)=>{var n=ca(this);!function(e,t,r,n,o,i){var a=`${Math.random()}-${+new Date}`;"function"==typeof i?t.clearAnimationCbMap[a]=i:"function"==typeof o&&(t.clearAnimationCbMap[a]=o),t.operationFlow.push([v.FLOW_CLEAR_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof t.clearAnimationCbMap[a],reqId:a,nodeId:t.nodeId.getNodeId(e),webviewId:r,selector:n,options:o}])}(n,n.__treeManager__,this.__wxWebviewId__,e,t,r)}},set(e){fa(this,"clearAnimation",e)}},animate:{get(){return(e,t,r,n,o)=>{if("function"==typeof n)o=n;else if(void 0!==n){var i=ca(this),a=i.__treeManager__;return void a.operationFlow.push([v.FLOW_SET_NODE_ANIMATION_INFO,{type:"scrollTimeline",nodeId:a.nodeId.getNodeId(i),selector:e,options:t,duration:r,timeline:n}])}for(var s=vr(t,r),l=0;l<s.length;++l){var u="animeJS"===s[l].type;delete s[l].type,l===s.length-1?this.applyAnimation(e,s[l],u,o,!0):this.applyAnimation(e,s[l],u)}}},set(e){fa(this,"animate",e)}},applyAnimatedStyle:{get(){return(e,t,r,n)=>{var o=ca(this),i=o.__treeManager__,a=i.viewId,s=u.worklet.registerJsValue(t);Promise.resolve().then((()=>{!function(e,t,r,n,o,i,a){var s=`${Math.random()}-${+new Date}`,l="function"==typeof a;l&&(t.animatedStyleCbMap[s]=a),t.operationFlow.push([v.FLOW_SET_NODE_ANIMATED_STYLE,{hasCallback:l,reqId:s,nodeId:t.nodeId.getNodeId(e),pageId:r,selector:n,updaterId:o,userConfig:i}])}(o,i,a,e,s,r,n)}))}},set(e){fa(this,"applyAnimatedStyle",e)}},clearAnimatedStyle:{get(){return(e,t,r)=>{var n=ca(this),o=n.__treeManager__;!function(e,t,r,n,o,i){var a=`${Math.random()}-${+new Date}`,s="function"==typeof i;s&&(t.animatedStyleCbMap[a]=i),t.operationFlow.push([v.FLOW_CLEAR_NODE_ANIMATED_STYLE,{hasCallback:s,reqId:a,nodeId:t.nodeId.getNodeId(e),pageId:r,selector:n,styleIds:o}])}(n,o,o.viewId,e,t,r)}},set(e){fa(this,"clearAnimatedStyle",e)}},selectOwnerComponent:{get(){return e=>{var t=ca(this);return Si.Component.getComponentOptions(t).writeOnly?null:(e=>{var t=ca(e),r=Si.Component.getComponentOptions(t).domain,n=t.ownerShadowRoot;if(!(n instanceof Si.ShadowRoot))return null;var o=n.getHostNode();return o?da(r,o,e):null})(this)}},set(e){fa(this,"selectOwnerComponent",e)}},selectComponent:{get(){return e=>{var t=ca(this);return Si.Component.getComponentOptions(t).writeOnly?null:pa(this,e,!1)}},set(e){fa(this,"selectComponent",e)}},selectAllComponents:{get(){return e=>{var t=ca(this);return Si.Component.getComponentOptions(t).writeOnly?[]:pa(this,e,!0)}},set(e){fa(this,"selectAllComponents",e)}},getRelationNodes:{get(){return e=>((e,t)=>{var r=ca(e).getRelationNodes(t);return null===r?null:r.map((e=>Si.Element.getMethodCaller(e)))})(this,e)},set(e){fa(this,"getRelationNodes",e)}},getTabBar:{get:()=>function(e){var t=ca(this).__treeManager__;return"function"==typeof e?t.tabRoot?(e(Si.Element.getMethodCaller(t.tabRoot)),Si.Element.getMethodCaller(t.tabRoot)):(rs(t.viewId).then((()=>{!t.tabDestroyed&&t.tabRoot&&e(Si.Element.getMethodCaller(t.tabRoot))})),null):t.tabDestroyed||!t.tabRoot?null:Si.Element.getMethodCaller(t.tabRoot)},set(e){fa(this,"getTabBar",e)}},exitState:{get(){return this.__exitState__},set(e){fa(this,"exitState",e)}},setInitialRenderingCache:{get:()=>function(e){var t=ca(this).__treeManager__;null===e?Xa(t):Ja(t,e)},set(e){fa(this,"exitState",e)}},setUpdatePerformanceListener:{get:()=>function(e,t){var r=ca(this),n=r.__treeManager__,o=n.nodeId.getNodeId(r);"function"==typeof t?(r.__updatePerformanceListener__=t,n.operationFlow.push([v.ENABLE_UPDATE_PERFORMANCE_STAT,o,e])):(r.__updatePerformanceListener__=null,n.operationFlow.push([v.DISABLE_UPDATE_PERFORMANCE_STAT,o]))},set(e){fa(this,"exitState",e)}},getPassiveEvent:{get:()=>function(e){wx.getPassiveEvent(this.__wxWebviewId__,e)},set(e){fa(this,"exitState",e)}},setPassiveEvent:{get:()=>function(e){wx.setPassiveEvent(this.__wxWebviewId__,e)},set(e){fa(this,"exitState",e)}}}),ga=function(e,t,r){var n=t[r+".json"]||{};void 0!==n.styleIsolation&&(e.options||(e.options={}),e.options.styleIsolation=n.styleIsolation),void 0!==n.pureDataPattern&&(e.options||(e.options={}),e.options.pureDataPattern=new RegExp(n.pureDataPattern))},va=function(e,t){var r,n;e.using=ki[e.is]=qi(e.is,t),e.generics=Mi[e.is]=Gi(e.is,t),e.placeholder=ji[e.is]=Qi(e.is,t),r=e.is,((n={isXrComp:"xr-frame"===zi(e.is,t),xrFrameTouchEventBubble:Ki(e.is,t)}).isXrComp||n.xrFrameTouchEventBubble)&&(Zn[r]=n),sa(e);var o=e.is+".wxml",i={path:o,func:Vn[o]||t[o]||null};e.template=i,null===e.template.func&&s.warn(`[componentRegistration] Generate function of ${e.is} not found in data thread`),Li[e.is]=aa(e,o);var a=Si.registerElement(e),l=Object.create(_a,{constructor:{value:ha,writable:!0,configurable:!0}});Si.Behavior.prepare(a.behavior);var u=a.behavior.methods;for(var c in u)l[c]=u[c];return Jn(e.is+".js",(t=>{t(),(e=>{var t=Li[e];Cs.list().forEach((r=>{ge(v.UPDATE_COMPONENT_DEF,[t],r.viewId),[r.root,r.tabRoot].forEach((t=>{t&&V(t,1,(t=>{if(t instanceof Si.Component&&t.is===e){var n=t===r.root;n&&r.lifetimeListener&&r.lifetimeListener.call(r.root,"onUnload"),ao(t,r),n&&r.lifetimeListener&&(r.lifetimeListener.call(r.root,"onLoad"),r.lifetimeListener.call(r.root,"onShow"))}}))}))}))})(e.is)})),l},ma=function(e,t,r,n){var o=n||__wxAppCurrentFile__,i=r||__wxAppCode__,a=i[o+"on"];if(!o||!a)return console.error("Component constructors should be called while initialization. A constructor call has been ignored."),"";var s=o.slice(0,-3);if(a.component&&"simple"===a.component.type)return function(e,t,r,n,o){ga(e,o,t);var i={is:t,using:qi(t,o),properties:e.properties,externalClasses:e.externalClasses,options:Ri},a=e.options||{};i.options=Ri,i.options.multipleSlots=a.multipleSlots||!1,i.options.writeOnly=!0,i.options.writeIdToDOM=!1,i.options.domain="simple://"+(n||"/"),i.options.styleIsolation=a.styleIsolation||"",i.options.addGlobalClass=a.addGlobalClass||!1,i.options.innerDataExclude=null,i.options.virtualHost=!1,Li[t]=aa(i,t+".wxml"),i.is}(e,s,0,t,i),s;ga(e,i,s),Aa(s,e.methods);var l=Si.Behavior.callDefinitionFilter(e),c={is:s,properties:e.properties,data:xi(e.data),methods:e.methods,behaviors:e.behaviors,lifetimes:e.lifetimes,pageLifetimes:e.pageLifetimes,created:e.created,attached:e.attached,ready:e.ready,moved:e.moved,detached:e.detached,saved:e.saved,restored:e.restored,relations:e.relations?Hi(o,e.relations):void 0,externalClasses:e.externalClasses,observers:e.observers,definitionFilter:l,options:Ri,initiator(){this.__customConstructor__=ma,this.__pageRouter__=u.createRouter(s,this.__treeManager__.viewId);var e=Object.create(p);Di.set(e,this),Si.Element.setMethodCaller(this,e),Object.defineProperties(e,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},d=e.options||{};c.options=Ri,c.options.multipleSlots=d.multipleSlots||!1,c.options.writeOnly=d.writeOnly||!1,c.options.writeIdToDOM=!1,c.options.domain=(d.writeOnly?"wo://":"")+(t||"/"),c.options.styleIsolation=d.styleIsolation||"",c.options.addGlobalClass=d.addGlobalClass||!1,c.options.innerDataExclude=d.pureDataPattern||null,c.options.virtualHost=d.virtualHost||!1;var p=va(c,i);return c.is},ya=function(e,t,r,n){var o=n||__wxAppCurrentFile__;if(!o)return console.error("Page constructors should be called while initialization. A constructor call has been ignored."),"";var i=r||"undefined"!=typeof __wxAppCode__&&__wxAppCode__||{},a=Object.create(null),s={methods:{}};for(var l in e)"data"===l?s.data=e.data:"function"==typeof e[l]?s.methods[l]=e[l]:"methods"===l?a.methods=e.methods:s[l]=e[l];var c=(e=>{if(!e)return!1;if(e instanceof Array){for(var t=0;t<e.length;t++){var r=String(e[t]);if("wx://"!==r.slice(0,5)&&!Bi[r])return console.warn('"behaviors" list contains non-behavior items. The whole list is ignored.'),!1}return!0}return!1})(s.behaviors),d=o.slice(0,-3);for(var p of(ga(s,i,d),c&&Si.Behavior.callDefinitionFilter(s),Object.keys(s)))"data"!==p&&"methods"!==p&&(a[p]=s[p]);Aa(d,s.methods);var f={is:d,behaviors:c?s.behaviors:void 0,data:xi(s.data),methods:s.methods,properties:void 0===e.properties?s.properties:void 0,lifetimes:void 0===e.lifetimes?s.lifetimes:void 0,pageLifetimes:void 0===e.pageLifetimes?s.pageLifetimes:void 0,created:void 0===e.created?s.created:void 0,attached:void 0===e.attached?s.attached:void 0,ready:void 0===e.ready?s.ready:void 0,moved:void 0===e.moved?s.moved:void 0,detached:void 0===e.detached?s.detached:void 0,saved:void 0===e.saved?s.saved:void 0,restored:void 0===e.restored?s.restored:void 0,relations:void 0===e.relations&&s.relations?Hi(o,s.relations):void 0,externalClasses:void 0===e.externalClasses?s.externalClasses:void 0,observers:void 0===e.observers?s.observers:void 0,options:Ri,initiator(){this.__customConstructor__=ya,this.__pageRouter__=u.createRouter(d,this.__treeManager__.viewId);var e=Object.create(_);Di.set(e,this),Si.Element.setMethodCaller(this,e),Object.defineProperties(e,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},h=s.options||{};f.options.multipleSlots=!1,f.options.writeOnly=!1,f.options.writeIdToDOM=!0,f.options.domain=t||"/",f.options.styleIsolation=h.styleIsolation||"shared",f.options.addGlobalClass=!1,f.options.innerDataExclude=h.pureDataPattern||null,f.options.virtualHost=h.virtualHost||!1;var _=va(f,i);return _.__freeData__=a,f.is},ba="_worklet_factory_",wa={},Aa=(e,t)=>{wa[e]={},Object.keys(t||{}).forEach((r=>{if(r.startsWith("_")&&r.endsWith(ba)){var n=r.slice("_".length,-ba.length);wa[e][n]=t[r]}}))},Ea=0,Ia={},Sa=(e,t,r)=>new Promise((n=>{var o=Cs.get(r).nodeId.getNodeId(e);Ia[Ea]=n,ge(v.REQUEST_WORKLET_METHOD,{methodName:t,nodeId:o,reqId:Ea},r),Ea++}));Ie(v.RESPONSE_WORKLET_METHOD,(e=>{var t=e[0].reqId,r=Ia[t];"function"==typeof r&&(delete Ia[t],r(e[0].workletId))}));var Ca=!0,Ta=e=>{(e=>{var t=bo++;wo.push(t);try{e(t)}catch(e){throw wo.pop(),e}wo.pop()})((()=>{Oa(e)}))},Oa=e=>{dn+=1;var t,r,n,o,a,l=Date.now(),u=e.operationFlow.iterator,c=u.expectStart(),d=u.nextStepType();if(d===v.FLOW_INITIAL_CREATION)xa(e,v.FLOW_INITIAL_CREATION),hn(c,l,Date.now(),2);else if(d===v.FLOW_INITIAL_RENDERING_CACHE)xa(e,v.FLOW_INITIAL_RENDERING_CACHE);else if(d===v.FLOW_CREATE_TAB)xa(e,v.FLOW_CREATE_TAB),hn(c,l,Date.now(),3);else if(d===v.FLOW_SET_ROOT_PROPERTIES){var p=u.nextStep();zn(e.root,p[1],p[2],p[3])}else if(d===v.FLOW_DESTROY_PAGE)u.nextStep(),ka(e);else if($i.call(Es,u.nextStepType())){var f=Es[u.nextStepType()],h=u.nextStep().slice(1);f(e.compManager,h)}else{var _=Date.now(),g=u.nextStep();if(g[0]===v.FLOW_UPDATE){var m=g[1],y=e.nodeId.getNodeById(m),b=g[2];if(y){if(b.length){var A=Si.Component.getDataProxy(y);A.setChanges(b),A.doUpdates(void 0,!1),Ao(m,(t=>({isMergedUpdate:!1,dataPaths:t.withDataPaths?b.map((e=>e[0])):void 0,pendingStartTimestamp:c,updateStartTimestamp:l,updateEndTimestamp:Date.now(),pageId:e.viewId})))}}else s.warn(`[flowUpdate] node ${g[1]} not found`),u.skipToEnd()}else if(g[0]===v.FLOW_GROUP){var E=u.nextStep();if(E[0]!==v.FLOW_GROUP_END)throw new Error(`Framework inner error (expect FLOW_GROUP_END but get ${w(E[0])})`)}else if(g[0]===v.FLOW_REPLACE_PLACEHOLDER){var I=g[1];e.compManager.getAndClearPendingPlaceholderReplacement(I).replacers.forEach((e=>{e()}))}else if(g[0]===v.FLOW_HOT_UPDATE){var S=e.nodeId.getNodeById(g[1]);S?S.__templateInstance._resetShadowChildren(S,S.data,e):u.skipToEnd()}else{if(g[0]!==v.FLOW_HOT_UPDATE_RESET)throw new Error(`Framework inner error (expect an update event but get ${w(g[0])})`);var C=e.nodeId.getNodeById(g[1]);ao(C,e)}((e,t,r,n)=>{i.speedReport({key:e,timeMark:{startTime:t,endTime:r},force:"reRenderTime"!==e,data:n})})("reRenderTime",_,Date.now()),Ca&&5===((e,t,r)=>(_n+=dn,vn+=r-t,mn+=pn,yn+=fn,bn+=r-e,dn=0,pn=0,fn=0,gn+=1))(c,l,Date.now())&&(Ca=!1,t=1,r=Math.ceil(vn/(gn||1)),n=Math.ceil(yn/(mn||1)),o=Math.ceil(bn/(gn||1)),a=[_n,gn,r,mn,n,1,o,t].map(encodeURIComponent).join(","),void 0!==i&&i.reportKeyValue({key:"SetDataPerf",value:a,force:!0}))}u.expectEnd()},xa=(e,t)=>{s.info(`[OperationFlow] executing init flow with type ${w(t)}`);var r,n=t===v.FLOW_CREATE_TAB,o=t===v.FLOW_INITIAL_RENDERING_CACHE,i=e.operationFlow.iterator,a=i.nextStep(),l=a[1],u=a[2],c=p(),h=null;if("skyline"===c)r=d().getContext(e.viewId);else if("scl"===c){r={mainRoot:f.getTabBarContainer()}}else"xr-frame"===c&&(r=xrFrame.getOrCreateContext(e.viewId));if(n){if(e.tabNodeId=u,s.info(`[OperationFlow] creating tab bar comp <${l}> ok, pageId=${e.viewId}`),"skyline"===c){var _=d().getTabBarContext();e.tabRoot=h=window.__TAB_BAR__=Si.Component.createWithContext("tab-bar",Si.Component._list[l],_,e),"function"==typeof h.__domElement.setStyleScope&&h.__domElement.setStyleScope(Si.getStyleScopeId(Si.Component._list[l].options.classPrefix))}else"scl"===c?e.tabRoot=h=window.__TAB_BAR__=Si.createElement("tab-bar",Si.Component._list[l]):"xr-frame"===c?s.info(`[OperationFlow] unexpected xr-frame tabb bar, pageId=${e.viewId}`):e.tabRoot=h=window.__TAB_BAR__=Si.createElement("tab-bar",Si.Component._list[l]);s.info(`[OperationFlow] create tab bar comp ok, pageId=${e.viewId}`)}else if(o){if(!l)return void yi(null);h=Si.createElement("initial-rendering-cache",Si.Component._list[l])}else{var g=a[3]||{};e.rootNodeId=u,s.info(`[OperationFlow] creating root component on view thread, pageId=${e.viewId}`),wx.traceBeginEvent("Framework","createRootComponent"),"skyline"===c?(e.root=h=window.__DOMTree__=Si.Component.createWithGenericsAndContext("wx-page",Si.Component._list[l],g,r,e),"function"==typeof h.__domElement.setStyleScope&&h.__domElement.setStyleScope(Si.getStyleScopeId(Si.Component._list[l].options.classPrefix))):"xr-frame"===p()?e.root=h=window.__DOMTree__=Si.Component.createWithGenericsAndContext("wx-xr-element",Si.Component._list[l],g,r,e):e.root=h=window.__DOMTree__=Si.Component.createWithGenerics("body",Si.Component._list[l],g,e),wx.traceEndEvent(),s.info(`[OperationFlow] create root component on view thread ok, pageId=${e.viewId}`)}if(e.nodeId.allocNodeId(h,u),h.setAttribute("is",l),sn.restoring&&!n){var y=sn.idDataMap[e.nodeId.getNodeId(h)];Si.Component.replaceWholeData(h,y,null),ti(sn.restoring),sn.restoring=null,sn.idDataMap=null}if((a=i.nextStep())[0]!==t)throw new Error(`Framework inner error (expect ${w(t)} end but get ${w(a[0])})`);if(e.nodeId.addNode(h),n)if("skyline"===c){s.info("[OperationFlow] attaching tabBar to skyline");var b=d(),A=b.getTabBarContext();h.__domElement.setStyle("pointer-events: none;"),A.attach(h.__domElement),Si.Element.pretendAttached(h),b.insertToInspecteeRoots(h),e.__attached=!0,s.info("[OperationFlow] attach tabBar to skyline done")}else if("scl"===c)s.info("[OperationFlow] attaching tabBar to scl"),r.mainRoot.appendChild(h),s.info("[OperationFlow] attaching tabBar to scl");else{var E=Si.createElement("wx-tab-bar-wrapper",Si.Component._list["wx://tab-bar-wrapper"]);E.appendChild(h),document.documentElement.insertBefore(E.$$,document.body),Si.Element.pretendAttached(E),e.tabDestroyed&&E.removeChild(h)}else if(o){var I=document.createElement("wx-initial-rendering-cache-wrapper");if(I.setAttribute("style","height: 0; overflow: hidden"),I.appendChild(h.$$),document.documentElement.insertBefore(I,document.body),(a=i.nextStep())[0]!==v.FLOW_INITIAL_RENDERING_CACHE)throw new Error("Framework inner error (expect initial rendering end but get another)");V(h,1,(e=>{e.triggerLifeTime("cacheAttached")})),yi(h,a[1]),e.nodeId.removeNode(h),document.documentElement.removeChild(I)}else{if("skyline"===c){s.info(`[WABaseLib.Critical] attach root element to skyline, pageId=${e.viewId}`);var S=d(),C=S.getContext(e.viewId);if(S.useCustomRoute(e.viewId)){s.info(`[WABaseLib.Critical] useCustomRoute, pageId=${e.viewId}`);var T=C.createElement("empty","host");T.setStyle("overflow: hidden;"),T.appendChild(h.__domElement),h.__domElement.forceDetached(),C.attach(h.__domElement,T),S.attachCustomRoute(e.viewId,T)}else s.info(`[WABaseLib.Critical] useNormalRoute, pageId=${e.viewId}`),C.attach(h.__domElement);S.insertToInspecteeRoots(h),e.__attached=!0}else"webview"===p()&&(document.body=h.$$);V(h,1,(e=>{e.triggerLifeTime("cacheAttached")})),"webview"===c&&function(e){_i&&Date.now();var t=gi(window.__route__);if("static"!==t){if("dynamic"!==t){var r=m.envVersion;"develop"!==r&&"trial"!==r||mi()}return!1}vi(e)}(h),Si.Element.pretendAttached(h)}s.info(`[OperationFlow] init flow type ${w(t)} execution ok`)},Na={},Ra=()=>{tn.setStartOperation(Ta)},Pa=!1,Da=(e={})=>{var t=p(),r="skyline"===t?S:C;if(ye(r,t),"reLaunch"!==e.openType&&"autoReLaunch"!==e.openType||(Ma(r),Pa=!1),!Pa){Pa=!0,s.info(`[VD] newTabBar, tabBarViewId=${r}`),Ha[r]=!0,Cs.create(r),Se(r);var n=Cs.get(r);if(n.operationFlow.unblock(),"skyline"===t){var o=d().getTabBarContext();__webviewEngine__.getStyleSheetManager(r).registerBackendContext(o)}if("scl"===t)n.compManager.injectComponentsRecursively([T],(()=>{ge(v.SCL_CONTEXT_READY,{},r)}))}},La=(e,t)=>{if(!Cs.get(e)){s.info(`[VD] newPage, pageId=${e}`),ye(e,p());var r=Cs.create(e).compManager;if(Ha[e]=!1,Ga[e]=[],Qa[e]=[],Se(e),Ti(e,(()=>{if(s.info(`[WebviewInjectFirstPage] onMainPageFrameReady, isLazyLoad=${Vi()}, pageId=${e}, isFirstPage=${m.isFirstPage}`),Vi()&&m.isFirstPage&&"webview"===p()){var t=m.appLaunchInfo.path,r=t.replace(/\.html$/,"").replace(/^\//,"");r=Xi(r),s.info(`[WebviewInjectFirstPage] entryPath=${t}, pageId=${e}, rootCompPath=${r}`);var n=Cs.get(e).compManager;setTimeout((()=>{(e=>{var t="ios"===m.platform,r=m.isLazyLoad,n=m.isFirstPage,o=m.appLaunchInfo.path.replace(/\.html$/,"").replace(/^\//,""),i=$o(o),a="__APP__"===i,l=[101,111].includes(m.appLaunchInfo.preloadType),u=t&&r&&n&&a&&l;if(s.info(`[fixPluginInjectionMiss] isIOS=${t} isLazyLoad=${r} isFirstPage=${n} isMainPackage=${a} isPreload=${l}, isNeedFix=${u}`),u){var c=[];Object.values(m.plugins||{}).filter((e=>e.subpackage.includes(i))).forEach((e=>{var t=e.provider,r=void 0!==window[`__pluginFrameStartTime_${t}__`];s.info(`[fixPluginInjectionMiss] pluginId=${t} isPluginInjected=${r}`),r||c.push(`__plugin__/${t}/pageframe.js`)})),s.info(`[fixPluginInjectionMiss] loadJsFiles to webview: [${c.join(",")}]`),Re(c,(()=>{e()}))}else e()})((()=>{r=Xi(r),n.setInitialSubPackage(r),n.injectComponentsRecursively([r],(()=>{Na[e].on("inject",(()=>{ea(r),Zi(r)}))}),!0)}))}))}})),Na[e]=X(["inject"]),Na[e].on("inject",(()=>{"webview"===p()&&es(e)})),m.onReady((()=>{Vi()&&M()?Ti(e,(()=>{"skyline"===p()?r.injectComponentsRecursively([T],(()=>{d().onPageReady(e,(()=>{var r="autoReLaunch"===t.openType||"reLaunch"===t.openType;t.isTabPage&&(k(t.path)?(es(e,r),j()):U()),Na[e].notify("inject")}))})):r.injectComponentsRecursively([T],(()=>{Na[e].notify("inject")}))})):Na[e].notify("inject")})),"skyline"===p()){var n=Mo();__webviewEngine__.addStyleSheetIndexGroup(""),Object.keys(n).forEach((e=>{var t=`${n[e]}__plugin__/${e}/`;__webviewEngine__.addStyleSheetIndexGroup(t)})),d().onPageReady(e,(r=>{var n,o,i,a,s,l;(__webviewEngine__.getStyleSheetManager(e).registerBackendContext(r),t.isTabPage)&&(k(t.path)?(Da(t),null===(n=window)||void 0===n||null===(o=n.__TAB_BAR__)||void 0===o||null===(i=o.__domElement)||void 0===i||i.setStyle("display: flex; pointer-events: none;")):null===(a=window)||void 0===a||null===(s=a.__TAB_BAR__)||void 0===s||null===(l=s.__domElement)||void 0===l||l.setStyle("display: none; pointer-events: none;"))}))}}},Ba=e=>{var t=Cs.get(e);if(s.info("[skyline] getDomTreeByPageId tm: ",typeof t),void 0!==t&&void 0!==t.root)return t.root},ka=e=>{if("webview"!==p()){var t=e.viewId;if(s.info(`[destroyPage] pageId=${t}`),Si.Element.pretendDetached(e.root),Cs.destroy(t),Fa(null),delete Ha[t],delete Ga[t],delete Qa[t],delete Na[t],Ae(t),(e=>{delete ue[e],delete ce[e]})(t),"skyline"===p()){var r=d();r.markDestroyContext(t),r.removeFromInspecteeRoots(e.root),__webviewEngine__.removeStyleSheetManager(t),y.emit("SKYLINE_DESTROY_PAGE",t)}else"xr-frame"===p()&&(xrFrame.getOrCreateContext(t).destroy(),delete window.__DOMTree__)}},Ma=e=>{if("webview"!==p()){s.info(`[CustomTabBar] destroyTabBar pageId=${e}`);var t=Cs.get(e);t&&(null!=t&&t.tabRoot&&Si.Element.pretendDetached(t.tabRoot),Cs.destroy(e),delete Ha[e],delete Ga[e],delete Qa[e],delete Na[e],"skyline"===p()&&(__webviewEngine__.removeStyleSheetManager(e),d().removeFromInspecteeRoots(t.root)))}},Fa=e=>{var t;window.__DOMTree__=null!==e?null===(t=Cs.get(e))||void 0===t?void 0:t.root:null};"skyline"===p()&&wx.subscribe("onAppRouteDone",(e=>{Fa(e.webviewId)}));var ja={String:String,Number:Number,Boolean:Boolean,Object:Object,Array:Array,null:null},Ua=(e,t)=>{for(var r in e.properties){var n=e.properties[r];n.type=ja[n.type],n.optionalTypes&&(n.optionalTypes=n.optionalTypes.map((e=>ja[e])))}var o="";t||(o=As.getComponentClassPrefix(e.is));var i=e.options,a=!(!i.writeIdToDOM&&!t);e.options=Pi,e.options.multipleSlots=i.multipleSlots||!1,e.options.writeOnly=i.writeOnly||!1,a||"xr-frame"===p()?e.options.idPrefixGenerator=null:e.options.idPrefixGenerator=K,e.options.domain=i.domain,e.options.randomizeTagName=!1,e.options.innerDataExclude=(e=>{if(!e)return null;var t=e.lastIndexOf("/"),r=e.slice(1,t),n=e.slice(t+1);return new RegExp(r,n)})(i.innerDataExcludeString),e.options.virtualHost=i.virtualHost;var l=!1;if(i.styleIsolation){var u=i.styleIsolation;"page-"===u.slice(0,5)&&(l=!0,u=u.slice(5)),"isolated"===u?(o=As.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1):"strong-isolated"===u?(o=As.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1,e.options.randomizeTagName=!0):"apply-shared"===u?(o=As.getComponentClassPrefix(e.is),e.options.addGlobalClass=!0):"shared"===u&&"/"===i.domain?(o="",e.options.addGlobalClass=!1):l=!1}else e.options.addGlobalClass=i.addGlobalClass||!1;e.options.classPrefix=o,i.hasObservers&&(e.observers={"**"(){}}),ne()&&(e.observers={...e.observers||{},"**"(e){h.invoke("componentDataChanged",{nodeId:this.__wxTmplId,data:e})}}),window.__customComponentMode__="undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template];var c=window.__generateFunc__;return"undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template]?c=__wxAppCode__[e.template]:s.warn(`[componentRegistration] Generate function of ${e.is} not found in view thread`),e.template={path:e.is+".wxml",func:c},Si.registerElement(e),{disableAppWxss:l,classPrefix:o}},$a=(e,t)=>{var r=__webviewEngine__.getStyleSheetManager(e,t);t.forEach((e=>{var t="__APP__"===e?"":e;r.setIndex(t+"app.fpiib"),Yo(e,(e=>{e.forEach((e=>{r.setIndex(`${t}__plugin__/${e.provider}/app.fpiib`)}))}))}))},Wa=(e,t,r)=>{var n="xr-frame"===p()?J(e):e,o=p();t||(window.__forceSaveStates__=ri,"function"==typeof wx.onWebViewWillManuallyTerminate&&wx.onWebViewWillManuallyTerminate(ri));var i,[a,s,l,u]=n,c=Cs.get(r);t||(c.rootCompName=l);for(var d=0;d<a.length;d++){var h=a[d];h.options.hasObservers&&(h.observers={"**"(){}}),h.options=Ni,Si.registerBehavior(h)}"skyline"===o?((i=__webviewEngine__.getStyleSheetManager(r)).preventUpdate(),i.setStyleSheet("app",0,2)):"webview"===o&&(i=window.__styleSheetManager2__).preventUpdate();for(var _=function(){var e=s[g],r=ko(e.is);r.startsWith("plugin-private://")&&!c.compManager.__injectedComponents.has(r)&&c.compManager.__injectedComponents.add(r);var n=e.is===l&&!t;"scl"===o&&t&&(n=!0);var{disableAppWxss:a,classPrefix:u}=Ua(e,n);a&&e.is===l&&!t&&("webview"===o?__webviewEngine__.disableStyleElement("app.wxss"):"skyline"===o&&i.disableStyleSheet("app"));var d=e.is+".wxss",p="undefined"==typeof __wxAppCode__?null:__wxAppCode__[d];if("skyline"===o){p&&!i.usePreCompiled&&p("",{allowIllegalSelector:!0});var h=0;"function"==typeof Si.getStyleScopeId&&(h=Si.getStyleScopeId(u));var _=e.is===l?1:0;i.setStyleSheet(r,h,_)}else"scl"===o?f.loadStyleBincode(`${r}.fpcssb`):"webview"===o&&(a&&e.is===l&&!t&&__webviewEngine__.disableStyleElement("app.wxss"),p&&((e.is!==l||t)&&p(u&&u+"--",{allowIllegalSelector:!0}),Jn(d,(e=>{e?e(u&&u+"--",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./"+d,""),wx.triggerPageReRender()}))))},g=0;g<s.length;g++)_();for(var v in Jn("app.wxss",(e=>{e?e("",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./app.wxss",""),wx.triggerPageReRender()})),"webview"!==o&&"skyline"!==o||(i.allowUpdate(),i.requestUpdate()),u)$i.call(Si.Component._list,u[v])&&(Si.Component._list[v]=Si.Component._list[u[v]])},qa=!1;Ie(v.LOAD_COMPONENT_DEF,((e,t,r)=>{s.info(`[loadComponentDef] isFirstPage=${m.isFirstPage}, isLazyLoad=${Vi()}`);var n=e[0];if(!Vi()&&Si.Component._list[n]&&"//"===Si.Component._list[n].options.domain&&Zi(n,r),Vi()&&("webview"!==p()||!m.isFirstPage)){var o=Cs.get(r).compManager;o.setInitialSubPackage(n);var i="webview"===p()?new Promise((e=>{"ios"===wx.getPlatform()&&m.clientVersion<402658304&&"undefined"==typeof __pageFrameStartTime__&&!qa?(we(v.LOAD_APP_PKG_READY,(()=>{Re(["common.app.js","webview.app.js"],(()=>{qa=!0,e()}),!0)}),0),ge(v.LOAD_APP_PKG,{})):e()})):Promise.resolve();Ti(r,(()=>{i.then((()=>{o.injectComponentsRecursively([n],(()=>{Na[r].on("inject",(()=>{ea(n),Zi(n,r)}))}),!0)}))}))}}));var Ha={},Ga={},Qa={};Ie(v.COMPONENT_DEF,((e,t,r)=>{Ha[r]?Wa(e,!1,r):Ga[r].push(e),Cs.get(r).compManager.setInitialSubPackage(e[2])})),Ie(v.COMPONENT_DEF_TAB,((e,t,r)=>{Ha[r]?"webview"!==p()||"scl"===p()?Wa(e,!0,r):Na[r].on("inject",(()=>{Wa(e,!0,r)})):Qa[r].push(e)}));var za=e=>{Ha[e]=!0,"webview"===p()&&es(e),Ga[e].forEach((t=>{Wa(t,!1,e)})),Ga[e]=[],Qa[e].forEach((t=>{Na[e].on("inject",(()=>{Wa(t,!0,e)}))})),Qa[e]=[]},Ka=(e,t,r,n,o)=>{u.traceBeginEvent("Framework","doDataThreadInitCreation");var i=[[],[],r=Bo(r),ui],a=Object.create(null);ia(i,r,a,"",t);var l=na(r);Y(l).forEach((e=>{ia(i,e,a,"",t)})),s.info(`[doDataThreadInitCreation] sending component def to view, viewId=${e}, rootCompName=${r}`),to(e),ge(v.COMPONENT_DEF,i,e),(e=>{Je&&ge(v.BANNING_MAP,[Je],e)})(e),t.rootCompName=r,t.rootNodeId=K(),s.info(`[OperationFlow] creating root component on data thread, use different shadowRoot=${void 0!==n}, viewId=${e}`),t.operationFlow.start(),t.operationFlow.push([v.FLOW_INITIAL_CREATION,r,t.rootNodeId,l]);var c=void 0===n?Si.Component.createWithGenerics("body",Si.Component._list[r],l,t):n.createComponent("body",Si.Component._list[r],o,t);return cn(c,t),t.root=c,t.usedDef="skyline"===be(e)?J(i):i,Si.Element.getMethodCaller(c).__wxExparserNodeId__=t.nodeId.allocNodeId(c,t.rootNodeId),t.operationFlow.push([v.FLOW_INITIAL_CREATION]),t.nodeId.addNode(c),u.traceEndEvent(),s.info(`[OperationFlow] create root component on data thread ok, viewId=${e}`),c};Ie(v.UPDATE_COMPONENT_DEF,((e,t,r)=>{var[n]=e,o=Cs.get(r);Si.Component._list[n.is]&&Ua(n,o.rootCompName===n.is)}));var Ya=(e,t)=>{we(v.WX_EVENT,(r=>{var n=r[2],o=r[1],i=t.nodeId.getNodeById(r[0]);if(i){var a=Si.Element.getMethodCaller(i),s=n._userTap;if(n._requireActive&&!L.isFramesetMode()){if(!(e=>{var t=L.getCurrentPagesByDomain("");return t[t.length-1].__wxWebviewId__===e||e===S})(e))return;delete n._requireActive}if(n._relatedInfo&&(L.DisplayReporter.setEventRelatedInfo(n._relatedInfo),delete n._relatedInfo),"function"!=typeof a[o])console.warn('Component "'+i.is+'" does not have a method "'+o+'" to handle event "'+n.type+'".');else if(s)Pn((()=>{var e=l.startTraceHandler(n);u.setWxInterfaceIsInvokeInTap(n.type),Si.safeCallback("Event Handler",a[o],a,[n],i),u.unsetWxInterfaceIsInvokeInTap(),l.endTraceHandler(e)}));else{var c=l.startTraceHandler(n);Si.safeCallback("Event Handler",a[o],a,[n],i),l.endTraceHandler(c)}}}),e),we(v.MODEL_VALUE_CHANGE,((e,t,r)=>{var{data:n,modelValueName:o,nodeId:i}=e[0];Yi(n,o,r,i)}),e)},Va=(e,t)=>{t.listenerInited||(t.listenerInited=!0,Ya(e,t),we(v.REQUEST_SAVE,(([t])=>{ai(e,t)}),e),we(v.CALL_METHOD_FROM_WXS,(e=>{jn(e)}),e),function(e,t){we(v.ANIMATION_TRANSITION_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.applyAnimationCbMap[e[0].reqId];"function"==typeof r&&(delete t.applyAnimationCbMap[e[0].reqId],bi.safeCallback("Animation",r,null,[]));var n=JSON.parse(e[0].args);t.operationFlow.push([v.FLOW_SET_NODE_NEXT_ANIMATION_INFO,n])}}),e),we(v.CLEAR_ANIMATION_COMPLETE,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.clearAnimationCbMap[e[0].reqId];"function"==typeof r&&(delete t.clearAnimationCbMap[e[0].reqId],bi.safeCallback("Clear Animation",r,null,[]))}}),e)}(e,t),function(e,t){we(v.APPLY_NODE_ANIMATED_STYLE_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=e[0].styleId,n=t.animatedStyleCbMap[e[0].reqId];"function"==typeof n&&(delete t.animatedStyleCbMap[e[0].reqId],Ii.safeCallback("AnimaedStyle",n,null,[{styleId:r}]))}}),e),we(v.CLEAR_NODE_ANIMATED_STYLE_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.animatedStyleCbMap[e[0].reqId];"function"==typeof r&&(delete t.animatedStyleCbMap[e[0].reqId],Ii.safeCallback("Clear AnimaedStyle",r,null,[]))}}),e)}(e,t),function(e,t){we(v.RESPONSE_VIEW_INFO,(([e,r])=>{if(r){var n=t.viewInfoCbMap[r];n&&n(e)}}),e)}(e,t),((e,t)=>{we(v.UPDATE_PERFORMANCE_STAT,(r=>{var[n,o]=r,i=t.nodeId.getNodeById(n);if(i&&i.__updatePerformanceListener__){var a=vo.Element.getMethodCaller(i);vo.safeCallback("Update Performance Listener",i.__updatePerformanceListener__,a,[o],i)}i&&"function"==typeof Eo&&Eo(o,i,e)}),e)})(e,t),we(v.REQUEST_WORKLET_METHOD,((e,t,r)=>{var n,o,{methodName:i,nodeId:a,reqId:s}=e[0],l=e=>ge(v.RESPONSE_WORKLET_METHOD,{reqId:s,workletId:e},r),c=Cs.get(r).nodeId.getNodeById(a),d=null!==(n=null==wa||null===(o=wa[c.is])||void 0===o?void 0:o[i])&&void 0!==n?n:null;if("function"==typeof d){var p=Si.Element.getMethodCaller(c),f=d.call(p);if("function"==typeof f)return void l(u.worklet.registerJsValue(f))}l(null)}),e))},Ja=(e,t)=>{var r=Bo(e.rootCompName),n=K();e.operationFlow.start(),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,r,n]);var o=Si.createElement("initial-rendering-cache",Si.Component._list[r],e);return Si.Element.getMethodCaller(o).__wxExparserNodeId__=e.nodeId.allocNodeId(o,n),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE]),e.nodeId.addNode(o),o.setData(t),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,t]),e.operationFlow.end(),e.nodeId.removeNode(o),o},Xa=e=>{e.operationFlow.start(),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,"",null]),e.operationFlow.end()},Za={},es=(e,t=!1)=>{void 0!==__wxAppCode__[T+".wxml"]?Za[e]||(Za[e]=!0,s.info(`[CustomTabBar] sendTabBarCreationRequest pageId=${e}`),ge(v.REQUEST_TAB,[t],e)):s.info(`[CustomTabBar] no ${T} def, ignore requestTab`)};Ie(v.DESTROY_TAB,((e,t,r)=>{s.info(`[CustomTabBar] destroyTabBar pageId=${r}`),Cs.get(r).tabDestroyed=!0,U()})),Ie(v.HIDE_TAB,((e,t,r)=>{s.info(`[CustomTabBar] hideTabBar pageId=${r}`),U()})),Ie(v.SHOW_TAB,((e,t,r)=>{s.info(`[CustomTabBar] showTabBar pageId=${r}`),Cs.get(r).tabDestroyed=!1,j()}));var ts={},rs=e=>new Promise((t=>{ts[e]=t})),ns=(e,t)=>{var r=(()=>{var e,t,r=M();return ss(T)||(r=!1),"singlePage"===(null===(e=m)||void 0===e||null===(t=e.appLaunchInfo)||void 0===t?void 0:t.mode)&&(r=!1),r})(),n=ls[e];if("string"==typeof n&&Wo(n))s.info(`[CustomTabBar] "${n}" is in independent subPackage, ignore`);else{var o=B(n),i=be(e)||"webview";if("scl"!==o&&i!==o&&(o=i),s.info(`[checkAndExecuteTabbarCreation] viewId=${e}, isGeneratorFunctionReady=${t}, needRenderCustomTabBar=${r}, renderer=${o}`),r&&("scl"!==o||t)){var a=Cs.get(e)||Cs.create(e);Va(e,a),a.tabRoot||a.tabDestroyed||(a.compManager.injectComponentsRecursively([T]),((e,t,r,n)=>{if(s.info(`doDataThreadTabbarCreation viewId: ${e}, tabCompName: ${r}, renderer: ${n}`),"webview"!==n){var o,i,a=N();if("skyline"===n)o=S;else{if("scl"!==n)throw Error(`[CustomTabBar] renderer: ${n} not support`);o=C}var l=a.has(o);if(l)i=a.get(o).tm,a.add(e,n,i),t.tabCompName=i.tabCompName,t.tabNodeId=i.tabNodeId,t.tabRoot=i.tabRoot,t.tabUsedDef=i.tabUsedDef;else{ye(o,n);var u=[[],[],r=Bo(r),{}];i=Cs.create(o),ia(u,r,Object.create(null),"",i),Va(o,i),ge(v.COMPONENT_DEF_TAB,u,o);var c=K();t.tabCompName=i.tabCompName=r,t.tabNodeId=i.tabNodeId=c,a.add(o,n,i),a.add(e,n,i),i.operationFlow.start(),i.operationFlow.push([v.FLOW_CREATE_TAB,r,c]);var d=Si.createElement("tab-bar",Si.Component._list[r],i);t.tabRoot=i.tabRoot=d,t.tabUsedDef=i.tabUsedDef=u,Si.Element.getMethodCaller(d).__wxExparserNodeId__=i.nodeId.allocNodeId(d,i.tabNodeId),i.operationFlow.push([v.FLOW_CREATE_TAB]),i.nodeId.addNode(d),Si.Element.pretendAttached(d)}t.nodeId.addNode(t.tabRoot),!l&&i.operationFlow.end(),"function"==typeof ts[e]&&ts[e]()}else{N().add(e,n,t);var p=[[],[],r=Bo(r),{}];ia(p,r,Object.create(null),"",t),ge(v.COMPONENT_DEF_TAB,p,e),t.tabCompName=r,t.tabNodeId=K(),t.operationFlow.start(),t.operationFlow.push([v.FLOW_CREATE_TAB,r,t.tabNodeId]);var f=Si.createElement("tab-bar",Si.Component._list[r],t);t.tabRoot=f,t.tabUsedDef=p,Si.Element.getMethodCaller(f).__wxExparserNodeId__=t.nodeId.allocNodeId(f,t.tabNodeId),t.operationFlow.push([v.FLOW_CREATE_TAB]),t.nodeId.addNode(f),Si.Element.pretendAttached(t.tabRoot),t.operationFlow.end()}})(e,a,T,o),t&&ge(v.FLUSH_BLOCKED,[],"skyline"===o?S:"scl"===o?C:e),a.rootCompName&&F(a,a.rootCompName,e))}}},os=!1,is=[],as=[];m.onReady((()=>{as.forEach((e=>{"skyline"!==be(e)&&ns(e,!0)})),as=null})),we(v.REQUEST_TAB,((e,t,r)=>{e[0]&&fs(r,!0),"scl"!==B(ls[r])||os?"skyline"===be(r)?ns(r,!0):null!==as?as.push(r):ns(r,!0):is.push(r)}),"$GLOBAL"),we(v.SCL_CONTEXT_READY,((e,t,r)=>{os=!0,is.forEach((e=>{ns(e,!0)}))}),C),Ie(v.FLUSH_BLOCKED,((e,t,r)=>{s.info(`[flushBlocked] pageId=${r}`),Cs.get(r).operationFlow.flushBlocked()}));var ss=e=>(e=Bo(e),$i.call(ui,e)&&(e=ui[e]),Li[e]),ls={},us=(e,t)=>{ls[e]=t},cs=(e,t,r,n,o)=>{s.info(`[addView] viewId=${e}, rootCompPath=${t}`),u.traceBeginEvent("Framework","addView"),us(e,t);var a=Cs.get(e)||Cs.create(e);a.lifetimeListener=r,a.operationFlow.unblock();try{"webview"===be(e)&&ns(e,!1)}catch(e){i.thirdErrorReport({error:e})}a.compManager.setInitialSubPackage(t),F(a,t,e),(e=>{"function"==typeof Eo&&e.operationFlow.push([v.ENABLE_GLOBAL_UPDATE_PERFORMANCE_STAT,Io])})(a),Va(e,a),t=Bo(t);var l=(m.subPackages||[]).filter((e=>!!e.allExtendedComponents));ge(v.LOAD_COMPONENT_DEF,[t,l],e),a.compManager.injectComponentsRecursively([t],null,!0,!0),ss(t)||(s.error(`[addView] viewId=${e} rootCompPath=${t} not found`),t="wx://not-found");var c=Ka(e,a,t,n,o);return u.traceEndEvent(),c},ds=(e,t,r=!0)=>{s.info(`[attachView] viewId=${e}`);var n=Cs.get(e);if(n){var o=n.root,i=!1,a={};0===o.is.indexOf("wx://inner-page")?(a=t,i=!0):Object.keys(t).forEach((e=>{Si.Component.hasProperty(o,e)&&(a[e]=t[e],i=!0)})),i&&n.root.setData(a),Xn()&&(n.initialRootData=t),r&&Si.Element.pretendAttached(o),n.root.__treeManager__.operationFlow.end()}},ps=(e,t=!0)=>{s.info(`[removeView] viewId=${e}`);var r=Cs.get(e);r&&(t&&Si.Element.pretendDetached(r.root),Cs.destroy(e),Ae(e),pe.add(e),u.worklet.removeRouteContext(e),r.operationFlow.sendInIndividualFlow([v.FLOW_DESTROY_PAGE]))},fs=(e,t=!1)=>{var r=N();if(t&&(r.remove(e),r.remove(S),as=null),r.has(e)){var n=r.getRenderType(e);r.remove(e),"skyline"===n&&r.remove(S),as=null}},hs=e=>{var t=Cs.get(e);if(!t)return!1;var r=t.root;return!!r&&Si.Element.isAttached(r)},_s=new WeakMap,gs={onNegotiation:(e,t,r)=>{var n=r||__wxAppCode__,o=ca(e);if(!o.__isXrFrame__)throw new Error("component is not a xr-frame component");var i=(e=>{for(var t=e;;){var r=t.ownerShadowRoot;if(!r)break;if(!(r instanceof Si.ShadowRoot))return null;var n=r.getHostNode();if(!n)return null;t=n}return t})(o);if("skyline"!==be(i.__treeManager__.viewId))throw new Error("component is not in a skyline page");if(!0!==(n[o.is+".json"]||{}).xrFrameTouchEventBubble)throw new Error('component should set "xrFrameTouchEventBubble" to true in configuration');_s.set(o,t)},negotiate:(e,t,r)=>{var n=_s.get(e);"function"==typeof n?n(t,r):r(!0,!0)}};we(v.LOAD_APP_PKG,((e,t,r)=>{Pe("__APP__",(()=>{ge(v.LOAD_APP_PKG_READY,{},r)}))}),"$GLOBAL");var vs=!1,ms=Object.prototype.hasOwnProperty,ys=()=>"devtools"===m.platform||"devtool"===m.serviceRuntime,bs=()=>"undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__,ws=!0;class As{constructor(e,t){this.__viewId=e,this.__treeManager=t,this.__loadedSubPackage=new Set,this.__injectedSubPackage=new Set,this.__logPrefix=`[CompMgr] [data] $[${this.__viewId}]`,this.__log=e=>{s.info(`${this.__logPrefix} ${e}`)},this.__ensureComponentNotifier={},this.__placeholderReplacement=null,this.__pendingReplacement=new Map,this.__injectedComponents=new Set([]),this.__restoreInjectNotifier=null}getRestoredData(){return[Array.from(this.__loadedSubPackage),Array.from(this.__injectedSubPackage),Object.fromEntries(As.__classPrefixMap),Array.from(this.__injectedComponents),this.__treeManager.rootCompName]}getRestoreInjectNotifier(){return this.__restoreInjectNotifier||(this.__restoreInjectNotifier=X(["inject"])),this.__restoreInjectNotifier}restore(e){var[t,r,n,o,i]=e,a=()=>{ea(i),Zi(i),this.getRestoreInjectNotifier().notify("inject")};this.setSubPackageLoaded(t),this.batchInjectSubPackages(r,(()=>{Vi()?this.batchInjectComponents(o,a):a()})),As.__usedClassPrefix=new Set(Object.values(n)),As.__classPrefixMap=new Map(Object.entries(n))}onRestoreInjectDone(e){this.getRestoreInjectNotifier().on("inject",e)}recurseUsingComponents(e){if(!Vi())return e;var t=__wxAppCode__,r="undefined"!=typeof __WXML_DEP__&&__WXML_DEP__||{},n=new Set,o=new Set,i=e=>{if(!n.has(e)){if(n.add(e),ms.call(t,e+".json")){o.add(e);var a=qi(e,t),s=Gi(e,t),l=Qi(e,t);for(var u of Object.keys(a))ms.call(l,u)?ms.call(a,l[u])&&i(a[l[u]]):i(a[u]);for(var c of Object.keys(s)){var d=s[c];"string"==typeof d.default&&i(d.default)}}(r["./"+e+".wxml"]||[]).forEach((e=>{var t=e.substr(2,e.length-7);i(t)}))}};e.forEach((e=>{i(e);var t=na(Bo(e));Y(t).forEach((e=>{o.add(e)}))}));var a=Array.from(o);return this.__log(`recurseUsingComponents(${JSON.stringify(e)}) => [${a.length} components]`),a}batchLoadSubPackages(e,t){this.__log("loadSubPackages begin: "+e.join(", "));var r=!0;setTimeout((()=>{r&&je({type:"subpackage",errMsg:"loadSubpackage: timeout",subpackage:e})}),ke);var n=0;Promise.all(e.map((e=>new Promise((t=>{Pe(e,t)}))))).then((o=>{r=!1;var i=[];o.forEach((e=>{var{res:t,pkg:r,cost:o}=e;"fail"===t?je({type:"subpackage",subpackage:[r],errMsg:"loadSubpackage: fail"}):i.push(r),n+=o})),this.__log(`loadSubPackages end: ${e.join(", ")}, cost: ${n}`),this.setSubPackageLoaded(i),this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_SET_SUBPACKAGE_LOADED,i]),t(i)}))}setSubPackageLoaded(e){this.__log("setSubPackageLoaded: "+e.join(", ")),e.forEach((e=>{this.__loadedSubPackage.add(e)}))}batchInjectSubPackages(e,t){this.__log("injectSubPackages: "+e.join(", "));var r=e.filter((e=>!this.__injectedSubPackage.has(e))).map((e=>"__APP__"===e||"/"===e.slice(-1)?e:e+"/"));if(ys()){De(r),this.setSubPackageInjected(r)}else{var n=[];r.forEach((e=>{n.push(...Vo(e,(t=>{this.__log(`getEntryFile ${e}: ${t}`)})))})),Te(n),this.setSubPackageInjected(r)}}batchInjectComponents(e,t,r=!1){if(!Vi())return-1;var n=e.map((e=>ko(e))).filter((e=>!this.__injectedComponents.has(e))).filter((e=>!e.includes("://")));this.__log(`injectComponents: [${n.length} components]`);var o=(()=>{if(ys())return Be(n);var e=[];if(bs()){var t=new Set(n.map((e=>__LAZY_CODE_LOADING_CHUNK_MAP__[e]||e)));e=Array.from(t).map((e=>`${e}.appservice.js`))}else e=n.map((e=>`${e}.appservice.js`));var{res:o,cost:i}=Te(e,{isPageInitialScript:r});return"failed"===o&&je({type:"components",components:n,errMsg:"loadComponents: fail"}),i})();return n.forEach((e=>{this.__injectedComponents.add(e)})),o}setSubPackageInjected(e){this.__log("setSubPackageInjected: "+e.join(", ")),e.forEach((e=>{"__APP__"!==e&&0!==e.indexOf("/")&&(e=`/${e}`),Yo(e,(e=>{Object.keys(e).forEach((t=>{var r=(e=>{var t=e.provider,r=Ei.Component._list;return Object.keys(r).filter((e=>0===e.indexOf(`plugin-private://${t}/`)))})(e[t]);r.forEach((e=>{var t=ko(e);this.__injectedComponents.add(t)}))}))}))})),e.forEach((e=>{this.__injectedSubPackage.add(e)}))}setInitialSubPackage(e){var t=[$o(e)];Wo(e)||t.includes("__APP__")||t.push("__APP__"),this.setSubPackageLoaded(t),this.setSubPackageInjected(t),(()=>{if(!vs){vs=!0;var e="disabled";m.isLazyLoad&&(e="undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__?"requiredComponentChunks":"requiredComponents"),s.info(`LazyCodeLoading: ${e}`)}})()}shouldUsePlaceholder(e){var t=ko(e),r=$o(t),n=this.__loadedSubPackage.has(r);return Vi()&&(n=n&&this.__injectedComponents.has(t)),!n}doLazyLoadReport(e,t){var r=wn(),n=ws;ws=!1;var o=Object.keys(__wxAppCode__).filter((e=>e.endsWith(".json"))).length;r.set("isFirstPage",n),r.set("totalComps",o),r.set("loadedComps",e),r.set("loadTime",t)}injectComponentsRecursively(e,t,r=!1,n=!1){if(Vi()){var o=this.recurseUsingComponents(e),i=this.batchInjectComponents(o,(e=>{0}),n);r&&this.doLazyLoadReport(o.length,i)}}ensureComponents(e,t,r){var n,o=e.map((e=>$o(e)));n=o,(o=Array.from(new Set(n))).some((e=>!Wo(e)))&&!o.includes("__APP__")&&o.unshift("__APP__"),o=o.filter((e=>!this.__loadedSubPackage.has(e))),this.batchLoadSubPackages(o,(n=>{this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_INJECT_SUBPACKAGE,t,n]),Vi()&&this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_INJECT_COMPONENT,t,e]),this.batchInjectSubPackages(n),this.injectComponentsRecursively(e),r()}))}pendPlaceholderReplacement(e){var t=this.getPlaceholderReplaceData();this.finishPlaceholderReplacement(),this.__pendingReplacement.set(e,t),this.__log(`set [${e}] as pending placeholder replacements (${t.replacers.length} replacers)`)}getAndClearPendingPlaceholderReplacement(e){var t=this.__pendingReplacement.get(e);return this.__pendingReplacement.delete(e),t}getEnsureComponentsNotifier(e){if(!this.__ensureComponentNotifier[e]){var t=["inject","def"];Vi()&&t.push("inject-common"),this.__ensureComponentNotifier[e]=X(t)}return this.__ensureComponentNotifier[e]}destructEnsureComponentsNotifier(e){this.__ensureComponentNotifier[e]&&delete this.__ensureComponentNotifier[e]}injectSubPackageOnReady(e,t){this.batchInjectSubPackages(t,(()=>{var t=Vi()?"inject-common":"inject";this.getEnsureComponentsNotifier(e).notify(t)}))}injectComponentsOnReady(e,t){Vi()&&this.getEnsureComponentsNotifier(e).on("inject-common",(()=>{this.injectComponentsRecursively(t,(()=>{this.getEnsureComponentsNotifier(e).notify("inject")}))}))}appendComponentDef(e,t){this.getEnsureComponentsNotifier(e).on("inject",(()=>{Wa(t,!1,this.__viewId),this.getEnsureComponentsNotifier(e).notify("def")}))}waitComponentEnsuring(e,t){this.getEnsureComponentsNotifier(e).on("def",(()=>{t((()=>{this.destructEnsureComponentsNotifier(e)}))}))}doPlaceholderReplace(){var e=K(),t=this.__treeManager,r=this.getPlaceholderReplaceData();this.finishPlaceholderReplacement();var n=Array.from(r.compNames);this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_PEND_PLACEHOLDER_REPLACEMENT,e]),this.__log(`doPlaceholderReplace(${e}) for ${r.replacers.length} placeholder replacements`),this.ensureComponents(n,e,(()=>{ta(t,t.rootCompName,r,e)}))}arrangePlaceholderReplace(e,t){null===this.__placeholderReplacement?this.__placeholderReplacement={compNames:new Set,replacers:[]}:clearTimeout(this.__placeholderReplacement.timer),this.__placeholderReplacement.compNames.add(e),this.__placeholderReplacement.replacers.push(t),this.__placeholderReplacement.timer=setTimeout((()=>{this.doPlaceholderReplace()}),50)}getPlaceholderReplaceData(){return this.__placeholderReplacement}finishPlaceholderReplacement(){this.__placeholderReplacement=null}static getComponentClassPrefix(e){if(As.__classPrefixMap.has(e))return As.__classPrefixMap.get(e);var t=e.split(/[^a-z0-9]+/i),r="",n=0,o=0;do{n<t.length?n+=1:o+=1,r=t.slice(-n).join("-"),o>0&&(r+="-"+o),Number(r[0])>=0&&(r="x-"+r)}while(As.__usedClassPrefix.has(r));return As.__classPrefixMap.set(e,r),As.__usedClassPrefix.add(r),r}}As.__classPrefixMap=new Map,As.__usedClassPrefix=new Set;var Es={[v.FLOW_PEND_PLACEHOLDER_REPLACEMENT](e,t){var r=t[0];e.pendPlaceholderReplacement(r)},[v.FLOW_COMPONENT_DEF_ADD](e,t){var r=t[0],n=t[1];e.appendComponentDef(r,n)},[v.FLOW_INJECT_SUBPACKAGE](e,t){var r=t[0],n=t[1];e.injectSubPackageOnReady(r,n)},[v.FLOW_INJECT_COMPONENT](e,t){var r=t[0],n=t[1];e.injectComponentsOnReady(r,n)},[v.FLOW_SET_SUBPACKAGE_LOADED](e,t){var r=t[0];e.setSubPackageLoaded(r)},[v.FLOW_WAIT_COMPONENT](e,t){var r=t[0];e.__treeManager.operationFlow.block(),e.waitComponentEnsuring(r,(t=>{e.__treeManager.operationFlow.unblock(),t()}))}},Is=Object.create(null);class Ss{constructor(e){this.viewId=e,this.listenerInited=!1,this.root=null,this.tabRoot=null,this.tabDestroyed=!1,this.usedDef=null,this.tabUsedDef=null,this.statesData=null,this.operationFlow=new tn(e,this),this.nodeId=new We,this.compManager=new As(e,this),this.rootNodeId="",this.tabNodeId="",this.rootCompName="",this.tabCompName="",this.applyAnimationCbMap={},this.clearAnimationCbMap={},this.animatedStyleCbMap={},this.viewInfoCbMap={},this.initialRootData=null,this.lifetimeListener=null}static create(e){var t=new Ss(e);return Is[e]=t,t}static destroy(e){delete Is[e]}static get(e){return Is[e]}static listViewId(){var e=[];for(var t of Object.keys(Is))e.push(Is[t].viewId);return e}static list(){var e=[];for(var t of Object.keys(Is))e.push(Is[t]);return e}static getByNode(e){return e.__treeManager__}}const Cs=Ss;var Ts=function(e,t){if(null==t){for(var r=Cs.list(),n=0;n<r.length;++n)if(void 0!==r[n].nodeId.getNodeById(e))return r[n].nodeId.getNodeById(e);return null}var o=Cs.get(t);return o?o.nodeId.getNodeById(e):null},Os=function(e,t){var r=void 0!==t?Cs.get(t):Cs.getByNode(e);return r?r.nodeId.getNodeId(e):""},xs=function(e){var t=Cs.get(e);return t?t.root:""},Ns=function(e){var t=Cs.get(e);return t?t.rootNodeId:""},Rs=function(e){var t=Cs.get(e);return t?t.rootCompName:""},Ps=function(e){var t=Cs.getByNode(e);return t?t.viewId:0};we(v.XR_FRAME_CANVAS_CREATED,function(){var e=He()((function*(e,t,r){var n=Cs.get(r),o=e[0],i=Date.now(),a=yield u.xrFrame.getCanvasContext(o),l=n.nodeId.getNodeById(e[1]).__xrFrameId__;u.xrFrame.assignCanvasNodeIdToXrFrame(o.nodeId,l),s.info(`[xrFrameCreated] service get xrFrame canvasNodeId=${o.nodeId}, pageId=${r}, xrFrameId=${l}`),ge(v.XR_FRAME_CANVAS_READY,[a,i],l)}));return function(t,r,n){return e.apply(this,arguments)}}(),"$GLOBAL");var Ds=function(){Yn=!0},Ls=function(e,t){var r=Kn[e];if(r)return Vn[e]=t,r(t)},Bs=c(),ks=e=>e;Bs.addGlobalErrorListener(((e,t)=>{var r=l.getCurrentEventInfo();r&&(r.callErr=e);var n=t.element&&t.element instanceof ha?t.element:null,o=n?ra(n):"";return i.thirdErrorReport({source:o,error:e,extend:t.message.replace(/^\[exparser\] \[(error|warning)\] /i,"")}),!1})),Bs.addGlobalWarningListener((e=>{console.warn(e.replace(/^\[exparser\] \[(error|warning)\] /i,""))})),Bs.globalOptions.createFakeDomElement=!1,Bs.globalOptions.inDocument=!1,Bs.globalOptions.documentBackend="none",Bs.updateDefaultComponent(),g.registerBehavior({is:"wx://form-field",properties:{name:{type:String,public:!0},value:{type:null,public:!0}}}),g.registerBehavior({is:"wx://form-field-group"}),g.registerBehavior({is:"wx://form-field-button"}),g.registerBehavior({is:"wx://style-filter"}),g.registerBehavior({is:"wx://request-filter"}),g.registerBehavior({is:"wx://request-sender"}),g.registerBehavior({is:"wx://component-export",definitionFilter(e){"function"==typeof e.export&&("object"==typeof e.methods?e.methods.__export__=e.export:e.methods={__export__:e.export})}}),(()=>{var e={domain:"//",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1};["not-found","functional-page"].forEach((t=>{ma({options:e,properties:{}},"//",{[`wx://${t}.json`]:{usingComponents:{}}},`wx://${t}.js`)}))})(),D=t})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};e.r(r),e.d(r,{App:()=>xe,Behavior:()=>Gr,Component:()=>Hr,DisplayReporter:()=>Q,Page:()=>qr,__createPluginGlobal:()=>Wr,__getCreatePluginGlobal:()=>Ur,__setCreatePluginGlobal:()=>$r,convertComponentAliasToRoute:()=>Fr,getApp:()=>Ne,getCurrentPage:()=>nt,getCurrentPages:()=>Nt,getCurrentPagesByDomain:()=>xt,getCurrentRoute:()=>lr,getGlobalWebviewIds:()=>Rt,getPageByWebviewId:()=>Pt,getPageMetaByWebviewId:()=>Ct,getPipPage:()=>ht,hasPageRoute:()=>Tt,isFramesetMode:()=>pt,openNewXrFrame:()=>Pr,setPrivateExtraData:()=>Pe,showShareTimelineMenuIfNeeded:()=>re});var n=(e,t)=>{for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e},a=()=>{},c=e=>Object.prototype.toString.call(e).split(" ")[1].split("]")[0],d=e=>"Promise"===c(e),p=Object.prototype.toString,h=e=>"[object Object]"===p.call(e),_=(e,t)=>{console.group(`${new Date} ${e}`),console.error(t),console.groupEnd()},g=(e,t)=>{console.group(`${new Date} ${e}`),console.warn(t),console.groupEnd()},v=e=>{var t;null!==(t=m)&&void 0!==t&&t.debug&&console.info(e)},b=(e,t)=>{if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceEngineKnownError"===e.type)throw e;i.errorReport({key:"jsEnginScriptError",error:e,extend:t})}},w=(e,t)=>function(...r){try{return e.apply(e,r)}catch(e){return b(e,t),()=>{}}};class A extends Error{constructor(e){super(`APP-SERVICE-Engine:${e}`),this.type="AppServiceEngineKnownError"}}function E(e,...t){var r;i.__route__=this.__route__,i.__method__=e;try{var n=Date.now();r=this[e](...t);var o=Date.now()-n;o>1e3&&i.slowReport({key:"pageInvoke",cost:o,extend:`at ${this.__route__} page ${e} function`})}catch(t){var a=D.getOwnerPluginAppId(this);i.thirdErrorReport({source:a,error:t,extend:`at ${this.__route__} page ${e} function`})}return i.__route__=i.__method__="",r}var I=Object.assign,S=Object.prototype.hasOwnProperty,C=()=>"devtools"===m.platform,T=e=>{if("string"!=typeof e)return e;var t=e.split("?")[0]||"",r=e.split("?")[1];return t+=".html",void 0!==r?`${t}?${r}`:t};function O(){return u}var x=[];function R(e){if(!x)return e(u);x.push(e)}function B(e,t,r,n){return function(...o){try{return u.traceBeginEvent(e,t,n),r(...o)}finally{u.traceEndEvent()}}}y.onLoad((()=>{x&&(x.forEach((e=>e(u))),x=null)}));var k={},M=!0,F=null,j={},U={},$=null,W=null,q=null;function G(e={}){var t=e.clickTimestamp;t&&((t=(t=parseInt(t,10))<1e12?1e3*t:t)&&t>0&&(F=t),M=e.isLaunch)}class Q{constructor(e,t){this.showOptions={},this.hideOptions={},this.route=e,this.pageType=t||0,this.query={},this.deferred=[],this.showTimeStamp=null,this.pageReadyTime=null,this.showReferpagepath="",this.isentrance=0,this.isInitialLoading=!0,this.startCostTime=null,this.startType=null}static setOnLaunch(e={}){G(e),(j=Object.assign(j,e)).publicLibVersion=m.SDKVersion,j.hostAppId=m.host&&m.host.appId||"",Q._assignForClientOnShow(j,e)}static setOnAppShow(e={}){G(e),j=Object.assign(j,e),Q._assignForClientOnShow(j,e)}static setOnAppHide(e={}){U=Object.assign(U,e)}static setEventRelatedInfo(e){$=e}static _assignForClientOnShow(e,t){e.shortLink=t.shortLink||"",e.scene_note=t.scene_note||t.sceneNote||"",e.referpagepath=t.referpagepath||"",e.usedstate=t.usedstate||t.usedState,e.prescene=t.prescene,e.prescene_note=t.prescene_note||t.presceneNote||"",e.clickTimestamp=Date.now()}checkShowOptions(){var e=j,t=this.showOptions;t.scene=e.scene||0,t.scene_note=e.scene_note,t.sessionid=e.sessionid||e.sessionId,t.usedstate=e.usedstate,t.referpagepath=e.referpagepath,t.clickTimestamp=e.clickTimestamp,t.prescene=e.prescene,t.prescene_note=e.prescene_note,t.apptype=i.getAppType(),t.publicLibVersion=e.publicLibVersion,t.hostAppId=e.hostAppId||"",t.shortLink=e.shortLink||"";var r=this.query,n=[];r&&"object"==typeof r&&Object.keys(r).forEach((e=>{n.push(`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)})),t.query=n.join("&")}checkHideOptions(){var e=U,t=this.hideOptions;t.targetAction=e.targetAction||0,t.targetPagePath=e.targetPagePath||"",void 0!==e.usedstate&&(t.usedstate=e.usedstate),void 0!==e.usedState&&(t.usedstate=e.usedState)}static _getNetworkType(){var e=O()._getCurrentNetworkType()||"";return"none"===e&&(e="offline"),e}_checkDeferred(){for(var e=this.deferred;e.length;){e.pop()()}}_reportShowPage(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");i.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}_reportHidePage(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");i.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}_submit(){i.submit(),setTimeout((()=>{i.submit()}),100)}_reportRealtime(e){var t;if(!C()){var r="",n=2;if(m){var o=m.accountInfo,i=m.envVersion;o&&(r=o.appId||""),"release"===i?n=1:"trial"===i&&(n=3)}var a=O().getStableSystemInfo(),s={DeviceModel:a.model||"",DeviceBrand:a.brand||"",OsName:a.platform||"",OsVersion:a.system||"",LanguageVersion:a.language||"",appid:r,appversion:(null===(t=m.appLaunchInfo)||void 0===t?void 0:t.appversion)||0,appstate:n,event_id:e.event_id,scene:e.scene,scene_note:(e.scene_note||"").substr(0,1024),sessionid:e.sessionid,usedstate:e.usedstate,pagepath:e.pagepath,networktype:e.networktype,costtime:e.costtime,staytime:e.staytime,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.publicLibVersion,prescene:e.prescene,prescene_note:e.prescene_note,isentrance:e.isentrance,query:(e.query||"").substr(0,1024),apptype:e.apptype,pagetype:e.pagetype,anchorTargetText:e.anchorTargetText,clickTime:e.clickTimestamp,anchorTargetRelatedText:e.anchorRelatedText,orientationChangeCount:0,startCostTime:e.startCostTime,startType:e.startType,reportTime:e.reportTime};try{O().operateRealtimeData(1e3,JSON.stringify(s),!0)}catch(e){}try{O().trackWeReportSession(s)}catch(e){}}}setReadyTime(e){this.pageReadyTime=e,this._checkDeferred()}setQuery(e){this.query=e}reportShowPage(){this._checkDeferred(),this.checkShowOptions();var e=Date.now(),t=this.route,r=this.pageType,n=this.showOptions,o=n.referpagepath||"",i=n.clickTimestamp,a=0,s=0,l=0;W&&W!==t&&(o=W+".html",i=e);var u=$;$=null;var c={anchorTargetText:"",anchorRelatedText:""};this.isInitialLoading&&u&&u.anchorTapTime&&i-u.anchorTapTime<1e3&&(c.anchorTargetText=u.anchorTargetText,c.anchorRelatedText=u.anchorRelatedText),W=t,this.showTimeStamp=e,this.showReferpagepath=o,q!==n.sessionid&&(q=n.sessionid,a=1),1===a&&(s=e-F,l=M?1:2,this.startCostTime=s,this.startType=l),this.isInitialLoading=!1,this.isentrance=a;var d=Object.assign({},n,c,{event_id:1,pagepath:t+".html",networktype:Q._getNetworkType(),staytime:0,referpagepath:o,targetAction:0,targetPagePath:"",isentrance:a,pagetype:r,clickTimestamp:i,startCostTime:s,startType:l});this.pageReadyTime?this._reportShowPage(d):this.deferred.push((()=>{this._reportShowPage(d)}))}reportHidePage(e,t){this._checkDeferred(),this.checkShowOptions(),this.checkHideOptions();var r=Date.now(),n=this.route,o=this.pageType,i=this.showOptions,a=this.hideOptions,s=this.showReferpagepath||"",l=this.showTimeStamp?r-this.showTimeStamp:0;this.showTimeStamp=null;var u=void 0!==a.usedstate?a.usedstate:i.usedstate,c=a.targetAction,d=a.targetPagePath,p=0,f=0;e&&(c=t?1:2,d=e+".html"),1===this.isentrance&&(p=null!==this.startCostTime?this.startCostTime:p,f=null!==this.startType?this.startType:f,this.startCostTime=null,this.startType=null);var h=Object.assign({},i,{event_id:2,pagepath:n+".html",usedstate:u,networktype:Q._getNetworkType(),staytime:l,referpagepath:s,targetAction:c,targetPagePath:d,isentrance:this.isentrance||0,pagetype:o,anchorTargetText:"",anchorRelatedText:"",orientationChangeCount:this.orientationChangeCount||0,startCostTime:p,startType:f});this._reportHidePage(h)}}var z={kbone:0};function Y(){try{(()=>{var e=[];try{H.getAllModules().forEach((t=>{if(t.indexOf("miniprogram-render/")>=0&&(z.kbone=1),0===t.indexOf("miniprogram_npm/")){var r=t.indexOf("/",16),n=t.substring(16,r);"@"===n[0]&&(r=t.indexOf("/",r+1),n=t.substring(16,r)),e.push(n)}}));for(var t=e.length;t>=0;t--)for(var r=0;r<t;r++)e[r]===e[t]&&e.splice(t,1)}catch(e){}var n=[0,0,0,0,0,0,0,JSON.stringify(z),e.join(";")].map(encodeURIComponent).join(",");i.reportKeyValue({key:"CustomComponent",value:n,force:!0})})(),e=P.Component._list,t=Object.keys(e),r=["miniprogram-recycle-view","miniprogram-barrage","wxml-to-canvas","weui-miniprogram","miniprogram-navigation-bar"],n=/^miniprogram_npm\/(.+$)/,o={},t.forEach((t=>{var i=e[t].is,a=n.exec(i);if(a){var s=a[1],l=s.indexOf("/"),u=s.substring(0,l),c=s.substring(l+1);"@"===u[0]&&(l=s.indexOf("/",l+1),u=s.substring(0,l),c=s.substring(l+1)),(r.indexOf(u)>-1||/^@miniprogram-component-plus\//.test(u))&&(o[u]=o[u]||[],o[u].push(c))}})),Object.keys(o).forEach((e=>{i.reportKeyValue({key:"NpmExtendedLib",value:[e,o[e].join(";")].map(encodeURIComponent).join(","),force:!0})})),i.submit()}catch(e){}var e,t,r,n,o}var V={appLaunchTime:0,appFgTime:0,appRouteTime:0,newPageTime:0,pageReadyTime:0},J={},X=e=>!!/(?:^|\/)__(wx|plugin)__\//.test(e)||!!("undefined"!=typeof __wxAppCode__&&__wxAppCode__[e+".json"]||{}).usingComponents,Z=(e,t)=>e.__wxExparserNodeId__&&hasOwnProperty.call(Object.getPrototypeOf(e),t)||hasOwnProperty.call(e,t),ee=e=>{O().shareTimeline(e,{beforeAll:e=>{O().invokeInnerShareCallbacks("shareTimeline",e),O().reportNativeUiEvent("doShareTimeline",e)}})},te=(e={},t)=>{if(null!=J[t]){var r=J[t],n=r.page,o={from:e.fromShareTimeLineButton?"button":"menu",target:e.target},i=Z(n,"onShareTimeline")&&E.call(n,"onShareTimeline",o)||{},{title:a,query:s}=i,l={title:a||e.title,path:"string"==typeof s?`${r.route}.html?${s}`:r.rawPath.replace(/^\//,"").replace(/(\?|$)/,".html$1")};O().reportNativeUiEvent("onShareTimeline",l),"string"==typeof i.imageUrl&&i.imageUrl?(/^(http|https|wxfile|cloud):\/\//.test(i.imageUrl)?l.imageUrl=i.imageUrl:l.imageUrl=O()._getRealRoute(i.imageUrl,!1),O().getCloudFileUrl([l.imageUrl],"image",(e=>{l.imageUrl=e.data[0].url,ee(l)}))):ee(l)}},re=e=>{if(J[e]){var t=J[e].page;Z(t,"onShareTimeline")&&Z(t,"onShareAppMessage")&&O().showShareTimelineMenu()}},ne=(e,t)=>{if(hasOwnProperty.call(J,t)){var r=J[t].page;Z(r,"onShareTimeline")&&Z(r,"onShareAppMessage")?w(te,"onShareTimeline")({title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareTimeLineButton:!0},t):g("","onShareTimeline and onShareAppMessage are both needed")}else g("",`tapShareButton WebviewId: ${t} not found`)};function oe(){return 7===m.appType}var ie=e=>{if("String"!==c(e))throw _("","Path must be a string"),new A("Path must be a string");for(var t=e.length,r=[],n="",o=0,i=!1,a=!1,s=0;s<t;s++){var l=e[s];if("\\"===l)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1])?(n+=e[s+1],s++):n+="\\";else if("."===l)n&&(r.push(n),n="");else if("["===l){if(n&&(r.push(n),n=""),0===r.length)throw _("","Path can not start with []: "+e),new A("Path can not start with []: "+e);a=!0,i=!1}else if("]"===l){if(!i)throw _("","Must have number in []: "+e),new A("Must have number in []: "+e);a=!1,r.push(o),o=0}else if(a){if(l<"0"||l>"9")throw _("","Only number 0-9 could inside []: "+e),new A("Only number 0-9 could inside []: "+e);i=!0,o=10*o+l.charCodeAt(0)-48}else n+=l}if(n&&r.push(n),0===r.length)throw _("","Path can not be empty"),new A("Path can not be empty");return r},ae=(e,t)=>{for(var r,n={},o=e,i=0;i<t.length;i++)Number(t[i])===t[i]&&t[i]%1==0?Array.isArray(o)||(n[r]=[],o=n[r]):h(o)||(n[r]={},o=n[r]),r=t[i],n=o,o=o[t[i]];return{obj:n,key:r}},se=(e,t)=>{for(var r,n,o=ie(t),i=e,a=0;a<o.length;a++)Number(o[a])===o[a]&&o[a]%1==0?Array.isArray(i)||(i=[]):h(i)||(i={}),n=o[a],r=i,i=i[o[a]];return{obj:r,key:n}},le=null,ue=Object.create(null),ce=(e,t,r)=>{le&&le.triggerLifeTime("route",[{method:e,url:t,args:r}])},de=(e,t,r,n,o,i)=>{if("appLaunch"===i)s=()=>{ce("appLaunch",t,{tabBarConfig:m.tabBar,entryPagePath:m.entryPagePath})},f.initScl((e=>{(le=e.mainRoot.append("frameset",{placeholderImage:"frameset/placeholder.png"})).setPageLifeTimeCallback(((e,t,...r)=>{var n=ue[e],o=Pt(n);o&&N.surroundThirdByTryCatch((()=>{o.__callPageLifeTime__("on"+t,...r)}),`at ${t} callback function`)()})),s()}));else if("navigateTo"===i)ce("navigateTo",t);else if("redirectTo"===i)ce("redirectTo",t);else if("switchTab"===i)ce("switchTab",t);else if("reLaunch"===i||"autoReLaunch"===i)ce("reLaunch",t);else if("navigateBack"===i){var a=f.getExparserElementByViewId(o);a&&a.triggerEvent("navigateBack")}else"frameLoad"===i?(ue[o]=r,cr(e,t,r,n,{framesetViewId:o})):"frameUnload"===i&&(delete ue[o],fr(Ct(r),""));var s},pe=!1;function fe(e){var t=O().isIsolatedSubpackage(e);!pe&&t?ye():pe&&!t&&me(),pe=t}var he=[],_e=!0,ge={};function ve(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function me(e){var t=e?ve(e):ge;O().emitIsloatedAppShow(t),he.forEach((e=>{e.preventOnShow||e.app.onShow(t),e.preventOnShow=!1})),ge=t}function ye(e){O().emitIsloatedAppHide(),he.forEach((t=>{oe()?t.app.onHide(e):t.app.onHide()}))}function be(){!1}function we(e={}){var t;if(e.isLaunch?(Ze("launch"),Q.setOnLaunch(e),Y()):Q.setOnAppShow(e),ur(e.path),t=e.path,(pe=O().isIsolatedSubpackage(t))||me(e.__public||e,e.isLaunch),Ze("foreground"),_e||e.reLaunch)_e=!1;else{var r=xt("");r.length&&(pt()?le&&le.setGlobalShowStatus(!0):"function"==typeof r[r.length-1].__callPageLifeTime__&&r[r.length-1].__callPageLifeTime__("onShow"),Ze("enterPage",r[r.length-1],!0))}}function Ae(e={}){Q.setOnAppHide(e),"hang"===e.mode&&!0;var t=xt("");if(t.length){pt()?le&&le.setGlobalShowStatus(!1):"function"==typeof t[t.length-1].__callPageLifeTime__&&t[t.length-1].__callPageLifeTime__("onHide");var r=nt(),n=r.page;Ze("leavePage",n,!0);var o="function"==typeof n.onSaveExitState?E.call(n,"onSaveExitState"):void 0;O().saveExitState(r.route,r.rawPath,o)}pe||ye(e),Ze("background")}R((e=>{e.onAppUnhang(be),e.onAppShow(we),e.onAppHide(Ae)}));var Ee,Ie,Se,Ce=["onLaunch","onShow","onHide","onUnlaunch"];class Te{constructor(e={}){var t=this,r=O(),n=r.getLogManager();Ce.forEach((t=>{this[t]=function(...o){var l=e[t]||a;i.__route__="App",i.__method__=t,v(`App: ${t} have been invoked`),s.info(`[Lifetime] call App.${t}`),r.traceBeginEvent("LifeCycle",`App.${t}`);try{l.apply(this,o),n&&n.logApiInvoke&&n.log(`App ${t} have been invoked`),s.info(`App ${t} have been invoked`)}catch(e){i.thirdErrorReport({error:e,extend:`at App lifeCycleMethod ${t} function`})}r.traceEndEvent(),i.__route__=i.__method__=""}.bind(this)}));var o,l,u,c,d=function(n){(e=>"getCurrentPage"===e)(n)?g("",`App's ${n} is write-protected`):(e=>{for(var t=0;t<Ce.length;++t)if(Ce[t]===e)return!0;return!1})(n)||("function"==typeof e[n]?t[n]=function(...t){var o;i.__route__="App",i.__method__=n,r.traceBeginEvent("User Script",`App.${n}`);try{o=e[n].apply(this,t)}catch(e){i.thirdErrorReport({error:e,extend:`at App ${n} function`})}return r.traceEndEvent(),o}.bind(t):t[n]=e[n])};for(var p in e)d(p);"function"==typeof this.onError&&r.onError(this.onError),"function"==typeof this.onUnhandledRejection&&r.onUnhandledRejection(this.onUnhandledRejection),"function"==typeof this.onPageNotFound&&r.onPageNotFound(this.onPageNotFound),"function"==typeof this.onThemeChange&&r.onThemeChange(this.onThemeChange),o=this,l=O().getLaunchOptionsSync(),u=m.appLaunchInfo&&m.appLaunchInfo.inBackground,c=ve(l.__public),o.onLaunch(c),u||o.onShow(c),he.push({app:o,...u?{}:{preventOnShow:!0}})}}var Oe={},xe=w(((e={})=>{Object.assign(e,Oe),Oe={},Ee=new Te(e)}),"create app instance"),Ne=w(((e={})=>e.allowDefault?Ee||Oe:Ee),"get app instance"),Re=()=>Ie,Pe=e=>{s.info(`[privateExtraData] set to [${JSON.stringify(e)}]`),Ie=e},De=()=>Se;function Le(e){var t=e.referrerInfo&&e.referrerInfo.privateExtraData;if(t){Pe(t);var r=Ot();t.functionalPage&&r&&O().publishFunctionalPage(t.functionalPage,[r]),t.functionalPage&&"string"==typeof t.functionalPage.callbackId&&t.functionalPage.callbackId.startsWith("RPP")&&O().requestPluginPaymentEmitter.emit(t.functionalPage)}e.referrerInfo&&e.referrerInfo.openapiInvokeData&&(Se=e.referrerInfo.openapiInvokeData)}R((e=>{e.onAppShow(Le)}));var Be,ke={},Me={},Fe=[],je=!1,Ue=[],$e=!1,We=!1,qe=0,He=0,Ge=0,Qe=0,ze=0,Ke=0,Ye=null,Ve=null,Je=(e,t)=>{Object.keys(e.data||{}).forEach((r=>{var n,o,i=e.data[r],a=t&&t.data||{},s=!1;if("$"!==i.charAt(0)||void 0===(n=(e=>{var t=0;switch(e){case"PAGE_TIME":return(t=Ge?Date.now()-Ge-Qe:0)>=0?t:null;case"APP_TIME":return(t=qe?Date.now()-qe-He:0)>=0?t:null;case"CURRENT_PAGE":return Ve||null;case"LAST_PAGE":return Ye||null;default:return}})(i.substr(1))))if(0!==i.indexOf("$APP")){if(t&&(e.page===t.__route__||"ANY_PAGE"===e.page)){if(0===i.indexOf("$DATASET")){var l=i.replace("$DATASET.","");o=e.dataset||{},(n=ae(o,ie(l))).obj&&void 0!==n.obj[n.key]&&(Me[e.eventID].data[r]=n.obj[n.key],s=!0)}if(0===i.indexOf("$COMP")&&"number"==typeof e.nodeId){var u=D.getNodeById(e.nodeId,e.webviewId);if(!u)return void console.warn(`[]  "${e.element}" `);var c=P.Element.getMethodCaller(u);c&&(i=i.replace("$COMP.",""),a=c.data)}if(i.indexOf("[]")>-1){if((e.index||[]).forEach((e=>{i=i.replace("[]","["+e+"]")})),i.indexOf("[-1]")>-1||i.indexOf("[]")>-1)return void console.warn(`[] ${i}`);var d=i.match(/\[(\d+)\]\.\$INDEX$/);d&&(Me[e.eventID].data[r]=Number(d[1]),s=!0)}if(void 0===(n=se(a,i)).obj||void 0===n.key||void 0===n.obj[n.key])return void(s||console.warn(`[] ${i}`));Me[e.eventID].data[r]=n.obj[n.key]}}else((e,t)=>{var r=e.data[t],n=Ne()||{},o=r.replace("$APP.",""),i=se(n,o);if(i.obj&&void 0!==i.obj[i.key]){var a=i.obj[i.key];"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a||(Me[e.eventID].data[t]=a)}})(e,r);else null!==n&&(Me[e.eventID].data[r]=n)}))},Xe=(e,r)=>{if("start"!==e.action&&"start_and_report"!==e.action||(Me[e.eventID]={eventID:e.eventID,data:{},extra:e.extra}),Me[e.eventID]){var n,o,i,a=r||nt()&&nt().page;Je(e,a),"report"!==e.action&&"start_and_report"!==e.action||(n=e.eventID,o=a&&a.__route__,i=[],Object.keys(Me[n].data).forEach((e=>{i.push({id:e,value:Me[n].data[e]})})),Me[n].data=i,Me[n].page=o,Me[n].version=(void 0!==t?t.version:0)||0,Me[n].uid=Date.now().toString(16)+Math.random().toString(16).substr(2),Me[n].type=0,C()||(console.info("[] "),console.info(Me[n])),O().reportRealtimeAction({actionData:JSON.stringify(Me[n])}),Me[n]=null)}},Ze=(e,t,r)=>{if("pageReady"===e&&t)(e=>{if(e){var t=e.__route__,r=ke.click,n=[];r&&(r.forEach((e=>{e.page!==t&&"ANY_PAGE"!==e.page||!e.element||n.push({eventID:e.eventID,page:e.page,element:e.element,action:e.action})})),0!==n.length&&O().publishAnalyticsConfig(n,[e.__wxWebviewId__]))}})(t);else if(We)Fe.push(e);else{if("launch"===e&&!$e)return qe=Date.now(),$e=!0,We=!0,Fe.push(e),void O().getAppConfig({type:1,complete:w((e=>{We=!1,e.data&&(console.info("[] "),et(e))}))});if(je){r||("enterPage"===e?(Ge=Date.now(),Qe=0,Ve=t&&t.__route__):"leavePage"===e?Ye=t&&t.__route__:"background"===e?ze=Date.now():"foreground"===e&&(Ke=Date.now(),ze&&Ke>ze&&(Qe+=Ke-ze,He+=Ke-ze)));var n=ke[e];if(n){if("enterPage"===e&&t&&"page/component/index"===t.__route__&&m.accountInfo&&"wxe5f52902cf4de896"===m.accountInfo.appId){var o=0;n.map((e=>e.eventID)).forEach((e=>{1007===e&&o++})),o>1&&i.reportIDKey({key:"demoConfigRepeat"}),i.reportIDKey({key:"demoEnterHomePage"})}var a=["enterPage","leavePage","pageLoad","pageUnload","pullDownRefresh","switchTab"];n.forEach((r=>{r&&(a.indexOf(e)>-1?(t&&r.page===(t&&t.__route__)||"ANY_PAGE"===r.page)&&Xe(r,t):Xe(r))}))}}else Ue.push([e,t,r])}},et=(e,t)=>{var r={};try{r=JSON.parse(e.data)}catch(e){r={}}var n=nt();ke=(e=>{var t={};return"[object Array]"!==Object.prototype.toString.call(e)||e.forEach((e=>{var r=e.eventTarget;"[object Object]"===Object.prototype.toString.call(r)&&(r=[r]),r.forEach((r=>{var n=r.trigger||"click";t[n]||(t[n]=[]),("click"!==n||/^([.#][a-zA-Z_][^.#]* ?)+$/.test(r.element&&r.element.trim()))&&t[n].push({eventID:e.eventID,page:r.page,element:r.element&&r.element.trim(),data:r.data,action:r.action,extra:e.extra})}))})),t})(r),Me={},t||(Fe.forEach((e=>{Ze(e,n&&n.page,!0)})),Fe=[]),Ze("pageReady",n&&n.page)};R((e=>{e.subscribeAnalyticsReport(((e,t)=>{var r,o,i=e,a=ke.click;if(a&&("start"===i.action||"start_and_report"===i.action||Me[i.eventID])){for(var s=xt(""),l=0;l<s.length;l++){var u=s[l];if(u.__wxWebviewId__===t){o=u;break}}if(o){for(var c=0;c<a.length;c++){var d=a[c];if(i.eventID===d.eventID&&(i.page===d.page||"ANY_PAGE"===d.page)&&i.element===d.element){d.dataset=i.dataset||{},r=n({},d);break}}r&&(r.index=i.index,r.nodeId=i.nodeId,r.webviewId=t,Xe(r,o))}}})),e.onAppConfig(w((e=>{console.info("[] "),1===Number(e.type)&&et(e,!0)}))),e.onAppRouteDone((()=>{je=!0,Ue.forEach((e=>{Ze(...e)})),Ue=[]}))}));var tt,rt=e=>{Be=e},nt=()=>Be,ot=D.convertComponentAliasToRoute;var it=(e,t)=>{if(null!=J[t]){var r=O();r._triggerBeforeShareAppMessage(t);var{chatroomUsername:n,scene:o}=r.getInnerEnterOptionsSync(),{openType:a}=e.detail||{},s=e.origin||"weixin",l=((e,t)=>{var r,n=e,o=J[t],i=o.page;if(Z(i,"onShareAppMessage")&&(r="onShareAppMessage"),r){v(`Invoke event ${r} in page: ${o.route}`);var a={from:e.fromShareButton?"button":"menu",target:e.target};e.webViewUrl&&(a.webViewUrl=e.webViewUrl);var s=E.call(i,r,a)||{},l=s.promise;delete s.promise,d(l)||(l=Promise.resolve(s));var u=new Promise((e=>setTimeout(e,3e3,s)));return Promise.race([u,l]).then((t=>(n.title=t.title&&"string"==typeof t.title?t.title:e.title,n.desc=t.desc&&"string"==typeof t.desc?t.desc:e.desc,n.path=t.path&&"string"==typeof t.path?T(ot(t.path)):e.path,"string"==typeof t.imageUrl&&(t.imageUrl&&!/^(http|https|wxfile|cloud):\/\//.test(t.imageUrl)?n.imageUrl=O()._getRealRoute(t.imageUrl,!1):n.imageUrl=t.imageUrl),n.toCurrentGroup=t.toCurrentGroup,t.cacheKey&&(n.cacheKey=t.cacheKey),t.webpageUrl&&(n.webpageUrl=t.webpageUrl),"wx60422b707e49ff2e"===m.accountInfo.appId&&(t.bizSourceName&&(n.bizSourceName=t.bizSourceName),t.bizSourceIconUrl&&(n.bizSourceIconUrl=t.bizSourceIconUrl)),n.path.length>0&&"/"===n.path[0]&&(n.path=n.path.substr(1)),O().userShareMenuState.isPrivateMessage?n.disableForward=!0:n.disableForward="boolean"==typeof t.disableForward&&t.disableForward,n.success=t.success,n.cancel=t.cancel,n.fail=t.fail,n.complete=t.complete,n.thumbDataHash=t.thumbDataHash,n.signature=t.signature,Ze("share",i),n)))}return Promise.resolve(n)})(e,t);l.then((l=>{var u,c;if(1158===o&&void 0===l.toCurrentGroup&&(l.toCurrentGroup=!0),!0===e.fromShareButton){if(u="shareAppMessageDirectly",c=2,"shareToChatroom"===a&&l.toCurrentGroup){if(1156!==o||!n)return void console.warn(`shareToChatroom:fail scene ${o}, chatroomUsername ${n}`);l.chatroomUsername=n,l.bizType=1,u="shareAppMessageToSpecificContactForFakeNativeDirectly"}}else u="shareAppMessage",l.to=s,c=1;var d=r.getShareCookieString();d&&(l.messageExtraData=l.messageExtraData||{},l.messageExtraData.cookies=d),1158===o&&l.toCurrentGroup&&(u="shareAppMessageToSpecificContactDirectly",l.chatroomUsername=n);oe()&&"wxfe02ecfe70800f46"!==m.accountInfo.appId&&(l.bizType=1,u="shareAppMessageForFakeNative",1156!==o&&1158!==o||!l.toCurrentGroup||(u="shareAppMessageToSpecificContactForFakeNativeDirectly")),l.useDefaultSnapshot=!0,l.webviewId=t,!C()&&r.checkAPIAvailable("share")||(l=I({},l),["success","fail","cancel","complete"].some((e=>"function"==typeof l[e]))&&r.reportRecycledAPI({name:u,strategy:1}),"shareToChatroom"!==a&&(delete l.success,delete l.fail,delete l.cancel,delete l.complete)),O().reportNativeUiEvent("onShareAppMessage",l);var p=()=>{r[u](l,{beforeAll:e=>{var t=nt();try{((e,t,r)=>{var n=e.page.__displayReporter;n.checkShowOptions();var o=n.showOptions,a=n.route+".html",s=t.errMsg,l=0,u=e.updateTitle&&e.updateTitle.trim(),c=(m.global&&m.global.window||{}).navigationBarTitleText||"",d=((m.page[a]||{}).window||{}).navigationBarTitleText||"",p=m.host&&m.host.appId||"";s.indexOf(":ok")>=0?l=1:s.indexOf(":fail")>=0?l=2:s.indexOf(":cancel")>=0&&(l=3);var f=[o.scene,o.scene_note,o.sessionid,a,u||d||c,o.apptype,l,0,o.query,r,0,"","",p].map(encodeURIComponent).join(",");i.reportKeyValue({key:"Share",value:f,force:!0}),i.submit()})(t,e,c)}catch(e){}O().reportNativeUiEvent("doShareAppMessage",e),e.errMsg=e.errMsg.replace(/shareAppMessageDirectly|shareAppMessageToSpecificContactForFakeNativeDirectly|shareAppMessageForFakeNative|shareAppMessageToSpecificContactDirectly/,"shareAppMessage"),r.invokeInnerShareCallbacks("shareAppMessage",e),void 0!==e.shareInfos&&e.shareInfos.length>0&&(e.shareTickets=e.shareInfos.filter((e=>e.shareKey&&e.shareName)).map((e=>(r.showUpdatableMessageSubscribeButton({shareKey:e.shareKey}),function(){if(!tt){var e=O();tt=e.ShareInfoStorage,delete e.ShareInfoStorage}return tt}().set(e.shareKey,e.shareName))))),delete e.shareInfos}})};return"string"==typeof l.imageUrl?r.getCloudFileUrl([l.imageUrl],"image",(e=>{l.imageUrl=e.data[0].url,p()})):p(),null})).catch((e=>{console.warn("onShareAppMessage error ",e)}))}};function at(e,t){if(hasOwnProperty.call(J,t)){var r=J[t].page,n=T(r.route);Object.keys(r.options).length>0&&(n+="?"+Object.keys(r.options).map((e=>`${e}=${r.options[e]}`)).join("&")),w(it,"onShareAppMessage")({path:n,title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareButton:!0},t)}else g("",`tapShareButton WebviewId: ${t} not found`)}var st=(e,t)=>{if(null!==J[t]){var r=e,n="onAddToFavorites",o=J[t],i=o.page;if(Z(i,n)){v(`Invoke event ${n} in page: ${o.route}`);var a={webViewUrl:r.webViewUrl},s=E.call(i,n,a)||{};if(s.title&&"string"==typeof s.title&&(r.title=s.title),s.query&&"string"==typeof s.query){var l=r.path.split("?")[0];r.path=`${l}?${s.query}`}s.imageUrl&&"string"==typeof s.imageUrl&&(/^(https?|wxfile|cloud):\/\//.test(s.imageUrl)?r.imageUrl=s.imageUrl:r.imageUrl=O()._getRealRoute(s.imageUrl,!1)),r.disableForward=s.disableForward||!1}O().getCloudFileUrl([r.imageUrl],"image",(e=>{r.imageUrl=e.data[0].url,O().addToFavorites(r,{})}))}},lt=D.convertComponentAliasToRoute,ut=(e,t)=>{if(e=e||{},null!==J[t]){var r=J[t],n=r.page,o=(e=>{if(null===J[e])return"";var t=J[e].page,r=t.options||{},n=T(t.route);return Object.keys(r).length&&(n+="?"+Object.keys(r).map((e=>`${e}=${r[e]}`)).join("&")),n})(t),i={path:o,fromButton:!!e.fromButton};if(Z(n,"onHandoff")){v(`Invoke event onHandoff in page: ${r.route}`);var a=E.call(n,"onHandoff")||{};a.path&&"string"==typeof a.path&&(i.path=T(lt(a.path)))}O().startHandoff(i)}};function ct(e,t){if(O()._setWxIsInvokeInTapForNavToMiniProgram(),hasOwnProperty.call(J,t)){var r=J[t],n=r.page;if(void 0!==m&&m.tabBar&&m.tabBar.list&&m.tabBar.list[e.index]){var o={index:e.index,pagePath:(m.tabBar.list[e.index].pagePath||"").replace(/\.html$/,""),text:m.tabBar.list[e.index].text};if(o.pagePath!==r.route)return;Z(n,"onTabItemTap")&&(v(`Invoke event onTabItemTap in page: ${r.route}`),D.wrapTapMark((()=>{E.call(n,"onTabItemTap",o)})))}}}var dt=!1,pt=()=>dt,ft=null,ht=()=>ft,_t=e=>{ft=e},gt=[],vt={},mt=[],yt=e=>{mt=e},bt=()=>mt,wt={},At=Object.prototype.hasOwnProperty,Et={},It=(e,t)=>{Et[e]=t,D.setPageType(e,t)},St=e=>-1!==gt.indexOf(e.route)||-1!==gt.indexOf(e.route+".html"),Ct=e=>At.call(J,e)?J[e]:null,Tt=e=>!!(e=>{for(var t=0;t<m.pages.length;t++)if(m.pages[t]===e)return!0;return!1})(e)||void 0!==vt[e],Ot=()=>{if(0!==bt().length)return bt()[bt().length-1].webviewId},xt=e=>{var t=[];return bt().forEach((r=>{e&&(e=>{if(/^__wx__\//.test(e=e||""))return"//";var t=e.match(/(?:^|\/)__plugin__\/(.*?)\//);return t?t[1]:"/"})(r.route)!==e?t.push(null):t.push(r.page)})),t},Nt=()=>xt("/"),Rt=()=>bt().map((e=>e.webviewId)),Pt=e=>At.call(J,e)?J[e].page:null,Dt=()=>wt,Lt=!1,Bt=function(e){Lt=e},kt=function(){return Lt},Mt=Object.prototype.toString;function Ft(e){var t=Ut(e);return null!==t?t:jt(e)}function jt(e){if("function"==typeof e)return Bt(!0),e;var t=Mt.call(e);if("[object Array]"===t)return[];if("[object Object]"===t){var r;if(e.constructor===Object)return{};var n=Object.getPrototypeOf(e);if(n&&n.constructor!==Object&&"Object"===(null===(r=n.constructor)||void 0===r?void 0:r.name)&&n.hasOwnProperty&&e instanceof Object)return{}}if("[object Date]"===t)return new Date(e.getTime());if("[object RegExp]"===t){Bt(!0);var o=String(e),i=o.lastIndexOf("/");return new RegExp(o.slice(1,i),o.slice(i+1))}return Bt(!0),null}function Ut(e){var t=typeof e;return null!==e&&"object"!==t&&"function"!==t?e:null}function $t(e){var t=typeof e;return null!==e&&("function"===t||"object"===t)}function Wt(e,t,r){if(null===e)return null;var n=Ut(e);if(null!==n)return n;for(var o=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],i=0,a=o.length;i<a;++i){var s=o[i],l=e[s],u=$t(l),c=void 0,d=void 0;if(u&&r.has(l))d=r.get(l);else{var p=Ft(l);c=null!==p?p:l,u&&r.set(l,c)}t[s]=d||Wt(l,c,r)}return t}const qt=function(e){if(Bt(!1),null===e)return null;var t=Ut(e);if(null!==t)return t;var r=jt(e),n=null!==r?r:e,o=new WeakMap;return o.set(e,n),Wt(e,n,o)};var Ht=["onLoad","onReady","onShow","onRouteDone","onHide","onUnload","onResize"];const Gt=class{static create(e,t,r){var n=O(),o=n.getLogManager();s.info(`[PageManager] create new page, route=${t}, componentMode=true`);var u=D.addView(e,t,(function(e){var t=P.Element.getMethodCaller(this),n=t[e]||a,o=[];return"onLoad"===e?o=[r]:"onShow"===e?this.triggerPageLifeTime("show",o):"onHide"===e?this.triggerPageLifeTime("hide",o):"onResize"===e?this.triggerPageLifeTime("resize",o):"onRouteDone"===e&&this.triggerPageLifeTime("routeDone",o),n.apply(t,o)})),c=P.Element.getMethodCaller(u),d=D.getOwnerPluginAppId(c);if(c.__wxWebviewId__=e,c.__route__=t,c.route=t,c.__displayReporter=new Q(t,2),u.__customConstructor__===D.Page){var p=u.getRootBehavior().methods,f=c.__freeData__;for(var h in p)c[h]=p[h].bind(c);for(var _ in f)c[_]=qt(f[_]),kt()&&g("Free data",`Free data with key "${_}" of page "${c.is}" seems not a simple value. Result of deep cloning this value in page instantiation may be unexpected. Consider assigning this value at the beginning of onLoad method.`)}var m=l.getCurrentRoutePath(),y=l.getCurrentFullyRoutePath();c.__callPageLifeTime__=function(e,...t){s.info(`[Lifetime] call Page.${e}, is=${c.is}`);var r=this[e]||a;if(i.__route__=this.__route__,i.__method__=e,"onLoad"===e)c.__displayReporter.setQuery(...t);else if("onShow"===e)c.__hasReportHide__=!1,c.__hasReportExit__=!1,c.__displayReporter.reportShowPage();else if("onReady"===e)c.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){var n=this.__toRoute__,o=this.__isBack__,d=this.__notReportHide__,p=c.__hasReportExit__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,delete c.__hasReportExit__,d||p||(c.__displayReporter.reportHidePage(n,o),c.__hasReportHide__=!0)}"onShow"===e?u.triggerPageLifeTime("show",t):"onHide"===e?u.triggerPageLifeTime("hide",t):"onResize"===e?u.triggerPageLifeTime("resize",t):"onRouteDone"===e&&u.triggerPageLifeTime("routeDone",t),l.traceLife(e,{path:m,fullyPath:y}),v(`${this.__route__}: ${e} have been invoked`);var f=r.apply(this,t);return i.__route__=i.__method__="",f},Ht.forEach((t=>{var r=c[t];c[t]=function(...l){var u,c=r||a;n.traceBeginEvent("LifeCycle",`Page.${t}`,{path:this.__route__,id:e});try{var p=Date.now();u=c.apply(this,l);var f=Date.now()-p;f>1e3&&i.slowReport({key:"pageInvoke",cost:f,extend:`at "${this.__route__}" page lifeCycleMethod ${t} function`}),o&&o.logApiInvoke&&o.log(`page ${this.__route__} ${t} have been invoked`),s.info(`component page ${this.__route__} ${t} have been invoked`)}catch(e){i.thirdErrorReport({source:d,error:e,extend:`at "${this.__route__}" page lifeCycleMethod ${t} function`})}return n.traceEndEvent(),u}.bind(c)}));var b="function"==typeof c.onShareAppMessage;b&&n.showShareMenu();var w="function"==typeof c.onShareTimeline;return b&&w&&n.showShareTimelineMenu(),{page:c,node:u}}static destroy(e){D.removeView(e.__wxWebviewId__)}};var Qt=["onLoad","onReady","onShow","onRouteDone","onHide","onUnload","onResize"],zt=["__wxWebviewId__","__route__"],Kt=["route"];class Yt{static create(e,t,r){var n=new Yt(e,t,r),o=n.__wxExparserNode__;return delete n.__wxExparserNode__,{page:n,node:o}}static destroy(e){D.removeView(e.__wxWebviewId__)}constructor(e,t,r){var n=this;s.info(`[PageManager] create new page, route=${t}, componentMode=false`);var o={__wxWebviewId__:e,__route__:t};zt.forEach((e=>{Object.defineProperty(this,e,{set(){g("",`should not change the protected attribute ${e}`)},get:()=>o[e]})}));var u=O(),d=u.getLogManager(),p=D.addView(e,t,(function(e){var t=P.Element.getMethodCaller(this),n=t[e]||a,o=[];return"onLoad"===e?o=[r]:"onShow"===e?this.triggerPageLifeTime("show"):"onHide"===e?this.triggerPageLifeTime("hide"):"onResize"===e?this.triggerPageLifeTime("resize"):"onRouteDone"===e&&this.triggerPageLifeTime("routeDone"),n.apply(t,o)})),f=P.Element.getMethodCaller(p),m=D.getOwnerPluginAppId(f);this.__wxExparserNode__=p,this.__wxComponentInst__=f,P.Element.setMethodCaller(p,this);var y=Dt(),b={};hasOwnProperty.call(y,t)?b=y[t]:console.info(`Page "${t}" has not been registered yet.`),b.data=b.data||{},h(b.data)||_("Page data error","Page.data must be an object");var w=JSON.stringify(b.data);this.data=JSON.parse(w),this.__viewData__=JSON.parse(w),this.__displayReporter=new Q(t,1);var A=l.getCurrentRoutePath(),E=l.getCurrentFullyRoutePath();this.__callPageLifeTime__=function(e,...t){s.info(`[Lifetime] call Page.${e}, is=${f.is}`);var r=(this[e]||a).bind(this);if(i.__route__=this.__route__,i.__method__=e,"onLoad"===e)this.__displayReporter.setQuery(...t);else if("onShow"===e)this.__displayReporter.reportShowPage(),this.__hasReportHide__=!1,this.__hasReportExit__=!1;else if("onReady"===e)this.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){var n=this.__toRoute__,o=this.__isBack__,u=this.__notReportHide__,c=this.__hasReportExit__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,delete this.__hasReportExit__,u||c||(this.__displayReporter.reportHidePage(n,o),this.__hasReportHide__=!0)}l.traceLife(e,{path:A,fullyPath:E}),v(`${this.__route__}: ${e} have been invoked`);var d=r.apply(this,t);return i.__route__=i.__method__="",d},Qt.forEach((t=>{this[t]=function(...r){var n,o=(b[t]||a).bind(this);try{var l=Date.now();u.traceBeginEvent("LifeCycle",`Page.${t}`,{path:this.__route__,id:e}),n=o.apply(this,r),u.traceEndEvent();var c=Date.now()-l;c>1e3&&i.slowReport({key:"pageInvoke",cost:c,extend:`at ${this.__route__} page lifeCycleMethod ${t} function`}),d&&d.logApiInvoke&&d.log(`page ${this.__route__} ${t} have been invoked`),s.info(`page ${this.__route__} ${t} have been invoked`)}catch(e){i.thirdErrorReport({source:m,error:e,extend:`at ${this.__route__} page lifeCycleMethod ${t} function`})}return n}.bind(this)}));var I=function(e){(e=>-1!==zt.indexOf(e))(e)?g("",`Page's ${e} is write-protected`):(e=>{for(var t=0;t<Qt.length;++t)if(Qt[t]===e)return!0;return"data"===e})(e)||("Function"===c(b[e])?n[e]=function(...t){var r;i.__route__=this.__route__,i.__method__=e,u.traceBeginEvent("User Script",`Page.${e}`,{path:this.__route__});try{var n=Date.now();r=b[e].apply(this,t);var o=Date.now()-n;o>1e3&&i.slowReport({key:"pageInvoke",cost:o,extend:`at ${this.__route__} page ${e} function`})}catch(t){i.thirdErrorReport({source:m,error:t,extend:`at ${this.__route__} page ${e} function`})}return u.traceEndEvent(),i.__route__=i.__method__="",r}.bind(n):(n[e]=qt(b[e]),kt()&&g("Free data",`Free data with key "${e}" of page "${p.is}" seems not a simple value. Result of deep cloning this value in page instantiation may be unexpected. Consider assigning this value at the beginning of onLoad method.`)))};for(var S in b)I(S);var C={route:t};Kt.forEach((e=>{Object.prototype.hasOwnProperty.call(this,e)||(this[e]=C[e])}));var T="function"==typeof b.onShareAppMessage;T&&u.showShareMenu();var x="function"==typeof b.onShareTimeline;T&&x&&u.showShareTimelineMenu()}setData(e,t){var r=O();try{var n=c(e);if("Object"!==n)return void _("",`setData accepts an Object rather than some ${n}`);r.traceBeginEvent("Framework","setData"),Object.keys(e).forEach((t=>{void 0===e[t]&&_("Page setData warning",'Setting data field "'+t+'" to undefined is invalid.');var r=ie(t),{obj:n,key:o}=ae(this.data,r);if(n&&(n[o]=qt(e[t])),void 0!==e[t]){var{obj:i,key:a}=ae(this.__viewData__,r);i&&(i[a]=qt(e[t]))}})),this.__wxComponentInst__.setData(JSON.parse(JSON.stringify(e)),t)}catch(e){b(e)}finally{r.traceEndEvent()}}pageScrollTo(e){O().publishPageScrollTo(e,[this.__wxWebviewId__])}}const Vt=Yt;const Jt=class{static emit(e,t,r){var n=O();n.traceBeginEvent("Framework","sendInitData"),n.invokeWebviewMethod("appDataChange",e,[t],r),n.traceEndEvent()}};var Xt,Zt=e=>{Xt=e},er=Date.now(),tr=262144,rr={isInit:!1};R((e=>{e.subscribeSubjectInfo((e=>{rr.isInit=e.isInit}))}));var nr,or=B("Framework","publishInitData",w(((e,r,n,{statesData:o,isPageReload:i,isPrerender:a,isLaunch:u})=>{v("Update view with init data"),s.info(`[publishInitData] prepare init data to webview ${r}`);var c=e.page,d={},p=O();l.shouldStartReport()&&(d.traceActionReportInfo={eventType:l.getReportEvent(),textContentMaxLayer:l.getTextContentMaxLayer(),textContentMaxLength:l.getTextContentMaxLength()}),d.wechatLibVersion=(void 0!==t?t.version:"")||"",d.webviewId=r,d.enablePullUpRefresh=Z(c,"onReachBottom"),d.enablePageScroll=Z(c,"onPageScroll"),d.onReachBottomDistance=(e=>{try{if("number"==typeof m.page[`${e}.html`].window.onReachBottomDistance)return m.page[`${e}.html`].window.onReachBottomDistance}catch(e){return 50}return 50})(c.__route__),d.statesData=o,d.scene=Xt,d.route=c.__route__,d.query=c.options,d.lastRoute=e.lastRoute,d.lastQuery=e.lastQuery,d.wxConfig={accountInfo:m&&m.accountInfo||{},appContactInfo:m&&m.appContactInfo||{},appLaunchInfo:m&&m.appLaunchInfo||{},plugins:m&&m.plugins||{}},d.windowConfig=m&&m.page&&m.page[c.__route__+".html"]&&m.page[c.__route__+".html"].window||{},d.debug=m&&m.debug,d.appId=m&&m.accountInfo&&m.accountInfo.appId,d.appLaunchTime=V.appLaunchTime,d.appFgTime=V.appFgTime,d.isTabBarPage=e.isTabBarPage,d.isMainTabBarPage=e.isMainTabBarPage,d.navigationStyle=m&&m.global&&m.global.window&&m.global.window.navigationStyle,d.packageType=(e=>{if(m&&m.subPackages&&m.subPackages.length){for(var t=0;t<m.subPackages.length;t++){var r=m.subPackages[t];if(0===e.indexOf(r.root))return r.independent?"independent":"normal"}return"main"}return"none"})(c.__route__),d.needGetSubjectInfo=!rr.isInit,d.subPackages=m.subPackages,d.isReload=i,d.adInfo={preloadVideoAdUnitIds:p.getPreloadVideoAdUnitIds(),preloadAdUnitIds:p.getPreloadAdUnitIds()},d.permissionBytes=p.getCachePermissionBytes(),d.fontFaceRecords=p.fontFaceRecords,d.fontSizeSetting=p.getStaticSystemInfoSync().fontSizeSetting,d.prerender=a,d.isLaunch=u,d.extendedLibList=m.extendedLibList;var f={ext:d,options:{firstRender:!0,timestamp:n,path:c.__route__}};if(o){var h=JSON.stringify(f),_=h.length;if(_>tr){for(var g=[],y=0;_>y;)g.push(h.substr(y,tr)),y+=tr;for(var b=++er,w=0,A=g.length;w<A;w++)Jt.emit({isSplitData:!0,splitInfo:{id:b,index:w+1,total:A,data:g[w]}},r);return void Ze("pageReady",c)}}s.info(`[publishInitData] publish init data to webview ${r}`),Jt.emit(f,r),Ze("pageReady",c)}))),ir=(e,t,r)=>{i.speedReport({key:e,timeMark:{startTime:t,endTime:r}})},ar=e=>{nr=e},sr="",lr=()=>sr,ur=e=>{sr=e},cr=B("Framework","openNewPage",((e,t,r,n,o={})=>{var i=nr;ar(void 0);var a=O(),u=X(e);o.isMainTabBarPage&&"reLaunch"===o.openType&&D.destroyCustomTabBarManager(),V.newPageTime=Date.now(),ur(e);var c=u?Gt.create(r,e,n):Vt.create(r,e,n),d=c.page,p=qt(n);rt({page:d,webviewId:r,route:e,rawPath:t,lastRoute:nt()?nt().route:"",lastQuery:nt()?nt().page.options:{},node:c.node}),nt().isTabBarPage=St(nt()),nt().isMainTabBarPage=o.isMainTabBarPage||!1,bt().push(nt());var f=a._getOpenerEventChannel();f&&(d.__eventChannel=f),d.__exitState__=i;var h={};if(Object.keys(p).forEach((e=>{var t=p[e];try{h[e]=decodeURIComponent(t)}catch(r){h[e]=t}})),a.traceBeginEvent("Framework","attachViewService"),D.attachView(r,h),a.traceEndEvent(),/^__wx__\//.test(e)){var _={};if(/^__wx__\/open-api-redirecting-page/.test(e))_=h,s.info(`[openNewPage] route ${e} is open api page`),Object.assign(_,De()||{});else if(/^__wx__\/functional-page/.test(e)){s.info(`[openNewPage] route ${e} is functional page`);var g=Re();g&&g.functionalPage&&(_=Object.assign({},g.functionalPage,{accountInfo:m.accountInfo}))}s.info(`[openNewPage] wx special page, setting data [${JSON.stringify(_)}]`),d.setData(_)}else if(/^wx:\/\/inner-page/.test(e)){var v;v=h,s.info(`[openNewPage] route ${e} is inner page`),Object.assign(v,De()||{}),d.setData(v)}d.options=p,or(nt(),r,V.newPageTime,{statesData:void 0,isPageReload:!1,isPrerender:o.prerender||!1,isLaunch:!!o.isLaunch}),C()&&(__wxAppData[e]=d.data,__wxAppData[e].__webviewId__=r,a.publishUpdateAppData()),o.initialRenderingCacheData&&d.setData(o.initialRenderingCacheData),void 0!==l&&l.traceNewRoute(m.page,m.global),d.__callPageLifeTime__("onLoad",n),d.__callPageLifeTime__("onShow"),J[r]={page:d,route:e,rawPath:t,webviewId:r,statesData:null,framesetViewId:o.framesetViewId,node:u?c.node:void 0},Ze("pageLoad",d),Ze("enterPage",d),ir("appRoute2newPage",V.appRouteTime,V.newPageTime)})),dr=B("Framework","onAppLaunch",((e,t,r,n,o,i)=>{V.appLaunchTime=Date.now(),V.appFgTime=Date.now();var a=O();hasOwnProperty.call(J,r)?_("Page route (system error)",`appLaunch with an already exist webviewId ${r}`):cr(e,t,r,n,{isMainTabBarPage:St({route:e}),initialRenderingCacheData:o,prerender:i,isLaunch:!0});var s=a.getLaunchOptionsSync().scene;[1001,1003,1023,1038,1056,1080,1083,1089,1090,1103,1104,1112,1113,1114,1117,1127,1131,1134].indexOf(s)<0||a.loadExitState(((e,t,r)=>{"latestPage"===e?setTimeout((()=>{ar(r),a.route.redirectTo({url:t})}),0):"homePageAndLatestPage"===e?setTimeout((()=>{ar(r),a.route.navigateTo({url:t})}),0):ar(r)}))})),pr=B("Framework","hidePage",((e,t)=>{e.page.__toRoute__=t,pt()||e.page.__callPageLifeTime__("onHide"),Ze("leavePage",e.page),O().uploadUserLogOnHide(e.route)})),fr=B("Framework","unloadPage",((e,t,r,n)=>{O()._triggerBeforeUnloadPage(e.webviewId),e.page.__toRoute__=t,e.page.__isBack__=r,e.page.__notReportHide__=n,e.page.__callPageLifeTime__("onUnload"),e.node&&Gt.destroy(e.page),C()&&(delete __wxAppData[e.route],O().publishUpdateAppData()),delete J[e.webviewId];for(var o=bt().length-1;o>=0&&bt()[o].webviewId!==e.webviewId;o--);if(o>=0&&bt().splice(o,1),bt().length){var i=bt()[bt().length-1];ur(i.route);var a=(e=>{var t=void 0;for(var r in ue)if(ue[r]===e){t=r;break}return t})(i.webviewId);a&&f.setCurrentFrameView(a)}else ur("");Ze("pageUnload",e.page),Ze("leavePage",e.page),O().uploadUserLogOnHide(e.route),O().recordUnloadWebviewIdForUserBehaviorAnalytics(e.webviewId)})),hr=B("Framework","onSwitchTab",((e,t,r,n,o)=>{var i=!0,a=!0,s=!0;if(0!==bt().length){for(;bt().length>1;){var l=!0;s&&(l=!1,s=!1),ht()&&ht().webviewId===bt()[bt().length-1].webviewId?(yt(bt().slice(0,bt().length-1)),bt().length?ur(bt()[bt().length-1].route):ur(""),i=!1):(fr(bt()[bt().length-1],e,!1,l),i=!1)}if(bt()[0].webviewId===r)rt(bt()[0]),i||pt()||nt().page.__callPageLifeTime__("onShow");else{var u=!0;if(s&&(u=!1,s=!1),St(bt()[0])?(a=!1,i&&pr(bt()[0],e)):ht()&&ht().webviewId===bt()[0].webviewId?(yt(bt().slice(0,bt().length-1)),ur("")):fr(bt()[0],e,!1,u),hasOwnProperty.call(J,r)){var{page:c,node:d}=J[r];rt({webviewId:r,route:e,page:c,node:d}),yt([nt()]),pt()||c.__callPageLifeTime__("onShow"),Ze("enterPage",c),Ze("switchTab",c)}else yt([]),cr(e,t,r,n,{isMainTabBarPage:a,initialRenderingCacheData:o})}}else cr(e,t,r,n,{initialRenderingCacheData:o})})),_r=B("Framework","onReLaunch",((e,t,r,n,o,i,a)=>{var s=!1;for("reLaunch"===o&&(s=!0);bt().length>0;){var l=!0;s&&(l=!1,s=!1),fr(bt()[bt().length-1],e,!1,l)}Object.keys(J).forEach((t=>{fr(J[t],e,!1,!0)})),fe(e),cr(e,t,r,n,{isMainTabBarPage:St({route:e}),initialRenderingCacheData:i,prerender:a,openType:o})})),gr=B("Framework","onRedirectTo",((e,t,r,n,o)=>{nt()&&fr(nt(),e),fe(e),hasOwnProperty.call(J,r)?_("Page route (system error)",`redirectTo with an already exist webviewId ${r}`):cr(e,t,r,n,{initialRenderingCacheData:o})})),vr=B("Framework","onNavigateToPip",((e,t,r,n,o)=>{nt()&&pr(nt(),e),fe(e),"min"===o?(_t(bt()[bt().length-1]),hasOwnProperty.call(J,r)?_("Page route (system error)",`navigateTo with an already exist webviewId ${r}`):cr(e,t,r,n)):"max"===o?ht()&&(ur(e),rt(ht()),bt().push(nt()),nt().page.__callPageLifeTime__("onShow"),_t(null)):_("Page route (system error)","navigateTo with unexpected pipMode")})),mr=B("Framework","onNavigateTo",((e,t,r,n,o)=>{nt()&&pr(nt(),e),fe(e),hasOwnProperty.call(J,r)?_("Page route (system error)",`navigateTo with an already exist webviewId ${r}`):cr(e,t,r,n,{initialRenderingCacheData:o})})),yr=B("Framework","unloadPagePip",(()=>{var e=ht();e&&(_t(null),bt().findIndex((t=>t.webviewId===e.webviewId))>=0||(O()._triggerBeforeUnloadPage(e.webviewId),e.page.__callPageLifeTime__("onUnload"),e.node&&Gt.destroy(e.page),C()&&(delete __wxAppData[e.route],O().publishUpdateAppData()),delete J[e.webviewId],Ze("pageUnload",e.page),Ze("leavePage",e.page),O().uploadUserLogOnHide(e.route)))})),br=B("Framework","minimizePage",(e=>{pr(e),yt(bt().slice(0,bt().length-1)),bt().length?ur(bt()[bt().length-1].route):ur("")})),wr=B("Framework","onNavigateBack",((e,t=!1)=>{for(var r=!1,n=J[e]&&J[e].route,o=bt().length-1;o>0;o--){var i=bt()[o];if(i.webviewId===e){r=!0,rt(i);break}!t&&ht()&&ht().webviewId===i.webviewId?yt(bt().slice(0,bt().length-1)):t&&ht()&&ht().webviewId===i.webviewId?br(i,n,!0):fr(i,n,!0)}if(1===bt().length&&!r){var a=bt()[0];if(a.webviewId===e)r=!0,rt(a);else if(St(a)&&hasOwnProperty.call(J,e)){r=!0;var{page:s,node:l}=J[e];rt({webviewId:e,route:n,page:s,node:l})}ur(nt().route)}if(fe(n),r){pt()||(nt().page.__callPageLifeTime__("onShow"),St(nt().page)&&D.showTabBar(e)),Ze("enterPage",nt().page);var u=Re();Pe({}),u&&u.functionalPage&&e&&O().publishFunctionalPage(u.functionalPage,[e]),u&&u.functionalPage&&"string"==typeof u.functionalPage.callbackId&&u.functionalPage.callbackId.startsWith("RPP")&&O().requestPluginPaymentEmitter.emit(u.functionalPage)}else _("Page route (system error)",`navigateBack with an unexist webviewId ${e}`)})),Ar=B("Framework","onNavigateBack",((e,t)=>{"min"===t?(_t(bt()[bt().length-1]),wr(e,!0)):"max"===t&&(_t(null),wr(e))})),Er=B("Framework","handleAppRoute",((e,t,r,n,o,i,a,s)=>{var l=Object.keys(r).map((e=>encodeURIComponent(e)+"="+r[e])).join("&"),u="/"+e+(l?"?"+l:"");v(`On app route: ${e} (${n}), renderer: ${a.renderer}`),V.appRouteTime=Date.now(),pt()?de(e,u,t,r,s,n):"navigateTo"===n?o?vr(e,u,t,r,o):mr(e,u,t,r,i):"redirectTo"===n?gr(e,u,t,r,i):"navigateBack"===n?o?Ar(t,o):wr(t):"switchTab"===n?hr(e,u,t,r,i):"appLaunch"===n?dr(e,u,t,r,i,a.prerender):"reLaunch"===n||"autoReLaunch"===n?_r(e,u,t,r,n,i,a.prerender):"dismissPip"===n?ht()&&yr():_("Page route (system error)",`Illegal open type: ${n}`)})),Ir=null;function Sr(e){var t=e.path,r=e.webviewId,n=e.viewId,o=e.query||{},i=e.openType,a=e.pipMode,l=e.initialRenderingCacheData;if("appLaunch"===i&&e.frameset&&(s.info("[onAppRoute] switching to frameset mode by onAppRoute#appLaunch"),dt=!0),It(r,e.renderer),!l&&e.appserviceData)try{l=JSON.parse(e.appserviceData)}catch(e){}Ir&&Ir(),e.resizing?(s.info("Delayed onAppRoute due to resizing"),Ir=w((()=>{Ir=null,s.info("Delayed onAppRoute executed"),Er(t,r,o,i,a,l,e,n)}),"onAppRoute")):Er(t,r,o,i,a,l,e,n)}function Cr(){Ir&&Ir()}var Tr=B("Framework","handleAppRouteDone",(()=>{nt()&&nt().page.__callPageLifeTime__("onRouteDone")}));function Or(e){e.webviewId===(nt()&&nt().webviewId)?Tr():_("Page route (system error)",`routeDone with a webviewId ${e.webviewId} that is not the current page`)}var xr=B("Framework","onPageReload",((e,t)=>{if(v(`On page reload: ${e}`),hasOwnProperty.call(J,t)){var r=X(e),n=J[t].statesData;J[t].statesData=void 0,D.restoreView(t),or(J[t],t,Date.now(),{statesData:n||{},isPageReload:!0,isPrerender:!1,isLaunch:!1}),((e,{pageCount:t,pageType:r})=>{var n=k[e]||{},o=[t,r,n.rootCompCount||0,n.rootCustomCompCount||0,n.rootCustomCompRatio||0,n.rootInternalCompCount||0].map(encodeURIComponent).join(",");k[e]={},i.reportKeyValue({key:"WebviewRestore",value:o}),i.submit()})(t,{pageCount:bt().length,pageType:r?2:1})}else _("Page reload(system error)",`Can not find webviewId ${t}`)}));function Nr(e){var t=e.path,r=e.webviewId;xr(t,r)}var Rr=(e,t,r)=>{var n;return r._userTap?D.wrapTapMark((()=>{n=E.call(e,t,r)})):n=E.call(e,t,r),n},Pr=B("Framework","openNewXrFrame",((e,t,r,n,o)=>{var i=O();It(t,"xr-frame");var a=D.addView(t,e,null,n,o),s=P.Element.getMethodCaller(a),l=P.Observer.create((e=>{"attached"===e.status?(i.traceBeginEvent("Framework","attachViewService"),D.attachView(t,{},!1),i.traceEndEvent(),or({page:s},t,V.newPageTime,{statesData:void 0,isReload:!1,prerender:!1,isLaunch:!1})):"detached"===e.status&&(D.removeView(t,!1),l.disconnect())}));return l.observe(a,{attachStatus:!0}),s.__wxWebviewId__=t,s.__route__=e,s.route=e,s.__displayReporter=new Q(e,2),a})),Dr=D.convertComponentAliasToRoute,Lr=D.convertRouteToComponentAlias,Br=(t,r,n,o,i={})=>{var a=i.__wxRoute||e.g.__wxRoute||o.replace(/\.js$/,"")||"",s=O();if(s.traceBeginEvent("User Script","Page constructor",{path:a}),!i.__wxRouteBegin&&!__wxRouteBegin){if(!a)throw _("Page ",'Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json'),s.traceEndEvent(),new A('Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json');throw _("Page ",`Please do not register multiple Pages in ${a}.js`),s.traceEndEvent(),new A(`Please do not register multiple Pages in ${a}.js`)}i.__wxRouteBegin?i.__wxRouteBegin=!1:__wxRouteBegin=!1;var l=Lr(a),u=Dr(l),d=X(u);if("Object"!==c(t))throw _("Page ",`Options is not object: ${JSON.stringify(t)} in ${a}.js`),s.traceEndEvent(),new A(`Options is not object: ${JSON.stringify(t)} in ${a}.js`);v(`Register: ${l}`);var p=D.Page(t,r,n,d&&o?o:__wxRoute+".js");wt[u]=d?P.Component._list[p]:t,vt[u]=!0,s.traceEndEvent()},kr=D.convertComponentAliasToRoute,Mr=(e,t,r,n,o={})=>{O().traceBeginEvent("User Script","Component constructor");var i=!1;(o.__wxRouteBegin||__wxRouteBegin)&&(i=!0),o.__wxRouteBegin?o.__wxRouteBegin=!1:__wxRouteBegin=!1;var a=D.Component(e,t,r,n),s=kr(a);return a&&(wt[s]=P.Component._list[a]),vt[s]=i,O().traceEndEvent({path:s}),String(a)},Fr=D.convertComponentAliasToRoute;D.convertRouteToComponentAlias;m.onReady((()=>{var e=m.page||{},t=m.global?m.global.window:{};Object.keys(e).forEach((r=>{e[r].window=Object.assign({},t,e[r].window)})),m.tabBar&&m.tabBar.list&&"object"==typeof m.tabBar.list&&"function"==typeof m.tabBar.list.forEach&&m.tabBar.list.forEach((e=>{gt.push(e.pagePath)})),m.appLaunchInfo&&"string"==typeof m.appLaunchInfo.path&&ur(m.appLaunchInfo.path),Zt((m.appLaunchInfo||{}).scene||0)})),R((e=>{e.onAppRoute(w(Sr,"onAppRoute")),e.onAppRouteDone(w(Or),"onAppRouteDone"),e.onAppRouteResized(Cr),e.onPageReload(w(Nr,"onPageReload")),e.onWebviewEvent(w((e=>{var{webviewId:t,eventName:r,data:n,nodeId:o}=e,i=((e,t,r,n)=>{if(hasOwnProperty.call(J,e)){var o=J[e],i=o.page;if("__DOMReady"===r)return V.pageReadyTime=Date.now(),v(`Invoke event onReady in page: ${o.route}`),i.__callPageLifeTime__("onReady"),void ir("newPage2pageReady",V.newPageTime,V.pageReadyTime);if("telecontrol"!==r){if(n._requireActive){var a=bt(),s=a[a.length-1];if(!s||s.webviewId!==e)return}if(n._relatedInfo&&Q.setEventRelatedInfo(n._relatedInfo),t){var l=D.getNodeById(t,e);if(!l)return;if(l.__isXrFrame__)return void O().dispatchXrFrameEvent(l.__xrFrameId__,n.type,n);var u=P.Element.getMethodCaller(l);return v(`Invoke event ${r} in component: ${l.is}`),Z(u,r)?Rr(u,r,n):void g("",`Do not have ${r} handler in component: ${l.is}. Please make sure that ${r} handler has been defined in ${l.is}.`)}if(v(`Invoke event ${r} in page: ${o.route}`),Z(i,r))return Rr(i,r,n);g("",`Do not have ${r} handler in current page: ${o.route}. Please make sure that ${r} handler has been defined in ${o.route}, or ${o.route} has been added into app.json`)}else{var c=n.type,p="onTelecontrolSelect";if("start"===c)O().publishTelecontrol({type:c,custom:Z(i,p)},[e]);else if("next"===c){if(v(`Invoke event ${p} in page: ${o.route}`),!Z(i,p))return void g("",`Do not have ${p} handler in current page: ${o.route}. Please make sure that ${p} handler has been defined in ${o.route}, or ${o.route} has been added into app.json`);var f=Rr(i,p,{current:n.current,target:n.target,key:n.key});if(d(f)){var h=new Promise((e=>setTimeout(e,1e3,"")));Promise.race([f,h]).then((t=>{O().publishTelecontrol({seqId:n.seqId,type:c,res:t},[e])})).catch((()=>{}))}else O().publishTelecontrol({seqId:n.seqId,type:c,res:f},[e])}}}})(t,o,r,n);return i}),"onWebviewEvent")),e.onAppEnterForeground((e=>{V.appFgTime=Date.now(),0!==e.scene&&"0"!==e.scene&&Zt(e.scene)})),e.onPullDownRefresh(w(((e,t)=>{(e=>{if(hasOwnProperty.call(J,e)){var t=J[e],r=t.page;Z(r,"onPullDownRefresh")&&(v(`Invoke event onPullDownRefresh in page: ${t.route}`),E.call(r,"onPullDownRefresh"),Ze("pullDownRefresh",r))}else g("",`onPullDownRefresh WebviewId: ${e} not found`)})(t)}),"onPullDownRefresh")),e.onShareAppMessage(w(it,"onShareAppMessage")),e.onShareTimeline(w(te,"onShareTimeline")),e.subscribeTapShareButton(at),e.subscribeTapShareTimeLineButton(ne),e.onAddToFavorites(w(st,"onAddToFavorites")),e.onStartHandoff(w(ut,"onStartHandoff")),e.subscribeTapHandoffButton(((e,t)=>{w(ut,"onStartHandoff")({fromButton:!0},t)})),e.subscribeSavePageState(w(((e,t)=>{S.call(J,t)?J[t].statesData=e:g("",`onPageWillManuallyTerminate WebviewId: ${t} not found`)}),"savePageState")),e.subscribeRecycleStatistics(w(((e,t)=>{if(S.call(J,t)){var r=J[t];((e,{pageCount:t,pageType:r,rootCompCount:n=0,rootCustomCompCount:o=0,rootCustomCompRatio:a=0,rootInternalCompCount:s=0})=>{var l=[t,r].map(encodeURIComponent).join(",");k[e]={rootCompCount:n,rootCustomCompCount:o,rootCustomCompRatio:a,rootInternalCompCount:s},i.reportKeyValue({key:"WebviewRecycle",value:l}),i.submit()})(t,{pageCount:bt().length,pageType:X(r.route)?2:1,...e})}}),"recycleStatistics")),e.onTabItemTap(w(ct,"tabItemTap")),e.onNavigationBarTitleUpdate((e=>{if(e.errMsg.indexOf(":ok")>=0&&e.title){var t=nt();t&&(t.updateTitle=e.title)}})),e.onExitMiniProgramSuccess((()=>{var e=bt();if(e.length)if(pt());else{var t=e[e.length-1].page,r=t.__hasReportHide__,n=t.__hasReportExit__;r||n||(t.__displayReporter.reportHidePage(),t.__hasReportExit__=!0)}}))}));var jr=function(e,t){var r=e+"/"+t,n={__wxAppCode__:{},__wxAppCurrentFile__:""},o=O();n.wx=o.createPluginWX(e,t),n.console=o.createPluginConsole(),n.WXWebAssembly=o.createPluginWXWebAssembly(e,t),n.Page=e=>{Br(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__,n)},n.getCurrentPages=()=>xt(e),n.Component=e=>Mr(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__,n),n.Behavior=e=>D.Behavior(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__),n.publishDomainComponents=e=>D.publishDomainComponents(r,e);var i,a=(e=>{var t=[];m.plugins&&Object.keys(m.plugins).forEach((e=>{var r=m.plugins[e];t.push({alias:e,plugin:r,prefix:""})})),m.subpackages&&m.subpackages.forEach((e=>{e.plugins&&Object.keys(e.plugins).forEach((r=>{var n=e.plugins[r];t.push({alias:r,plugin:n,prefix:e.root})}))}));var r=(()=>{var r=t.filter((t=>t.plugin.provider===e));if(0===r.length)return null;if(1===r.length){var n=r[0].plugin.subpackage||r[0].prefix;return"__APP__"===n&&(n=""),r[0].prefix=n,r[0]}return r.find((e=>""!==e.prefix))})();if(null===r)return null;if(void 0===r.plugin.export)return null;var n=r.prefix||"";return"/"===n[0]&&(n=n.slice(1)),n&&"/"!==n.slice(-1)&&(n+="/"),n+(r.plugin.export||"")})(e);return n.requireMiniProgram=()=>(void 0===i&&(i=null===a?{}:K(a)),i),n.beforeFactory=t=>{var r=o.buildPluginPrivateApi(e);t("__wx__/plugin-private-api",((e,t)=>{t.exports=r}))},n},Ur=()=>jr,$r=e=>jr=e,Wr=(...e)=>jr(...e);"function"==typeof logxx&&logxx("app-service-engine start");var qr=w((e=>{Br(e,"/")}),"create page instance"),Hr=w((e=>Mr(e,"/")),"create component instance"),Gr=w((e=>D.Behavior(e)),"create behavior instance");L=r})();var B=L.Page,k=L.Component,M=L.Behavior,F=.02,j={delayedGwx:!0},U=L.App,$=L.getApp,W=L.getCurrentPages,q=null,H;Object.assign(e,{Page:B,Component:k,Behavior:M,__webview_engine_version__:F,__vd_version_info__:j,App:U,getApp:$,getCurrentPages:W,__pageComponent:q}),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{define:()=>U,definePlugin:()=>E,getAllModules:()=>D,globalRequireBlocker:()=>A,require:()=>Q,requireOnce:()=>z,requirePlugin:()=>O});var r=1,n=2,o=/^plugin:\/\/([A-Za-z0-9_-]+)[/]?(.*)/,a=e=>{var t=e.match(o);if(t&&3===t.length)return{pluginId:t[1],version:"0",modId:t[2].length>=1?t[2]:void 0}},l=e=>`${e.pluginId}/${e.version}`,c={},d=e=>c[e];class p{constructor(e){this._$flags={},this._$global=void 0,this._$global=e}current(){return{__wxRoute:this._$global.__wxRoute,__wxAppCurrentFile__:this._$global.__wxAppCurrentFile__,__wxRouteBegin:this._$global.__wxRouteBegin}}restore(e){void 0!==e&&(this._$global.__wxRoute=e.__wxRoute,this._$global.__wxAppCurrentFile__=e.__wxAppCurrentFile__,this._$global.__wxRouteBegin=e.__wxRouteBegin)}saveAndClear(e){this._$flags[e]=this.current(),this._$global.__wxRoute="",this._$global.__wxAppCurrentFile__="",this._$global.__wxRouteBegin=""}runWith(e,t){var r=this.current();this.restore(this._$flags[e]);var n,o=!1;try{t()}catch(e){o=!0,n=e}if(this.restore(r),o)throw n}}var f=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],_=()=>"devtools"===m.platform,g=(e,t)=>{var r="__APP__"===e;r||"/"===e.slice(-1)||(e+="/"),_()?(s.info(`[WxModule] injectSubPackages: ${e}`),h.invoke("injectSubPackages",{subPackages:[e]},t)):(s.info(`[WxModule] loadSubpackage: ${e}`),u.loadSubpackage({name:e,success(){var n=m.subPackages.find((t=>t.root===e)),o=Object.assign({},null==n?void 0:n.plugins);r&&Object.assign(o,m.plugins);var i=Object.keys(o||{}).map((e=>{var t=o[e].provider,r="__plugin__/"+t;return{plugin_id:t,prefix_path:f.includes(t)?null:r}}));x.injectEntryFile(r?"":e,i),t({errMsg:"loadSubPackage:ok",loaded:!0})},fail(){s.error(`[WxModule] loadSubPackage fail ${e}`),t({errMsg:"loadSubPackage:false",loaded:!1})}}))},v=e=>{for(var t,r,n=null!==(t=null===(r=m)||void 0===r?void 0:r.subPackages)&&void 0!==t?t:[],o=0;o<n.length;++o){var i=n[o].root||"";if(i&&"/"!==i.slice(-1)&&(i+="/"),e.slice(0,i.length)===i)return{subPackage:i,independent:!!n[o].independent}}return{subPackage:"__APP__",independent:!1}},y=e=>{for(var t=[],r=e.split("/"),n=0,o=r.length;n<o;++n){var i=r[n];if(""!==i&&"."!==i)if(".."===i){if(0===t.length){t=[];break}t.pop()}else n+1<o&&".."===r[n+1]?n++:t.push(i)}return t},b=e=>{var t,r=!1;return(...n)=>(r||(t=e(...n),r=!0),t)};class w{constructor(e){this._$requireQueues=null,this._$blockingStatus=0,this._$scope=void 0,this._$err=e=>new Error(`Framework inner error: ${e} (scope: ${this._$scope}, status: ${this._$blockingStatus})`),this._$scope=e}isBlocking(){return 1===this._$blockingStatus}block(){if(!_())if(0===this._$blockingStatus)this._$requireQueues=[],this._$blockingStatus=1;else{if(2!==this._$blockingStatus)throw this._$err("trying to block require at wrong time");this._$blockingStatus=1}}queue(e,t){if(!this.isBlocking())throw this._$err("trying to queue an require when not blocking");this._$requireQueues.push([e,t])}unblock(){if(!_()){if(!this.isBlocking())throw this._$err("trying to unblock require queue when not blocking");this._$blockingStatus=2}}flushQueue(){if(!_()){if(2!==this._$blockingStatus)throw this._$err("require queue flushing must be unblocked");var e=this._$requireQueues;this._$blockingStatus=0,this._$requireQueues=null,e.forEach((e=>{try{e[0].apply(null,e[1])}catch(t){console.error(`Error during evaluating file "${e[1][0]}": `),console.error(t.message),console.error(t.stack)}}))}}}var A=new w("/"),E=(e,t)=>{var n=a(e);if(null==n||!n.pluginId||!n.version)throw new Error('schema must match "plugin://{name}/{version}"');var o,i=l(n),s={status:r,factory:t,mods:{},getGlobal:b((()=>(e=>{if(void 0===L||"function"!=typeof L.__createPluginGlobal)throw new Error("Create plugin global failed.");if(!m.isReady)throw new Error("Framework inner error: try to create plugin global before config ready.");return L.__createPluginGlobal(e.pluginId,e.version)})(n))),getGlobalFlagsManager:b((()=>new p(s.getGlobal()))),requireBlocker:new w(i)};o=s,c[i]=o},I=(e,t)=>{var r,n,o=d(e),i=y(t+"/index.js").join("/");return null!=o&&null!==(r=o.mods)&&void 0!==r&&r[i]?i:(i=y(t).join("/"),/\.js$/.test(i)||(i+=".js"),null!=o&&null!==(n=o.mods)&&void 0!==n&&n[i]?i:"")},S=(e,t)=>{var r=(e=>{var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"})(t);return function(t){if("string"!=typeof t)throw new Error("require args must be a string.");var n=y(t.startsWith("/")?t:`${r}/${t}`);if(!n)throw new Error("can't find module : "+t);var o=n.join("/");return o=((e,t,r,n)=>{var o,i=t,a=d(e);if(/\.js$/.test(i)||(i+=".js"),"string"==typeof i&&null!=a&&null!==(o=a.mods)&&void 0!==o&&o[i])return i;var s=y(r);if(!s)throw new Error(`can't find module : ${n}`);for(var l,u=t.substring(s.join("/").length);s.length;){var c=s.join("/")+"/miniprogram_npm"+u;if(l=I(e,c))break;s.pop()}return l||(u="/"===u[0]?u:"/"+u,l=I(e,"miniprogram_npm"+u)),l||t})(e,o,r,t),C(e,o)}},C=(e,t)=>{(e=>{if("string"!=typeof e)throw new Error("require args must be a string")})(t);var o=d(e);if(void 0===o)throw new Error(`Plugin "${e}" is not defined.`);var i=o.getGlobalFlagsManager();if(o.requireBlocker.isBlocking())return i.saveAndClear(t),void o.requireBlocker.queue(C,[e,t]);var a=o.mods[t];if(void 0===a)throw new Error(`Plugin module "${t}" is not defined.`);if(a.status===r){var s,l={exports:{}};a.exports=l.exports,a.status=n;var u=a.factory;i.runWith(t,(()=>{u&&(s=u(S(e,t),l,l.exports))})),a.exports=void 0!==l.exports?l.exports:s}return a.exports},T=(e,t)=>{var n=t.factory,o=t.getGlobal(),i={exports:{}};if(!n)return i.exports;var a=(e=>function(t,n){var o=d(e);if(void 0===o)throw new Error(`Sorry, plugin "${e}" is not defined.`);o.mods[t]={status:r,factory:n}})(e),s=(e=>function(t){return C(e,t)})(e),l=o.beforeFactory;delete o.beforeFactory;var u=o.afterFactory;delete o.afterFactory;var c=o.publishDomainComponents;o.publishDomainComponents=e=>{t.requireBlocker.isBlocking()?t.requireBlocker.queue(c,[e]):c(e)},"function"==typeof l&&l.apply(o,[a,s,i]),t.requireBlocker.block();var p=n(a,s,i,i.exports,o,o.wx,void 0,o.Page,o.Component,o.Behavior,void 0,o.getCurrentPages,void 0,o.requireMiniProgram,o.WXWebAssembly);return t.requireBlocker.unblock(),t.requireBlocker.flushQueue(),"function"==typeof u&&u.apply(o,[a,s,i]),void 0!==i.exports?i.exports:p},O=(e,t)=>{if(A.isBlocking())A.queue(O,[e,t]);else{var o,i,s;(()=>{if(void 0===m||void 0===m.plugins&&void 0===m.gamePlugins)throw new Error("This application has not registered any plugins yet.")})(),(e=>{if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")})(e);var u=a(e),c=void 0===u;if(c||(o=u.pluginId,i=l(u),s=d(i)),void 0===s&&(e=>null!==e.match(/^wx[0-9a-f]{16}$/))(e)&&(o=e,i=l({pluginId:e,version:"0"}),s=d(i)),void 0===s){var p=(e=>{var t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error(`Plugin "${e}" has not registered.`);var r=t[1],n=t[2],o=(m.plugins||m.gamePlugins)[r];if(void 0===o)throw new Error(`Plugin "${e}" has not registered.`);return{pluginId:o.provider,version:"0",path:n}})(e);o=p.pluginId,i=l(p),s=d(i)}if("function"!=typeof t){if(void 0===s)throw new Error(`Plugin "${i}" is not defined.`);return s.status===r&&(s.exports=T(i,s),s.status=n),c?"function"==typeof s.exports?s.exports():void 0:s.exports}if(void 0===s){var f=(e=>{for(var t=m.subPackages||[],r=function(r){if(!t[r].plugins)return"continue";if(Object.keys(t[r].plugins).find((n=>t[r].plugins[n].provider===e))){var n=t[r].root||"";return n&&"/"!==n.slice(-1)&&(n+="/"),{v:n}}},n=0;n<t.length;++n){var o=r(n);if("continue"!==o&&"object"==typeof o)return o.v}return"__APP__"})(o);g(f,(()=>{t(O(e))}))}else setTimeout((()=>{t(O(e))}))}};O.async=function(e){return new Promise(((t,r)=>{try{O(e,(e=>{t(e)}))}catch(e){r(e)}}))};var N={},R=(e,t)=>{N[e]=t},P=e=>N[e],D=()=>Object.keys(N);if(globalThis.wxModuleVersion){var B=~~globalThis.wxModuleVersion;globalThis.enableWxModule=2>B}else globalThis.wxModuleVersion=2,globalThis.enableWxModule=!0;var k=!1,M=[],F=e=>{Object.keys(e).forEach((t=>{var r=t;t.endsWith("*")&&(r=r.slice(0,-1));var n=e[t];e[t].endsWith("*")&&(n=n.slice(0,-1)),M.push({key:r,value:n})}))};"function"==typeof m.onReady?m.onReady((()=>{"object"==typeof m.resolveAlias&&(k=!!Object.keys(m.resolveAlias).length)&&F(m.resolveAlias)})):"object"==typeof m.resolveAlias&&(k=!!Object.keys(m.resolveAlias).length)&&F(m.resolveAlias);var j={};function U(e,t){if(P(e)&&P(e).factory){var n=P(e),o=t.toString();n.factoryString||(n.factoryString=n.factory.toString()),o!==n.factoryString&&R(e,{status:r,factory:t,factoryString:o})}else R(e,{status:r,factory:t})}var $=e=>{if(e&&m.subPackages)for(var t=0,r=m.subPackages.length;t<r;t++)if(0===e.indexOf(m.subPackages[t].root))return m.subPackages[t]},W=e=>{var t=y(e+"/index.js").join("/");return P(t)?t:(t=y(e).join("/"),/\.js$/.test(t)||(t+=".js"),P(t)?t:"")},q=e=>{var t=(e=>{var t=e.match(/(.*)\/([^/]+)?$/);return null!=t&&t[1]?t[1]:"./"})(e),r=function(r,n,o){var a,s=t;if("string"!=typeof r)throw new Error("require args must be a string");if("/__wx__/private-api"===r?a=y(r).join("/"):(k&&(a=(e=>{var t={key:"",value:""},r=!1;if(M.forEach((n=>{e.startsWith(n.key)&&t.key.length<n.key.length&&(t=n,r=!0)})),r){var n=e.replace(t.key,t.value);return"/"===n[0]&&(n=n.slice(1)),n}})(r)),void 0!==a?(s="",a=y(a).join("/")):a=y(s+"/"+r).join("/")),!a)throw new Error(`can not find module : ${a}, require args is ${r}`);try{var l=((e,t,r)=>{var n=e;if(/\.js$/.test(n)||(n+=".js"),"string"==typeof n&&P(n))return n;var o=y(t);if(!o)throw new Error("can not find module : "+r);for(var i,a,s=e.substring(o.join("/").length);o.length&&(a=o.join("/")+"/miniprogram_npm"+s,!(i=W(a)));)o.pop();return i||(s="/"===s[0]?s:"/"+s,i=W(a="miniprogram_npm"+s)),i||e})(a,s,r),u=e=>"functional-pages"===y(e)[0];if(u(l)!==u(e)&&i.thirdErrorReport({error:new Error(`should not require across "functional-pages" folder, at require("${r}") in ${e}`)}),"devtools"===m.platform&&m.subPackages&&void 0===n){var c=$(l),d=$(e);c&&c!==d&&console.warn(`Requires "${r}" from "${e}" without a callback may fail in production, since they are in different subPackages`)}return Q(l,void 0,n,r,t,o)}catch(e){throw e}};return r.async=e=>new Promise(((t,n)=>{try{return r(e,t,n)}catch(e){n(e)}})),r},G=new p(globalThis);function Q(e,t,o,i="",a,s){if(A.isBlocking())return G.saveAndClear(e),void A.queue(Q,[e,t,o,i,a,s]);if(void 0===t&&(t=!0),"string"!=typeof e)throw new Error("require args must be a string");var l=P(e);if(!l){var u=-1===e.indexOf("/")?e+"/index.js":e;/\.js$/.test(u="miniprogram_npm/"+u)||(u+=".js"),l=P(u)}if(e.endsWith(".js")||(e+=".js"),!l&&"devtools"!==m.platform&&void 0!==x&&m.isLazyLoad){var c=e.slice(0,e.length-3),d=`${"undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__&&"string"==typeof __LAZY_CODE_LOADING_CHUNK_MAP__[c]?__LAZY_CODE_LOADING_CHUNK_MAP__[c]:c}.appservice.js`,p=x.loadJsFiles([d],null,{waitResult:!0,reportKey:`webnode-require-${e.slice(0,e.length-3)}`});l=P(e),null==p||p(!!l)}if("function"!=typeof o){if(!l)throw new Error(`module '${e}' is not defined, require args is '${""===i?e:i}'`);var f={exports:{}},h=l.factory;if(!t||j[e])return delete l.exports,l.status=r,j[e]=!0,G.runWith(e,(()=>{null==h||h(q(e),f,f.exports)})),f.exports;if(l.status===r){var _;l.exports=f.exports,l.status=n;try{G.runWith(e,(()=>{h&&(_=h(q(e),f,f.exports))}))}catch(e){throw l.status=r,e}l.exports=void 0!==f.exports?f.exports:_}return l.exports}var y=t=>{var r="async require: fail";"object"==typeof t&&t&&t.message&&(r=t.message),null==s||s({errMsg:r,mod:e})},b=function(...e){try{var t=Q(...e);o(t)}catch(e){y(e)}};if(l)setTimeout((()=>b(e)));else{var w="string"==typeof a&&v(a).independent,{subPackage:E,independent:I}=v(e);!I&&w?g("__APP__",(t=>{t&&!1===t.loaded?y(new Error("loadSubPackage: fail, subPackage: __APP__")):"__APP__"!==E?g(E,(t=>{t&&!1===t.loaded?y(new Error(`loadSubPackage: fail, subPackage: ${E}`)):b(e)})):o(b(e))})):g(E,(t=>{t&&!1===t.loaded?y(new Error(`loadSubPackage: fail, subPackage: ${E}`)):b(e)}))}}function z(e){return Q(e,!1)}H=t})();var G=H.definePlugin,Q=H.requirePlugin,z=globalThis.define=H.define,K=globalThis.require=H.require;globalThis.requireOnce=H.requireOnce,e.definePlugin=H.definePlugin,e.requirePlugin=H.requirePlugin,y.onLoad((function(){u.setCloudSDK(R),u.setExparser(P),u.setVirtualDOM(D),u.setAppServiceEngine(L),u.setWxModule(H);var t=u.wx;if(O.condomWX(t),Object.assign(e,u.exportGlobal),"function"==typeof __passWAServiceGlobal__){var r={};r.__appServiceEngine__=L,r.__appServiceSDK__=u,r.__virtualDOM__=D,r.__subContextEngine__=x,r.Protect=C,r.WeixinJSBridge=h,r.Foundation=y,r.exparser=P,r.Reporter=i,__passWAServiceGlobal__(r)}}))})(this);var __WXML_GLOBAL__=__WXML_GLOBAL__||{entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:void 0,total_ops:0},__vd_version_info__=__vd_version_info__||{};__wxRoute=__wxRouteBegin=__wxAppCurrentFile__="";var __WASubContextEndTime__=Date.now();"function"==typeof this.__wxLibrary.onEnd&&this.__wxLibrary.onEnd(),delete this.__wxLibrary;